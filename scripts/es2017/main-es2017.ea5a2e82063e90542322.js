var C9=Object.defineProperty,T9=Object.defineProperties,I9=Object.getOwnPropertyDescriptors,rq=Object.getOwnPropertySymbols,S9=Object.prototype.hasOwnProperty,A9=Object.prototype.propertyIsEnumerable,iq=(t,e,n)=>e in t?C9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jo=(t,e)=>{for(var n in e||(e={}))S9.call(e,n)&&iq(t,n,e[n]);if(rq)for(var n of rq(e))A9.call(e,n)&&iq(t,n,e[n]);return t},NT=(t,e)=>T9(t,I9(e));(self.webpackChunkthen_and_now=self.webpackChunkthen_and_now||[]).push([[179],{8255:function(t){function e(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=8255,t.exports=e},7716:function(t,e,n){"use strict";n.d(e,{deG:function(){return tn},tb:function(){return Fu},AFp:function(){return Pu},ip1:function(){return ku},CZH:function(){return Du},hGG:function(){return kl},z2F:function(){return vl},sBO:function(){return Oa},Sil:function(){return Wu},_Vd:function(){return ia},EJc:function(){return Bu},SBq:function(){return aa},qLn:function(){return $i},vpe:function(){return du},gxx:function(){return is},tBr:function(){return En},XFs:function(){return D},OlP:function(){return Xe},zs3:function(){return ys},ZZ4:function(){return Sa},aQg:function(){return Aa},soG:function(){return Vu},YKP:function(){return za},v3s:function(){return bl},h0i:function(){return qa},PXZ:function(){return pl},R0b:function(){return Qu},FiY:function(){return In},Lbi:function(){return Ru},g9A:function(){return Lu},Qsj:function(){return ca},FYo:function(){return la},JOm:function(){return xn},Tiy:function(){return da},q3G:function(){return Ui},tp0:function(){return Sn},EAV:function(){return El},Rgc:function(){return Va},dDg:function(){return il},DyG:function(){return en},q4F:function(){return pa},GfV:function(){return fa},s_b:function(){return $a},ifc:function(){return F},eFA:function(){return ml},G48:function(){return hl},Gpc:function(){return f},X6Q:function(){return cl},_c5:function(){return xl},VLi:function(){return ol},c2e:function(){return Mu},zSh:function(){return ss},wAp:function(){return qo},vHH:function(){return g},EiD:function(){return Bi},mCW:function(){return Ti},qzn:function(){return di},JVY:function(){return pi},pB0:function(){return yi},eBb:function(){return gi},L6k:function(){return mi},LAX:function(){return _i},cg1:function(){return Bo},Tjo:function(){return Sl},kL8:function(){return jo},yhl:function(){return fi},dqk:function(){return j},sIi:function(){return As},CqO:function(){return Gs},QGY:function(){return Hs},F4k:function(){return Ws},RDi:function(){return Et},AaK:function(){return c},z3N:function(){return hi},qOj:function(){return ws},TTD:function(){return _t},_Bn:function(){return Xo},xp6:function(){return ar},uIk:function(){return Os},Tol:function(){return go},Gre:function(){return Oo},ekj:function(){return po},Suo:function(){return Iu},Xpm:function(){return Y},lG2:function(){return rt},Yz7:function(){return b},cJS:function(){return C},oAB:function(){return et},Yjl:function(){return st},Y36:function(){return Bs},_UZ:function(){return Zs},qZA:function(){return zs},TgZ:function(){return qs},EpF:function(){return $s},n5z:function(){return Ge},Ikx:function(){return Ro},LFG:function(){return vn},$8M:function(){return Qe},NdJ:function(){return Ks},CRH:function(){return Su},oxw:function(){return Js},ALo:function(){return lu},lcZ:function(){return cu},Q6J:function(){return js},MGl:function(){return Xs},hYB:function(){return to},cQ8:function(){return eo},DdM:function(){return ou},VKq:function(){return au},iGM:function(){return Eu},MAs:function(){return Vs},Jf7:function(){return Wi},CHM:function(){return qt},LSH:function(){return qi},kYT:function(){return nt},Jzz:function(){return Lo},YNc:function(){return Ms},W1O:function(){return Au},_uU:function(){return Ao},Oqu:function(){return ko},hij:function(){return Do},AsE:function(){return Po},lnq:function(){return No}});var i=n(9765),r=n(5319),s=n(7574),o=n(6682),a=n(8819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function l(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function c(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(c).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return c(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _(t){return"string"==typeof t?t:null==t?"":String(t)}function y(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_(t)}function v(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${y(t)} found${n}`)}function w(t,e){null==t&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return E(t,S)||E(t,A)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const S=u({"\u0275prov":u}),x=u({"\u0275inj":u}),A=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var D=(()=>((D=D||{})[D.Default=0]="Default",D[D.Host=1]="Host",D[D.Self=2]="Self",D[D.SkipSelf=4]="SkipSelf",D[D.Optional=8]="Optional",D))();let P;function N(t){const e=P;return P=t,e}function O(t,e,n){const i=T(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&D.Optional?null:void 0!==e?e:void v(c(t),"Injector")}function L(t){return{toString:t}.toString()}var R=(()=>((R=R||{})[R.OnPush=0]="OnPush",R[R.Default=1]="Default",R))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const M="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,B="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j=M||"undefined"!=typeof global&&global||V||B,U={},q=[],z=u({"\u0275cmp":u}),Z=u({"\u0275dir":u}),$=u({"\u0275pipe":u}),H=u({"\u0275mod":u}),W=u({"\u0275loc":u}),G=u({"\u0275fac":u}),K=u({__NG_ELEMENT_ID__:u});let Q=0;function Y(t){return L(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||q,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||F.Emulated,id:"c",styles:t.styles||q,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,s=t.pipes;return n.id+=Q++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(J):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function J(t){return ot(t)||function(t){return t[Z]||null}(t)}function X(t){return function(t){return t[$]||null}(t)}const tt={};function et(t){return L(()=>{const e={type:t.type,bootstrap:t.bootstrap||q,declarations:t.declarations||q,imports:t.imports||q,exports:t.exports||q,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return L(()=>{const n=at(t,!0);n.declarations=e.declarations||q,n.imports=e.imports||q,n.exports=e.exports||q})}function it(t,e){if(null==t)return U;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}const rt=Y;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ot(t){return t[z]||null}function at(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${c(t)} does not have '\u0275mod' property.`);return n}function ut(t){return Array.isArray(t)&&"object"==typeof t[1]}function lt(t){return Array.isArray(t)&&!0===t[1]}function ct(t){return 0!=(8&t.flags)}function ht(t){return 2==(2&t.flags)}function dt(t){return 1==(1&t.flags)}function ft(t){return null!==t.template}function pt(t){return 0!=(512&t[2])}function mt(t,e){return t.hasOwnProperty(G)?t[G]:null}class gt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return yt}function yt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),vt}function vt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===U)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,i){const r=Ct(t)||function(t,e){return t[bt]=e}(t,{previous:U,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],u=o[a];s[a]=new gt(u&&u.currentValue,e,o===U),t[i]=e}_t.ngInherit=!0;const bt="__ngSimpleChanges__";function Ct(t){return t[bt]||null}let Tt;function Et(t){Tt=t}function It(t){return!!t.listen}const St={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t])}function kt(t,e){return xt(e[t.index])}function Dt(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Nt(t,e){const n=e[t];return ut(n)?n:n[0]}function Ot(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Rt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Mt(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Vt={lFrame:ae(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return Vt.bindingsEnabled}function jt(){return Vt.lFrame.lView}function Ut(){return Vt.lFrame.tView}function qt(t){return Vt.lFrame.contextLView=t,t[8]}function zt(){let t=Zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Zt(){return Vt.lFrame.currentTNode}function $t(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Vt.lFrame.isParent}function Wt(){return Vt.isInCheckNoChangesMode}function Gt(t){Vt.isInCheckNoChangesMode=t}function Kt(){const t=Vt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Qt(){return Vt.lFrame.bindingIndex}function Yt(){return Vt.lFrame.bindingIndex++}function Jt(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Xt(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,te(e)}function te(t){Vt.lFrame.currentDirectiveIndex=t}function ee(){return Vt.lFrame.currentQueryIndex}function ne(t){Vt.lFrame.currentQueryIndex=t}function ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&D.SkipSelf){let i=e,r=t;for(;!(i=i.parent,null!==i||n&D.Host||(i=ie(r),null===i||(r=r[15],10&i.type))););if(null===i)return!1;e=i,t=r}const i=Vt.lFrame=oe();return i.currentTNode=e,i.lView=t,!0}function se(t){const e=oe(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?ae(t):e}function ae(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ue(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const le=ue;function ce(){const t=ue();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function he(){return Vt.lFrame.selectedIndex}function de(t){Vt.lFrame.selectedIndex=t}function fe(){const t=Vt.lFrame;return Dt(t.tView,t.selectedIndex)}function pe(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function me(t,e,n){ye(t,e,3,n)}function ge(t,e,n,i){(3&t[2])===n&&ye(t,e,n,i)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ye(t,e,n,i){const r=null!=i?i:-1,s=e.length-1;let o=0;for(let a=void 0!==i?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=i&&o>=i)break}else e[a]<0&&(t[18]+=65536),(o<r||-1==r)&&(ve(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ve(t,e,n,i){const r=n[i]<0,s=n[i+1],o=t[r?-n[i]:n[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class we{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function be(t,e,n){const i=It(t);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],u=n[r++];i?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++r];Te(o)?i&&t.setProperty(e,o,a):i?t.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function Ce(t){return 3===t||4===t||6===t}function Te(t){return 64===t.charCodeAt(0)}function Ee(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Ie(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Ie(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function Se(t){return-1!==t}function xe(t){return 32767&t}function Ae(t,e){let n=function(t){return t>>16}(t),i=e;for(;n>0;)i=i[15],n--;return i}let ke=!0;function De(t){const e=ke;return ke=t,e}let Pe=0;function Ne(t,e){const n=Le(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,Oe(i.data,t),Oe(e,null),Oe(i.blueprint,null));const r=Re(t,e),s=t.injectorIndex;if(Se(r)){const t=xe(r),n=Ae(r,e),i=n[1].data;for(let r=0;r<8;r++)e[s+r]=n[t+r]|i[t+r]}return e[s+8]=r,s}function Oe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(i=2===e?t.declTNode:1===e?r[6]:null,null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Fe(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(K)&&(i=n[K]),null==i&&(i=n[K]=Pe++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function Me(t,e,n){if(n&D.Optional)return t;v(e,"NodeInjector")}function Ve(t,e,n,i){if(n&D.Optional&&void 0===i&&(i=null),0==(n&(D.Self|D.Host))){const r=t[9],s=N(void 0);try{return r?r.get(e,i,n&D.Optional):O(e,i,n&D.Optional)}finally{N(s)}}return Me(i,e,n)}function Be(t,e,n,i=D.Default,r){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(K)?t[K]:void 0;return"number"==typeof e?e>=0?255&e:Ue:e}(n);if("function"==typeof s){if(!re(e,t,i))return i&D.Host?Me(r,n,i):Ve(e,n,i,r);try{const t=s(i);if(null!=t||i&D.Optional)return t;v(n)}finally{le()}}else if("number"==typeof s){let r=null,o=Le(t,e),a=-1,u=i&D.Host?e[16][6]:null;for((-1===o||i&D.SkipSelf)&&(a=-1===o?Re(t,e):e[o+8],-1!==a&&He(i,!1)?(r=e[1],o=xe(a),e=Ae(a,e)):o=-1);-1!==o;){const t=e[1];if($e(s,o,t.data)){const t=qe(o,e,n,r,i,u);if(t!==je)return t}a=e[o+8],-1!==a&&He(i,e[1].data[o+8]===u)&&$e(s,o,e)?(r=t,o=xe(a),e=Ae(a,e)):o=-1}}}return Ve(e,n,i,r)}const je={};function Ue(){return new We(zt(),jt())}function qe(t,e,n,i,r,s){const o=e[1],a=o.data[t+8],u=ze(a,o,n,null==i?ht(a)&&ke:i!=o&&0!=(3&a.type),r&D.Host&&s===a);return null!==u?Ze(e,o,u,a):je}function ze(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,c=r?a+l:t.directiveEnd;for(let h=i?a:a+l;h<c;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(r){const t=o[u];if(t&&ft(t)&&t.type===n)return u}return null}function Ze(t,e,n,i){let r=t[n];const s=e.data;if(function(t){return t instanceof we}(r)){const o=r;o.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(y(s[n]));const a=De(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?N(o.injectImpl):null;re(t,i,D.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const i=yt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&N(u),De(a),o.resolving=!1,le()}}return r}function $e(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function He(t,e){return!(t&D.Self||t&D.Host&&e)}class We{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Be(this._tNode,this._lView,t,n,e)}}function Ge(t){return L(()=>{const e=t.prototype.constructor,n=e[G]||Ke(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[G]||Ke(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function Ke(t){return m(t)?()=>{const e=Ke(p(t));return e&&e()}:mt(t)}function Qe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(Ce(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(zt(),t)}const Ye="__parameters__";function Je(t,e,n){return L(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(Ye)?t[Ye]:Object.defineProperty(t,Ye,{value:[]})[Ye];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Xe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new Xe("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?(e===t&&(e=t.slice(0,n)),nn(i,e)):e!==t&&e.push(i)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function sn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function on(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e,n){let i=ln(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function un(t,e){const n=ln(t,e);if(n>=0)return t[1|n]}function ln(t,e){return function(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const cn={},hn="__NG_DI_FLAG__",dn="ngTempTokenPath",fn=/\n/gm,pn="__source",mn=u({provide:String,useValue:u});let gn;function _n(t){const e=gn;return gn=t,e}function yn(t,e=D.Default){if(void 0===gn)throw new Error("inject() must be called from an injection context");return null===gn?O(t,void 0,e):gn.get(t,e&D.Optional?null:void 0,e)}function vn(t,e=D.Default){return(P||yn)(p(t),e)}function wn(t){const e=[];for(let n=0;n<t.length;n++){const i=p(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t,n=D.Default;for(let e=0;e<i.length;e++){const r=i[e],s=Cn(r);"number"==typeof s?-1===s?t=r.token:n|=s:t=r}e.push(vn(t,n))}else e.push(vn(i))}return e}function bn(t,e){return t[hn]=e,t.prototype[hn]=e,t}function Cn(t){return t[hn]}function Tn(t,e,n,i){const r=t[dn];throw e[pn]&&r.unshift(e[pn]),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=c(e);if(Array.isArray(e))r=e.map(c).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):c(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(fn,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[dn]=null,t}const En=bn(Je("Inject",t=>({token:t})),-1),In=bn(Je("Optional"),8),Sn=bn(Je("SkipSelf"),4);var xn=(()=>((xn=xn||{})[xn.Important=1]="Important",xn[xn.DashCase=2]="DashCase",xn))();const An="__ngContext__";function kn(t,e){t[An]=e}function Dn(t){const e=function(t){return t[An]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pn(t,e){return undefined(t,e)}function Nn(t){const e=t[3];return lt(e)?e[3]:e}function On(t){return Rn(t[13])}function Ln(t){return Rn(t[4])}function Rn(t){for(;null!==t&&!lt(t);)t=t[4];return t}function Fn(t,e,n,i,r){if(null!=i){let s,o=!1;lt(i)?s=i:ut(i)&&(o=!0,i=i[0]);const a=xt(i);0===t&&null!==n?null==r?Zn(e,n,a):zn(e,n,a,r||null,!0):1===t&&null!==n?zn(e,n,a,r||null,!0):2===t?function(t,e,n){const i=Hn(t,e);i&&function(t,e,n,i){It(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,i,r){const s=n[7];s!==xt(n)&&Fn(e,t,i,s,r);for(let o=10;o<n.length;o++){const r=n[o];ti(r[1],r,t,e,i,s)}}(e,t,s,n,r)}}function Mn(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Vn(t,e){const n=t[9],i=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Mt(r,-1)),n.splice(i,1)}function Bn(t,e){if(t.length<=10)return;const n=10+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&Vn(r,i),e>0&&(t[n-1][4]=i[4]);const s=on(t,10+e);!function(t,e){ti(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function jn(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&ti(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Un(t[1],t);for(;e;){let n=null;if(ut(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ut(e)&&Un(e[1],e),e=e[3];null===e&&(e=t),ut(e)&&Un(e[1],e),n=e&&e[4]}e=n}}(e)}}function Un(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof we)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const i=t[e[n]],r=e[n+1];try{r.call(i)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):xt(e[t]),a=i[r=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?i[r=u]():i[r=-u].unsubscribe(),s+=2}else{const t=i[r=n[s+1]];n[s].call(t)}if(null!==i){for(let t=r+1;t<i.length;t++)i[t]();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&lt(e[3])){n!==e[3]&&Vn(n,e);const i=e[19];null!==i&&i.detachView(t)}}}function qn(t,e,n){return function(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];if(2&i.flags){const e=t.data[i.directiveStart].encapsulation;if(e===F.None||e===F.Emulated)return null}return kt(i,n)}(t,e.parent,n)}function zn(t,e,n,i,r){It(t)?t.insertBefore(e,n,i,r):e.insertBefore(n,i,r)}function Zn(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function $n(t,e,n,i,r){null!==i?zn(t,e,n,i,r):Zn(t,e,n)}function Hn(t,e){return It(t)?t.parentNode(e):e.parentNode}let Wn,Gn=function(t,e,n){return 40&t.type?kt(t,n):null};function Kn(t,e,n,i){const r=qn(t,i,e),s=e[11],o=function(t,e,n){return Gn(t,e,n)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)$n(s,r,n[a],o,!1);else $n(s,r,n,o,!1)}function Qn(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return Jn(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Qn(t,n);{const n=t[e.index];return lt(n)?Jn(-1,n):xt(n)}}if(32&n)return Pn(e,t)()||xt(t[e.index]);{const n=Yn(t,e);return null!==n?Array.isArray(n)?n[0]:Qn(Nn(t[16]),n):Qn(t,e.next)}}return null}function Yn(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Jn(t,e){const n=10+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return Qn(t,i)}return e[7]}function Xn(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],u=n.type;if(o&&0===e&&(a&&kn(xt(a),i),n.flags|=4),64!=(64&n.flags))if(8&u)Xn(t,e,n.child,i,r,s,!1),Fn(e,t,r,a,s);else if(32&u){const o=Pn(n,i);let u;for(;u=o();)Fn(e,t,r,u,s);Fn(e,t,r,a,s)}else 16&u?ei(t,e,i,n,r,s):Fn(e,t,r,a,s);n=o?n.projectionNext:n.next}}function ti(t,e,n,i,r,s){Xn(n,i,t.firstChild,e,r,s,!1)}function ei(t,e,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Fn(e,t,r,a[u],s);else Xn(t,e,a,o[3],r,s,!0)}function ni(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ii(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ri(t){var e;return(null===(e=function(){if(void 0===Wn&&(Wn=null,j.trustedTypes))try{Wn=j.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Wn}())||void 0===e?void 0:e.createHTML(t))||t}class si{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class oi extends si{getTypeName(){return"HTML"}}class ai extends si{getTypeName(){return"Style"}}class ui extends si{getTypeName(){return"Script"}}class li extends si{getTypeName(){return"URL"}}class ci extends si{getTypeName(){return"ResourceURL"}}function hi(t){return t instanceof si?t.changingThisBreaksApplicationSecurity:t}function di(t,e){const n=fi(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function fi(t){return t instanceof si&&t.getTypeName()||null}function pi(t){return new oi(t)}function mi(t){return new ai(t)}function gi(t){return new ui(t)}function _i(t){return new li(t)}function yi(t){return new ci(t)}class vi{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(ri(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class wi{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ri(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=ri(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;("xmlns:ns1"===n||0===n.indexOf("ns1:"))&&t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const bi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ci=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ti(t){return(t=String(t)).match(bi)||t.match(Ci)?t:"unsafe:"+t}function Ei(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ii(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Si=Ei("area,br,col,hr,img,wbr"),xi=Ei("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ai=Ei("rp,rt"),ki=Ii(Si,Ii(xi,Ei("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ii(Ai,Ei("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ii(Ai,xi)),Di=Ei("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pi=Ei("srcset"),Ni=Ii(Di,Pi,Ei("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ei("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Oi=Ei("script,style,template");class Li{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ki.hasOwnProperty(e))return this.sanitizedSomething=!0,!Oi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,s=e.toLowerCase();if(!Ni.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Di[s]&&(o=Ti(o)),Pi[s]&&(i=o,o=(i=String(i)).split(",").map(t=>Ti(t.trim())).join(", ")),this.buf.push(" ",e,'="',Mi(o),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ki.hasOwnProperty(e)&&!Si.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Mi(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Ri=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fi=/([^\#-~ |!])/g;function Mi(t){return t.replace(/&/g,"&amp;").replace(Ri,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Fi,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vi;function Bi(t,e){let n=null;try{Vi=Vi||function(t){const e=new wi(t);return function(){try{return!!(new window.DOMParser).parseFromString(ri(""),"text/html")}catch(t){return!1}}()?new vi(e):e}(t);let i=e?String(e):"";n=Vi.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Vi.getInertBodyElement(i)}while(i!==s);return ri((new Li).sanitizeChildren(ji(n)||n))}finally{if(n){const t=ji(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ji(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ui=(()=>((Ui=Ui||{})[Ui.NONE=0]="NONE",Ui[Ui.HTML=1]="HTML",Ui[Ui.STYLE=2]="STYLE",Ui[Ui.SCRIPT=3]="SCRIPT",Ui[Ui.URL=4]="URL",Ui[Ui.RESOURCE_URL=5]="RESOURCE_URL",Ui))();function qi(t){const e=function(){const t=jt();return t&&t[12]}();return e?e.sanitize(Ui.URL,t)||"":di(t,"URL")?hi(t):Ti(_(t))}function zi(t){return t.ngOriginalError}function Zi(t,...e){t.error(...e)}class $i{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=(r=t)&&r.ngErrorLogger||Zi;var r;i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?t.ngDebugContext||this._findContext(zi(t)):null}_findOriginalError(t){let e=t&&zi(t);for(;e&&zi(e);)e=zi(e);return e||null}}const Hi=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Wi(t){return t.ownerDocument.defaultView}function Gi(t){return t instanceof Function?t():t}function Ki(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}const Qi="ng-template";function Yi(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==Ki(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Ji(t){return 4===t.type&&t.value!==Qi}function Xi(t,e,n){return e===(4!==t.type||n?t.value:Qi)}function tr(t,e,n){let i=4;const r=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&i){if(i=2|1&i,""!==u&&!Xi(t,u,n)||""===u&&1===e.length){if(er(i))return!1;o=!0}}else{const l=8&i?u:e[++a];if(8&i&&null!==t.attrs){if(!Yi(t.attrs,l,n)){if(er(i))return!1;o=!0}continue}const c=nr(8&i?"class":u,r,Ji(t),n);if(-1===c){if(er(i))return!1;o=!0;continue}if(""!==l){let t;t=c>s?"":r[c+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==Ki(e,l,0)||2&i&&l!==t){if(er(i))return!1;o=!0}}}}else{if(!o&&!er(i)&&!er(u))return!1;if(o&&er(u))continue;o=!1,i=u|1&i}}return er(i)||o}function er(t){return 0==(1&t)}function nr(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function ir(t,e,n=!1){for(let i=0;i<e.length;i++)if(tr(t,e[i],n))return!0;return!1}function rr(t,e){return t?":not("+e.trim()+")":e}function sr(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const e=t[++n];r+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!er(o)&&(e+=rr(s,r),r=""),i=o,s=s||!er(i);n++}return""!==r&&(e+=rr(s,r)),e}const or={};function ar(t){ur(Ut(),jt(),he()+t,Wt())}function ur(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&me(e,i,n)}else{const i=t.preOrderHooks;null!==i&&ge(e,i,0,n)}de(n)}function lr(t,e){return t<<17|e<<2}function cr(t){return t>>17&32767}function hr(t){return 2|t}function dr(t){return(131068&t)>>2}function fr(t,e){return-131069&t|e<<2}function pr(t){return 1|t}function mr(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=t.data[s];ne(r),n.contentQueries(2,e[s],s)}}}function gr(t,e,n,i,r,s,o,a,u,l){const c=e.blueprint.slice();return c[0]=r,c[2]=140|i,Ft(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[11]=a||t&&t[11],c[12]=u||t&&t[12]||null,c[9]=l||t&&t[9]||null,c[6]=s,c[16]=2==e.type?t[16]:c,c}function _r(t,e,n,i,r){let s=t.data[e];if(null===s)s=function(t,e,n,i,r){const s=Zt(),o=Ht(),a=t.data[e]=function(t,e,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,i,r),Vt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return $t(s,!0),s}function yr(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function vr(t,e,n){se(e);try{const i=t.viewQuery;null!==i&&Kr(1,i,n);const r=t.template;null!==r&&Cr(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&mr(t,e),t.staticViewQueries&&Kr(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Zr(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[2]&=-5,ce()}}function wr(t,e,n,i){const r=e[2];if(256==(256&r))return;se(e);const s=Wt();try{Ft(e),function(t){Vt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Cr(t,e,n,2,i);const o=3==(3&r);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&me(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),_e(e,0)}if(function(t){for(let e=On(t);null!==e;e=Ln(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&Mt(i,1),n[2]|=1024}}}(e),function(t){for(let e=On(t);null!==e;e=Ln(e))for(let t=10;t<e.length;t++){const n=e[t],i=n[1];Lt(n)&&wr(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&mr(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&me(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const i=n[t];if(i<0)de(~i);else{const r=i,s=n[++t],o=n[++t];Xt(s,r),o(2,e[r])}}}finally{de(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)qr(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Kr(2,u,i),!s)if(o){const n=t.viewCheckHooks;null!==n&&me(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Mt(e[3],-1))}finally{ce()}}function br(t,e,n,i){const r=e[10],s=!Wt(),o=Ot(e);try{s&&!o&&r.begin&&r.begin(),o&&vr(t,e,i),wr(t,e,n,i)}finally{s&&!o&&r.end&&r.end()}}function Cr(t,e,n,i,r){const s=he(),o=2&i;try{de(-1),o&&e.length>20&&ur(t,e,20,Wt()),n(i,r)}finally{de(s)}}function Tr(t,e,n){!Bt()||(function(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ne(n,e),kn(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const i=t.data[a],s=ft(i);s&&Mr(e,n,i);const u=Ze(e,t,a,n);kn(u,e),null!==o&&Br(0,a-r,u,i,0,o),s&&(Nt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Vt.lFrame.currentDirectiveIndex;try{de(s);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];te(n),(null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs)&&Nr(i,r)}}finally{de(-1),te(o)}}(t,e,n))}function Er(t,e,n=kt){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function Ir(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Sr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Sr(t,e,n,i,r,s,o,a,u,l){const c=20+i,h=c+r,d=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:or);return n}(c,h),f="function"==typeof l?l():l;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function xr(t,e,n,i){const r=Yr(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&Jr(t).push(i,r.length-1))}function Ar(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function kr(t,e,n,i,r,s,o,a){const u=kt(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[i])?(ts(t,n,l,i,r),ht(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(i=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,It(s)?s.setProperty(u,i,r):Te(i)||(u.setProperty?u.setProperty(i,r):u[i]=r))}function Dr(t,e,n,i){let r=!1;if(Bt()){const s=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];ir(n,o.selectors,!1)&&(r||(r=[]),Fe(Ne(n,e),t,o.type),ft(o)?(Or(t,n),r.unshift(o)):r.push(o))}return r}(t,e,n),o=null===i?null:{"":-1};if(null!==s){r=!0,Rr(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let i=!1,a=!1,u=yr(t,e,s.length,null);for(let r=0;r<s.length;r++){const l=s[r];n.mergedAttrs=Ee(n.mergedAttrs,l.hostAttrs),Fr(t,n,e,u,l),Lr(u,l,o),null!==l.contentQueries&&(n.flags|=8),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=128);const c=l.type.prototype;!i&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),i=!0),!a&&(c.ngOnChanges||c.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=i[u],n=t.inputs,l=null===r||Ji(e)?null:jr(n,r);s.push(l),o=Ar(n,u,o),a=Ar(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new g("301",`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,o)}return n.mergedAttrs=Ee(n.mergedAttrs,n.attrs),r}function Pr(t,e,n,i,r,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(i,r,o)}}function Nr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Or(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Lr(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ft(e)&&(n[""]=t)}}function Rr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Fr(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=mt(r.type)),o=new we(s,ft(r),null);t.blueprint[i]=o,n[i]=o,Pr(t,e,0,i,yr(t,n,r.hostVars,or),r)}function Mr(t,e,n){const i=kt(e,t),r=Ir(n),s=t[10],o=$r(t,gr(t,r,null,n.onPush?64:16,i,e,s,s.createRenderer(i,n),null,null));t[e.index]=o}function Vr(t,e,n,i,r,s){const o=kt(t,e);!function(t,e,n,i,r,s,o){if(null==s)It(t)?t.removeAttribute(e,r,n):e.removeAttribute(r);else{const a=null==o?_(s):o(s,i||"",r);It(t)?t.setAttribute(e,r,a,n):n?e.setAttributeNS(n,r,a):e.setAttribute(r,a)}}(e[11],o,s,t.value,n,i,r)}function Br(t,e,n,i,r,s){const o=s[e];if(null!==o){const t=i.setInput;for(let e=0;e<o.length;){const r=o[e++],s=o[e++],a=o[e++];null!==t?i.setInput(n,a,r,s):n[s]=a}}}function jr(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function Ur(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function qr(t,e){const n=Nt(e,t);if(Lt(n)){const t=n[1];80&n[2]?wr(t,n,t.template,n[8]):n[5]>0&&zr(n)}}function zr(t){for(let n=On(t);null!==n;n=Ln(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];wr(t,e,t.template,e[8])}else e[5]>0&&zr(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const i=Nt(e[n],t);Lt(i)&&i[5]>0&&zr(i)}}function Zr(t,e){const n=Nt(e,t),i=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(i,n),vr(i,n,n[8])}function $r(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hr(t){for(;t;){t[2]|=64;const e=Nn(t);if(pt(t)&&!e)return t;t=e}return null}function Wr(t,e,n){const i=e[10];i.begin&&i.begin();try{wr(t,e,t.template,n)}catch(r){throw Xr(e,r),r}finally{i.end&&i.end()}}function Gr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=Dn(n),r=i[1];br(r,i,r.template,n)}}(t[8])}function Kr(t,e,n){ne(0),e(t,n)}const Qr=(()=>Promise.resolve(null))();function Yr(t){return t[7]||(t[7]=[])}function Jr(t){return t.cleanup||(t.cleanup=[])}function Xr(t,e){const n=t[9],i=n?n.get($i,null):null;i&&i.handleError(e)}function ts(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],l=t.data[o];null!==l.setInput?l.setInput(u,r,i,a):u[a]=r}}function es(t,e,n){const i=At(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],i,n)}function ns(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?r=h(r,t):2==s&&(i=h(i,t+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}const is=new Xe("INJECTOR",-1);class rs{get(t,e=cn){if(e===cn){const e=new Error(`NullInjectorError: No provider for ${c(t)}!`);throw e.name="NullInjectorError",e}return e}}const ss=new Xe("Set Injector scope."),os={},as={};let us;function ls(){return void 0===us&&(us=new rs),us}function cs(t,e=null,n=null,i){return new hs(t,n,e||ls(),i)}class hs{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],r)),this.records.set(is,ps(void 0,this));const s=this.records.get(ss);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:c(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=cn,n=D.Default){this.assertNotDestroyed();const i=_n(this),r=N(void 0);try{if(!(n&D.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof Xe)&&T(t);e=n&&this.injectableDefInScope(n)?ps(ds(t),os):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&D.Self?ls():this.parent).get(t,e=n&D.Optional&&e===cn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[dn]=o[dn]||[]).unshift(c(t)),i)throw o;return Tn(o,t,"R3InjectorError",this.source)}throw o}finally{N(r),_n(i)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(c(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let i=I(t);const r=null==i&&t.ngModule||void 0,s=void 0===r?t:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=I(r)),null==i)return!1;if(null!=i.imports&&!o){let t;n.push(s);try{rn(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];rn(i,t=>this.processProvider(t,n,i||q))}}this.injectorDefTypes.add(s);const a=mt(s)||(()=>new s);this.records.set(s,ps(a,os));const u=i.providers;if(null!=u&&!o){const e=t;rn(u,t=>this.processProvider(t,e,u))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=gs(t=p(t))?t:p(t&&t.provide);const r=(s=t,ms(s)?ps(void 0,s.useValue):ps(fs(s),os));var s;if(gs(t)||!0!==t.multi)this.records.get(i);else{let e=this.records.get(i);e||(e=ps(void 0,os,!0),e.factory=()=>wn(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){return e.value===os&&(e.value=as,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value;var n}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ds(t){const e=T(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof Xe)throw new Error(`Token ${c(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${c(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function fs(t,e,n){let i;if(gs(t)){const e=p(t);return mt(e)||ds(e)}if(ms(t))i=()=>p(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>vn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||ds(e);i=()=>new e(...wn(t.deps))}return i}function ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ms(t){return null!==t&&"object"==typeof t&&mn in t}function gs(t){return"function"==typeof t}const _s=function(t,e,n){return function(t,e=null,n=null,i){const r=cs(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let ys=(()=>{class t{static create(t,e){return Array.isArray(t)?_s(t,e,""):_s(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=cn,t.NULL=new rs,t.\u0275prov=b({token:t,providedIn:"any",factory:()=>vn(is)}),t.__NG_ELEMENT_ID__=-1,t})();function vs(t,e){pe(Dn(t)[1],zt())}function ws(t){let e=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(ft(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=bs(t.inputs),e.declaredInputs=bs(t.declaredInputs),e.outputs=bs(t.outputs);const n=r.hostBindings;n&&Es(t,n);const s=r.viewQuery,o=r.contentQueries;if(s&&Cs(t,s),o&&Ts(t,o),l(t.inputs,r.inputs),l(t.declaredInputs,r.declaredInputs),l(t.outputs,r.outputs),ft(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===ws&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ee(r.hostAttrs,n=Ee(n,r.hostAttrs))}}(i)}function bs(t){return t===U?{}:t===q?[]:t}function Cs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function Ts(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function Es(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}let Is=null;function Ss(){if(!Is){const t=j.Symbol;if(t&&t.iterator)Is=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Is=n)}}}return Is}class xs{constructor(t){this.wrapped=t}static wrap(t){return new xs(t)}static unwrap(t){return xs.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof xs}}function As(t){return!!ks(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ss()in t)}function ks(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ds(t,e,n){return t[e]=n}function Ps(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ns(t,e,n,i){const r=Ps(t,e,n);return Ps(t,e+1,i)||r}function Os(t,e,n,i){const r=jt();return Ps(r,Yt(),e)&&(Ut(),Vr(fe(),r,t,e,n,i)),Os}function Ls(t,e,n,i){return Ps(t,Yt(),n)?e+_(n)+i:or}function Rs(t,e,n,i,r,s){const o=Ns(t,Qt(),n,r);return Jt(2),o?e+_(n)+i+_(r)+s:or}function Fs(t,e,n,i,r,s,o,a){const u=function(t,e,n,i,r){const s=Ns(t,e,n,i);return Ps(t,e+2,r)||s}(t,Qt(),n,r,o);return Jt(3),u?e+_(n)+i+_(r)+s+_(o)+a:or}function Ms(t,e,n,i,r,s,o,a){const u=jt(),l=Ut(),c=t+20,h=l.firstCreatePass?function(t,e,n,i,r,s,o,a,u){const l=e.consts,c=_r(e,t,4,o||null,Rt(l,a));Dr(e,n,c,Rt(l,u)),pe(e,c);const h=c.tViews=Sr(2,c,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,l,u,e,n,i,r,s,o):l.data[c];$t(h,!1);const d=u[11].createComment("");Kn(l,u,d,h),kn(d,u),$r(u,u[c]=Ur(d,u,d,h)),dt(h)&&Tr(l,u,h),null!=o&&Er(u,h,a)}function Vs(t){return Pt(Vt.lFrame.contextLView,20+t)}function Bs(t,e=D.Default){const n=jt();return null===n?vn(t,e):Be(zt(),n,p(t),e)}function js(t,e,n){const i=jt();return Ps(i,Yt(),e)&&kr(Ut(),fe(),i,t,e,i[11],n,!1),js}function Us(t,e,n,i,r){const s=r?"class":"style";ts(t,n,e.inputs[s],s,i)}function qs(t,e,n,i){const r=jt(),s=Ut(),o=20+t,a=r[11],u=r[o]=Mn(a,e,Vt.lFrame.currentNamespace),l=s.firstCreatePass?function(t,e,n,i,r,s,o){const a=e.consts,u=_r(e,t,2,r,Rt(a,s));return Dr(e,n,u,Rt(a,o)),null!==u.attrs&&ns(u,u.attrs,!1),null!==u.mergedAttrs&&ns(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,r,0,e,n,i):s.data[o];$t(l,!0);const c=l.mergedAttrs;null!==c&&be(a,u,c);const h=l.classes;null!==h&&ii(a,u,h);const d=l.styles;null!==d&&ni(a,u,d),64!=(64&l.flags)&&Kn(s,r,u,l),0===Vt.lFrame.elementDepthCount&&kn(u,r),Vt.lFrame.elementDepthCount++,dt(l)&&(Tr(s,r,l),function(t,e,n){if(ct(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}(s,l,r)),null!==i&&Er(r,l)}function zs(){let t=zt();Ht()?Vt.lFrame.isParent=!1:(t=t.parent,$t(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Ut();n.firstCreatePass&&(pe(n,t),ct(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Us(n,e,jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Us(n,e,jt(),e.stylesWithoutHost,!1)}function Zs(t,e,n,i){qs(t,e,n,i),zs()}function $s(){return jt()}function Hs(t){return!!t&&"function"==typeof t.then}function Ws(t){return!!t&&"function"==typeof t.subscribe}const Gs=Ws;function Ks(t,e,n,i){const r=jt(),s=Ut(),o=zt();return function(t,e,n,i,r,s,o,a){const u=dt(i),l=t.firstCreatePass&&Jr(t),c=e[8],h=Yr(e);let d=!0;if(3&i.type||a){const f=kt(i,e),p=a?a(f):f,m=h.length,g=a?t=>a(xt(t[i.index])):i.index;if(It(n)){let o=null;if(!a&&u&&(o=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const t=r[s];if(t===n&&r[s+1]===i){const t=e[7],n=r[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,d=!1;else{s=Ys(i,e,c,s,!1);const t=n.listen(p,r,s);h.push(s,t),l&&l.push(r,g,m,m+1)}}else s=Ys(i,e,c,s,!0),p.addEventListener(r,s,o),h.push(s),l&&l.push(r,g,m,o)}else s=Ys(i,e,c,s,!1);const f=i.outputs;let p;if(d&&null!==f&&(p=f[r])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(s),o=h.length;h.push(s,t),l&&l.push(r,i.index,o,-(o+1))}}}(s,r,r[11],o,t,e,!!n,i),Ks}function Qs(t,e,n,i){try{return!1!==n(i)}catch(r){return Xr(t,r),!1}}function Ys(t,e,n,i,r){return function n(s){if(s===Function)return i;const o=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&Hr(o);let a=Qs(e,0,i,s),u=n.__ngNextListenerFn__;for(;u;)a=Qs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Js(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function Xs(t,e,n,i,r){const s=jt(),o=Ls(s,e,n,i);return o!==or&&kr(Ut(),fe(),s,t,o,s[11],r,!1),Xs}function to(t,e,n,i,r,s,o){const a=jt(),u=Rs(a,e,n,i,r,s);return u!==or&&kr(Ut(),fe(),a,t,u,a[11],o,!1),to}function eo(t,e,n,i,r,s,o,a,u){const l=jt(),c=Fs(l,e,n,i,r,s,o,a);return c!==or&&kr(Ut(),fe(),l,t,c,l[11],u,!1),eo}function no(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?cr(s):dr(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];io(t[a],e)&&(u=!0,t[a+1]=i?pr(n):hr(n)),a=i?cr(n):dr(n)}u&&(t[n+1]=i?hr(s):pr(s))}function io(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ln(t,e)>=0}const ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function so(t){return t.substring(ro.key,ro.keyEnd)}function oo(t){return t.substring(ro.value,ro.valueEnd)}function ao(t,e){const n=ro.textEnd;return n===e?-1:(e=ro.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ro.key=e,n),co(t,e,n))}function uo(t,e){const n=ro.textEnd;let i=ro.key=co(t,e,n);return n===i?-1:(i=ro.keyEnd=function(t,e,n){let i;for(;e<n&&(45===(i=t.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(t,i,n),i=ho(t,i,n),i=ro.value=co(t,i,n),i=ro.valueEnd=function(t,e,n){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<n;){const u=t.charCodeAt(o++);if(59===u)return a;34===u||39===u?a=o=fo(t,u,o,n):e===o-4&&85===s&&82===r&&76===i&&40===u?a=o=fo(t,41,o,n):u>32&&(a=o),s=r,r=i,i=-33&u}return a}(t,i,n),ho(t,i,n))}function lo(t){ro.key=0,ro.keyEnd=0,ro.value=0,ro.valueEnd=0,ro.textEnd=t.length}function co(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ho(t,e,n,i){return(e=co(t,e,n))<n&&e++,e}function fo(t,e,n,i){let r=-1,s=n;for(;s<i;){const n=t.charCodeAt(s++);if(n==e&&92!==r)return s;r=92==n&&92===r?0:n}throw new Error}function po(t,e){return function(t,e,n,i){const r=jt(),s=Ut(),o=Jt(2);s.firstUpdatePass&&wo(s,t,o,i),e!==or&&Ps(r,o,e)&&Eo(s,s.data[he()],r,r[11],t,r[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=c(hi(t)))),t}(e,n),i,o)}(t,e,null,!0),po}function mo(t,e){for(let n=function(t){return lo(t),uo(t,co(t,0,ro.textEnd))}(e);n>=0;n=uo(e,n))To(t,so(e),oo(e))}function go(t){yo(an,_o,t,!0)}function _o(t,e){for(let n=function(t){return lo(t),ao(t,co(t,0,ro.textEnd))}(e);n>=0;n=ao(e,n))an(t,so(e),!0)}function yo(t,e,n,i){const r=Ut(),s=Jt(2);r.firstUpdatePass&&wo(r,null,s,i);const o=jt();if(n!==or&&Ps(o,s,n)){const a=r.data[he()];if(xo(a,i)&&!vo(r,s)){let t=i?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),Us(r,a,o,n,i)}else!function(t,e,n,i,r,s,o,a){r===or&&(r=q);let u=0,l=0,c=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==c||null!==h;){const d=u<r.length?r[u+1]:void 0,f=l<s.length?s[l+1]:void 0;let p,m=null;c===h?(u+=2,l+=2,d!==f&&(m=h,p=f)):null===h||null!==c&&c<h?(u+=2,m=c):(l+=2,m=h,p=f),null!==m&&Eo(t,e,n,i,m,p,o,a),c=u<r.length?r[u]:null,h=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return q;const i=[],r=hi(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}function vo(t,e){return e>=t.expandoStartIndex}function wo(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[he()],o=vo(t,n);xo(s,i)&&null===e&&!o&&(e=!1),e=function(t,e,n,i){const r=function(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Co(n=bo(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=bo(r,t,e,n,i),null===s){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==dr(i))return t[cr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=bo(null,t,e,n[1],i),n=Co(n,e.attrs,i),function(t,e,n,i){t[cr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else s=function(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Co(i,t[s].hostAttrs,n);return Co(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=cr(o),u=dr(o);t[i]=n;let l,c=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||ln(t,l)>0)&&(c=!0)}else l=n;if(r)if(0!==u){const e=cr(t[a+1]);t[i+1]=lr(e,a),0!==e&&(t[e+1]=fr(t[e+1],i)),t[a+1]=function(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=lr(a,0),0!==a&&(t[a+1]=fr(t[a+1],i)),a=i;else t[i+1]=lr(u,0),0===a?a=i:t[u+1]=fr(t[u+1],i),u=i;c&&(t[i+1]=hr(t[i+1])),no(t,l,i,!0),no(t,l,i,!1),function(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&ln(s,e)>=0&&(n[i+1]=pr(n[i+1]))}(e,l,t,i,s),o=lr(a,u),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function bo(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=Co(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Co(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),an(t,o,!!n||e[++s]))}return void 0===t?null:t}function To(t,e,n){an(t,e,hi(n))}function Eo(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1];So(function(t){return 1==(1&t)}(l)?Io(u,e,n,r,dr(l),o):void 0)||(So(s)||function(t){return 2==(2&t)}(l)&&(s=Io(u,null,n,r,a,o)),function(t,e,n,i,r){const s=It(t);if(e)r?s?t.addClass(n,i):n.classList.add(i):s?t.removeClass(n,i):n.classList.remove(i);else{let e=-1===i.indexOf("-")?void 0:xn.DashCase;if(null==r)s?t.removeStyle(n,i,e):n.style.removeProperty(i);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),e|=xn.Important),s?t.setStyle(n,i,r,e):n.style.setProperty(i,r,o?"important":"")}}}(i,o,At(he(),n),r,s))}function Io(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const e=t[r],s=Array.isArray(e),u=s?e[1]:e,l=null===u;let c=n[r+1];c===or&&(c=l?q:void 0);let h=l?un(c,i):u===i?c:void 0;if(s&&!So(h)&&(h=un(e,i)),So(h)&&(a=h,o))return a;const d=t[r+1];r=o?cr(d):dr(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=un(t,i))}return a}function So(t){return void 0!==t}function xo(t,e){return 0!=(t.flags&(e?16:32))}function Ao(t,e=""){const n=jt(),i=Ut(),r=t+20,s=i.firstCreatePass?_r(i,r,1,e,null):i.data[r],o=n[r]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Kn(i,n,o,s),$t(s,!1)}function ko(t){return Do("",t,""),ko}function Do(t,e,n){const i=jt(),r=Ls(i,t,e,n);return r!==or&&es(i,he(),r),Do}function Po(t,e,n,i,r){const s=jt(),o=Rs(s,t,e,n,i,r);return o!==or&&es(s,he(),o),Po}function No(t,e,n,i,r,s,o){const a=jt(),u=Fs(a,t,e,n,i,r,s,o);return u!==or&&es(a,he(),u),No}function Oo(t,e,n){yo(an,_o,Ls(jt(),t,e,n),!0)}function Lo(t,e,n){!function(t){yo(To,mo,t,!1)}(Ls(jt(),t,e,n))}function Ro(t,e,n){const i=jt();return Ps(i,Yt(),e)&&kr(Ut(),fe(),i,t,e,i[11],n,!0),Ro}const Fo=void 0;var Mo=["en",[["a","p"],["AM","PM"],Fo],[["AM","PM"],Fo,Fo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fo,"{1} 'at' {0}",Fo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Vo={};function Bo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Uo(e);if(n)return n;const i=e.split("-")[0];if(n=Uo(i),n)return n;if("en"===i)return Mo;throw new Error(`Missing locale data for the locale "${t}".`)}function jo(t){return Bo(t)[qo.PluralCase]}function Uo(t){return t in Vo||(Vo[t]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[t]),Vo[t]}var qo=(()=>((qo=qo||{})[qo.LocaleId=0]="LocaleId",qo[qo.DayPeriodsFormat=1]="DayPeriodsFormat",qo[qo.DayPeriodsStandalone=2]="DayPeriodsStandalone",qo[qo.DaysFormat=3]="DaysFormat",qo[qo.DaysStandalone=4]="DaysStandalone",qo[qo.MonthsFormat=5]="MonthsFormat",qo[qo.MonthsStandalone=6]="MonthsStandalone",qo[qo.Eras=7]="Eras",qo[qo.FirstDayOfWeek=8]="FirstDayOfWeek",qo[qo.WeekendRange=9]="WeekendRange",qo[qo.DateFormat=10]="DateFormat",qo[qo.TimeFormat=11]="TimeFormat",qo[qo.DateTimeFormat=12]="DateTimeFormat",qo[qo.NumberSymbols=13]="NumberSymbols",qo[qo.NumberFormats=14]="NumberFormats",qo[qo.CurrencyCode=15]="CurrencyCode",qo[qo.CurrencySymbol=16]="CurrencySymbol",qo[qo.CurrencyName=17]="CurrencyName",qo[qo.Currencies=18]="Currencies",qo[qo.Directionality=19]="Directionality",qo[qo.PluralCase=20]="PluralCase",qo[qo.ExtraData=21]="ExtraData",qo))();const zo="en-US";let Zo=zo;function $o(t){w(t,"Expected localeId to be defined"),"string"==typeof t&&(Zo=t.toLowerCase().replace(/_/g,"-"))}function Ho(t,e,n,i,r){if(t=p(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ho(t[s],e,n,i,r);else{const s=Ut(),o=jt();let a=gs(t)?t:p(t.provide),u=fs(t);const l=zt(),c=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(gs(t)||!t.multi){const i=new we(u,r,Bs),f=Ko(a,e,r?c:c+d,h);-1===f?(Fe(Ne(l,o),s,a),Wo(s,t,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(i),o.push(i)):(n[f]=i,o[f]=i)}else{const f=Ko(a,e,c+d,h),p=Ko(a,e,c,c+d),m=f>=0&&n[f],g=p>=0&&n[p];if(r&&!g||!r&&!m){Fe(Ne(l,o),s,a);const c=function(t,e,n,i,r){const s=new we(t,n,Bs);return s.multi=[],s.index=e,s.componentProviders=0,Go(s,r,i&&!n),s}(r?Yo:Qo,n.length,r,i,u);!r&&g&&(n[p].providerFactory=c),Wo(s,t,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(c),o.push(c)}else Wo(s,t,f>-1?f:p,Go(n[r?p:f],u,!r&&i));!r&&i&&g&&n[p].componentProviders++}}}function Wo(t,e,n,i){const r=gs(e);if(r||function(t){return!!t.useClass}(e)){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[i,s]):o[t+1].push(i,s)}else o.push(n,s)}}}function Go(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ko(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Qo(t,e,n,i){return Jo(this.multi,[])}function Yo(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ze(n,n[1],this.providerFactory.index,i);s=e.slice(0,t),Jo(r,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Jo(r,s);return s}function Jo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Xo(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=Ut();if(i.firstCreatePass){const r=ft(t);Ho(n,i.data,i.blueprint,r,!0),Ho(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class ta{}const ea="ngComponent";class na{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${c(t)}. Did you add it to @NgModule.entryComponents?`);return e[ea]=t,e}(t)}}let ia=(()=>{class t{}return t.NULL=new na,t})();function ra(...t){}function sa(t,e){return new aa(kt(t,e))}const oa=function(){return sa(zt(),jt())};let aa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=oa,t})();function ua(t){return t instanceof aa?t.nativeElement:t}class la{}let ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ha(),t})();const ha=function(){const t=jt(),e=Nt(zt().index,t);return function(t){return t[11]}(ut(e)?e:t)};let da=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class fa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const pa=new fa("12.2.17");class ma{constructor(){}supports(t){return As(t)}create(t){return new _a(t)}}const ga=(t,e)=>e;class _a{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ga}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const s=!n||e&&e.currentIndex<ba(n,i,r)?e:n,o=ba(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{r||(r=[]);const t=o-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;e<=s&&s<t&&(r[n]=i+1)}r[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!As(t))throw new Error(`Error trying to diff '${c(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),s=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ss()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),s=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):t=this._addAfter(new ya(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new wa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ya{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class va{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class wa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new va,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ba(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class Ca{constructor(){}supports(t){return t instanceof Map||ks(t)}create(){return new Ta}}class Ta{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ks(t)))throw new Error(`Error trying to diff '${c(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new Ea(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ea{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ia(){return new Sa([new ma])}let Sa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ia()),deps:[[t,new Sn,new In]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(t){return t.name||typeof t}(t)}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:Ia}),t})();function xa(){return new Aa([new Ca])}let Aa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||xa()),deps:[[t,new Sn,new In]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:xa}),t})();function ka(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(xt(s)),lt(s))for(let t=10;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&ka(e[1],e,n,i)}const o=n.type;if(8&o)ka(t,e,n.child,i);else if(32&o){const t=Pn(n,e);let r;for(;r=t();)i.push(r)}else if(16&o){const t=Yn(e,n);if(Array.isArray(t))i.push(...t);else{const n=Nn(e[16]);ka(n[1],n,t,i,!0)}}n=r?n.projectionNext:n.next}return i}class Da{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ka(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(lt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Bn(t,n),on(e,n))}this._attachedToViewContainer=!1}jn(this._lView[1],this._lView)}onDestroy(t){xr(this._lView[1],this._lView,null,t)}markForCheck(){Hr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{Wr(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ti(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Pa extends Da{constructor(t){super(t),this._view=t}detectChanges(){Gr(this._view)}checkNoChanges(){!function(t){Gt(!0);try{Gr(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const Na=function(t){return function(t,e,n){if(ht(t)&&!n){const n=Nt(t.index,e);return new Da(n,n)}return 47&t.type?new Da(e[16],e):null}(zt(),jt(),16==(16&t))};let Oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Na,t})();const La=[new Ca],Ra=new Sa([new ma]),Fa=new Aa(La),Ma=function(){return Ua(zt(),jt())};let Va=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ma,t})();const Ba=Va,ja=class extends Ba{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=gr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),vr(e,n,t),new Da(n)}};function Ua(t,e){return 4&t.type?new ja(e,t,sa(t,e)):null}class qa{}class za{}const Za=function(){return Qa(zt(),jt())};let $a=(()=>{class t{}return t.__NG_ELEMENT_ID__=Za,t})();const Ha=$a,Wa=class extends Ha{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Se(t)){const e=Ae(t,this._hostLView),n=xe(t);return new We(e[1].data[n+8],e)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const s=n||this.parentInjector;if(!r&&null==t.ngModule&&s){const t=s.get(qa,null);t&&(r=t)}const o=t.create(s,i,void 0,r);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,i=n[1];if(lt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new Wa(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-10?(e[4]=n[r],sn(n,10+i,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,s,r);const o=Jn(r,s),a=n[11],u=Hn(a,s[7]);return null!==u&&function(t,e,n,i,r,s){i[0]=r,i[6]=e,ti(t,i,n,1,r,s)}(i,s[6],a,n,u,o),t.attachToViewContainerRef(),sn(Ka(s),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Bn(this._lContainer,e);n&&(on(Ka(this._lContainer),e),jn(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Bn(this._lContainer,e);return n&&null!=on(Ka(this._lContainer),e)?new Da(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ga(t){return t[8]}function Ka(t){return t[8]||(t[8]=[])}function Qa(t,e){let n;const i=e[t.index];if(lt(i))n=i;else{let r;if(8&t.type)r=xt(i);else{const n=e[11];r=n.createComment("");const i=kt(t,e);zn(n,Hn(n,i),r,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,i),!1)}e[t.index]=n=Ur(i,e,r,t),$r(e,n)}return new Wa(n,t,e)}const Ya={};class Ja extends ia{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ot(t);return new eu(e,this.ngModule)}}function Xa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const tu=new Xe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Hi});class eu extends ta{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(sr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Xa(this.componentDef.inputs)}get outputs(){return Xa(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const s=t.get(n,Ya,r);return s!==Ya||i===Ya?s:e.get(n,i,r)}}}(t,i.injector):t,s=r.get(la,St),o=r.get(da,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===F.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Mn(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),c=this.componentDef.onPush?576:528,h=function(t,e){return{components:[],scheduler:t||Hi,clean:Qr,playerHandler:e||null,flags:0}}(),d=Sr(0,null,null,1,0,null,null,null,null,null),f=gr(null,d,h,c,null,null,s,a,o,r);let p,m;se(f);try{const t=function(t,e,n,i,r,s){const o=n[1];n[20]=t;const a=_r(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ns(a,u,!0),null!==t&&(be(r,t,u),null!==a.classes&&ii(r,t,a.classes),null!==a.styles&&ni(r,t,a.styles)));const l=i.createRenderer(t,e),c=gr(n,Ir(e),null,e.onPush?64:16,n[20],a,i,l,s||null,null);return o.firstCreatePass&&(Fe(Ne(a,n),o,e.type),Or(o,a),Rr(a,n.length,1)),$r(n,c),n[20]=c}(l,this.componentDef,f,s,a);if(l)if(n)be(a,l,["ng-version",pa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!er(r))break;r=s}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&be(a,l,t),e&&e.length>0&&ii(a,l,e.join(" "))}if(m=Dt(d,20),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}p=function(t,e,n,i,r){const s=n[1],o=function(t,e,n){const i=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Fr(t,i,e,yr(t,e,1,null),n));const r=Ze(e,t,i.directiveStart,i);kn(r,e);const s=kt(i,e);return s&&kn(s,e),r}(s,n,e);if(i.components.push(o),t[8]=o,r&&r.forEach(t=>t(o,e)),e.contentQueries){const t=zt();e.contentQueries(1,o,t.directiveStart)}const a=zt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(de(a.index),Pr(n[1],a,0,a.directiveStart,a.directiveEnd,e),Nr(e,o)),o}(t,this.componentDef,f,h,[vs]),vr(d,f,null)}finally{ce()}return new nu(this.componentType,p,sa(m,f),f,m)}}class nu extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new Pa(i),this.componentType=t}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const iu=new Map;class ru extends qa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ja(this);const n=at(t),i=t[W]||null;i&&$o(i),this._bootstrapComponents=Gi(n.bootstrap),this._r3Injector=cs(t,e,[{provide:qa,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],c(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ys.THROW_IF_NOT_FOUND,n=D.Default){return t===ys||t===qa||t===is?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class su extends za{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const i=at(n,!0),r=i.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${c(e)} vs ${c(e.name)}`)}(r,iu.get(r),n),iu.set(r,n));const s=Gi(i.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new ru(this.moduleType,t)}}function ou(t,e,n){const i=Kt()+t,r=jt();return r[i]===or?Ds(r,i,n?e.call(n):e()):function(t,e){return t[e]}(r,i)}function au(t,e,n,i){return uu(jt(),Kt(),t,e,n,i)}function uu(t,e,n,i,r,s){const o=e+n;return Ps(t,o,r)?Ds(t,o+1,s?i.call(s,r):i(r)):function(t,e){const n=t[e];return n===or?void 0:n}(t,o+1)}function lu(t,e){const n=Ut();let i;const r=t+20;n.firstCreatePass?(i=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}throw new g("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=mt(i.type)),o=N(Bs);try{const t=De(!1),e=s();return De(t),function(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,jt(),r,e),e}finally{N(o)}}function cu(t,e,n){const i=t+20,r=jt(),s=Pt(r,i);return function(t,e){xs.isWrapped(e)&&(e=xs.unwrap(e),t[Qt()]=or);return e}(r,function(t,e){return t[1].data[e].pure}(r,i)?uu(r,Kt(),e,s.transform,n,s):s.transform(n))}function hu(t){return e=>{setTimeout(t,void 0,e)}}const du=class extends i.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var i,s,o;let a=t,u=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;a=null===(i=e.next)||void 0===i?void 0:i.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),l=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=hu(u),a&&(a=hu(a)),l&&(l=hu(l)));const c=super.subscribe({next:a,error:u,complete:l});return t instanceof r.w&&t.add(c),c}};function fu(){return this._results[Ss()]()}class pu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ss(),n=pu.prototype;n[e]||(n[e]=fu)}get changes(){return this._changes||(this._changes=new du)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const i=nn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(n._results,i,e))&&(n._results=i,n.length=i.length,n.last=i[this.length-1],n.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class mu{constructor(t){this.queryList=t,this.matches=null}clone(){return new mu(this.queryList)}setDirty(){this.queryList.setDirty()}}class gu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new gu(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==xu(t,e).matches&&this.queries[e].setDirty()}}class _u{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class yu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new yu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class vu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new vu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(t,e,wu(e,r)),this.matchTNodeWithReadOption(t,e,ze(e,t,r,!1,!1))}else n===Va?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ze(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===aa||i===$a||i===Va&&4&e.type)this.addMatch(e.index,-2);else{const n=ze(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function wu(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function bu(t,e,n,i){return-1===n?function(t,e){return 11&t.type?sa(t,e):4&t.type?Ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===aa?sa(e,t):n===Va?Ua(e,t):n===$a?Qa(e,t):void 0}(t,e,i):Ze(t,t[1],n,e)}function Cu(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const i=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const r=s[t];o.push(r<0?null:bu(e,i[r],s[t+1],n.metadata.read))}r.matches=o}return r.matches}function Tu(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=Cu(t,e,r,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)i.push(o[t/2]);else{const r=s[t+1],o=e[-n];for(let t=10;t<o.length;t++){const e=o[t];e[17]===e[3]&&Tu(e[1],e,r,i)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Tu(n[1],n,r,i)}}}}}return i}function Eu(t){const e=jt(),n=Ut(),i=ee();ne(i+1);const r=xu(n,i);if(t.dirty&&Ot(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?Tu(n,e,i,[]):Cu(n,e,r,i);t.reset(s,ua),t.notifyOnChanges()}return!0}return!1}function Iu(t,e,n,i){const r=Ut();if(r.firstCreatePass){const s=zt();(function(t,e,n){null===t.queries&&(t.queries=new yu),t.queries.track(new vu(e,n))})(r,new _u(e,n,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}!function(t,e,n){const i=new pu(4==(4&n));xr(t,e,i,i.destroy),null===e[19]&&(e[19]=new gu),e[19].queries.push(new mu(i))}(r,jt(),n)}function Su(){return t=jt(),e=ee(),t[19].queries[e].queryList;var t,e}function xu(t,e){return t.queries.getByIndex(e)}function Au(t,e){return Ua(t,e)}const ku=new Xe("Application Initializer");let Du=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ra,this.reject=ra,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Hs(e))t.push(e);else if(Gs(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vn(ku,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Pu=new Xe("AppId"),Nu={provide:Pu,useFactory:function(){return`${Ou()}${Ou()}${Ou()}`},deps:[]};function Ou(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Lu=new Xe("Platform Initializer"),Ru=new Xe("Platform ID"),Fu=new Xe("appBootstrapListener");let Mu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Vu=new Xe("LocaleId"),Bu=new Xe("DefaultCurrencyCode");class ju{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Uu=function(t){return new su(t)},qu=Uu,zu=function(t){return Promise.resolve(Uu(t))},Zu=function(t){const e=Uu(t),n=Gi(at(t).declarations).reduce((t,e)=>{const n=ot(e);return n&&t.push(new eu(n)),t},[]);return new ju(e,n)},$u=Zu,Hu=function(t){return Promise.resolve(Zu(t))};let Wu=(()=>{class t{constructor(){this.compileModuleSync=qu,this.compileModuleAsync=zu,this.compileModuleAndAllComponentsSync=$u,this.compileModuleAndAllComponentsAsync=Hu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Gu=(()=>Promise.resolve(0))();function Ku(t){"undefined"==typeof Zone?Gu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Qu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new du(!1),this.onMicrotaskEmpty=new du(!1),this.onStable=new du(!1),this.onError=new du(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&e,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=j.requestAnimationFrame,e=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(j,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Xu(t),t.isCheckStableRunning=!0,Ju(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Xu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return tl(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),el(t)}},onInvoke:(n,i,r,s,o,a,u)=>{try{return tl(t),n.invoke(r,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),el(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,Xu(t),Ju(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,t,Yu,ra,ra);try{return r.runTask(s,e,n)}finally{r.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Yu={};function Ju(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Xu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function tl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function el(t){t._nesting--,Ju(t)}class nl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new du,this.onMicrotaskEmpty=new du,this.onStable=new du,this.onError=new du}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let il=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qu.assertNotInAngularZone(),Ku(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ku(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vn(Qu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),rl=(()=>{class t{constructor(){this._applications=new Map,al.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return al.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class sl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function ol(t){al=t}let al=new sl,ul=!0,ll=!1;function cl(){return ll=!0,ul}function hl(){if(ll)throw new Error("Cannot enable prod mode after platform setup.");ul=!1}let dl;const fl=new Xe("AllowMultipleToken");class pl{constructor(t,e){this.name=t,this.token=e}}function ml(t,e,n=[]){const i=`Platform: ${e}`,r=new Xe(i);return(e=[])=>{let s=gl();if(!s||s.injector.get(fl,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:ss,useValue:"platform"});!function(t){if(dl&&!dl.destroyed&&!dl.injector.get(fl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");dl=t.get(_l);const e=t.get(Lu,null);e&&e.forEach(t=>t())}(ys.create({providers:t,name:i}))}return function(t){const e=gl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function gl(){return dl&&!dl.destroyed?dl:null}let _l=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new nl:("zone.js"===t?void 0:t)||new Qu({enableLongStackTrace:cl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),i=[{provide:Qu,useValue:n}];return n.run(()=>{const r=ys.create({providers:i,parent:this.injector,name:t.moduleType.name}),s=t.create(r),o=s.injector.get($i,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});s.onDestroy(()=>{wl(this._modules,s),t.unsubscribe()})}),function(t,n,i){try{const e=i();return Hs(e)?e.catch(e=>{throw n.runOutsideAngular(()=>t.handleError(e)),e}):e}catch(e){throw n.runOutsideAngular(()=>t.handleError(e)),e}}(o,n,()=>{const t=s.injector.get(Du);return t.runInitializers(),t.donePromise.then(()=>($o(s.injector.get(Vu,zo)||zo),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,e=[]){const n=yl({},e);return function(t,e,n){const i=new su(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(vl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${c(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vn(ys))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function yl(t,e){return Array.isArray(e)?e.reduce(yl,t):Object.assign(Object.assign({},t),e)}let vl=(()=>{class t{constructor(t,e,n,i,r){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Qu.assertNotInAngularZone(),Ku(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Qu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(u,l.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ta?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=function(t){return t.isBoundToModule}(n)?void 0:this._injector.get(qa),r=n.create(ys.NULL,[],e||n.selector,i),s=r.location.nativeElement,o=r.injector.get(il,null),a=o&&r.injector.get(rl);return o&&a&&a.registerApplication(s,o),r.onDestroy(()=>{this.detachView(r.hostView),wl(this.components,r),a&&a.unregisterApplication(s)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;wl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Fu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vn(Qu),vn(ys),vn($i),vn(ia),vn(Du))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function wl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class bl{}class Cl{}const Tl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let El=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Tl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n(8255)(e).then(t=>t[i]).then(t=>Il(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>Il(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(vn(Wu),vn(Cl,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Il(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Sl=function(t){return null},xl=ml(null,"core",[{provide:Ru,useValue:"unknown"},{provide:_l,deps:[ys]},{provide:rl,deps:[]},{provide:Mu,deps:[]}]),Al=[{provide:vl,useClass:vl,deps:[Qu,ys,$i,ia,Du]},{provide:tu,deps:[Qu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Du,useClass:Du,deps:[[new In,ku]]},{provide:Wu,useClass:Wu,deps:[]},Nu,{provide:Sa,useFactory:function(){return Ra},deps:[]},{provide:Aa,useFactory:function(){return Fa},deps:[]},{provide:Vu,useFactory:function(t){return $o(t=t||"undefined"!=typeof $localize&&$localize.locale||zo),t},deps:[[new En(Vu),new In,new Sn]]},{provide:Bu,useValue:"USD"}];let kl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(vn(vl))},t.\u0275mod=et({type:t}),t.\u0275inj=C({providers:Al}),t})()},8939:function(t,e,n){"use strict";n.d(e,{hO:function(){return m},xv:function(){return h},Dh:function(){return c},GT:function(){return u},cc:function(){return g},on:function(){return d},pX:function(){return a}});var i=n(7716),r=n(2533),s=n(8445);t=n.hmd(t);const o=["ngOnDestroy"],a=(t,e,n,i={})=>new Proxy(t,{get:(r,s)=>n.runOutsideAngular(()=>{var r;if(t[s])return(null===(r=null==i?void 0:i.spy)||void 0===r?void 0:r.get)&&i.spy.get(s,t[s]),t[s];if(o.indexOf(s)>-1)return()=>{};const a=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>a[e],apply:(t,e,n)=>a.then(t=>{var e;const r=t&&t(...n);return(null===(e=null==i?void 0:i.spy)||void 0===e?void 0:e.apply)&&i.spy.apply(s,n,r),r})})})}),u=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})};class l{constructor(t){return t}}const c=new i.OlP("angularfire2.app.options"),h=new i.OlP("angularfire2.app.name");function d(e,n,i){const s="object"==typeof i&&i||{};s.name=s.name||"string"==typeof i&&i||"[DEFAULT]";const o=r.Z.apps.filter(t=>t&&t.name===s.name)[0]||n.runOutsideAngular(()=>r.Z.initializeApp(e,s));try{JSON.stringify(e)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new l(o)}const f=(t,...e)=>{(0,i.X6Q)()&&"undefined"!=typeof console&&console[t](...e)},p={provide:l,useFactory:d,deps:[c,i.R0b,[new i.FiY,h]]};let m=(()=>{class t{constructor(t){r.Z.registerVersion("angularfire",s.q4.full,"core"),r.Z.registerVersion("angularfire",s.q4.full,"app-compat"),r.Z.registerVersion("angular",i.q4F.full,t.toString())}static initializeApp(e,n){return{ngModule:t,providers:[{provide:c,useValue:e},{provide:h,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.Lbi))},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[p]}),t})();function g(t,e,n,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(e=>e[0]===t)||[];if(s)return function(t,e){try{return t.toString()===e.toString()}catch(n){return t===e}}(r,o)||(y("error",`${e} was already initialized on the ${n} Firebase App with different settings.${_?" You may need to reload as Firebase is not HMR aware.":""}`),y("warn",{is:r,was:o})),s;{const e=i();return globalThis.\u0275AngularfireInstanceCache.push([t,e,r]),e}}const _=!!t.hot,y=(t,...e)=>{(0,i.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8445:function(t,e,n){"use strict";n.d(e,{q4:function(){return Un},iC:function(){return ei},HU:function(){return Xn},vb:function(){return Kn},JM:function(){return Gn}});var i=n(7716),r=n(8213),s=n(8239),o=n(8026),a=n(3854),u=n(3910),l=n(5422),c=n(2373);const h="@firebase/installations",d="0.6.0",f=`w:${d}`,p="FIS_v2",m=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function g(t){return t instanceof a.ZR&&t.code.includes("request-failed")}function _({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function y(t){return{token:t.token,requestStatus:2,expiresIn:I(t.expiresIn),creationTime:Date.now()}}function v(t,e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*(t,e){const n=(yield e.json()).error;return m.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function b({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function C(t,{refreshToken:e}){const n=b(t);return n.append("Authorization",function(t){return`${p} ${t}`}(e)),n}function T(t){return E.apply(this,arguments)}function E(){return(E=(0,s.Z)(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function I(t){return Number(t.replace("s","000"))}function S(t,e){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=_(t),r=b(t),s=e.getImmediate({optional:!0});if(s){const t=yield s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:p,appId:t.appId,sdkVersion:f})},a=yield T(()=>fetch(i,o));if(a.ok){const t=yield a.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:y(t.authToken)}}throw yield v("Create Installation",a)})).apply(this,arguments)}function A(t){return new Promise(e=>{setTimeout(e,t)})}const k=/^[cdef][\w-]{21}$/;function D(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return function(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return k.test(e)?e:""}catch(t){return""}}function P(t){return`${t.appName}!${t.appId}`}const N=new Map;function O(t,e){const n=P(t);L(n,e),function(t,e){const n=(!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=t=>{L(t.data.key,t.data.fid)}),R);n&&n.postMessage({key:t,fid:e}),0===N.size&&R&&(R.close(),R=null)}(n,e)}function L(t,e){const n=N.get(t);if(n)for(const i of n)i(e)}let R=null;const F="firebase-installations-store";let M=null;function V(){return M||(M=(0,c.X3)("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(F)}})),M}function B(t,e){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(function*(t,e){const n=P(t),i=(yield V()).transaction(F,"readwrite"),r=i.objectStore(F),s=yield r.get(n);return yield r.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&O(t,e.fid),e})).apply(this,arguments)}function U(t){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(function*(t){const e=P(t),n=(yield V()).transaction(F,"readwrite");yield n.objectStore(F).delete(e),yield n.done})).apply(this,arguments)}function z(t,e){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(function*(t,e){const n=P(t),i=(yield V()).transaction(F,"readwrite"),r=i.objectStore(F),s=yield r.get(n),o=e(s);return void 0===o?yield r.delete(n):yield r.put(o,n),yield i.done,o&&(!s||s.fid!==o.fid)&&O(t,o.fid),o})).apply(this,arguments)}function $(t){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)(function*(t){let e;const n=yield z(t.appConfig,n=>{const i=W(n),r=G(t,i);return e=r.registrationPromise,r.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function W(t){return X(t||{fid:D(),registrationStatus:0})}function G(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(m.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(t,e){return K.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Q(t)}:{installationEntry:e}}function K(){return(K=(0,s.Z)(function*(t,e){try{const n=yield S(t,e);return B(t.appConfig,n)}catch(n){throw g(n)&&409===n.customData.serverCode?yield U(t.appConfig):yield B(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function Q(t){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.Z)(function*(t){let e=yield J(t.appConfig);for(;1===e.registrationStatus;)yield A(100),e=yield J(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=yield $(t);return n||e}return e})).apply(this,arguments)}function J(t){return z(t,t=>{if(!t)throw m.create("installation-not-found");return X(t)})}function X(t){return function(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function tt(t,e){return et.apply(this,arguments)}function et(){return(et=(0,s.Z)(function*({appConfig:t,heartbeatServiceProvider:e},n){const i=nt(t,n),r=C(t,n),s=e.getImmediate({optional:!0});if(s){const t=yield s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:f,appId:t.appId}})},a=yield T(()=>fetch(i,o));if(a.ok)return y(yield a.json());throw yield v("Generate Auth Token",a)})).apply(this,arguments)}function nt(t,{fid:e}){return`${_(t)}/${e}/authTokens:generate`}function it(t){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(function*(t,e=!1){let n;const i=yield z(t.appConfig,i=>{if(!ct(i))throw m.create("not-registered");const r=i.authToken;if(!e&&ht(r))return i;if(1===r.requestStatus)return n=st(t,e),i;{if(!navigator.onLine)throw m.create("app-offline");const e=dt(i);return n=ut(t,e),e}});return n?yield n:i.authToken})).apply(this,arguments)}function st(t,e){return ot.apply(this,arguments)}function ot(){return(ot=(0,s.Z)(function*(t,e){let n=yield at(t.appConfig);for(;1===n.authToken.requestStatus;)yield A(100),n=yield at(t.appConfig);const i=n.authToken;return 0===i.requestStatus?it(t,e):i})).apply(this,arguments)}function at(t){return z(t,t=>{if(!ct(t))throw m.create("not-registered");return function(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(t.authToken)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function ut(t,e){return lt.apply(this,arguments)}function lt(){return(lt=(0,s.Z)(function*(t,e){try{const n=yield tt(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield B(t.appConfig,i),n}catch(n){if(!g(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield B(t.appConfig,n)}else yield U(t.appConfig);throw n}})).apply(this,arguments)}function ct(t){return void 0!==t&&2===t.registrationStatus}function ht(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function dt(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ft(){return(ft=(0,s.Z)(function*(t){const e=t,{installationEntry:n,registrationPromise:i}=yield $(e);return i?i.catch(console.error):it(e).catch(console.error),n.fid})).apply(this,arguments)}function pt(){return(pt=(0,s.Z)(function*(t,e=!1){const n=t;return yield mt(n),(yield it(n,e)).token})).apply(this,arguments)}function mt(t){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)(function*(t){const{registrationPromise:e}=yield $(t);e&&(yield e)})).apply(this,arguments)}function _t(t){return m.create("missing-app-config-values",{valueName:t})}const yt="installations";(0,o._registerComponent)(new u.wA(yt,t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw _t("App Configuration");if(!t.name)throw _t("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _t(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:(0,o._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new u.wA("installations-internal",t=>{const e=t.getProvider("app").getImmediate(),n=(0,o._getProvider)(e,yt).getImmediate();return{getId:()=>function(t){return ft.apply(this,arguments)}(n),getToken:t=>function(t){return pt.apply(this,arguments)}(n,t)}},"PRIVATE")),(0,o.registerVersion)(h,d),(0,o.registerVersion)(h,d,"esm2017");const vt="@firebase/remote-config",wt=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bt{constructor(t,e,n,i){this.client=t,this.storage=e,this.storageCache=n,this.logger=i}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-e,i=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${i}.`),i}fetch(t){var e=this;return(0,s.Z)(function*(){const[n,i]=yield Promise.all([e.storage.getLastSuccessfulFetchTimestampMillis(),e.storage.getLastSuccessfulFetchResponse()]);if(i&&e.isCachedDataFresh(t.cacheMaxAgeMillis,n))return i;t.eTag=i&&i.eTag;const r=yield e.client.fetch(t),s=[e.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&s.push(e.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})()}}function Ct(t=navigator){return t.languages&&t.languages[0]||t.language}class Tt{constructor(t,e,n,i,r,s){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=i,this.apiKey=r,this.appId=s}fetch(t){var e=this;return(0,s.Z)(function*(){const[n,i]=yield Promise.all([e.firebaseInstallations.getId(),e.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${e.projectId}/namespaces/${e.namespace}:fetch?key=${e.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},o={sdk_version:e.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:e.appId,language_code:Ct()},a={method:"POST",headers:s,body:JSON.stringify(o)},u=fetch(r,a),l=new Promise((e,n)=>{t.signal.addEventListener(()=>{const t=new Error("The operation was aborted.");t.name="AbortError",n(t)})});let c;try{yield Promise.race([u,l]),c=yield u}catch(m){let t="fetch-client-network";throw"AbortError"===(null==m?void 0:m.name)&&(t="fetch-timeout"),wt.create(t,{originalErrorMessage:null==m?void 0:m.message})}let h=c.status;const d=c.headers.get("ETag")||void 0;let f,p;if(200===c.status){let t;try{t=yield c.json()}catch(g){throw wt.create("fetch-client-parse",{originalErrorMessage:null==g?void 0:g.message})}f=t.entries,p=t.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:("NO_TEMPLATE"===p||"EMPTY_CONFIG"===p)&&(f={}),304!==h&&200!==h)throw wt.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class Et{constructor(t,e){this.client=t,this.storage=e}fetch(t){var e=this;return(0,s.Z)(function*(){const n=(yield e.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return e.attemptFetch(t,n)})()}attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:n}){var i=this;return(0,s.Z)(function*(){yield function(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(wt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(t.signal,e);try{const e=yield i.client.fetch(t);return yield i.storage.deleteThrottleMetadata(),e}catch(r){if(!function(t){if(!(t instanceof a.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(r))throw r;const e={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield i.storage.setThrottleMetadata(e),i.attemptFetch(t,e)}})()}}class It{constructor(t,e,n,i,r){this.app=t,this._client=e,this._storageCache=n,this._storage=i,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function St(t,e){const n=t.target.error||void 0;return wt.create(e,{originalErrorMessage:n&&(null==n?void 0:n.message)})}const xt="app_namespace_store";class At{constructor(t,e,n,i=function(){return new Promise((t,n)=>{try{const e=indexedDB.open("firebase_remote_config",1);e.onerror=t=>{n(St(t,"storage-open"))},e.onsuccess=e=>{t(e.target.result)},e.onupgradeneeded=t=>{0===t.oldVersion&&t.target.result.createObjectStore(xt,{keyPath:"compositeKey"})}}catch(e){n(wt.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}})}()){this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){var e=this;return(0,s.Z)(function*(){const n=yield e.openDbPromise;return new Promise((i,r)=>{const s=n.transaction([xt],"readonly").objectStore(xt),o=e.createCompositeKey(t);try{const t=s.get(o);t.onerror=t=>{r(St(t,"storage-get"))},t.onsuccess=t=>{const e=t.target.result;i(e?e.value:void 0)}}catch(a){r(wt.create("storage-get",{originalErrorMessage:null==a?void 0:a.message}))}})})()}set(t,e){var n=this;return(0,s.Z)(function*(){const i=yield n.openDbPromise;return new Promise((r,s)=>{const o=i.transaction([xt],"readwrite").objectStore(xt),a=n.createCompositeKey(t);try{const t=o.put({compositeKey:a,value:e});t.onerror=t=>{s(St(t,"storage-set"))},t.onsuccess=()=>{r()}}catch(u){s(wt.create("storage-set",{originalErrorMessage:null==u?void 0:u.message}))}})})()}delete(t){var e=this;return(0,s.Z)(function*(){const n=yield e.openDbPromise;return new Promise((i,r)=>{const s=n.transaction([xt],"readwrite").objectStore(xt),o=e.createCompositeKey(t);try{const t=s.delete(o);t.onerror=t=>{r(St(t,"storage-delete"))},t.onsuccess=()=>{i()}}catch(a){r(wt.create("storage-delete",{originalErrorMessage:null==a?void 0:a.message}))}})})()}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class kt{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var t=this;return(0,s.Z)(function*(){const e=t.storage.getLastFetchStatus(),n=t.storage.getLastSuccessfulFetchTimestampMillis(),i=t.storage.getActiveConfig(),r=yield e;r&&(t.lastFetchStatus=r);const s=yield n;s&&(t.lastSuccessfulFetchTimestampMillis=s);const o=yield i;o&&(t.activeConfig=o)})()}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}function Dt(){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(t){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("remote-config",function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw wt.create("registration-window");if(!(0,a.hl)())throw wt.create("indexed-db-unavailable");const{projectId:r,apiKey:s,appId:u}=n.options;if(!r)throw wt.create("registration-project-id");if(!s)throw wt.create("registration-api-key");if(!u)throw wt.create("registration-app-id");const c=new At(u,n.name,e=e||"firebase"),h=new kt(c),d=new l.Yd(vt);d.logLevel=l.in.ERROR;const f=new Tt(i,o.SDK_VERSION,e,r,s,u),p=new Et(f,c),m=new bt(p,c,h,d),g=new It(n,m,h,c,d);return function(t){const e=(0,a.m9)(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(g),g},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(vt,"0.4.0"),(0,o.registerVersion)(vt,"0.4.0","esm2017");const Nt="/firebase-messaging-sw.js",Ot="/firebase-cloud-messaging-push-scope",Lt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rt="google.c.a.c_id",Ft="google.c.a.c_l",Mt="google.c.a.ts",Vt="google.c.a.e";var Bt=(()=>{return(t=Bt||(Bt={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",Bt;var t})();function jt(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ut(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),i=new Uint8Array(n.length);for(let r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}const qt="fcm_token_details_db",zt="fcm_token_object_Store";function Zt(t){return $t.apply(this,arguments)}function $t(){return $t=(0,s.Z)(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(t=>t.name).includes(qt))return null;let e=null;return(yield(0,c.X3)(qt,5,{upgrade:(n=(0,s.Z)(function*(n,i,r,s){var o;if(i<2||!n.objectStoreNames.contains(zt))return;const a=s.objectStore(zt),u=yield a.index("fcmSenderId").get(t);if(yield a.clear(),u)if(2===i){const t=u;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(o=t.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:jt(t.vapidKey)}}}else if(3===i){const t=u;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:jt(t.auth),p256dh:jt(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:jt(t.vapidKey)}}}else if(4===i){const t=u;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:jt(t.auth),p256dh:jt(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:jt(t.vapidKey)}}}}),function(t,e,i,r){return n.apply(this,arguments)})})).close(),yield(0,c.Lj)(qt),yield(0,c.Lj)("fcm_vapid_details_db"),yield(0,c.Lj)("undefined"),Ht(e)?e:null;var n}),$t.apply(this,arguments)}function Ht(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Wt="firebase-messaging-store";let Gt=null;function Kt(){return Gt||(Gt=(0,c.X3)("firebase-messaging-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Wt)}})),Gt}function Qt(t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,s.Z)(function*(t){const e=ne(t),n=yield(yield Kt()).transaction(Wt).objectStore(Wt).get(e);if(n)return n;{const e=yield Zt(t.appConfig.senderId);if(e)return yield Jt(t,e),e}})).apply(this,arguments)}function Jt(t,e){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,s.Z)(function*(t,e){const n=ne(t),i=(yield Kt()).transaction(Wt,"readwrite");return yield i.objectStore(Wt).put(e,n),yield i.done,e})).apply(this,arguments)}function te(t){return ee.apply(this,arguments)}function ee(){return(ee=(0,s.Z)(function*(t){const e=ne(t),n=(yield Kt()).transaction(Wt,"readwrite");yield n.objectStore(Wt).delete(e),yield n.done})).apply(this,arguments)}function ne({appConfig:t}){return t.appId}const ie=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function re(t,e){return se.apply(this,arguments)}function se(){return(se=(0,s.Z)(function*(t,e){const n=yield he(t),i=fe(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(ce(t.appConfig),r)).json()}catch(o){throw ie.create("token-subscribe-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw ie.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw ie.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function oe(t,e){return ae.apply(this,arguments)}function ae(){return(ae=(0,s.Z)(function*(t,e){const n=yield he(t),i=fe(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(`${ce(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw ie.create("token-update-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw ie.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw ie.create("token-update-no-token");return s.token})).apply(this,arguments)}function ue(t,e){return le.apply(this,arguments)}function le(){return(le=(0,s.Z)(function*(t,e){const n={method:"DELETE",headers:yield he(t)};try{const i=yield(yield fetch(`${ce(t.appConfig)}/${e}`,n)).json();if(i.error)throw ie.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(i){throw ie.create("token-unsubscribe-failed",{errorInfo:null==i?void 0:i.toString()})}})).apply(this,arguments)}function ce({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function he(t){return de.apply(this,arguments)}function de(){return(de=(0,s.Z)(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function fe({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==Lt&&(r.web.applicationPubKey=i),r}const pe=6048e5;function me(t){return ge.apply(this,arguments)}function ge(){return(ge=(0,s.Z)(function*(t){const e=yield Te(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:jt(e.getKey("auth")),p256dh:jt(e.getKey("p256dh"))},i=yield Qt(t.firebaseDependencies);if(i){if(Ie(i.subscriptionOptions,n))return Date.now()>=i.createTime+pe?ve(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield ue(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return be(t.firebaseDependencies,n)}return be(t.firebaseDependencies,n)})).apply(this,arguments)}function _e(t){return ye.apply(this,arguments)}function ye(){return(ye=(0,s.Z)(function*(t){const e=yield Qt(t.firebaseDependencies);e&&(yield ue(t.firebaseDependencies,e.token),yield te(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function ve(t,e){return we.apply(this,arguments)}function we(){return(we=(0,s.Z)(function*(t,e){try{const n=yield oe(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Jt(t.firebaseDependencies,i),n}catch(n){throw yield _e(t),n}})).apply(this,arguments)}function be(t,e){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,s.Z)(function*(t,e){const n={token:yield re(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Jt(t,n),n.token})).apply(this,arguments)}function Te(t,e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,s.Z)(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ut(e)})})).apply(this,arguments)}function Ie(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function Se(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function(t,e){!e.data||(t.data=e.data)}(e,t),function(t,e){var n,i,r,s,o;if(!e.fcmOptions&&!(null===(n=e.notification)||void 0===n?void 0:n.click_action))return;t.fcmOptions={};const a=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function xe(t){return"object"==typeof t&&!!t&&Rt in t}function Ae(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function ke(t){return ie.create("missing-app-config-values",{valueName:t})}Ae("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ae("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class De{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(t){if(!t||!t.options)throw ke("App Configuration Object");if(!t.name)throw ke("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw ke(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}function Pe(t){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,s.Z)(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Nt,{scope:Ot}),t.swRegistration.update().catch(()=>{})}catch(e){throw ie.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}})).apply(this,arguments)}function Oe(t,e){return Le.apply(this,arguments)}function Le(){return(Le=(0,s.Z)(function*(t,e){if(!e&&!t.swRegistration&&(yield Pe(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw ie.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function Re(t,e){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,s.Z)(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Lt)})).apply(this,arguments)}function Me(){return(Me=(0,s.Z)(function*(t,e){if(!navigator)throw ie.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ie.create("permission-blocked");return yield Re(t,null==e?void 0:e.vapidKey),yield Oe(t,null==e?void 0:e.serviceWorkerRegistration),me(t)})).apply(this,arguments)}function Ve(t,e,n){return Be.apply(this,arguments)}function Be(){return(Be=(0,s.Z)(function*(t,e,n){const i=je(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[Rt],message_name:n[Ft],message_time:n[Mt],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function je(t){switch(t){case Bt.NOTIFICATION_CLICKED:return"notification_open";case Bt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ue(){return(Ue=(0,s.Z)(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Bt.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(Se(n)):t.onMessageHandler.next(Se(n)));const i=n.data;xe(i)&&"1"===i[Vt]&&(yield Ve(t,n.messageType,i))})).apply(this,arguments)}const qe="@firebase/messaging";function ze(){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,s.Z)(function*(){try{yield(0,a.eu)()}catch(t){return!1}return"undefined"!=typeof window&&(0,a.hl)()&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("messaging",t=>{const e=new De(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function(t,e){return Ue.apply(this,arguments)}(e,t)),e},"PUBLIC")),(0,o._registerComponent)(new u.wA("messaging-internal",t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>function(t,e){return Me.apply(this,arguments)}(e,t)}},"PRIVATE")),(0,o.registerVersion)(qe,"0.12.0"),(0,o.registerVersion)(qe,"0.12.0","esm2017");const $e="analytics",He="firebase_id",We="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ge="https://www.googletagmanager.com/gtag/js",Ke=new l.Yd("@firebase/analytics");function Qe(t){return Promise.all(t.map(t=>t.catch(t=>t)))}function Ye(t,e){const n=document.createElement("script");n.src=`${Ge}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function Je(t,e,n,i,r,s){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,s.Z)(function*(t,e,n,i,r,s){const o=i[r];try{if(o)yield e[o];else{const t=(yield Qe(n)).find(t=>t.measurementId===r);t&&(yield e[t.appId])}}catch(a){Ke.error(a)}t("config",r,s)})).apply(this,arguments)}function tn(t,e,n,i,r){return en.apply(this,arguments)}function en(){return(en=(0,s.Z)(function*(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=yield Qe(n);for(const n of t){const t=i.find(t=>t.measurementId===n),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",i,r||{})}catch(s){Ke.error(s)}})).apply(this,arguments)}function nn(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ge)&&n.src.includes(t))return n;return null}const rn=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sn=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function on(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function an(t){return un.apply(this,arguments)}function un(){return(un=(0,s.Z)(function*(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:on(i)},s=We.replace("{app-id}",n),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=yield o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw rn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()})).apply(this,arguments)}function ln(t){return cn.apply(this,arguments)}function cn(){return(cn=(0,s.Z)(function*(t,e=sn,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw rn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw rn.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new mn;return setTimeout((0,s.Z)(function*(){u.abort()}),void 0!==n?n:6e4),hn({appId:i,apiKey:r,measurementId:o},a,u,e)})).apply(this,arguments)}function hn(t,e,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,s.Z)(function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=sn){var s;const{appId:o,measurementId:u}=t;try{yield fn(i,e)}catch(l){if(u)return Ke.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:u};throw l}try{const e=yield an(t);return r.deleteThrottleMetadata(o),e}catch(l){const e=l;if(!pn(e)){if(r.deleteThrottleMetadata(o),u)return Ke.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:u};throw l}const c=503===Number(null===(s=null==e?void 0:e.customData)||void 0===s?void 0:s.httpStatus)?(0,a.$s)(n,r.intervalMillis,30):(0,a.$s)(n,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return r.setThrottleMetadata(o,h),Ke.debug(`Calling attemptFetch again in ${c} millis`),hn(t,h,i,r)}})).apply(this,arguments)}function fn(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(rn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pn(t){if(!(t instanceof a.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class mn{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}let gn,_n;function yn(){return(yn=(0,s.Z)(function*(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=yield e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}})).apply(this,arguments)}function vn(t){_n=t}function wn(t){gn=t}function bn(){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,s.Z)(function*(){if(!(0,a.hl)())return Ke.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(t){return Ke.warn(rn.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0})).apply(this,arguments)}function Tn(){return(Tn=(0,s.Z)(function*(t,e,n,i,r,s,o){var a;const u=ln(t);u.then(e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ke.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(t=>Ke.error(t)),e.push(u);const l=bn().then(t=>{if(t)return i.getId()}),[c,h]=yield Promise.all([u,l]);nn(s)||Ye(s,c.measurementId),_n&&(r("consent","default",_n),vn(void 0)),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d[He]=h),r("config",c.measurementId,d),gn&&(r("set",gn),wn(void 0)),c.measurementId})).apply(this,arguments)}class En{constructor(t){this.app=t}_delete(){return delete In[this.app.options.appId],Promise.resolve()}}let In={},Sn=[];const xn={};let An,kn,Dn="dataLayer",Pn=!1;function Nn(t,e,n){!function(){const t=[];if((0,a.ru)()&&t.push("This is a browser extension environment."),(0,a.zI)()||t.push("Cookies are not available."),t.length>0){const e=t.map((t,e)=>`(${e+1}) ${t}`).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:e});Ke.warn(n.message)}}();const i=t.options.appId;if(!i)throw rn.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw rn.create("no-api-key");Ke.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=In[i])throw rn.create("already-exists",{id:i});if(!Pn){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Dn);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let o=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(o=window[r]),window[r]=function(t,e,n,i){function r(){return(r=(0,s.Z)(function*(r,s,o){try{"event"===r?yield tn(t,e,n,s,o):"config"===r?yield Je(t,e,n,i,s,o):"consent"===r?t("consent","update",o):t("set",s)}catch(a){Ke.error(a)}})).apply(this,arguments)}return function(t,e,n){return r.apply(this,arguments)}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}(In,Sn,xn,Dn,"gtag");kn=t,An=e,Pn=!0}return In[i]=function(t,e,n,i,r,s,o){return Tn.apply(this,arguments)}(t,Sn,xn,e,An,Dn,n),new En(t)}function On(){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,s.Z)(function*(){if((0,a.ru)()||!(0,a.zI)()||!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(t){return!1}})).apply(this,arguments)}const Rn="@firebase/analytics";(0,o._registerComponent)(new u.wA($e,(t,{options:e})=>Nn(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e),"PUBLIC")),(0,o._registerComponent)(new u.wA("analytics-internal",function(t){try{const e=t.getProvider($e).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=(0,a.m9)(t),function(t,e,n,i,r){return yn.apply(this,arguments)}(kn,In[t.app.options.appId],e,n,i).catch(t=>Ke.error(t))}(e,t,n,i)}}catch(e){throw rn.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),(0,o.registerVersion)(Rn,"0.9.0"),(0,o.registerVersion)(Rn,"0.9.0","esm2017");var Fn=n(7771),Mn=n(3637),Vn=n(3342),Bn=n(3101),jn=n(309);const Un=new i.GfV("7.5.0"),qn="__angularfire_symbol__analyticsIsSupportedValue",zn="__angularfire_symbol__analyticsIsSupported",Zn="__angularfire_symbol__remoteConfigIsSupportedValue",$n="__angularfire_symbol__remoteConfigIsSupported",Hn="__angularfire_symbol__messagingIsSupportedValue",Wn="__angularfire_symbol__messagingIsSupported";function Gn(t,e,n){if(e){if(1===e.length)return e[0];const t=e.filter(t=>t.app===n);if(1===t.length)return t[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[zn]||(globalThis[zn]=On().then(t=>globalThis[qn]=t).catch(()=>globalThis[qn]=!1)),globalThis[Wn]||(globalThis[Wn]=ze().then(t=>globalThis[Hn]=t).catch(()=>globalThis[Hn]=!1)),globalThis[$n]||(globalThis[$n]=Dt().then(t=>globalThis[Zn]=t).catch(()=>globalThis[Zn]=!1));const Kn=(t,e)=>{const n=e?[e]:(0,r.C6)(),i=[];return n.forEach(e=>{e.container.getProvider(t).instances.forEach(t=>{i.includes(t)||i.push(t)})}),i};function Qn(){}class Yn{constructor(t,e=Fn.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const i=this.zone;return this.delegate.schedule(function(e){i.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class Jn{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qn,{},Qn,Qn)),e.pipe((0,Vn.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xn=(()=>{class t{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Yn(Zone.current)),this.insideAngular=t.run(()=>new Yn(Zone.current,Mn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.R0b))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ti(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function ei(t){return ti(),function(t){return function(e){return(e=e.lift(new Jn(t.ngZone))).pipe((0,Bn.R)(t.outsideAngular),(0,jn.QV)(t.insideAngular))}}(ti())(t)}},7589:function(t,e,n){"use strict";n.d(e,{$:function(){return Qe},A:function(){return c},B:function(){return h},G:function(){return Nt},H:function(){return Rt},J:function(){return re},L:function(){return ft},M:function(){return fe},N:function(){return _e},P:function(){return qi},Q:function(){return ye},R:function(){return Di},T:function(){return ve},U:function(){return ge},V:function(){return be},W:function(){return Ce},X:function(){return xe},Y:function(){return qe},Z:function(){return Ze},_:function(){return He},a:function(){return Xn},a0:function(){return en},a1:function(){return rn},a2:function(){return on},a3:function(){return un},a4:function(){return cn},a5:function(){return dn},a6:function(){return pn},a7:function(){return mn},a8:function(){return _n},a9:function(){return yn},aA:function(){return pt},aB:function(){return br},aC:function(){return cr},aD:function(){return lr},aE:function(){return Dt},aI:function(){return ei},aL:function(){return we},aa:function(){return Cn},ab:function(){return En},ac:function(){return Sn},af:function(){return Dn},ag:function(){return Nn},ah:function(){return On},ak:function(){return Ne},al:function(){return qn},an:function(){return $n},ao:function(){return Kn},ap:function(){return T},aq:function(){return Et},ar:function(){return bt},as:function(){return g},at:function(){return $r},au:function(){return Ar},av:function(){return It},aw:function(){return _},ax:function(){return b},ay:function(){return Ir},az:function(){return I},b:function(){return Jn},c:function(){return Yi},d:function(){return er},e:function(){return Xi},f:function(){return fr},g:function(){return _r},h:function(){return mr},i:function(){return gi},j:function(){return vr},k:function(){return Wr},l:function(){return Li},m:function(){return Kr},o:function(){return l},r:function(){return Fi},s:function(){return Ni},u:function(){return ji}});var i=n(8239),r=n(3854),s=n(8026),o=n(5422);function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}var u=n(3910);const l={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},c={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const h=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},f=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new o.Yd("@firebase/auth");function m(t,...e){p.logLevel<=o.in.ERROR&&p.error(`Auth (${s.SDK_VERSION}): ${t}`,...e)}function g(t,...e){throw w(t,...e)}function _(t,...e){return w(t,...e)}function y(t,e,n){const i=Object.assign(Object.assign({},d()),{[e]:n});return new r.LL("auth","Firebase",i).create(e,{appName:t.name})}function v(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&g(t,"argument-error"),y(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function w(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return f.create(t,...e)}function b(t,e,...n){if(!t)throw w(e,...n)}function C(t){const e="INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function T(t,e){t||C(e)}const E=new Map;function I(t){T(t instanceof Function,"Expected a class definition");let e=E.get(t);return e?(T(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E.set(t,e),e)}function S(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function x(){return"http:"===A()||"https:"===A()}function A(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class k{constructor(t,e){this.shortDelay=t,this.longDelay=e,T(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(x()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function D(t,e){T(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class P{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void C("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void C("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void C("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},O=new k(3e4,6e4);function L(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function R(t,e,n,i){return F.apply(this,arguments)}function F(){return(F=(0,i.Z)(function*(t,e,n,s,o={}){return M(t,o,(0,i.Z)(function*(){let i={},o={};s&&("GET"===e?o=s:i={body:JSON.stringify(s)});const a=(0,r.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),P.fetch()(U(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))}))})).apply(this,arguments)}function M(t,e,n){return V.apply(this,arguments)}function V(){return(V=(0,i.Z)(function*(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},N),e);try{const e=new q(t),r=yield Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=yield r.json();if("needConfirmation"in s)throw z(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw z(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw y(t,a,o);g(t,a)}}catch(s){if(s instanceof r.ZR)throw s;g(t,"network-request-failed")}})).apply(this,arguments)}function B(t,e,n,i){return j.apply(this,arguments)}function j(){return(j=(0,i.Z)(function*(t,e,n,i,r={}){const s=yield R(t,e,n,i,r);return"mfaPendingCredential"in s&&g(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function U(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?D(t.config,r):`${t.config.apiScheme}://${r}`}class q{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(_(this.auth,"network-request-failed")),O.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function z(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_(t,e,i);return r.customData._tokenResponse=n,r}function Z(){return(Z=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function $(t,e){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function W(t,e){return G.apply(this,arguments)}function G(){return(G=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function K(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Q(){return(Q=(0,i.Z)(function*(t,e=!1){const n=(0,r.m9)(t),i=yield n.getIdToken(e),s=J(i);b(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:K(Y(s.auth_time)),issuedAtTime:K(Y(s.iat)),expirationTime:K(Y(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function Y(t){return 1e3*Number(t)}function J(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return m("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,r.tV)(n);return t?JSON.parse(t):(m("Failed to decode base64 JWT payload"),null)}catch(s){return m("Caught error parsing JWT payload as JSON",null==s?void 0:s.toString()),null}}function X(t,e){return tt.apply(this,arguments)}function tt(){return(tt=(0,i.Z)(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(i){throw i instanceof r.ZR&&et(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})).apply(this,arguments)}function et({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class nt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){var e=this;if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout((0,i.Z)(function*(){yield e.iteration()}),n)}iteration(){var t=this;return(0,i.Z)(function*(){try{yield t.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&t.schedule(!0))}t.schedule()})()}}class it{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rt(t){return st.apply(this,arguments)}function st(){return(st=(0,i.Z)(function*(t){var e;const n=t.auth,i=yield t.getIdToken(),r=yield X(t,W(n,{idToken:i}));b(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?ut(s.providerUserInfo):[],a=at(t.providerData,o),u=!!t.isAnonymous&&!(t.email&&s.passwordHash||(null==a?void 0:a.length)),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new it(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,l)})).apply(this,arguments)}function ot(){return(ot=(0,i.Z)(function*(t){const e=(0,r.m9)(t);yield rt(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function at(t,e){return[...t.filter(t=>!e.some(e=>e.providerId===t.providerId)),...e]}function ut(t){return t.map(t=>{var{providerId:e}=t,n=a(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function lt(){return(lt=(0,i.Z)(function*(t,e){const n=yield M(t,{},(0,i.Z)(function*(){const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=U(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",P.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){b(t.idToken,"internal-error"),b(void 0!==t.idToken,"internal-error"),b(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=J(t);return b(e,"internal-error"),b(void 0!==e.exp,"internal-error"),b(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}getToken(t,e=!1){var n=this;return(0,i.Z)(function*(){return b(!n.accessToken||n.refreshToken,t,"user-token-expired"),e||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(t,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(t,e){var n=this;return(0,i.Z)(function*(){const{accessToken:i,refreshToken:r,expiresIn:s}=yield function(t,e){return lt.apply(this,arguments)}(t,e);n.updateTokensAndExpiration(i,r,Number(s))})()}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new ct;return n&&(b("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(b("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(b("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ct,this.toJSON())}_performRefresh(){return C("not implemented")}}function ht(t,e){b("string"==typeof t||void 0===t,"internal-error",{appName:e})}class dt{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=a(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new it(r.createdAt||void 0,r.lastLoginAt||void 0)}getIdToken(t){var e=this;return(0,i.Z)(function*(){const n=yield X(e,e.stsTokenManager.getToken(e.auth,t));return b(n,e.auth,"internal-error"),e.accessToken!==n&&(e.accessToken=n,yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)),n})()}getIdTokenResult(t){return function(t){return Q.apply(this,arguments)}(this,t)}reload(){return function(t){return ot.apply(this,arguments)}(this)}_assign(t){this!==t&&(b(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>Object.assign({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new dt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){var n=this;return(0,i.Z)(function*(){let i=!1;t.idToken&&t.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield rt(n)),yield n.auth._persistUserIfCurrent(n),i&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var t=this;return(0,i.Z)(function*(){const e=yield t.getIdToken();return yield X(t,function(t,e){return Z.apply(this,arguments)}(t.auth,{idToken:e})),t.stsTokenManager.clearRefreshToken(),t.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,u,l;const c=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(u=e.createdAt)&&void 0!==u?u:void 0,_=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:C,stsTokenManager:T}=e;b(y&&T,t,"internal-error");const E=ct.fromJSON(this.name,T);b("string"==typeof y,t,"internal-error"),ht(c,t.name),ht(h,t.name),b("boolean"==typeof v,t,"internal-error"),b("boolean"==typeof w,t,"internal-error"),ht(d,t.name),ht(f,t.name),ht(p,t.name),ht(m,t.name),ht(g,t.name),ht(_,t.name);const I=new dt({uid:y,auth:t,email:h,emailVerified:v,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:_});return C&&Array.isArray(C)&&(I.providerData=C.map(t=>Object.assign({},t))),m&&(I._redirectEventId=m),I}static _fromIdTokenResponse(t,e,n=!1){return(0,i.Z)(function*(){const i=new ct;i.updateFromServerResponse(e);const r=new dt({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return yield rt(r),r})()}}const ft=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,i.Z)(function*(){return!0})()}_set(t,e){var n=this;return(0,i.Z)(function*(){n.storage[t]=e})()}_get(t){var e=this;return(0,i.Z)(function*(){const n=e.storage[t];return void 0===n?null:n})()}_remove(t){var e=this;return(0,i.Z)(function*(){delete e.storage[t]})()}_addListener(t,e){}_removeListener(t,e){}}return t.type="NONE",t})();function pt(t,e,n){return`firebase:${t}:${e}:${n}`}class mt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=pt(this.userKey,i.apiKey,r),this.fullPersistenceKey=pt("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){var t=this;return(0,i.Z)(function*(){const e=yield t.persistence._get(t.fullUserKey);return e?dt._fromJSON(t.auth,e):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){var e=this;return(0,i.Z)(function*(){if(e.persistence===t)return;const n=yield e.getCurrentUser();return yield e.removeCurrentUser(),e.persistence=t,n?e.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,n="authUser"){return(0,i.Z)(function*(){if(!e.length)return new mt(I(ft),t,n);const r=(yield Promise.all(e.map(function(){var t=(0,i.Z)(function*(t){if(yield t._isAvailable())return t});return function(e){return t.apply(this,arguments)}}()))).filter(t=>t);let s=r[0]||I(ft);const o=pt(n,t.config.apiKey,t.name);let a=null;for(const n of e)try{const e=yield n._get(o);if(e){const i=dt._fromJSON(t,e);n!==s&&(a=i),s=n;break}}catch(l){}const u=r.filter(t=>t._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(e.map(function(){var t=(0,i.Z)(function*(t){if(t!==s)try{yield t._remove(o)}catch(e){}});return function(e){return t.apply(this,arguments)}}())),new mt(s,t,n)):new mt(s,t,n)})()}}function gt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_t(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ct(e))return"Blackberry";if(Tt(e))return"Webos";if(yt(e))return"Safari";if((e.includes("chrome/")||vt(e))&&!e.includes("edge/"))return"Chrome";if(bt(e))return"Android";{const e=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==e?void 0:e.length))return e[1]}return"Other"}function _t(t=(0,r.z$)()){return/firefox\//i.test(t)}function yt(t=(0,r.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vt(t=(0,r.z$)()){return/crios\//i.test(t)}function wt(t=(0,r.z$)()){return/iemobile/i.test(t)}function bt(t=(0,r.z$)()){return/android/i.test(t)}function Ct(t=(0,r.z$)()){return/blackberry/i.test(t)}function Tt(t=(0,r.z$)()){return/webos/i.test(t)}function Et(t=(0,r.z$)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function It(t=(0,r.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function St(t=(0,r.z$)()){return Et(t)||bt(t)||Tt(t)||Ct(t)||/windows phone/i.test(t)||wt(t)}function xt(t,e=[]){let n;switch(t){case"Browser":n=gt((0,r.z$)());break;case"Worker":n=`${gt((0,r.z$)())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${i}`}class At{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise((n,i)=>{try{n(t(e))}catch(r){i(r)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){var e=this;return(0,i.Z)(function*(){if(e.auth.currentUser===t)return;const n=[];try{for(const i of e.queue)yield i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const t of n)try{t()}catch(r){}throw e.auth._errorFactory.create("login-blocked",{originalMessage:null==i?void 0:i.message})}})()}}class kt{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pt(this),this.idTokenSubscription=new Pt(this),this.beforeStateQueue=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){var n=this;return e&&(this._popupRedirectResolver=I(e)),this._initializationPromise=this.queue((0,i.Z)(function*(){var i,r;if(!n._deleted&&(n.persistenceManager=yield mt.create(n,t),!n._deleted)){if(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(e),n.lastNotifiedUid=(null===(r=n.currentUser)||void 0===r?void 0:r.uid)||null,!n._deleted&&(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var t=this;return(0,i.Z)(function*(){if(t._deleted)return;const e=yield t.assertedPersistence.getCurrentUser();if(t.currentUser||e){if(t.currentUser&&e&&t.currentUser.uid===e.uid)return t._currentUser._assign(e),void(yield t.currentUser.getIdToken());yield t._updateCurrentUser(e,!0)}})()}initializeCurrentUser(t){var e=this;return(0,i.Z)(function*(){var n;const i=yield e.assertedPersistence.getCurrentUser();let r=i,s=!1;if(t&&e.config.authDomain){yield e.getOrInitRedirectPersistenceManager();const i=null===(n=e.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null==r?void 0:r._redirectEventId,a=yield e.tryRedirectSignIn(t);(!i||i===o)&&(null==a?void 0:a.user)&&(r=a.user,s=!0)}if(!r)return e.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield e.beforeStateQueue.runMiddleware(r)}catch(o){r=i,e._popupRedirectResolver._overrideRedirectResult(e,()=>Promise.reject(o))}return r?e.reloadAndSetCurrentUserOrClear(r):e.directlySetCurrentUser(null)}return b(e._popupRedirectResolver,e,"argument-error"),yield e.getOrInitRedirectPersistenceManager(),e.redirectUser&&e.redirectUser._redirectEventId===r._redirectEventId?e.directlySetCurrentUser(r):e.reloadAndSetCurrentUserOrClear(r)})()}tryRedirectSignIn(t){var e=this;return(0,i.Z)(function*(){let n=null;try{n=yield e._popupRedirectResolver._completeRedirectFn(e,t,!0)}catch(i){yield e._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(t){var e=this;return(0,i.Z)(function*(){try{yield rt(t)}catch(n){if("auth/network-request-failed"!==(null==n?void 0:n.code))return e.directlySetCurrentUser(null)}return e.directlySetCurrentUser(t)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var t=this;return(0,i.Z)(function*(){t._deleted=!0})()}updateCurrentUser(t){var e=this;return(0,i.Z)(function*(){const n=t?(0,r.m9)(t):null;return n&&b(n.auth.config.apiKey===e.config.apiKey,e,"invalid-user-token"),e._updateCurrentUser(n&&n._clone(e))})()}_updateCurrentUser(t,e=!1){var n=this;return(0,i.Z)(function*(){if(!n._deleted)return t&&b(n.tenantId===t.tenantId,n,"tenant-id-mismatch"),e||(yield n.beforeStateQueue.runMiddleware(t)),n.queue((0,i.Z)(function*(){yield n.directlySetCurrentUser(t),n.notifyAuthListeners()}))})()}signOut(){var t=this;return(0,i.Z)(function*(){return yield t.beforeStateQueue.runMiddleware(null),(t.redirectPersistenceManager||t._popupRedirectResolver)&&(yield t._setRedirectUser(null)),t._updateCurrentUser(null,!0)})()}setPersistence(t){var e=this;return this.queue((0,i.Z)(function*(){yield e.assertedPersistence.setPersistence(I(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new r.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}_setRedirectUser(t,e){var n=this;return(0,i.Z)(function*(){const i=yield n.getOrInitRedirectPersistenceManager(e);return null===t?i.removeCurrentUser():i.setCurrentUser(t)})()}getOrInitRedirectPersistenceManager(t){var e=this;return(0,i.Z)(function*(){if(!e.redirectPersistenceManager){const n=t&&I(t)||e._popupRedirectResolver;b(n,e,"argument-error"),e.redirectPersistenceManager=yield mt.create(e,[I(n._redirectPersistence)],"redirectUser"),e.redirectUser=yield e.redirectPersistenceManager.getCurrentUser()}return e.redirectPersistenceManager})()}_redirectUserForId(t){var e=this;return(0,i.Z)(function*(){var n,r;return e._isInitialized&&(yield e.queue((0,i.Z)(function*(){}))),(null===(n=e._currentUser)||void 0===n?void 0:n._redirectEventId)===t?e._currentUser:(null===(r=e.redirectUser)||void 0===r?void 0:r._redirectEventId)===t?e.redirectUser:null})()}_persistUserIfCurrent(t){var e=this;return(0,i.Z)(function*(){if(t===e.currentUser)return e.queue((0,i.Z)(function*(){return e.directlySetCurrentUser(t)}))})()}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return b(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}directlySetCurrentUser(t){var e=this;return(0,i.Z)(function*(){e.currentUser&&e.currentUser!==t&&e._currentUser._stopProactiveRefresh(),t&&e.isProactiveRefreshEnabled&&t._startProactiveRefresh(),e.currentUser=t,t?yield e.assertedPersistence.setCurrentUser(t):yield e.assertedPersistence.removeCurrentUser()})()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var t=this;return(0,i.Z)(function*(){var e;const n={"X-Client-Version":t.clientVersion};t.app.options.appId&&(n["X-Firebase-gmpid"]=t.app.options.appId);const i=yield null===(e=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader();return i&&(n["X-Firebase-Client"]=i),n})()}}function Dt(t){return(0,r.m9)(t)}class Pt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,r.ne)(t=>this.observer=t)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nt(t,e,n){const i=Dt(t);b(i._canInitEmulator,i,"emulator-config-failed"),b(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Ot(e),{host:o,port:a}=function(t){const e=Ot(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Lt(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Lt(e)}}}(e);i.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function Ot(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Lt(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Rt{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return C("not implemented")}_getIdTokenResponse(t){return C("not implemented")}_linkToIdToken(t,e){return C("not implemented")}_getReauthenticationResolver(t){return C("not implemented")}}function Ft(t,e){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:resetPassword",L(t,e))})).apply(this,arguments)}function Vt(t,e){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function jt(t,e){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:update",L(t,e))})).apply(this,arguments)}function qt(){return(qt=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithPassword",L(t,e))})).apply(this,arguments)}function zt(t,e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:sendOobCode",L(t,e))})).apply(this,arguments)}function $t(t,e){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,i.Z)(function*(t,e){return zt(t,e)})).apply(this,arguments)}function Wt(t,e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,i.Z)(function*(t,e){return zt(t,e)})).apply(this,arguments)}function Kt(t,e){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,i.Z)(function*(t,e){return zt(t,e)})).apply(this,arguments)}function Yt(t,e){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,i.Z)(function*(t,e){return zt(t,e)})).apply(this,arguments)}function Xt(){return(Xt=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithEmailLink",L(t,e))})).apply(this,arguments)}function te(){return(te=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithEmailLink",L(t,e))})).apply(this,arguments)}class ee extends Rt{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new ee(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new ee(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){var e=this;return(0,i.Z)(function*(){switch(e.signInMethod){case"password":return function(t,e){return qt.apply(this,arguments)}(t,{returnSecureToken:!0,email:e._email,password:e._password});case"emailLink":return function(t,e){return Xt.apply(this,arguments)}(t,{email:e._email,oobCode:e._password});default:g(t,"internal-error")}})()}_linkToIdToken(t,e){var n=this;return(0,i.Z)(function*(){switch(n.signInMethod){case"password":return Vt(t,{idToken:e,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(t,e){return te.apply(this,arguments)}(t,{idToken:e,email:n._email,oobCode:n._password});default:g(t,"internal-error")}})()}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}function ne(t,e){return ie.apply(this,arguments)}function ie(){return(ie=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithIdp",L(t,e))})).apply(this,arguments)}class re extends Rt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new re(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):g("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=a(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new re(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return ne(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,ne(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ne(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,r.xO)(e)}return t}}function se(t,e){return oe.apply(this,arguments)}function oe(){return(oe=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:sendVerificationCode",L(t,e))})).apply(this,arguments)}function ae(){return(ae=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithPhoneNumber",L(t,e))})).apply(this,arguments)}function ue(){return(ue=(0,i.Z)(function*(t,e){const n=yield B(t,"POST","/v1/accounts:signInWithPhoneNumber",L(t,e));if(n.temporaryProof)throw z(t,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const le={USER_NOT_FOUND:"user-not-found"};function ce(){return(ce=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithPhoneNumber",L(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),le)})).apply(this,arguments)}class he extends Rt{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new he({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new he({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return function(t,e){return ae.apply(this,arguments)}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return function(t,e){return ue.apply(this,arguments)}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return function(t,e){return ce.apply(this,arguments)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new he({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class de{constructor(t){var e,n,i,s,o,a;const u=(0,r.zd)((0,r.pd)(t)),l=null!==(e=u.apiKey)&&void 0!==e?e:null,c=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);b(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,r.zd)((0,r.pd)(t)).link,n=e?(0,r.zd)((0,r.pd)(e)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(t)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||e||t}(t);try{return new de(e)}catch(n){return null}}}let fe=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(t,e){return ee._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=de.parseLink(e);return b(n,"argument-error"),ee._fromEmailAndCode(t,n.code,n.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class pe{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class me extends pe{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ge extends me{static credentialFromJSON(t){const e="string"==typeof t?JSON.parse(t):t;return b("providerId"in e&&"signInMethod"in e,"argument-error"),re._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return b(t.idToken||t.accessToken,"argument-error"),re._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return ge.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return ge.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=t;if(!n&&!i&&!e&&!r||!o)return null;try{return new ge(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}let _e=(()=>{class t extends me{constructor(){super("facebook.com")}static credential(e){return re._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch(n){return null}}}return t.FACEBOOK_SIGN_IN_METHOD="facebook.com",t.PROVIDER_ID="facebook.com",t})(),ye=(()=>{class t extends me{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return re._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return t.credential(n,i)}catch(r){return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})(),ve=(()=>{class t extends me{constructor(){super("github.com")}static credential(e){return re._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch(n){return null}}}return t.GITHUB_SIGN_IN_METHOD="github.com",t.PROVIDER_ID="github.com",t})();class we extends Rt{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){return ne(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,ne(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ne(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:r}=e;return n&&i&&r&&n===i?new we(n,r):null}static _create(t,e){return new we(t,e)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class be extends pe{constructor(t){b(t.startsWith("saml."),"argument-error"),super(t)}static credentialFromResult(t){return be.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return be.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=we.fromJSON(t);return b(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return we._create(n,e)}catch(i){return null}}}let Ce=(()=>{class t extends me{constructor(){super("twitter.com")}static credential(e,n){return re._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return t.credential(n,i)}catch(r){return null}}}return t.TWITTER_SIGN_IN_METHOD="twitter.com",t.PROVIDER_ID="twitter.com",t})();function Te(t,e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signUp",L(t,e))})).apply(this,arguments)}class Ie{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,n,r=!1){return(0,i.Z)(function*(){const i=yield dt._fromIdTokenResponse(t,n,r),s=Se(n);return new Ie({user:i,providerId:s,_tokenResponse:n,operationType:e})})()}static _forOperation(t,e,n){return(0,i.Z)(function*(){yield t._updateTokensIfNecessary(n,!0);const i=Se(n);return new Ie({user:t,providerId:i,_tokenResponse:n,operationType:e})})()}}function Se(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function xe(t){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,i.Z)(function*(t){var e;const n=Dt(t);if(yield n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new Ie({user:n.currentUser,providerId:null,operationType:"signIn"});const i=yield Te(n,{returnSecureToken:!0}),r=yield Ie._fromIdTokenResponse(n,"signIn",i,!0);return yield n._updateCurrentUser(r.user),r})).apply(this,arguments)}class ke extends r.ZR{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ke.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new ke(t,e,n,i)}}function De(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{throw"auth/multi-factor-auth-required"===n.code?ke._fromErrorAndOperation(t,n,e,i):n})}function Pe(t){return new Set(t.map(({providerId:t})=>t).filter(t=>!!t))}function Ne(t,e){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,i.Z)(function*(t,e){const n=(0,r.m9)(t);yield Fe(!0,n,e);const{providerUserInfo:i}=yield $(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[e]}),s=Pe(i||[]);return n.providerData=n.providerData.filter(t=>s.has(t.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Le(t,e){return Re.apply(this,arguments)}function Re(){return(Re=(0,i.Z)(function*(t,e,n=!1){const i=yield X(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ie._forOperation(t,"link",i)})).apply(this,arguments)}function Fe(t,e,n){return Me.apply(this,arguments)}function Me(){return(Me=(0,i.Z)(function*(t,e,n){yield rt(e);const i=!1===t?"provider-already-linked":"no-such-provider";b(Pe(e.providerData).has(n)===t,e.auth,i)})).apply(this,arguments)}function Ve(t,e){return Be.apply(this,arguments)}function Be(){return(Be=(0,i.Z)(function*(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=yield X(t,De(i,r,e,t),n);b(s.idToken,i,"internal-error");const o=J(s.idToken);b(o,i,"internal-error");const{sub:a}=o;return b(t.uid===a,i,"user-mismatch"),Ie._forOperation(t,r,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&g(i,"user-mismatch"),s}})).apply(this,arguments)}function je(t,e){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,i.Z)(function*(t,e,n=!1){const i="signIn",r=yield De(t,i,e),s=yield Ie._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function qe(t,e){return ze.apply(this,arguments)}function ze(){return(ze=(0,i.Z)(function*(t,e){return je(Dt(t),e)})).apply(this,arguments)}function Ze(t,e){return $e.apply(this,arguments)}function $e(){return($e=(0,i.Z)(function*(t,e){const n=(0,r.m9)(t);return yield Fe(!1,n,e.providerId),Le(n,e)})).apply(this,arguments)}function He(t,e){return We.apply(this,arguments)}function We(){return(We=(0,i.Z)(function*(t,e){return Ve((0,r.m9)(t),e)})).apply(this,arguments)}function Ge(t,e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,i.Z)(function*(t,e){return B(t,"POST","/v1/accounts:signInWithCustomToken",L(t,e))})).apply(this,arguments)}function Qe(t,e){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,i.Z)(function*(t,e){const n=Dt(t),i=yield Ge(n,{token:e,returnSecureToken:!0}),r=yield Ie._fromIdTokenResponse(n,"signIn",i);return yield n._updateCurrentUser(r.user),r})).apply(this,arguments)}class Je{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?Xe._fromServerResponse(t,e):g(t,"internal-error")}}class Xe extends Je{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new Xe(e)}}function tn(t,e,n){var i;b((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),b(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(b(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(b(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function en(t,e,n){return nn.apply(this,arguments)}function nn(){return(nn=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t),s={requestType:"PASSWORD_RESET",email:e};n&&tn(i,s,n),yield Wt(i,s)})).apply(this,arguments)}function rn(t,e,n){return sn.apply(this,arguments)}function sn(){return(sn=(0,i.Z)(function*(t,e,n){yield Ft((0,r.m9)(t),{oobCode:e,newPassword:n})})).apply(this,arguments)}function on(t,e){return an.apply(this,arguments)}function an(){return(an=(0,i.Z)(function*(t,e){yield jt((0,r.m9)(t),{oobCode:e})})).apply(this,arguments)}function un(t,e){return ln.apply(this,arguments)}function ln(){return(ln=(0,i.Z)(function*(t,e){const n=(0,r.m9)(t),i=yield Ft(n,{oobCode:e}),s=i.requestType;switch(b(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":b(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":b(i.mfaInfo,n,"internal-error");default:b(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=Je._fromServerResponse(Dt(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function cn(t,e){return hn.apply(this,arguments)}function hn(){return(hn=(0,i.Z)(function*(t,e){const{data:n}=yield un((0,r.m9)(t),e);return n.email})).apply(this,arguments)}function dn(t,e,n){return fn.apply(this,arguments)}function fn(){return(fn=(0,i.Z)(function*(t,e,n){const i=Dt(t),r=yield Te(i,{returnSecureToken:!0,email:e,password:n}),s=yield Ie._fromIdTokenResponse(i,"signIn",r);return yield i._updateCurrentUser(s.user),s})).apply(this,arguments)}function pn(t,e,n){return qe((0,r.m9)(t),fe.credential(e,n))}function mn(t,e,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t),s={requestType:"EMAIL_SIGNIN",email:e};b(n.handleCodeInApp,i,"argument-error"),n&&tn(i,s,n),yield Kt(i,s)})).apply(this,arguments)}function _n(t,e){const n=de.parseLink(e);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function yn(t,e,n){return vn.apply(this,arguments)}function vn(){return(vn=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t),s=fe.credentialWithLink(e,n||S());return b(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),qe(i,s)})).apply(this,arguments)}function wn(t,e){return bn.apply(this,arguments)}function bn(){return(bn=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:createAuthUri",L(t,e))})).apply(this,arguments)}function Cn(t,e){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,i.Z)(function*(t,e){const n={identifier:e,continueUri:x()?S():"http://localhost"},{signinMethods:i}=yield wn((0,r.m9)(t),n);return i||[]})).apply(this,arguments)}function En(t,e){return In.apply(this,arguments)}function In(){return(In=(0,i.Z)(function*(t,e){const n=(0,r.m9)(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&tn(n.auth,i,e);const{email:s}=yield $t(n.auth,i);s!==t.email&&(yield t.reload())})).apply(this,arguments)}function Sn(t,e,n){return xn.apply(this,arguments)}function xn(){return(xn=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield t.getIdToken(),newEmail:e};n&&tn(i.auth,s,n);const{email:o}=yield Yt(i.auth,s);o!==t.email&&(yield t.reload())})).apply(this,arguments)}function An(t,e){return kn.apply(this,arguments)}function kn(){return(kn=(0,i.Z)(function*(t,e){return R(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Dn(t,e){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,i.Z)(function*(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const i=(0,r.m9)(t),s={idToken:yield i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=yield X(i,An(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:t})=>"password"===t);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),yield i._updateTokensIfNecessary(o)})).apply(this,arguments)}function Nn(t,e){return Ln((0,r.m9)(t),e,null)}function On(t,e){return Ln((0,r.m9)(t),null,e)}function Ln(t,e,n){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,i.Z)(function*(t,e,n){const{auth:i}=t,r={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const s=yield X(t,Vt(i,r));yield t._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Fn{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class Mn extends Fn{constructor(t,e,n,i){super(t,e,n),this.username=i}}class Vn extends Fn{constructor(t,e){super(t,"facebook.com",e)}}class Bn extends Mn{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class jn extends Fn{constructor(t,e){super(t,"google.com",e)}}class Un extends Mn{constructor(t,e,n){super(t,"twitter.com",e,n)}}function qn(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null==t?void 0:t.idToken)){const i=null===(n=null===(e=J(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Fn(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Vn(s,r);case"github.com":return new Bn(s,r);case"google.com":return new jn(s,r);case"twitter.com":return new Un(s,r,t.screenName||null);case"custom":case"anonymous":return new Fn(s,null);default:return new Fn(s,i,r)}}(n)}class zn{constructor(t,e,n){this.type=t,this.credential=e,this.auth=n}static _fromIdtoken(t,e){return new zn("enroll",t,e)}static _fromMfaPendingCredential(t){return new zn("signin",t)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var e,n;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return zn._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return zn._fromIdtoken(t.multiFactorSession.idToken)}return null}}class Zn{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Dt(t),r=e.customData._serverResponse,s=(r.mfaInfo||[]).map(t=>Je._fromServerResponse(n,t));b(r.mfaPendingCredential,n,"internal-error");const o=zn._fromMfaPendingCredential(r.mfaPendingCredential);return new Zn(o,s,function(){var t=(0,i.Z)(function*(t){const i=yield t._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(e.operationType){case"signIn":const t=yield Ie._fromIdTokenResponse(n,e.operationType,s);return yield n._updateCurrentUser(t.user),t;case"reauthenticate":return b(e.user,n,"internal-error"),Ie._forOperation(e.user,e.operationType,s);default:g(n,"internal-error")}});return function(e){return t.apply(this,arguments)}}())}resolveSignIn(t){var e=this;return(0,i.Z)(function*(){return e.signInResolver(t)})()}}function $n(t,e){var n;const i=(0,r.m9)(t),s=e;return b(e.customData.operationType,i,"argument-error"),b(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Zn._fromError(i,s)}function Hn(t,e){return R(t,"POST","/v2/accounts/mfaEnrollment:start",L(t,e))}class Wn{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(e=>Je._fromServerResponse(t.auth,e)))})}static _fromUser(t){return new Wn(t)}getSession(){var t=this;return(0,i.Z)(function*(){return zn._fromIdtoken(yield t.user.getIdToken(),t.user.auth)})()}enroll(t,e){var n=this;return(0,i.Z)(function*(){const i=t,r=yield n.getSession(),s=yield X(n.user,i._process(n.user.auth,r,e));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(t){var e=this;return(0,i.Z)(function*(){const n="string"==typeof t?t:t.uid,i=yield e.user.getIdToken(),r=yield X(e.user,function(t,e){return R(t,"POST","/v2/accounts/mfaEnrollment:withdraw",L(t,e))}(e.user.auth,{idToken:i,mfaEnrollmentId:n}));e.enrolledFactors=e.enrolledFactors.filter(({uid:t})=>t!==n),yield e.user._updateTokensIfNecessary(r);try{yield e.user.reload()}catch(s){if("auth/user-token-expired"!==(null==s?void 0:s.code))throw s}})()}}const Gn=new WeakMap;function Kn(t){const e=(0,r.m9)(t);return Gn.has(e)||Gn.set(e,Wn._fromUser(e)),Gn.get(e)}const Qn="__sak";class Yn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Qn,"1"),this.storage.removeItem(Qn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class t extends Yn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,r.z$)();return yt(t)||Et(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);!e&&this.localCache[n]===t||this.notifyListeners(n,t)},s=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,e){var n=()=>super._set,r=this;return(0,i.Z)(function*(){yield n().call(r,t,e),r.localCache[t]=JSON.stringify(e)})()}_get(t){var e=()=>super._get,n=this;return(0,i.Z)(function*(){const i=yield e().call(n,t);return n.localCache[t]=JSON.stringify(i),i})()}_remove(t){var e=()=>super._remove,n=this;return(0,i.Z)(function*(){yield e().call(n,t),delete n.localCache[t]})()}}return t.type="LOCAL",t})(),Xn=(()=>{class t extends Yn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}return t.type="SESSION",t})();let ti=(()=>{class t{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(t=>t.isListeningto(e));if(n)return n;const i=new t(e);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var e=this;return(0,i.Z)(function*(){const n=t,{eventId:r,eventType:s,data:o}=n.data,a=e.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(a).map(function(){var t=(0,i.Z)(function*(t){return t(n.origin,o)});return function(e){return t.apply(this,arguments)}}()),l=yield function(t){return Promise.all(t.map(function(){var t=(0,i.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}});return function(e){return t.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})()}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function ei(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}class ni{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,n=50){var r=this;return(0,i.Z)(function*(){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=ei("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(e.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"))}}},r.handlers.add(o),i.port1.addEventListener("message",o.onMessage),r.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])}).finally(()=>{o&&r.removeMessageHandler(o)})})()}}function ii(){return window}function ri(){return void 0!==ii().WorkerGlobalScope&&"function"==typeof ii().importScripts}function si(){return(si=(0,i.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(Qr){return null}})).apply(this,arguments)}const oi="firebaseLocalStorageDb",ai="firebaseLocalStorage",ui="fbase_key";class li{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ci(t,e){return t.transaction([ai],e?"readwrite":"readonly").objectStore(ai)}function hi(){const t=indexedDB.open(oi,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(ai,{keyPath:ui})}catch(i){n(i)}}),t.addEventListener("success",(0,i.Z)(function*(){const n=t.result;n.objectStoreNames.contains(ai)?e(n):(n.close(),yield function(){const t=indexedDB.deleteDatabase(oi);return new li(t).toPromise()}(),e(yield hi()))}))})}function di(t,e,n){return fi.apply(this,arguments)}function fi(){return(fi=(0,i.Z)(function*(t,e,n){const i=ci(t,!0).put({[ui]:e,value:n});return new li(i).toPromise()})).apply(this,arguments)}function pi(){return(pi=(0,i.Z)(function*(t,e){const n=ci(t,!1).get(e),i=yield new li(n).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function mi(t,e){const n=ci(t,!0).delete(e);return new li(n).toPromise()}const gi=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,i.Z)(function*(){return t.db||(t.db=yield hi()),t.db})()}_withRetries(t){var e=this;return(0,i.Z)(function*(){let n=0;for(;;)try{const n=yield e._openDb();return yield t(n)}catch(i){if(n++>3)throw i;e.db&&(e.db.close(),e.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,i.Z)(function*(){return ri()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,i.Z)(function*(){t.receiver=ti._getInstance(ri()?self:null),t.receiver._subscribe("keyChanged",function(){var e=(0,i.Z)(function*(e,n){return{keyProcessed:(yield t._poll()).includes(n.key)}});return function(t,n){return e.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=(0,i.Z)(function*(t,e){return["keyChanged"]});return function(e,n){return t.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,i.Z)(function*(){var e,n;if(t.activeServiceWorker=yield function(){return si.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new ni(t.activeServiceWorker);const i=yield t.sender._send("ping",{},800);!i||(null===(e=i[0])||void 0===e?void 0:e.fulfilled)&&(null===(n=i[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var e=this;return(0,i.Z)(function*(){if(e.sender&&e.activeServiceWorker&&function(){var t;return(null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===e.activeServiceWorker)try{yield e.sender._send("keyChanged",{key:t},e.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,i.Z)(function*(){try{if(!indexedDB)return!1;const t=yield hi();return yield di(t,Qn,"1"),yield mi(t,Qn),!0}catch(t){}return!1})()}_withPendingWrite(t){var e=this;return(0,i.Z)(function*(){e.pendingWrites++;try{yield t()}finally{e.pendingWrites--}})()}_set(t,e){var n=this;return(0,i.Z)(function*(){return n._withPendingWrite((0,i.Z)(function*(){return yield n._withRetries(n=>di(n,t,e)),n.localCache[t]=e,n.notifyServiceWorker(t)}))})()}_get(t){var e=this;return(0,i.Z)(function*(){const n=yield e._withRetries(e=>function(t,e){return pi.apply(this,arguments)}(e,t));return e.localCache[t]=n,n})()}_remove(t){var e=this;return(0,i.Z)(function*(){return e._withPendingWrite((0,i.Z)(function*(){return yield e._withRetries(e=>mi(e,t)),delete e.localCache[t],e.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,i.Z)(function*(){const e=yield t._withRetries(t=>{const e=ci(t,!1).getAll();return new li(e).toPromise()});if(!e)return[];if(0!==t.pendingWrites)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(t.localCache[r])!==JSON.stringify(s)&&(t.notifyListeners(r,s),n.push(r));for(const r of Object.keys(t.localCache))t.localCache[r]&&!i.has(r)&&(t.notifyListeners(r,null),n.push(r));return n})()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,i.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function _i(t,e){return R(t,"POST","/v2/accounts/mfaSignIn:start",L(t,e))}function yi(){return(yi=(0,i.Z)(function*(t){return(yield R(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vi(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=_("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)})}function wi(t){return`__${t}${Math.floor(1e6*Math.random())}`}const bi=1e12;class Ci{constructor(t){this.auth=t,this.counter=bi,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new Ti(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||bi;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;return(null===(e=this._widgets.get(t||bi))||void 0===e?void 0:e.getResponse())||""}execute(t){var e=this;return(0,i.Z)(function*(){var n;return null===(n=e._widgets.get(t||bi))||void 0===n||n.execute(),""})()}}class Ti{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof t?document.getElementById(t):t;b(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<50;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}();const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ei=wi("rcb"),Ii=new k(3e4,6e4);class Si{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=ii().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return b((n=e).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n),t,"argument-error"),this.shouldResolveImmediately(e)?Promise.resolve(ii().grecaptcha):new Promise((n,i)=>{const s=ii().setTimeout(()=>{i(_(t,"network-request-failed"))},Ii.get());ii()[Ei]=()=>{ii().clearTimeout(s),delete ii()[Ei];const r=ii().grecaptcha;if(!r)return void i(_(t,"internal-error"));const o=r.render;r.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(r)},vi(`https://www.google.com/recaptcha/api.js??${(0,r.xO)({onload:Ei,render:"explicit",hl:e})}`).catch(()=>{clearTimeout(s),i(_(t,"internal-error"))})});var n}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=ii().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xi{load(t){return(0,i.Z)(function*(){return new Ci(t)})()}clearedOneInstance(){}}const Ai="recaptcha",ki={theme:"light",type:"image"};class Di{constructor(t,e=Object.assign({},ki),n){this.parameters=e,this.type=Ai,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dt(n),this.isInvisible="invisible"===this.parameters.size,b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof t?document.getElementById(t):t;b(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xi:new Si,this.validateStartingState()}verify(){var t=this;return(0,i.Z)(function*(){t.assertNotDestroyed();const e=yield t.render(),n=t.getAssertedRecaptcha();return n.getResponse(e)||new Promise(i=>{const r=e=>{!e||(t.tokenChangeListeners.delete(r),i(e))};t.tokenChangeListeners.add(r),t.isInvisible&&n.execute(e)})})()}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){b(!this.parameters.sitekey,this.auth,"argument-error"),b(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(t=>t(e)),"function"==typeof t)t(e);else if("string"==typeof t){const n=ii()[t];"function"==typeof n&&n(e)}}}assertNotDestroyed(){b(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var t=this;return(0,i.Z)(function*(){if(yield t.init(),!t.widgetId){let e=t.container;if(!t.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}t.widgetId=t.getAssertedRecaptcha().render(e,t.parameters)}return t.widgetId})()}init(){var t=this;return(0,i.Z)(function*(){b(x()&&!ri(),t.auth,"internal-error"),yield function(){let t=null;return new Promise(e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}(),t.recaptcha=yield t._recaptchaLoader.load(t.auth,t.auth.languageCode||void 0);const e=yield function(t){return yi.apply(this,arguments)}(t.auth);b(e,t.auth,"internal-error"),t.parameters.sitekey=e})()}getAssertedRecaptcha(){return b(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pi{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=he._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}function Ni(t,e,n){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,i.Z)(function*(t,e,n){const i=Dt(t),s=yield Vi(i,e,(0,r.m9)(n));return new Pi(s,t=>qe(i,t))})).apply(this,arguments)}function Li(t,e,n){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t);yield Fe(!1,i,"phone");const s=yield Vi(i.auth,e,(0,r.m9)(n));return new Pi(s,t=>Ze(i,t))})).apply(this,arguments)}function Fi(t,e,n){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t),s=yield Vi(i.auth,e,(0,r.m9)(n));return new Pi(s,t=>He(i,t))})).apply(this,arguments)}function Vi(t,e,n){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,i.Z)(function*(t,e,n){var i;const r=yield n.verify();try{let s;if(b("string"==typeof r,t,"argument-error"),b(n.type===Ai,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s)return b("enroll"===e.type,t,"internal-error"),(yield Hn(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{b("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;return b(n,t,"missing-multi-factor-info"),(yield _i(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=yield se(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}})).apply(this,arguments)}function ji(t,e){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,i.Z)(function*(t,e){yield Le((0,r.m9)(t),e)})).apply(this,arguments)}let qi=(()=>{class t{constructor(e){this.providerId=t.PROVIDER_ID,this.auth=Dt(e)}verifyPhoneNumber(t,e){return Vi(this.auth,t,(0,r.m9)(e))}static credential(t,e){return he._fromVerification(t,e)}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?he._fromTokenResponse(e,n):null}}return t.PROVIDER_ID="phone",t.PHONE_SIGN_IN_METHOD="phone",t})();function zi(t,e){return e?I(e):(b(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Zi extends Rt{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ne(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ne(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ne(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function $i(t){return je(t.auth,new Zi(t),t.bypassAuthState)}function Hi(t){const{auth:e,user:n}=t;return b(n,e,"internal-error"),Ve(n,new Zi(t),t.bypassAuthState)}function Wi(t){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,i.Z)(function*(t){const{auth:e,user:n}=t;return b(n,e,"internal-error"),Le(n,new Zi(t),t.bypassAuthState)})).apply(this,arguments)}class Ki{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){var t=this;return new Promise(function(){var e=(0,i.Z)(function*(e,n){t.pendingPromise={resolve:e,reject:n};try{t.eventManager=yield t.resolver._initialize(t.auth),yield t.onExecution(),t.eventManager.registerConsumer(t)}catch(i){t.reject(i)}});return function(t,n){return e.apply(this,arguments)}}())}onAuthEvent(t){var e=this;return(0,i.Z)(function*(){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=t;if(o)return void e.reject(o);const u={auth:e.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:e.user,bypassAuthState:e.bypassAuthState};try{e.resolve(yield e.getIdpTask(a)(u))}catch(l){e.reject(l)}})()}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return $i;case"linkViaPopup":case"linkViaRedirect":return Wi;case"reauthViaPopup":case"reauthViaRedirect":return Hi;default:g(this.auth,"internal-error")}}resolve(t){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qi=new k(2e3,1e4);function Yi(t,e,n){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,i.Z)(function*(t,e,n){const i=Dt(t);v(t,e,pe);const r=zi(i,n);return new ir(i,"signInViaPopup",e,r).executeNotNull()})).apply(this,arguments)}function Xi(t,e,n){return tr.apply(this,arguments)}function tr(){return(tr=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t);v(i.auth,e,pe);const s=zi(i.auth,n);return new ir(i.auth,"reauthViaPopup",e,s,i).executeNotNull()})).apply(this,arguments)}function er(t,e,n){return nr.apply(this,arguments)}function nr(){return(nr=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t);v(i.auth,e,pe);const s=zi(i.auth,n);return new ir(i.auth,"linkViaPopup",e,s,i).executeNotNull()})).apply(this,arguments)}let ir=(()=>{class t extends Ki{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var t=this;return(0,i.Z)(function*(){const e=yield t.execute();return b(e,t.auth,"internal-error"),e})()}onExecution(){var t=this;return(0,i.Z)(function*(){T(1===t.filter.length,"Popup operations only handle one event");const e=ei();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],e),t.authWindow.associatedEvent=e,t.resolver._originValidation(t.auth).catch(e=>{t.reject(e)}),t.resolver._isIframeWebStorageSupported(t.auth,e=>{e||t.reject(_(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;this.pollId=(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,Qi.get())};t()}}return t.currentPopupAction=null,t})();const rr=new Map;class sr extends Ki{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}execute(){var t=()=>super.execute,e=this;return(0,i.Z)(function*(){let n=rr.get(e.auth._key());if(!n){try{const i=(yield function(t,e){return or.apply(this,arguments)}(e.resolver,e.auth))?yield t().call(e):null;n=()=>Promise.resolve(i)}catch(i){n=()=>Promise.reject(i)}rr.set(e.auth._key(),n)}return e.bypassAuthState||rr.set(e.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(t){var e=()=>super.onAuthEvent,n=this;return(0,i.Z)(function*(){if("signInViaRedirect"===t.type)return e().call(n,t);if("unknown"!==t.type){if(t.eventId){const i=yield n.auth._redirectUserForId(t.eventId);if(i)return n.user=i,e().call(n,t);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,i.Z)(function*(){})()}cleanUp(){}}function or(){return(or=(0,i.Z)(function*(t,e){const n=dr(e),i=hr(t);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(n));return yield i._remove(n),r})).apply(this,arguments)}function ar(t,e){return ur.apply(this,arguments)}function ur(){return(ur=(0,i.Z)(function*(t,e){return hr(t)._set(dr(e),"true")})).apply(this,arguments)}function lr(){rr.clear()}function cr(t,e){rr.set(t._key(),e)}function hr(t){return I(t._redirectPersistence)}function dr(t){return pt("pendingRedirect",t.config.apiKey,t.name)}function fr(t,e,n){return function(t,e,n){return pr.apply(this,arguments)}(t,e,n)}function pr(){return(pr=(0,i.Z)(function*(t,e,n){const i=Dt(t);v(t,e,pe);const r=zi(i,n);return yield ar(r,i),r._openRedirect(i,e,"signInViaRedirect")})).apply(this,arguments)}function mr(t,e,n){return function(t,e,n){return gr.apply(this,arguments)}(t,e,n)}function gr(){return(gr=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t);v(i.auth,e,pe);const s=zi(i.auth,n);yield ar(s,i.auth);const o=yield Tr(i);return s._openRedirect(i.auth,e,"reauthViaRedirect",o)})).apply(this,arguments)}function _r(t,e,n){return function(t,e,n){return yr.apply(this,arguments)}(t,e,n)}function yr(){return(yr=(0,i.Z)(function*(t,e,n){const i=(0,r.m9)(t);v(i.auth,e,pe);const s=zi(i.auth,n);yield Fe(!1,i,e.providerId),yield ar(s,i.auth);const o=yield Tr(i);return s._openRedirect(i.auth,e,"linkViaRedirect",o)})).apply(this,arguments)}function vr(t,e){return wr.apply(this,arguments)}function wr(){return(wr=(0,i.Z)(function*(t,e){return yield Dt(t)._initializationPromise,br(t,e,!1)})).apply(this,arguments)}function br(t,e){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,i.Z)(function*(t,e,n=!1){const i=Dt(t),r=zi(i,e),s=yield new sr(i,r,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})).apply(this,arguments)}function Tr(t){return Er.apply(this,arguments)}function Er(){return(Er=(0,i.Z)(function*(t){const e=ei(`${t.uid}:::`);return t._redirectEventId=e,yield t.auth._setRedirectUser(t),yield t.auth._persistUserIfCurrent(t),e})).apply(this,arguments)}class Ir{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xr(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!xr(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(_(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sr(t))}saveEventToCache(t){this.cachedEventUids.add(Sr(t)),this.lastProcessedEventTime=Date.now()}}function Sr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function xr({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}function Ar(t){return kr.apply(this,arguments)}function kr(){return(kr=(0,i.Z)(function*(t,e={}){return R(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pr=/^https?/;function Nr(){return(Nr=(0,i.Z)(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield Ar(t);for(const i of e)try{if(Or(i))return}catch(n){}g(t,"unauthorized-domain")})).apply(this,arguments)}function Or(t){const e=S(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Pr.test(n))return!1;if(Dr.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Lr=new k(3e4,6e4);function Rr(){const t=ii().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Fr=null;function Mr(t){return Fr=Fr||function(t){return new Promise((e,n)=>{var i,r,s;function o(){Rr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rr(),n(_(t,"network-request-failed"))},timeout:Lr.get()})}if(null===(r=null===(i=ii().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=ii().gapi)||void 0===s?void 0:s.load)){const e=wi("iframefcb");return ii()[e]=()=>{gapi.load?o():n(_(t,"network-request-failed"))},vi(`https://apis.google.com/js/api.js?onload=${e}`).catch(t=>n(t))}o()}}).catch(t=>{throw Fr=null,t})}(t),Fr}const Vr=new k(5e3,15e3),Br={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ur(t){const e=t.config;b(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?D(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:s.SDK_VERSION},o=jr.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${(0,r.xO)(i).slice(1)}`}function qr(){return qr=(0,i.Z)(function*(t){const e=yield Mr(t),n=ii().gapi;return b(n,t,"internal-error"),e.open({where:document.body,url:Ur(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Br,dontclear:!0},e=>new Promise(function(){var n=(0,i.Z)(function*(n,i){yield e.restyle({setHideOnLeave:!1});const r=_(t,"network-request-failed"),s=ii().setTimeout(()=>{i(r)},Vr.get());function o(){ii().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{i(r)})});return function(t,e){return n.apply(this,arguments)}}()))}),qr.apply(this,arguments)}const zr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function $r(t,e,n,i,o,a){b(t.config.authDomain,t,"auth-domain-config-required"),b(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:s.SDK_VERSION,eventId:o};if(e instanceof pe){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",(0,r.xb)(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))u[t]=e}if(e instanceof me){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(u.scopes=t.join(","))}t.tenantId&&(u.tid=t.tenantId);const l=u;for(const r of Object.keys(l))void 0===l[r]&&delete l[r];return`${function({config:t}){return t.emulator?D(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${(0,r.xO)(l).slice(1)}`}const Hr="webStorageSupport",Wr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xn,this._completeRedirectFn=br,this._overrideRedirectResult=cr}_openPopup(t,e,n,s){var o=this;return(0,i.Z)(function*(){var i;T(null===(i=o.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");const a=$r(t,e,n,S(),s);return function(t,e,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const l=Object.assign(Object.assign({},zr),{width:i.toString(),height:s.toString(),top:o,left:a}),c=(0,r.z$)().toLowerCase();n&&(u=vt(c)?"_blank":n),_t(c)&&(e=e||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((t,[e,n])=>`${t}${e}=${n},`,"");if(function(t=(0,r.z$)()){var e;return Et(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",u),new Zr(null);const d=window.open(e||"",u,h);b(d,t,"popup-blocked");try{d.focus()}catch(f){}return new Zr(d)}(t,a,ei())})()}_openRedirect(t,e,n,r){var s=this;return(0,i.Z)(function*(){return yield s._originValidation(t),i=$r(t,e,n,S(),r),ii().location.href=i,new Promise(()=>{});var i})()}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}initAndGetManager(t){var e=this;return(0,i.Z)(function*(){const n=yield function(t){return qr.apply(this,arguments)}(t),i=new Ir(t);return n.register("authEvent",e=>(b(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:i.onEvent(e.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),e.eventManagers[t._key()]={manager:i},e.iframes[t._key()]=n,i})()}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Hr,{type:Hr},n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Hr];void 0!==r&&e(!!r),g(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=function(t){return Nr.apply(this,arguments)}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return St()||yt()||Et()}};class Gr extends class{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return C("unexpected MultiFactorSessionType")}}}{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Gr(t)}_finalizeEnroll(t,e,n){return function(t,e){return R(t,"POST","/v2/accounts/mfaEnrollment:finalize",L(t,e))}(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return function(t,e){return R(t,"POST","/v2/accounts/mfaSignIn:finalize",L(t,e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Kr=(()=>{class t{constructor(){}static assertion(t){return Gr._fromCredential(t)}}return t.FACTOR_ID="phone",t})();var Qr,Yr="@firebase/auth";class Jr{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}getToken(t){var e=this;return(0,i.Z)(function*(){return e.assertAuthConfigured(),yield e.auth._initializationPromise,e.auth.currentUser?{accessToken:yield e.auth.currentUser.getIdToken(t)}:null})()}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);!e||(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,r.Pz)("authIdTokenMaxAge"),Qr="Browser",(0,s._registerComponent)(new u.wA("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((t,n)=>{b(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),b(!(null==s?void 0:s.includes(":")),"argument-error",{appName:t.name});const i={apiKey:r,authDomain:s,clientPlatform:Qr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xt(Qr)},o=new kt(t,n,i);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(I);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),(0,s._registerComponent)(new u.wA("auth-internal",t=>{const e=Dt(t.getProvider("auth").getImmediate());return new Jr(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)(Yr,"0.21.0",void 0),(0,s.registerVersion)(Yr,"0.21.0","esm2017")},3854:function(t,e,n){"use strict";n.d(e,{BH:function(){return A},LL:function(){return P},ZR:function(){return D},gQ:function(){return W},zI:function(){return E},hu:function(){return i},g5:function(){return r},US:function(){return o},tV:function(){return l},h$:function(){return a},L:function(){return u},$s:function(){return it},r3:function(){return V},Sg:function(){return k},ne:function(){return G},p$:function(){return c},vZ:function(){return q},ZB:function(){return h},gK:function(){return J},pd:function(){return H},aH:function(){return S},Pz:function(){return x},m9:function(){return rt},z$:function(){return f},GJ:function(){return M},jU:function(){return g},ru:function(){return _},xb:function(){return j},w1:function(){return v},hl:function(){return C},uI:function(){return p},UG:function(){return m},Yr:function(){return w},b$:function(){return y},G6:function(){return b},w9:function(){return F},cI:function(){return O},UI:function(){return U},xO:function(){return Z},zd:function(){return $},DV:function(){return B},ug:function(){return nt},dS:function(){return et},Wl:function(){return L},Dv:function(){return Y},Wj:function(){return X},lb:function(){return tt},eu:function(){return T}});const i=function(t,e){if(!t)throw r(e)},r=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,u=a?t[r+2]:0;let l=(15&o)<<2|u>>6,c=63&u;a||(c=64,s||(l=64)),i.push(n[e>>2],n[(3&e)<<4|o>>4],n[l],n[c])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw Error();i.push(e<<2|s>>4),64!==o&&(i.push(s<<4&240|o>>2),64!==a&&i.push(o<<6&192|a))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){const e=s(t);return o.encodeByteArray(e,!0)},u=function(t){return a(t).replace(/\./g,"")},l=function(t){try{return o.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!d(n)||(t[n]=h(t[n],e[n]));return t}function d(t){return"__proto__"!==t}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function _(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){const t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return!1}function b(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){try{return"object"==typeof indexedDB}catch(t){return!1}}function T(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})}function E(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const I=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&l(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},S=()=>{var t;return null===(t=I())||void 0===t?void 0:t.config},x=t=>{var e;return null===(e=I())||void 0===e?void 0:e[`_${t}`]};class A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}function k(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}class D extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,D.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P.prototype.create)}}class P{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(N,(t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`})}(r,n):"Error";return new D(i,`${this.serviceName}: ${s} (${i}).`,n)}}const N=/\{\$([^}]+)}/g;function O(t){return JSON.parse(t)}function L(t){return JSON.stringify(t)}const R=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=O(l(s[0])||""),n=O(l(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:i,signature:r}},F=function(t){const e=R(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},M=function(t){const e=R(t).claims;return"object"==typeof e&&!0===e.admin};function V(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function j(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function q(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(z(n)&&z(s)){if(!q(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function z(t){return null!==t&&"object"==typeof t}function Z(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function H(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class W{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"==typeof t)for(let c=0;c<16;c++)n[c]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let c=0;c<16;c++)n[c]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let c=16;c<80;c++){const t=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(t<<1|t>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(i=u^o&(a^u),r=1518500249):(i=o^a^u,r=1859775393):c<60?(i=o&a|u&(o|a),r=2400959708):(i=o^a^u,r=3395469782);const t=(s<<5|s>>>27)+i+l+r+n[c]&4294967295;l=u,u=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<e;){if(0===s)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<e;)if(r[s]=t[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let e=24;e>=0;e-=8)t[n]=this.chain_[i]>>e&255,++n;return t}}function G(t,e){const n=new K(t,e);return n.subscribe.bind(n)}class K{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=Q),void 0===i.error&&(i.error=Q),void 0===i.complete&&(i.complete=Q);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}}),this.observers.push(i),r}unsubscribeOne(t){void 0===this.observers||void 0===this.observers[t]||(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q(){}const Y=function(t,e,n,i){let r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function J(t,e){return`${t} failed: ${e} argument `}function X(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(J(t,e)+"must be a valid function.")}function tt(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(J(t,e)+"must be a valid context object.")}const et=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const e=s-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),s=65536+(e<<10)+(t.charCodeAt(r)-56320)}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},nt=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};function it(t,e=1e3,n=2){const i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function rt(t){return t&&t._delegate?t._delegate:t}},4216:function(t,e){!function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function s(t){return"_leaflet_id"in t||(t._leaflet_id=++r),t._leaflet_id}function o(t,e,n){var i,r,s,o;return o=function(){i=!1,r&&(s.apply(n,r),r=!1)},s=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(o,e),i=!0)},s}function a(t,e,n){var i=e[1],r=e[0],s=i-r;return t===i&&n?t:((t-r)%s+s)%s+r}function u(){return!1}function l(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return c(t).split(/\s+/)}function d(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var p=/\{ *([\w_ -]+) *\}/g;function m(t,e){return t.replace(p,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function b(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var C=window.requestAnimationFrame||v("RequestAnimationFrame")||b,T=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||C!==b)return C.call(window,i(t,e));t.call(e)}function I(t){t&&T.call(window,t)}var S={__proto__:null,extend:e,create:n,bind:i,get lastId(){return r},stamp:s,throttle:o,wrapNum:a,falseFn:u,formatNum:l,trim:c,splitWords:h,setOptions:d,getParamString:f,template:m,isArray:g,indexOf:_,emptyImageUrl:y,requestFn:C,cancelFn:T,requestAnimFrame:E,cancelAnimFrame:I};function x(){}x.extend=function(t){var i=function(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=i.__super__=this.prototype,s=n(r);for(var o in s.constructor=i,i.prototype=s,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(i[o]=this[o]);return t.statics&&e(i,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[s].concat(t.includes))),e(s,t),delete s.statics,delete s.includes,s.options&&(s.options=r.options?n(r.options):{},e(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},i},x.include=function(t){var n=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},x.mergeOptions=function(t){return e(this.prototype.options,t),this},x.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,s=(t=h(t)).length;r<s;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=h(t);for(var r=1===arguments.length,s=0,o=t.length;s<o;s++)r?this._off(t[s]):this._off(t[s],e,n)}else delete this._events;return this},_on:function(t,e,n,i){if("function"==typeof e){if(!1===this._listens(t,e,n)){n===this&&(n=void 0);var r={fn:e,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(r)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var i,r,s;if(this._events&&(i=this._events[t])){if(1===arguments.length){if(this._firingCount)for(r=0,s=i.length;r<s;r++)i[r].fn=u;return void delete this._events[t]}if("function"!=typeof e)return void console.warn("wrong listener type: "+typeof e);var o=this._listens(t,e,n);!1!==o&&(this._firingCount&&(i[o].fn=u,this._events[t]=i=i.slice()),i.splice(o,1))}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,a=s.length;o<a;o++){var u=s[o],l=u.fn;u.once&&this.off(t,l,u.ctx),l.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e,n,i){"string"!=typeof t&&console.warn('"string" type argument expected');var r=e;"function"!=typeof e&&(i=!!e,r=void 0,n=void 0);var s=this._events&&this._events[t];if(s&&s.length&&!1!==this._listens(t,r,n))return!0;if(i)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e,n,i))return!0;return!1},_listens:function(t,e,n){if(!this._events)return!1;var i=this._events[t]||[];if(!e)return!!i.length;n===this&&(n=void 0);for(var r=0,s=i.length;r<s;r++)if(i[r].fn===e&&i[r].ctx===n)return r;return!1},once:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e,!0);else for(var r=0,s=(t=h(t)).length;r<s;r++)this._on(t[r],e,n,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var k=x.extend(A);function D(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var P=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function N(t,e,n){return t instanceof D?t:g(t)?new D(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,e,n)}function O(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function R(t,e){return!t||t instanceof O?t:new O(t,e)}function F(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function M(t,e){return t instanceof F?t:new F(t,e)}function V(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function B(t,e,n){return t instanceof V?t:g(t)&&"object"!=typeof t[0]?3===t.length?new V(t[0],t[1],t[2]):2===t.length?new V(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new V(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new V(t,e,n)}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(t){var e=(t=N(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=N(t)).x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},O.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof D||"number"==typeof t[0]||"x"in t)e=n=N(t);else if(n=(t=R(t)).max,!(e=t.min)||!n)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return N(this.min.x,this.max.y)},getTopRight:function(){return N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof D?N(t):R(t))instanceof O?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max;return r.x>=e.x&&i.x<=n.x&&r.y>=e.y&&i.y<=n.y},overlaps:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max;return r.x>e.x&&i.x<n.x&&r.y>e.y&&i.y<n.y},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,i=Math.abs(e.x-n.x)*t,r=Math.abs(e.y-n.y)*t;return R(N(e.x-i,e.y-r),N(n.x+i,n.y+r))},equals:function(t){return!!t&&(t=R(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},F.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof V)e=t,n=t;else{if(!(t instanceof F))return t?this.extend(B(t)||M(t)):this;if(n=t._northEast,!(e=t._southWest)||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new V(e.lat,e.lng),this._northEast=new V(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new F(new V(e.lat-i,e.lng-r),new V(n.lat+i,n.lng+r))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof V||"lat"in t?B(t):M(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof F?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=M(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast();return r.lat>=e.lat&&i.lat<=n.lat&&r.lng>=e.lng&&i.lng<=n.lng},overlaps:function(t){t=M(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast();return r.lat>e.lat&&i.lat<n.lat&&r.lng>e.lng&&i.lng<n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=M(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},V.prototype={equals:function(t,e){return!!t&&(t=B(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,B(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return M([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new V(this.lat,this.lng,this.alt)}};var j,U={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new O(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng;return new V(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var s=t.getSouthWest(),o=t.getNorthEast();return new F(new V(s.lat-i,s.lng-r),new V(o.lat-i,o.lng-r))}},q=e({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,s=Math.sin((e.lat-t.lat)*n/2),o=Math.sin((e.lng-t.lng)*n/2),a=s*s+Math.cos(i)*Math.cos(r)*o*o,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),z={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new D(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new V((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(j=6378137*Math.PI,new O([-j,-j],[j,j]))};function Z(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function $(t,e,n,i){return new Z(t,e,n,i)}Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new D((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var H=e({},q,{code:"EPSG:3857",projection:z,transformation:function(){var t=.5/(Math.PI*z.R);return $(t,.5,-t,.5)}()}),W=e({},H,{code:"EPSG:900913"});function G(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){var n,i,r,s,o,a,u="";for(n=0,r=t.length;n<r;n++){for(i=0,s=(o=t[n]).length;i<s;i++)u+=(i?"L":"M")+(a=o[i]).x+" "+a.y;u+=e?Nt.svg?"z":"x":""}return u||"M0 0"}var Q=document.documentElement.style,Y="ActiveXObject"in window,J=Y&&!document.addEventListener,X="msLaunchUri"in navigator&&!("documentMode"in document),tt=Pt("webkit"),et=Pt("android"),nt=Pt("android 2")||Pt("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=et&&Pt("Google")&&it<537&&!("AudioNode"in window),st=!!window.opera,ot=!X&&Pt("chrome"),at=Pt("gecko")&&!tt&&!st&&!Y,ut=!ot&&Pt("safari"),lt=Pt("phantom"),ct="OTransition"in Q,ht=0===navigator.platform.indexOf("Win"),dt=Y&&"transition"in Q,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,pt="MozPerspective"in Q,mt=!window.L_DISABLE_3D&&(dt||ft||pt)&&!ct&&!lt,gt="undefined"!=typeof orientation||Pt("mobile"),_t=gt&&tt,yt=gt&&ft,vt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!vt),bt="ontouchstart"in window||!!window.TouchEvent,Ct=!window.L_NO_TOUCH&&(bt||wt),Tt=gt&&st,Et=gt&&at,It=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,St=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(n){}return t}(),xt=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!G("svg").createSVGRect),kt=!!At&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),Dt=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}();function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Nt={ie:Y,ielt9:J,edge:X,webkit:tt,android:et,android23:nt,androidStock:rt,opera:st,chrome:ot,gecko:at,safari:ut,phantom:lt,opera12:ct,win:ht,ie3d:dt,webkit3d:ft,gecko3d:pt,any3d:mt,mobile:gt,mobileWebkit:_t,mobileWebkit3d:yt,msPointer:vt,pointer:wt,touch:Ct,touchNative:bt,mobileOpera:Tt,mobileGecko:Et,retina:It,passiveEvents:St,canvas:xt,svg:At,vml:Dt,inlineSvg:kt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Ot=Nt.msPointer?"MSPointerDown":"pointerdown",Lt=Nt.msPointer?"MSPointerMove":"pointermove",Rt=Nt.msPointer?"MSPointerUp":"pointerup",Ft=Nt.msPointer?"MSPointerCancel":"pointercancel",Mt={touchstart:Ot,touchmove:Lt,touchend:Rt,touchcancel:Ft},Vt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Re(e),$t(t,e)},touchmove:$t,touchend:$t,touchcancel:$t},Bt={},jt=!1;function Ut(t,e,n){return"touchstart"===e&&(jt||(document.addEventListener(Ot,qt,!0),document.addEventListener(Lt,zt,!0),document.addEventListener(Rt,Zt,!0),document.addEventListener(Ft,Zt,!0),jt=!0)),Vt[e]?(n=Vt[e].bind(this,n),t.addEventListener(Mt[e],n,!1),n):(console.warn("wrong event specified:",e),u)}function qt(t){Bt[t.pointerId]=t}function zt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function Zt(t){delete Bt[t.pointerId]}function $t(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Bt)e.touches.push(Bt[n]);e.changedTouches=[e],t(e)}}var Ht,Wt,Gt,Kt,Qt,Yt=fe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jt=fe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xt="webkitTransition"===Jt||"OTransition"===Jt?Jt+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ne(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ie(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function se(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function oe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ae(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=he(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ue(t,e){if(void 0!==t.classList)for(var n=h(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!ae(t,e)){var s=he(t);ce(t,(s?s+" ":"")+e)}}function le(t,e){void 0!==t.classList?t.classList.remove(e):ce(t,c((" "+he(t)+" ").replace(" "+e+" "," ")))}function ce(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function he(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function fe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function pe(t,e,n){var i=e||new D(0,0);t.style[Yt]=(Nt.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function me(t,e){t._leaflet_pos=e,Nt.any3d?pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ge(t){return t._leaflet_pos||new D(0,0)}if("onselectstart"in document)Ht=function(){Ie(window,"selectstart",Re)},Wt=function(){xe(window,"selectstart",Re)};else{var _e=fe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ht=function(){if(_e){var t=document.documentElement.style;Gt=t[_e],t[_e]="none"}},Wt=function(){_e&&(document.documentElement.style[_e]=Gt,Gt=void 0)}}function ye(){Ie(window,"dragstart",Re)}function ve(){xe(window,"dragstart",Re)}function we(t){for(;-1===t.tabIndex;)t=t.parentNode;!t.style||(be(),Kt=t,Qt=t.style.outline,t.style.outline="none",Ie(window,"keydown",be))}function be(){!Kt||(Kt.style.outline=Qt,Kt=void 0,Qt=void 0,xe(window,"keydown",be))}function Ce(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Te(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ee={__proto__:null,TRANSFORM:Yt,TRANSITION:Jt,TRANSITION_END:Xt,get:te,getStyle:ee,create:ne,remove:ie,empty:re,toFront:se,toBack:oe,hasClass:ae,addClass:ue,removeClass:le,setClass:ce,getClass:he,setOpacity:de,testProp:fe,setTransform:pe,setPosition:me,getPosition:ge,get disableTextSelection(){return Ht},get enableTextSelection(){return Wt},disableImageDrag:ye,enableImageDrag:ve,preventOutline:we,restoreOutline:be,getSizedParentNode:Ce,getScale:Te};function Ie(t,e,n,i){if(e&&"object"==typeof e)for(var r in e)De(t,r,e[r],n);else for(var s=0,o=(e=h(e)).length;s<o;s++)De(t,e[s],n,i);return this}var Se="_leaflet_events";function xe(t,e,n,i){if(1===arguments.length)Ae(t),delete t[Se];else if(e&&"object"==typeof e)for(var r in e)Pe(t,r,e[r],n);else if(e=h(e),2===arguments.length)Ae(t,function(t){return-1!==_(e,t)});else for(var s=0,o=e.length;s<o;s++)Pe(t,e[s],n,i);return this}function Ae(t,e){for(var n in t[Se]){var i=n.split(/\d/)[0];(!e||e(i))&&Pe(t,i,null,null,n)}}var ke={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function De(t,e,n,i){var r=e+s(n)+(i?"_"+s(i):"");if(t[Se]&&t[Se][r])return this;var o=function(e){return n.call(i||t,e||window.event)},a=o;!Nt.touchNative&&Nt.pointer&&0===e.indexOf("touch")?o=Ut(t,e,o):Nt.touch&&"dblclick"===e?o=function(t,e){t.addEventListener("dblclick",e);var n,i=0;function r(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var r=Me(t);if(!r.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||r.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var s=Date.now();s-i<=200?2==++n&&e(function(t){var e,n,i={};for(n in t)i[n]=(e=t[n])&&e.bind?e.bind(t):e;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}(t)):n=1,i=s}}}else n=t.detail}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(ke[e]||e,o,!!Nt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?t.addEventListener(ke[e],o=function(e){e=e||window.event,Ue(t,e)&&a(e)},!1):t.addEventListener(e,a,!1):t.attachEvent("on"+e,o),t[Se]=t[Se]||{},t[Se][r]=o}function Pe(t,e,n,i,r){r=r||e+s(n)+(i?"_"+s(i):"");var o=t[Se]&&t[Se][r];if(!o)return this;!Nt.touchNative&&Nt.pointer&&0===e.indexOf("touch")?function(t,e,n){Mt[e]?t.removeEventListener(Mt[e],n,!1):console.warn("wrong event specified:",e)}(t,e,o):Nt.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,o):"removeEventListener"in t?t.removeEventListener(ke[e]||e,o,!1):t.detachEvent("on"+e,o),t[Se][r]=null}function Ne(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Oe(t){return De(t,"wheel",Ne),this}function Le(t){return Ie(t,"mousedown touchstart dblclick contextmenu",Ne),t._leaflet_disable_click=!0,this}function Re(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Fe(t){return Re(t),Ne(t),this}function Me(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function Ve(t,e){if(!e)return new D(t.clientX,t.clientY);var n=Te(e),i=n.boundingClientRect;return new D((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Be=Nt.linux&&Nt.chrome?window.devicePixelRatio:Nt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function je(t){return Nt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Be:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Ue(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}var qe={__proto__:null,on:Ie,off:xe,stopPropagation:Ne,disableScrollPropagation:Oe,disableClickPropagation:Le,preventDefault:Re,stop:Fe,getPropagationPath:Me,getMousePosition:Ve,getWheelDelta:je,isExternalTarget:Ue,addListener:Ie,removeListener:xe},ze=k.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ge(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),me(this._el,n),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ze=k.extend({options:{crs:H,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jt&&Nt.any3d&&!Nt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,Xt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(B(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n,i.pan&&i.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(Nt.any3d?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(Nt.any3d?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),s=(t instanceof D?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),o=this.containerPointToLatLng(r.add(s));return this.setView(o,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():M(t);var n=N(e.paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var s=i.subtract(n).divideBy(2),o=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r);return{center:this.unproject(o.add(a).divideBy(2).add(s),r),zoom:r}},fitBounds:function(t,e){if(!(t=M(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=N(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ze,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ue(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!Nt.any3d)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),s=this.getSize(),o=this._zoom;t=B(t),e=void 0===e?o:e;var a=Math.max(s.x,s.y),u=a*this.getZoomScale(o,e),l=r.distanceTo(i)||1,c=1.42,h=c*c;function d(t){var e=(u*u-a*a+(t?-1:1)*h*h*l*l)/(2*(t?u:a)*h*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);function g(t){return a*(p(m)*function(t){return f(t)/p(t)}(m+c*t)-f(m))/h}var _=Date.now(),y=(d(1)-m)/c,v=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),(function n(){var s=(Date.now()-_)/v,u=function(t){return 1-Math.pow(1-t,1.5)}(s)*y;s<=1?(this._flyToFrame=E(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(g(u)/l)),o),this.getScaleZoom(a/function(t){return a*(p(m)/p(m+c*t))}(u),o),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=M(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,M(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=N((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),s=this.project(t),o=this.getPixelBounds(),a=R([o.min.add(n),o.max.subtract(i)]),u=a.getSize();if(!a.contains(s)){this._enforcingBounds=!0;var l=s.subtract(a.getCenter()),c=a.extend(s).getSize().subtract(u);r.x+=l.x<0?-c.x:c.x,r.y+=l.y<0?-c.y:c.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),s=n.divideBy(2).round(),o=r.divideBy(2).round(),a=s.subtract(o);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new V(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var s={latlng:e,bounds:n,timestamp:t.timestamp};for(var o in t.coords)"number"==typeof t.coords[o]&&(s[o]=t.coords[o]);this.fire("locationfound",s)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ie(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ne("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new F(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=M(t),n=N(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),s=this.getMaxZoom(),o=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),l=R(this.project(a,i),this.project(o,i)).getSize(),c=Nt.any3d?this.options.zoomSnap:1,h=u.x/l.x,d=u.y/l.y,f=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(f,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(s,i))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new O(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs,i=n.zoom(t*n.scale(e=void 0===e?this._zoom:e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(N(t),e)},layerPointToLatLng:function(t){var e=N(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(B(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(M(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return N(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return N(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(N(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Ve(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=te(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ie(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Nt.any3d,ue(t,"leaflet-container"+(Nt.touch?" leaflet-touch":"")+(Nt.retina?" leaflet-retina":"")+(Nt.ielt9?" leaflet-oldie":"")+(Nt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ue(t.markerPane,"leaflet-zoom-hide"),ue(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){me(this._mapPane,new D(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,n)._move(t,e)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?xe:Ie;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Nt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)&&(r&&!Ue(o,t)||(i.push(n),r))||o===this._container)break;o=o.parentNode}return!i.length&&!a&&!r&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&we(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var s=this._findEventTargets(t,n);if(i){for(var o=[],a=0;a<i.length;a++)i[a].listens(n,!0)&&o.push(i[a]);s=o.concat(s)}if(s.length){"contextmenu"===n&&Re(t);var u=s[0],l={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var c=u.getLatLng&&(!u._radius||u._radius<=10);l.containerPoint=c?this.latLngToContainerPoint(u.getLatLng()):this.mouseEventToContainerPoint(t),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=c?u.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(a=0;a<s.length;a++)if(s[a].fire(n,l,!0),l.originalEvent._stopped||!1===s[a].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ge(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),s=new O(i.subtract(r),i.add(r)),o=this._getBoundsOffset(s,n,e);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?t:this.unproject(i.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new O(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),s=i.max.subtract(t.max);return new D(this._rebound(r.x,-s.x),this._rebound(r.y,-s.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=Nt.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Yt,n=this._proxy.style[e];pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(E(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,r){!this._mapPane||(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var $e=x.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return ue(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),He=function(t){return new $e(t)};Ze.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ne("div",e+"control-container",this._container);function i(i,r){t[i+r]=ne("div",e+i+" "+e+r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ie(this._controlCorners[t]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var We=$e.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return $e.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ne("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Le(e),Oe(e);var i=this._section=ne("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Ie(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=ne("a",t+"-toggle",e);r.href="#",r.title="Layers",r.setAttribute("role","button"),Ie(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Re(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ne("div",t+"-base",i),this._separator=ne("div",t+"-separator",i),this._overlaysList=ne("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)this._addItem(i=this._layers[n]),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&r>1)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+s(this),i),this._layerControlInputs.push(e),e.layerId=s(t.layer),Ie(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)e=this._getLayer((t=n[s]).layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])&&this._map.removeLayer(r[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=this._getLayer((t=n[r]).layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;Ie(t,"click",Re),this.expand(),setTimeout(function(){xe(t,"click",Re)})}}),Ge=$e.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ne("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var s=ne("a",n,i);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Le(s),Ie(s,"click",Fe),Ie(s,"click",r,this),Ie(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";le(this._zoomInButton,e),le(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ue(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ue(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ze.mergeOptions({zoomControl:!0}),Ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ge,this.addControl(this.zoomControl))});var Ke=$e.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ne("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ne("div",e,n)),t.imperial&&(this._iScale=ne("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(n=this._getRoundNum(e=r/5280),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Qe=$e.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Nt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ne("div","leaflet-control-attribution"),Le(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});Ze.mergeOptions({attributionControl:!0}),Ze.addInitHook(function(){this.options.attributionControl&&(new Qe).addTo(this)});$e.Layers=We,$e.Zoom=Ge,$e.Scale=Ke,$e.Attribution=Qe,He.layers=function(t,e,n){return new We(t,e,n)},He.zoom=function(t){return new Ge(t)},He.scale=function(t){return new Ke(t)},He.attribution=function(t){return new Qe(t)};var Ye=x.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ye.addTo=function(t,e){return t.addHandler(e,this),this};var Je,Xe={Events:A},tn=Nt.touch?"touchstart mousedown":"mousedown",en=k.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){d(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ie(this._dragStartTarget,tn,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(en._dragging===this&&this.finishDrag(!0),xe(this._dragStartTarget,tn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ae(this._element,"leaflet-zoom-anim"))){if(t.touches&&1!==t.touches.length)return void(en._dragging===this&&this.finishDrag());if(!(en._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(en._dragging=this,this._preventOutline&&we(this._element),ye(),Ht(),this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ce(this._element);this._startPoint=new D(e.clientX,e.clientY),this._startPos=ge(this._element),this._parentScale=Te(n);var i="mousedown"===t.type;Ie(document,i?"mousemove":"touchmove",this._onMove,this),Ie(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new D(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Re(t),this._moved||(this.fire("dragstart"),this._moved=!0,ue(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){le(document.body,"leaflet-dragging"),this._lastTarget&&(le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),xe(document,"mousemove touchmove",this._onMove,this),xe(document,"mouseup touchend touchcancel",this._onUp,this),ve(),Wt(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,en._dragging=!1}});function nn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,sn(t,i,e,0,n-1);var r,s=[];for(r=0;r<n;r++)i[r]&&s.push(t[r]);return s}(t=function(t,e){for(var n=[t[0]],i=1,r=0,s=t.length;i<s;i++)ln(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<s-1&&n.push(t[s-1]),n}(t,n),n)}function rn(t,e,n){return Math.sqrt(cn(t,e,n,!0))}function sn(t,e,n,i,r){var s,o,a,u=0;for(o=i+1;o<=r-1;o++)(a=cn(t[o],t[i],t[r],!0))>u&&(s=o,u=a);u>n&&(e[s]=1,sn(t,e,n,i,s),sn(t,e,n,s,r))}function on(t,e,n,i,r){var s,o,a,u=i?Je:un(t,n),l=un(e,n);for(Je=l;;){if(!(u|l))return[t,e];if(u&l)return!1;a=un(o=an(t,e,s=u||l,n,r),n),s===u?(t=o,u=a):(e=o,l=a)}}function an(t,e,n,i,r){var s,o,a=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(s=t.x+a*(c.y-t.y)/u,o=c.y):4&n?(s=t.x+a*(l.y-t.y)/u,o=l.y):2&n?(s=c.x,o=t.y+u*(c.x-t.x)/a):1&n&&(s=l.x,o=t.y+u*(l.x-t.x)/a),new D(s,o,r)}function un(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function ln(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function cn(t,e,n,i){var r,s=e.x,o=e.y,a=n.x-s,u=n.y-o,l=a*a+u*u;return l>0&&((r=((t.x-s)*a+(t.y-o)*u)/l)>1?(s=n.x,o=n.y):r>0&&(s+=a*r,o+=u*r)),a=t.x-s,u=t.y-o,i?a*a+u*u:new D(s,o)}function hn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function dn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),hn(t)}function fn(t,e){var n,i,r,s,o,a,u,l;if(!t||0===t.length)throw new Error("latlngs not passed");hn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c=[];for(var h in t)c.push(e.project(B(t[h])));var d=c.length;for(n=0,i=0;n<d-1;n++)i+=c[n].distanceTo(c[n+1])/2;if(0===i)l=c[0];else for(n=0,s=0;n<d-1;n++)if((s+=r=(o=c[n]).distanceTo(a=c[n+1]))>i){l=[a.x-(u=(s-i)/r)*(a.x-o.x),a.y-u*(a.y-o.y)];break}return e.unproject(N(l))}var pn={__proto__:null,simplify:nn,pointToSegmentDistance:rn,closestPointOnSegment:function(t,e,n){return cn(t,e,n)},clipSegment:on,_getEdgeIntersection:an,_getBitCode:un,_sqClosestPointOnSegment:cn,isFlat:hn,_flat:dn,polylineCenter:fn};function mn(t,e,n){var i,r,s,o,a,u,l,c,h,d=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=un(t[r],e);for(o=0;o<4;o++){for(c=d[o],i=[],r=0,s=(l=t.length)-1;r<l;s=r++)u=t[s],(a=t[r])._code&c?u._code&c||((h=an(u,a,c,e,n))._code=un(h,e),i.push(h)):(u._code&c&&((h=an(u,a,c,e,n))._code=un(h,e),i.push(h)),i.push(a));t=i}return t}function gn(t,e){var n,i,r,s,o,a,u,l;if(!t||0===t.length)throw new Error("latlngs not passed");hn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c=[];for(var h in t)c.push(e.project(B(t[h])));var d=c.length;for(a=u=l=0,n=0,i=d-1;n<d;i=n++)u+=((r=c[n]).x+(s=c[i]).x)*(o=r.y*s.x-s.y*r.x),l+=(r.y+s.y)*o,a+=3*o;return e.unproject(N(0===a?c[0]:[u/a,l/a]))}var _n={__proto__:null,clipPolygon:mn,polygonCenter:gn},yn={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new V(t.y,t.x)},bounds:new O([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,s=Math.sqrt(1-r*r),o=s*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),s/2);return i=-n*Math.log(Math.max(a,1e-10)),new D(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,s=Math.sqrt(1-r*r),o=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(o),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=l=Math.PI/2-2*Math.atan(o*e)-a;return new V(a*n,t.x*n/i)}},wn={__proto__:null,LonLat:yn,Mercator:vn,SphericalMercator:z},bn=e({},q,{code:"EPSG:3395",projection:vn,transformation:function(){var t=.5/(Math.PI*vn.R);return $(t,.5,-t,.5)}()}),Cn=e({},q,{code:"EPSG:4326",projection:yn,transformation:$(1/180,1,-1/180,.5)}),Tn=e({},U,{projection:yn,transformation:$(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});U.Earth=q,U.EPSG3395=bn,U.EPSG3857=H,U.EPSG900913=W,U.EPSG4326=Cn,U.Simple=Tn;var En=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ze.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return s(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var In=En.extend({initialize:function(t,e){var n,i;if(d(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),Sn=In.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),In.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),In.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),xn=x.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=N(i),s=N("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Nt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var An=xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof An.imagePath&&(An.imagePath=this._detectIconPath()),(this.options.imagePath||An.imagePath)+xn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var i=e.exec(t);return i&&i[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ne("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-"leaflet.css".length-1):""}}),kn=Ye.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new en(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ue(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,s=ge(e._icon),o=n.getPixelBounds(),a=n.getPixelOrigin(),u=R(o.min._subtract(a).add(r),o.max._subtract(a).subtract(r));if(!u.contains(s)){var l=N((Math.max(u.max.x,s.x)-u.max.x)/(o.max.x-u.max.x)-(Math.min(u.min.x,s.x)-u.min.x)/(o.min.x-u.min.x),(Math.max(u.max.y,s.y)-u.max.y)/(o.max.y-u.max.y)-(Math.min(u.min.y,s.y)-u.min.y)/(o.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ge(e._icon),r=e._map.layerPointToLatLng(i);n&&me(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=En.extend({options:{icon:new An,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ue(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(n,"focus",this._panOnFocus,this);var r=t.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&(ue(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(this._icon,"focus",this._panOnFocus,this),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),kn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new kn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?N(e.iconSize):N(0,0),i=e.iconAnchor?N(e.iconAnchor):N(0,0);t.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Pn=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nn=Pn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Pn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new O(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var On=Nn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),d(this,n),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Pn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===q.distance){var r=Math.PI/180,s=this._mRadius/q.R/r,o=n.project([e+s,t]),a=n.project([e-s,t]),u=o.add(a).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(s*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=s/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-o.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});var Ln=Pn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,s=cn,o=0,a=this._parts.length;o<a;o++)for(var u=this._parts[o],l=1,c=u.length;l<c;l++){var h=s(t,e=u[l-1],n=u[l],!0);h<i&&(i=h,r=s(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=hn(t),i=0,r=t.length;i<r;i++)n?(e[i]=B(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new D(t,t);!this._rawPxBounds||(this._pxBounds=new O([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var i,r,s=t.length;if(t[0]instanceof V){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,i,r,s,o,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,s=(a=this._rings[e]).length;n<s-1;n++)(o=on(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(o[0]),(o[1]!==a[n+1]||n===s-2)&&(u[i].push(o[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=nn(t[n],e)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,s,o,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,r=(o=(a=this._parts[n]).length)-1;i<o;r=i++)if((e||0!==i)&&rn(t,a[r],a[i])<=u)return!0;return!1}});Ln._flat=dn;var Rn=Ln.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ln.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof V&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Ln.prototype._setLatLngs.call(this,t),hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new D(e,e);if(t=new O(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var i,r=0,s=this._rings.length;r<s;r++)(i=mn(this._rings[r],t,!0)).length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,s,o,a,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(s=0,o=(u=(e=this._parts[r]).length)-1;s<u;o=s++)(n=e[s]).y>t.y!=(i=e[o]).y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||Ln.prototype._containsPoint.call(this,t,!0)}});var Fn=Sn.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=g(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var o=Mn(t,s);return o?(o.feature=Zn(t),o.defaultOptions=o.options,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(t,o),this.addLayer(o)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Mn(t,e){var n,i,r,s,o="Feature"===t.type?t.geometry:t,a=o?o.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Bn;if(!a&&!o)return null;switch(o.type){case"Point":return Vn(l,t,n=c(a),e);case"MultiPoint":for(r=0,s=a.length;r<s;r++)n=c(a[r]),u.push(Vn(l,t,n,e));return new Sn(u);case"LineString":case"MultiLineString":return i=jn(a,"LineString"===o.type?0:1,c),new Ln(i,e);case"Polygon":case"MultiPolygon":return i=jn(a,"Polygon"===o.type?1:2,c),new Rn(i,e);case"GeometryCollection":for(r=0,s=o.geometries.length;r<s;r++){var h=Mn({geometry:o.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new Sn(u);case"FeatureCollection":for(r=0,s=o.features.length;r<s;r++){var d=Mn(o.features[r],e);d&&u.push(d)}return new Sn(u);default:throw new Error("Invalid GeoJSON object.")}}function Vn(t,e,n,i){return t?t(e,n):new Dn(n,i&&i.markersInheritOptions&&i)}function Bn(t){return new V(t[1],t[0],t[2])}function jn(t,e,n){for(var i,r=[],s=0,o=t.length;s<o;s++)i=e?jn(t[s],e-1,n):(n||Bn)(t[s]),r.push(i);return r}function Un(t,e){return void 0!==(t=B(t)).alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function qn(t,e,n,i){for(var r=[],s=0,o=t.length;s<o;s++)r.push(e?qn(t[s],hn(t[s])?0:e-1,n,i):Un(t[s],i));return!e&&n&&r.push(r[0].slice()),r}function zn(t,n){return t.feature?e({},t.feature,{geometry:n}):Zn(n)}function Zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var $n={toGeoJSON:function(t){return zn(this,{type:"Point",coordinates:Un(this.getLatLng(),t)})}};function Hn(t,e){return new Fn(t,e)}Dn.include($n),On.include($n),Nn.include($n),Ln.include({toGeoJSON:function(t){var e=!hn(this._latlngs);return zn(this,{type:(e?"Multi":"")+"LineString",coordinates:qn(this._latlngs,e?1:0,!1,t)})}}),Rn.include({toGeoJSON:function(t){var e=!hn(this._latlngs),n=e&&!hn(this._latlngs[0]),i=qn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),zn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),In.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),zn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var s=Zn(r);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}}),n?zn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Wn=Hn,Gn=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=M(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&se(this._image),this},bringToBack:function(){return this._map&&oe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=M(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ne("img");ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;pe(this._image,n,e)},_reset:function(){var t=this._image,e=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();me(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Kn=Gn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ne("video");if(ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],s=0;s<n.length;s++)r.push(n[s].src);this._url=n.length>0?r:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=ne("source");a.src=this._url[o],e.appendChild(a)}}}});var Qn=Gn.extend({_initImage:function(){var t=this._image=this._url;ue(t,"leaflet-image-layer"),this._zoomAnimated&&ue(t,"leaflet-zoom-animated"),this.options.className&&ue(t,this.options.className),t.onselectstart=u,t.onmousemove=u}});var Yn=En.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof V||g(t))?(this._latlng=B(t),d(this,e)):(d(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront(),this.options.interactive&&(ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(i(ie,void 0,this._container),200)):ie(this._container),this.options.interactive&&(le(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&se(this._container),this},bringToBack:function(){return this._map&&oe(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Sn){e=null;var n=this._source._layers;for(var i in n)if(n[i]._map){e=n[i];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=N(this.options.offset),n=this._getAnchor();this._zoomAnimated?me(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});Ze.include({_initOverlay:function(t,e,n,i){var r=e;return r instanceof t||(r=new t(i).setContent(e)),n&&r.setLatLng(n),r}}),En.include({_initOverlay:function(t,e,n,i){var r=n;return r instanceof t?(d(r,i),r._source=this):(r=e&&!i?e:new t(i,this)).setContent(n),r}});var Jn=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Yn.prototype.openOn.call(this,t)},onAdd:function(t){Yn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pn||this._source.on("preclick",Ne))},onRemove:function(t){Yn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pn||this._source.off("preclick",Ne))},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=ne("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ne("div",t+"-content-wrapper",e);if(this._contentNode=ne("div",t+"-content",n),Le(e),Oe(this._contentNode),Ie(e,"contextmenu",Ne),this._tipContainer=ne("div",t+"-tip-container",e),this._tip=ne("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ne("a",t+"-close-button",e);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Ie(i,"click",function(t){Re(t),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=this.options.maxHeight,r="leaflet-popup-scrolled";i&&t.offsetHeight>i?(e.height=i+"px",ue(t,r)):le(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();me(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var t=this._map,e=parseInt(ee(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new D(this._containerLeft,-n-this._containerBottom);r._add(ge(this._container));var s=t.layerPointToContainerPoint(r),o=N(this.options.autoPanPadding),a=N(this.options.autoPanPaddingTopLeft||o),u=N(this.options.autoPanPaddingBottomRight||o),l=t.getSize(),c=0,h=0;s.x+i+u.x>l.x&&(c=s.x+i-l.x+u.x),s.x-c-a.x<0&&(c=s.x-a.x),s.y+n+u.y>l.y&&(h=s.y+n-l.y+u.y),s.y-h-a.y<0&&(h=s.y-a.y),(c||h)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([c,h]))}},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ze.mergeOptions({closePopupOnClick:!0}),Ze.include({openPopup:function(t,e,n){return this._initOverlay(Jn,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),En.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Jn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Sn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Fe(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Pn))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng));this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Xn=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Yn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Yn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){this._contentNode=this._container=ne("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,s=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(t),a=this.options.direction,u=r.offsetWidth,l=r.offsetHeight,c=N(this.options.offset),h=this._getAnchor();"top"===a?(e=u/2,n=l):"bottom"===a?(e=u/2,n=0):"center"===a?(e=u/2,n=l/2):"right"===a?(e=0,n=l/2):"left"===a?(e=u,n=l/2):o.x<s.x?(a="right",e=0,n=l/2):(a="left",e=u+2*(c.x+h.x),n=l/2),t=t.subtract(N(e,n,!0)).add(c).add(h),le(r,"leaflet-tooltip-right"),le(r,"leaflet-tooltip-left"),le(r,"leaflet-tooltip-top"),le(r,"leaflet-tooltip-bottom"),ue(r,"leaflet-tooltip-"+a),me(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ze.include({openTooltip:function(t,e,n){return this._initOverlay(Xn,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),En.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xn,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Sn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=t.getElement();e&&(Ie(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Ie(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ti=xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(re(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=N(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});xn.Default=An;var ei=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Nt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ie(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,s=n.length;r<s;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Nt.ielt9){de(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var s=Math.min(1,(t-r.loaded)/200);de(r.el,s),s<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(I(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ie(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ie(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),s=Math.floor(e/2),o=n-1,a=new D(+r,+s);a.z=+o;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),o>i&&this._retainParent(r,s,o,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var s=2*e;s<2*e+2;s++){var o=new D(r,s);o.z=n+1;var a=this._tileCoordsToKey(o),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,s,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r),(!i||this.options.updateWhenZooming&&r!==this._tileZoom)&&(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();Nt.any3d?pe(t.el,r,i):me(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*i);return new O(r.subtract(s),r.add(s))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),s=r.getCenter(),o=[],a=this.options.keepBuffer,u=new O(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;(c.z!==this._tileZoom||!u.contains(new D(c.x,c.y)))&&(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var f=new D(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:o.push(f)}}if(o.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return M(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new F(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new D(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];!e||(ie(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ue(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,Nt.ielt9&&this.options.opacity<1&&de(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&E(i(this._tileReady,this,t,null,s)),me(s,n),this._tiles[r]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(de(n.el,0),I(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ue(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Nt.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new D(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new O(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var ni=ei.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Nt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ie(n,"load",i(this._tileOnLoad,this,e,n)),Ie(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:Nt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return m(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Nt.ielt9?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,!e.complete)){e.src=y;var n=this._tiles[t].coords;ie(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",y),ei.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ei.prototype._tileReady.call(this,t,e,n)}});function ii(t,e){return new ni(t,e)}var ri=ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var s=(n=d(this,n)).detectRetina&&Nt.retina?2:1,o=this.getTileSize();i.width=o.x*s,i.height=o.y*s,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ni.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=R(n.project(e[0]),n.project(e[1])),r=i.min,s=i.max,o=(this._wmsVersion>=1.3&&this._crs===Cn?[r.y,r.x,s.y,s.x]:[r.x,r.y,s.x,s.y]).join(","),a=ni.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ni.WMS=ri,ii.wms=function(t,e){return new ri(t,e)};var si=En.extend({options:{padding:.1},initialize:function(t){d(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(t,e));Nt.any3d?pe(this._container,s,n):me(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new O(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),oi=si.extend({options:{tolerance:0},getEvents:function(){var t=si.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ie(t,"mousemove",this._onMouseMove,this),Ie(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,ie(this._container),xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Nt.retina?2:1;me(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Nt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,s,o=t._parts,a=o.length,u=this._ctx;if(a){for(u.beginPath(),n=0;n<a;n++){for(i=0,r=o[n].length;i<r;i++)u[i?"lineTo":"moveTo"]((s=o[n][i]).x,s.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(le(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(ue(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;if(!n)return;n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;if(!i)return;i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function ai(t){return Nt.canvas?new oi(t):null}var ui=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(j){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),li={_initContainer:function(){this._container=ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ui("shape");ue(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ui("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ie(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ui("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,e.dashStyle=i.dashArray?g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ui("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){se(t._container)},_bringToBack:function(t){oe(t._container)}},ci=Nt.vml?ui:G,hi=si.extend({_initContainer:function(){this._container=ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),me(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ci("path");t.options.className&&ue(e,t.options.className),t.options.interactive&&ue(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ie(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;!e||(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){se(t._path)},_bringToBack:function(t){oe(t._path)}});function di(t){return Nt.svg||Nt.vml?new hi(t):null}Nt.vml&&hi.include(li),Ze.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ai(t)||di(t)}});var fi=Rn.extend({initialize:function(t,e){Rn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=M(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});hi.create=ci,hi.pointsToPath=K,Fn.geometryToLayer=Mn,Fn.coordsToLatLng=Bn,Fn.coordsToLatLngs=jn,Fn.latLngToCoords=Un,Fn.latLngsToCoords=qn,Fn.getFeature=zn,Fn.asFeature=Zn,Ze.mergeOptions({boxZoom:!0});var pi=Ye.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Ht(),ye(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ie(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ne("div","leaflet-zoom-box",this._container),ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new O(this._point,this._startPoint),n=e.getSize();me(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ie(this._box),le(this._container,"leaflet-crosshair")),Wt(),ve(),xe(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ze.addInitHook("addHandler","boxZoom",pi),Ze.mergeOptions({doubleClickZoom:!0});var mi=Ye.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Ze.addInitHook("addHandler","doubleClickZoom",mi),Ze.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gi=Ye.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new en(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){le(this._map._container,"leaflet-grab"),le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=M(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,s=(i+e+n)%t-e-n,o=Math.abs(r+n)<Math.abs(s+n)?r:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),s=n.easeLinearity,o=r.multiplyBy(s/((this._lastTime-this._times[0])/1e3)),a=o.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,a),l=o.multiplyBy(u/a),c=u/(n.inertiaDeceleration*s),h=l.multiplyBy(-c/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),E(function(){e.panBy(h,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ze.addInitHook("addHandler","dragging",gi),Ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _i=Ye.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ie(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(e=this._panKeys[n],t.shiftKey&&(e=N(e).multiplyBy(3)),i.options.maxBounds&&(e=i._limitOffset(N(e),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(e)));i.panTo(r)}else i.panBy(e)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Fe(t)}}});Ze.addInitHook("addHandler","keyboard",_i),Ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yi=Ye.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=je(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Fe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,s=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Ze.addInitHook("addHandler","scrollWheelZoom",yi);Ze.mergeOptions({tapHold:Nt.touchNative&&Nt.safari&&Nt.mobile,tapTolerance:15});var vi=Ye.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new D(e.clientX,e.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Ie(document,"touchend",Re),Ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),600),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){xe(document,"touchend",Re),xe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new D(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});Ze.addInitHook("addHandler","tapHold",vi),Ze.mergeOptions({touchZoom:Nt.touch,bounceAtZoomLimits:!0});var wi=Ye.extend({addHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){le(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),Re(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(a,this,!0),Re(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,I(this._animRequest),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ze.addInitHook("addHandler","touchZoom",wi),Ze.BoxZoom=pi,Ze.DoubleClickZoom=mi,Ze.Drag=gi,Ze.Keyboard=_i,Ze.ScrollWheelZoom=yi,Ze.TapHold=vi,Ze.TouchZoom=wi,t.Bounds=O,t.Browser=Nt,t.CRS=U,t.Canvas=oi,t.Circle=On,t.CircleMarker=Nn,t.Class=x,t.Control=$e,t.DivIcon=ti,t.DivOverlay=Yn,t.DomEvent=qe,t.DomUtil=Ee,t.Draggable=en,t.Evented=k,t.FeatureGroup=Sn,t.GeoJSON=Fn,t.GridLayer=ei,t.Handler=Ye,t.Icon=xn,t.ImageOverlay=Gn,t.LatLng=V,t.LatLngBounds=F,t.Layer=En,t.LayerGroup=In,t.LineUtil=pn,t.Map=Ze,t.Marker=Dn,t.Mixin=Xe,t.Path=Pn,t.Point=D,t.PolyUtil=_n,t.Polygon=Rn,t.Polyline=Ln,t.Popup=Jn,t.PosAnimation=ze,t.Projection=wn,t.Rectangle=fi,t.Renderer=si,t.SVG=hi,t.SVGOverlay=Qn,t.TileLayer=ni,t.Tooltip=Xn,t.Transformation=Z,t.Util=S,t.VideoOverlay=Kn,t.bind=i,t.bounds=R,t.canvas=ai,t.circle=function(t,e,n){return new On(t,e,n)},t.circleMarker=function(t,e){return new Nn(t,e)},t.control=He,t.divIcon=function(t){return new ti(t)},t.extend=e,t.featureGroup=function(t,e){return new Sn(t,e)},t.geoJSON=Hn,t.geoJson=Wn,t.gridLayer=function(t){return new ei(t)},t.icon=function(t){return new xn(t)},t.imageOverlay=function(t,e,n){return new Gn(t,e,n)},t.latLng=B,t.latLngBounds=M,t.layerGroup=function(t,e){return new In(t,e)},t.map=function(t,e){return new Ze(t,e)},t.marker=function(t,e){return new Dn(t,e)},t.point=N,t.polygon=function(t,e){return new Rn(t,e)},t.polyline=function(t,e){return new Ln(t,e)},t.popup=function(t,e){return new Jn(t,e)},t.rectangle=function(t,e){return new fi(t,e)},t.setOptions=d,t.stamp=s,t.svg=di,t.svgOverlay=function(t,e,n){return new Qn(t,e,n)},t.tileLayer=ii,t.tooltip=function(t,e){return new Xn(t,e)},t.transformation=$,t.version="1.9.3",t.videoOverlay=function(t,e,n){return new Kn(t,e,n)};var bi=window.L;t.noConflict=function(){return window.L=bi,this},window.L=t}(e)},7574:function(t,e,n){"use strict";n.d(e,{y:function(){return l}});var i=n(7393),r=n(9181),s=n(6490),o=n(6554),a=n(4487);var u=n(2494);let l=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof i.L)return t;if(t[r.b])return t[r.b]()}return t||e||n?new i.L(t,e,n):new i.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof i.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=c(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:function(t){return 0===t.length?a.y:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}(t)(this)}toPromise(t){return new(t=c(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function c(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:function(t,e,n){"use strict";n.d(e,{c:function(){return s}});var i=n(2494),r=n(4449);const s={closed:!0,next(t){},error(t){if(i.v.useDeprecatedSynchronousErrorHandling)throw t;(0,r.z)(t)},complete(){}}},9765:function(t,e,n){"use strict";n.d(e,{Yc:function(){return l},xQ:function(){return c}});var i=n(7574),r=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class l extends r.L{constructor(t){super(t),this.destination=t}}let c=(()=>{class t extends i.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new l(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new i.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends c{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},8858:function(t,e,n){"use strict";n.d(e,{W:function(){return r}});var i=n(5319);class r extends i.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:function(t,e,n){"use strict";n.d(e,{L:function(){return l}});var i=n(9105),r=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class l extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=r.c;break;case 1:if(!t){this.destination=r.c;break}if("object"==typeof t){t instanceof l?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const i=new l(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class c extends l{constructor(t,e,n,s){super(),this._parentSubscriber=t;let o,a=this;(0,i.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==r.c&&(a=Object.create(e),(0,i.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):((0,u.z)(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:function(t,e,n){"use strict";n.d(e,{w:function(){return a}});var i=n(9796),r=n(1555),s=n(9105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let i=0;i<e.length;++i)e[i].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?l(h.errors):[h]}}if((0,i.k)(c)){let e=-1,n=c.length;for(;++e<n;){const n=c[e];if((0,r.K)(n))try{n.unsubscribe()}catch(d){t=t||[],d instanceof o?t=t.concat(l(d.errors)):t.push(d)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function l(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:function(t,e,n){"use strict";n.d(e,{v:function(){return r}});let i=!1;const r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}}},5345:function(t,e,n){"use strict";n.d(e,{IY:function(){return o},Ds:function(){return a},ft:function(){return u}});var i=n(7393),r=n(7574),s=n(7444);class o extends i.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends i.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof r.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(i){e.error(i)}return n}},2441:function(t,e,n){"use strict";n.d(e,{c:function(){return a},N:function(){return u}});var i=n(9765),r=n(7574),s=n(5319),o=n(1307);class a extends r.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new l(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class l extends i.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:function(t,e,n){"use strict";n.d(e,{E:function(){return r},c:function(){return s}});var i=n(7574);const r=new i.y(t=>t.complete());function s(t){return t?function(t){return new i.y(e=>t.schedule(()=>e.complete()))}(t):r}},4402:function(t,e,n){"use strict";n.d(e,{D:function(){return h}});var i=n(7574),r=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),l=n(4072),c=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new i.y(n=>{const i=new s.w;return i.add(e.schedule(()=>{const r=t[o.L]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if((0,l.t)(t))return function(t,e){return new i.y(n=>{const i=new s.w;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if((0,c.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new i.y(n=>{const i=new s.w;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[u.hZ](),i.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof i.y?t:new i.y((0,r.s)(t))}},6693:function(t,e,n){"use strict";n.d(e,{n:function(){return o}});var i=n(7574),r=n(5015),s=n(4087);function o(t,e){return e?(0,s.r)(t,e):new i.y((0,r.V)(t))}},6682:function(t,e,n){"use strict";n.d(e,{T:function(){return a}});var i=n(7574),r=n(4869),s=n(3282),o=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,r.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof i.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},5917:function(t,e,n){"use strict";n.d(e,{of:function(){return o}});var i=n(4869),r=n(6693),s=n(4087);function o(...t){let e=t[t.length-1];return(0,i.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,r.n)(t)}},8002:function(t,e,n){"use strict";n.d(e,{U:function(){return r}});var i=n(7393);function r(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends i.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:function(t,e,n){"use strict";n.d(e,{J:function(){return s}});var i=n(9773),r=n(4487);function s(t=Number.POSITIVE_INFINITY){return(0,i.zg)(r.y,t)}},9773:function(t,e,n){"use strict";n.d(e,{zg:function(){return o}});var i=n(8002),r=n(4402),s=n(5345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,r.D)(t(n,s)).pipe((0,i.U)((t,i)=>e(n,t,s,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const i=(0,s.ft)(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:function(t,e,n){"use strict";n.d(e,{ht:function(){return c},QV:function(){return u}});var i=n(7393),r=n(9193),s=n(5917),o=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return t=this.error,new o.y(e=>e.error(t));case"C":return(0,r.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new l(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class l{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new c(t,this.scheduler,this.delay))}}class c extends i.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(c.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:function(t,e,n){"use strict";n.d(e,{x:function(){return r}});var i=n(7393);function r(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new o(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class o extends i.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,i&&(!n||i===n)&&i.unsubscribe()}}},8819:function(t,e,n){"use strict";n.d(e,{B:function(){return a}});var i=n(2441);var r=n(1307),s=n(9765);function o(){return new s.xQ}function a(){return t=>(0,r.x)()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,i.N);return r.source=e,r.subjectFactory=n,r}}(o)(t))}},3101:function(t,e,n){"use strict";n.d(e,{R:function(){return p}});var i=n(7574);let r=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=r++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var l=n(6465),c=n(6102);const h=new class extends c.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends l.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var d=n(9796);class f extends i.y{constructor(t,e=0,n=h){var i;super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(!(0,d.k)(i=e)&&i-parseFloat(i)+1>=0)||e<0)&&(this.delayTime=0),(!n||"function"!=typeof n.schedule)&&(this.scheduler=h)}static create(t,e=0,n=h){return new f(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new f(e,this.delay,this.scheduler).subscribe(t)}}},3342:function(t,e,n){"use strict";n.d(e,{b:function(){return o}});var i=n(7393);function r(){}var s=n(9105);function o(t,e,n){return function(i){return i.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends i.L{constructor(t,e,n,i){super(t),this._tapNext=r,this._tapError=r,this._tapComplete=r,this._tapError=n||r,this._tapComplete=i||r,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||r,this._tapError=e.error||r,this._tapComplete=e.complete||r)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:function(t,e,n){"use strict";n.d(e,{r:function(){return s}});var i=n(7574),r=n(5319);function s(t,e){return new i.y(n=>{const i=new r.w;let s=0;return i.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||i.add(this.schedule())):n.complete()})),i})}},6465:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var i=n(5319);class r extends i.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends r{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,i=!1;try{this.work(t)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:function(t,e,n){"use strict";n.d(e,{v:function(){return r}});let i=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class r extends i{constructor(t,e=i.now){super(t,()=>r.delegate&&r.delegate!==this?r.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return r.delegate&&r.delegate!==this?r.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});var i=n(6465);const r=new(n(6102).v)(i.o)},7771:function(t,e,n){"use strict";n.d(e,{c:function(){return o},N:function(){return s}});var i=n(6465),r=n(6102);const s=new class extends r.v{}(class extends i.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},377:function(t,e,n){"use strict";n.d(e,{hZ:function(){return i}});const i="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});const i="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(t,e,n){"use strict";n.d(e,{b:function(){return i}});const i="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(t,e,n){"use strict";n.d(e,{N:function(){return i}});const i=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:function(t,e,n){"use strict";function i(t){setTimeout(()=>{throw t},0)}n.d(e,{z:function(){return i}})},4487:function(t,e,n){"use strict";function i(t){return t}n.d(e,{y:function(){return i}})},9796:function(t,e,n){"use strict";n.d(e,{k:function(){return i}});const i=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:function(t,e,n){"use strict";n.d(e,{z:function(){return i}});const i=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.d(e,{m:function(){return i}})},1555:function(t,e,n){"use strict";function i(t){return null!==t&&"object"==typeof t}n.d(e,{K:function(){return i}})},4072:function(t,e,n){"use strict";function i(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:function(){return i}})},4869:function(t,e,n){"use strict";function i(t){return t&&"function"==typeof t.schedule}n.d(e,{K:function(){return i}})},7444:function(t,e,n){"use strict";n.d(e,{s:function(){return c}});var i=n(5015),r=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),l=n(1555);const c=t=>{if(t&&"function"==typeof t[o.L])return(t=>e=>{const n=t[o.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if((0,a.z)(t))return(0,i.V)(t);if((0,u.t)(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,r.z),e))(t);if(t&&"function"==typeof t[s.hZ])return(t=>e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(i){return e.error(i),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const e=`You provided ${(0,l.K)(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}}},5015:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});const i=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()}},219:function(t,e,n){"use strict";var i={};n.r(i),n.d(i,{afterMain:function(){return ia},afterRead:function(){return ta},afterWrite:function(){return oa},applyStyles:function(){return fa},arrow:function(){return Oa},auto:function(){return qo},basePlacements:function(){return zo},beforeMain:function(){return ea},beforeRead:function(){return Jo},beforeWrite:function(){return ra},bottom:function(){return Vo},clippingParents:function(){return Ho},computeStyles:function(){return Ma},createPopper:function(){return fu},createPopperBase:function(){return du},createPopperLite:function(){return pu},detectOverflow:function(){return Ja},end:function(){return $o},eventListeners:function(){return Ba},flip:function(){return Xa},hide:function(){return nu},left:function(){return Uo},main:function(){return na},modifierPhases:function(){return aa},offset:function(){return iu},placements:function(){return Yo},popper:function(){return Go},popperGenerator:function(){return hu},popperOffsets:function(){return ru},preventOverflow:function(){return su},read:function(){return Xo},reference:function(){return Ko},right:function(){return Bo},start:function(){return Zo},top:function(){return Mo},variationPlacements:function(){return Qo},viewport:function(){return Wo},write:function(){return sa}});var r=n(7716);let s=null;function o(){return s}const a=new r.OlP("DocumentToken");let u=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return(0,r.LFG)(h)}const c=new r.OlP("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h((0,r.LFG)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let _=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(a).location;return new w((0,r.LFG)(u),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let w=(()=>{class t extends _{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+g(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+g(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(u),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends _{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+g(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+g(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(u),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(_),r.LFG(u))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=m,t.\u0275prov=(0,r.Yz7)({factory:T,token:t,providedIn:"root"}),t})();function T(){return new C((0,r.LFG)(_),(0,r.LFG)(u))}function E(t){return t.replace(/\/index.html$/,"")}var I=(()=>((I=I||{})[I.Zero=0]="Zero",I[I.One=1]="One",I[I.Two=2]="Two",I[I.Few=3]="Few",I[I.Many=4]="Many",I[I.Other=5]="Other",I))();const S=r.kL8;class x{}let A=(()=>{class t extends x{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function k(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}let D=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class P{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(t){return t.name||typeof t}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new P(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new O(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new O(t,r);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class O{constructor(t,e){this.record=t,this.view=e}}let L=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){F("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){F("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function F(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}function M(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class V{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class B{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const j=new B,U=new V;let q=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return j;if((0,r.F4k)(e))return U;throw M(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})();const z=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Z=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw M(t,e);return e.replace(z,t=>t[0].toUpperCase()+t.substr(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"titlecase",type:t,pure:!0}),t})(),$=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=H}transform(t,e=H){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t),i=e!==this.compareFn;return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push(function(t,e){return{key:t,value:e}}(t.key,t.currentValue))})),(n||i)&&(this.keyValues.sort(e),this.compareFn=e),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.aQg,16))},t.\u0275pipe=r.Yjl({name:"keyvalue",type:t,pure:!1}),t})();function H(t,e){const n=t.key,i=e.key;if(n===i)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(null===n)return 1;if(null===i)return-1;if("string"==typeof n&&"string"==typeof i)return n<i?-1:1;if("number"==typeof n&&"number"==typeof i)return n-i;if("boolean"==typeof n&&"boolean"==typeof i)return n<i?-1:1;const r=String(n),s=String(i);return r==s?0:r<s?-1:1}let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:x,useClass:A}]}),t})();function G(t){return"server"===t}let K=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new Q((0,r.LFG)(a),window)}),t})();class Q{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const t=i.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}i=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Y(this.window.history)||Y(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Y(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class J{}class X extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new X,s||(s=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(et=et||document.querySelector("base"),et?et.getAttribute("href"):null);return null==e?null:function(t){tt=tt||document.createElement("a"),tt.setAttribute("href",t);const e=tt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){et=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return k(document.cookie,t)}}let tt,et=null;const nt=new r.OlP("TRANSITION_ID"),it=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let t=0;t<i.length;t++)n.remove(i[t])})}},deps:[nt,a,r.zs3],multi:!0}];class rt{static init(){(0,r.VLi)(new rt)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let st=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ot=new r.OlP("EventManagerPlugins");let at=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ot),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ut{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=o().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let lt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ct=(()=>{class t extends lt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const i=this._doc.createElement("style");i.textContent=t,n.push(e.appendChild(i))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(ht),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ht))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function ht(t){o().remove(t)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ft=/%COMP%/g;function pt(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?pt(t,r,n):(r=r.replace(ft,t),n.push(r))}return n}function mt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let gt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new _t(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new yt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new vt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=pt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(at),r.LFG(ct),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class _t{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(dt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=dt[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=dt[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,mt(n)):this.eventManager.addEventListener(t,e,mt(n))}}class yt extends _t{constructor(t,e,n,i){super(t),this.component=n;const r=pt(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(ft,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ft,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class vt extends _t{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=pt(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const t=document.createElement("style");t.textContent=r[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let wt=(()=>{class t extends ut{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const bt=["alt","control","meta","shift"],Ct={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Et={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let It=(()=>{class t extends ut{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),s=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,r.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let s="";if(bt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Tt.hasOwnProperty(e)&&(e=Tt[e]))}return Ct[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),bt.forEach(i=>{i!=n&&Et[i](t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const St=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){X.makeCurrent(),rt.init()},multi:!0},{provide:a,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),xt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:ot,useClass:wt,multi:!0,deps:[a,r.R0b,r.Lbi]},{provide:ot,useClass:It,multi:!0,deps:[a]},[],{provide:gt,useClass:gt,deps:[at,ct,r.AFp]},{provide:r.FYo,useExisting:gt},{provide:lt,useExisting:ct},{provide:ct,useClass:ct,deps:[a]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:at,useClass:at,deps:[ot,r.R0b]},{provide:J,useClass:st,deps:[]},[]];let At=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:nt,useExisting:r.AFp},it]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:xt,imports:[W,r.hGG]}),t})();"undefined"!=typeof window&&window;var kt=n(8002),Dt=n(5917),Pt=n(7574),Nt=n(9773);function Ot(t,e){return(0,Nt.zg)(t,e,1)}var Lt=n(7393);function Rt(t,e){return function(n){return n.lift(new Ft(t,e))}}class Ft{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Mt(t,this.predicate,this.thisArg))}}class Mt extends Lt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Vt{}class Bt{}class jt{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof jt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new jt;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof jt?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Ut{encodeKey(t){return Zt(t)}encodeValue(t){return Zt(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const qt=/%(\d[a-f0-9])/gi,zt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Zt(t){return encodeURIComponent(t).replace(qt,(t,e)=>{var n;return null!==(n=zt[e])&&void 0!==n?n:t})}function $t(t){return`${t}`}class Ht{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ut,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const i=t.indexOf("="),[r,s]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const i=t[n];Array.isArray(i)?i.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ht({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push($t(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf($t(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Wt{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Gt(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Kt(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Qt(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Yt{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new jt),this.context||(this.context=new Wt),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Ht,this.urlWithParams=e}serializeBody(){return null===this.body?null:Gt(this.body)||Kt(this.body)||Qt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Ht?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Qt(this.body)?null:Kt(this.body)?this.body.type||null:Gt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ht?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,l=t.params||this.params;const c=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new Yt(n,i,s,{params:l,headers:u,context:c,reportProgress:a,responseType:r,withCredentials:o})}}var Jt=(()=>((Jt=Jt||{})[Jt.Sent=0]="Sent",Jt[Jt.UploadProgress=1]="UploadProgress",Jt[Jt.ResponseHeader=2]="ResponseHeader",Jt[Jt.DownloadProgress=3]="DownloadProgress",Jt[Jt.Response=4]="Response",Jt[Jt.User=5]="User",Jt))();class Xt{constructor(t,e=200,n="OK"){this.headers=t.headers||new jt,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class te extends Xt{constructor(t={}){super(t),this.type=Jt.ResponseHeader}clone(t={}){return new te({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ee extends Xt{constructor(t={}){super(t),this.type=Jt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ee({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ne extends Xt{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ie(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let re=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof Yt)i=t;else{let r,s;r=n.headers instanceof jt?n.headers:new jt(n.headers),n.params&&(s=n.params instanceof Ht?n.params:new Ht({fromObject:n.params})),i=new Yt(t,e,void 0!==n.body?n.body:null,{headers:r,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=(0,Dt.of)(i).pipe(Ot(t=>this.handler.handle(t)));if(t instanceof Yt||"events"===n.observe)return r;const s=r.pipe(Rt(t=>t instanceof ee));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe((0,kt.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe((0,kt.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe((0,kt.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));default:return s.pipe((0,kt.U)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Ht).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ie(n,e))}post(t,e,n={}){return this.request("POST",t,ie(n,e))}put(t,e,n={}){return this.request("PUT",t,ie(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Vt))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class se{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const oe=new r.OlP("HTTP_INTERCEPTORS");let ae=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ue=/^\)\]\}',?\n/;let le=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pt.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const i=t.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,i=n.statusText||"OK",s=new jt(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new te({headers:s,status:e,statusText:i,url:o}),r},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),u=null;204!==r&&(u=void 0===n.response?n.responseText:n.response),0===r&&(r=u?200:0);let l=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(ue,"");try{u=""!==u?JSON.parse(u):null}catch(c){u=t,l&&(l=!1,u={error:c,text:u})}}l?(e.next(new ee({body:u,headers:i,status:r,statusText:o,url:a||void 0})),e.complete()):e.error(new ne({error:u,headers:i,status:r,statusText:o,url:a||void 0}))},a=t=>{const{url:i}=s(),r=new ne({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});e.error(r)};let u=!1;const l=i=>{u||(e.next(s()),u=!0);let r={type:Jt.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===t.responseType&&!!n.responseText&&(r.partialText=n.responseText),e.next(r)},c=t=>{let n={type:Jt.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",l),null!==i&&n.upload&&n.upload.addEventListener("progress",c)),n.send(i),e.next({type:Jt.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",l),null!==i&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(J))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ce=new r.OlP("XSRF_COOKIE_NAME"),he=new r.OlP("XSRF_HEADER_NAME");class de{}let fe=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=k(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(r.Lbi),r.LFG(ce))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),pe=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const i=this.tokenService.getToken();return null!==i&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(de),r.LFG(he))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),me=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(oe,[]);this.chain=t.reduceRight((t,e)=>new se(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Bt),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ge=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:pe,useClass:ae}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:ce,useValue:e.cookieName}:[],e.headerName?{provide:he,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[pe,{provide:oe,useExisting:pe,multi:!0},{provide:de,useClass:fe},{provide:ce,useValue:"XSRF-TOKEN"},{provide:he,useValue:"X-XSRF-TOKEN"}]}),t})(),_e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[re,{provide:Vt,useClass:me},le,{provide:Bt,useExisting:le}],imports:[[ge.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),ye=(()=>{class t{constructor(t){this._http=t,this.PAGE_SIZE=10,this._DATA_URL="assets/data.json"}getAllData(){return this._http.get(this._DATA_URL)}getAllDataCount(){return this.getAllData().pipe((0,kt.U)(t=>t.length))}getDataById(t){return this.getAllData().pipe((0,kt.U)(e=>e.find(e=>e.id===t)))}getDataByTagCount(t){return this.getAllData().pipe((0,kt.U)(e=>e.filter(e=>t?e.tags.includes(t):e).length))}getViewItems(t,e){const n=e*this.PAGE_SIZE;return(t?this._getDataByTag(t):this.getAllData()).pipe((0,kt.U)(t=>t.slice(n,n+this.PAGE_SIZE)))}_getDataByTag(t){return this.getAllData().pipe((0,kt.U)(e=>e.filter(e=>t?e.tags.includes(t):e)))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(re))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();var ve=n(4402),we=n(9765),be=n(7971);class Ce extends we.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new be.N;return this._value}next(t){super.next(this._value=t)}}var Te=n(4869),Ee=n(9796);class Ie extends Lt.L{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Se extends Lt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xe=n(7444);function Ae(t,e,n,i,r=new Se(t,n,i)){if(!r.closed)return e instanceof Pt.y?e.subscribe(r):(0,xe.s)(e)(r)}var ke=n(6693);const De={};class Pe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ne(t,this.resultSelector))}}class Ne extends Ie{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(De),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Ae(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const i=this.values,r=this.toRespond?i[n]===De?--this.toRespond:this.toRespond:0;i[n]=e,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Oe=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Le=n(3282);function Re(...t){return(0,Le.J)(1)((0,Dt.of)(...t))}var Fe=n(9193);function Me(t){return new Pt.y(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?(0,ve.D)(n):(0,Fe.c)()).subscribe(e)})}var Ve=n(2441),Be=n(5345);function je(t,e){return"function"==typeof e?n=>n.pipe(je((n,i)=>(0,ve.D)(t(n,i)).pipe((0,kt.U)((t,r)=>e(n,t,i,r))))):e=>e.lift(new Ue(t))}class Ue{constructor(t){this.project=t}call(t,e){return e.subscribe(new qe(t,this.project))}}class qe extends Be.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Be.IY(this),i=this.destination;i.add(n),this.innerSubscription=(0,Be.ft)(t,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const ze=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ze(t){return e=>0===t?(0,Fe.c)():e.lift(new $e(t))}class $e{constructor(t){if(this.total=t,this.total<0)throw new ze}call(t,e){return e.subscribe(new He(t,this.total))}}class He extends Lt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function We(...t){const e=t[t.length-1];return(0,Te.K)(e)?(t.pop(),n=>Re(t,n,e)):e=>Re(t,e)}function Ge(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Ke(t,e,n))}}class Ke{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Qe(t,this.accumulator,this.seed,this.hasSeed))}}class Qe extends Lt.L{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function Ye(t){return function(e){const n=new Je(t),i=e.lift(n);return n.caught=i}}class Je{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Xe(t,this.selector,this.caught))}}class Xe extends Be.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new Be.IY(this);this.add(i);const r=(0,Be.ft)(n,i);r!==i&&this.add(r)}}}function tn(t){return function(e){return 0===t?(0,Fe.c)():e.lift(new en(t))}}class en{constructor(t){if(this.total=t,this.total<0)throw new ze}call(t,e){return e.subscribe(new nn(t,this.total))}}class nn extends Lt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function rn(t=an){return e=>e.lift(new sn(t))}class sn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new on(t,this.errorFactory))}}class on extends Lt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function an(){return new Oe}function un(t=null){return e=>e.lift(new ln(t))}class ln{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new cn(t,this.defaultValue))}}class cn extends Lt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var hn=n(4487);function dn(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Rt((e,n)=>t(e,n,i)):hn.y,Ze(1),n?un(e):rn(()=>new Oe))}var fn=n(3342),pn=n(1307),mn=n(5319);class gn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new _n(t,this.callback))}}class _n extends Lt.L{constructor(t,e){super(t),this.add(new mn.w(e))}}class yn{constructor(t,e){this.id=t,this.url=e}}class vn extends yn{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wn extends yn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bn extends yn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cn extends yn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tn extends yn{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class En extends yn{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class In extends yn{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sn extends yn{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends yn{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class An{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class On{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ln{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rn="primary";class Fn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Mn(t){return new Fn(t)}const Vn="ngNavigationCancelingError";function Bn(t){const e=Error("NavigationCancelingError: "+t);return e[Vn]=!0,e}function jn(t,e,n){const i=n.path.split("/");if(i.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const e=i[s],n=t[s];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Un(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!qn(t[r],e[r]))return!1;return!0}function qn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((t,e)=>i[e]===t)}return t===e}function zn(t){return Array.prototype.concat.apply([],t)}function Zn(t){return t.length>0?t[t.length-1]:null}function $n(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Hn(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,ve.D)(Promise.resolve(t)):(0,Dt.of)(t)}const Wn={exact:function t(e,n,i){if(!ni(e.segments,n.segments)||!Jn(e.segments,n.segments,i)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!t(e.children[r],n.children[r],i))return!1;return!0},subset:Qn},Gn={exact:function(t,e){return Un(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qn(t[n],e[n]))},ignored:()=>!0};function Kn(t,e,n){return Wn[n.paths](t.root,e.root,n.matrixParams)&&Gn[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Qn(t,e,n){return Yn(t,e,e.segments,n)}function Yn(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!(!ni(r,n)||e.hasChildren()||!Jn(r,n,i))}if(t.segments.length===n.length){if(!ni(t.segments,n)||!Jn(t.segments,n,i))return!1;for(const n in e.children)if(!t.children[n]||!Qn(t.children[n],e.children[n],i))return!1;return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(ni(t.segments,r)&&Jn(t.segments,r,i)&&t.children[Rn])&&Yn(t.children[Rn],e,s,i)}}function Jn(t,e,n){return e.every((e,i)=>Gn[n](t[i].parameters,e.parameters))}class Xn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return si.serialize(this)}}class ti{constructor(t,e){this.segments=t,this.children=e,this.parent=null,$n(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oi(this)}}class ei{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Mn(this.parameters)),this._parameterMap}toString(){return fi(this)}}function ni(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class ii{}class ri{parse(t){const e=new yi(t);return new Xn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${ai(t.root,!0)}`,n=function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${li(e)}=${li(t)}`).join("&"):`${li(e)}=${li(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams);var i;return`${e}${n}${"string"==typeof t.fragment?`#${i=t.fragment,encodeURI(i)}`:""}`}}const si=new ri;function oi(t){return t.segments.map(t=>fi(t)).join("/")}function ai(t,e){if(!t.hasChildren())return oi(t);if(e){const e=t.children[Rn]?ai(t.children[Rn],!1):"",n=[];return $n(t.children,(t,e)=>{e!==Rn&&n.push(`${e}:${ai(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return $n(t.children,(t,i)=>{i===Rn&&(n=n.concat(e(t,i)))}),$n(t.children,(t,i)=>{i!==Rn&&(n=n.concat(e(t,i)))}),n}(t,(e,n)=>n===Rn?[ai(t.children[Rn],!1)]:[`${n}:${ai(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Rn]?`${oi(t)}/${e[0]}`:`${oi(t)}/(${e.join("//")})`}}function ui(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function li(t){return ui(t).replace(/%3B/gi,";")}function ci(t){return ui(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hi(t){return decodeURIComponent(t)}function di(t){return hi(t.replace(/\+/g,"%20"))}function fi(t){return`${ci(t.path)}${function(t){return Object.keys(t).map(e=>`;${ci(e)}=${ci(t[e])}`).join("")}(t.parameters)}`}const pi=/^[^\/()?;=#]+/;function mi(t){const e=t.match(pi);return e?e[0]:""}const gi=/^[^=?&#]+/,_i=/^[^?&#]+/;class yi{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ti([],{}):new ti([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Rn]=new ti(t,e)),n}parseSegment(){const t=mi(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ei(hi(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=mi(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=mi(this.remaining);t&&(n=t,this.capture(n))}t[hi(e)]=hi(n)}parseQueryParam(t){const e=function(t){const e=t.match(gi);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(_i);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=di(e),r=di(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=mi(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Rn);const s=this.parseChildren();e[r]=1===Object.keys(s).length?s[Rn]:new ti([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class vi{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=wi(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=wi(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=bi(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return bi(t,this._root).map(t=>t.value)}}function wi(t,e){if(t===e.value)return e;for(const n of e.children){const e=wi(t,n);if(e)return e}return null}function bi(t,e){if(t===e.value)return[e];for(const n of e.children){const i=bi(t,n);if(i.length)return i.unshift(e),i}return[]}class Ci{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ti(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ei extends vi{constructor(t,e){super(t),this.snapshot=e,Di(this,t)}toString(){return this.snapshot.toString()}}function Ii(t,e){const n=function(t,e){const n=new Ai([],{},{},"",{},Rn,e,null,t.root,-1,{});return new ki("",new Ci(n,[]))}(t,e),i=new Ce([new ei("",{})]),r=new Ce({}),s=new Ce({}),o=new Ce({}),a=new Ce(""),u=new Si(i,r,o,a,s,Rn,e,n.root);return u.snapshot=n.root,new Ei(new Ci(u,[]),n)}class Si{constructor(t,e,n,i,r,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(t=>Mn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(t=>Mn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xi(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Ai{constructor(t,e,n,i,r,s,o,a,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ki extends vi{constructor(t,e){super(e),this.url=t,Di(this,e)}toString(){return Pi(this._root)}}function Di(t,e){e.value._routerState=t,e.children.forEach(e=>Di(t,e))}function Pi(t){const e=t.children.length>0?` { ${t.children.map(Pi).join(", ")} } `:"";return`${t.value}${e}`}function Ni(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Un(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Un(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Un(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Un(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Oi(t,e){const n=Un(t.params,e.params)&&function(t,e){return ni(t,e)&&t.every((t,n)=>Un(t.parameters,e[n].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Oi(t.parent,e.parent))}function Li(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function(t,e,n){return e.children.map(e=>{for(const i of n.children)if(t.shouldReuseRoute(e.value,i.value.snapshot))return Li(t,e,i);return Li(t,e)})}(t,e,n);return new Ci(i,r)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Ri(e,t),t}}const n=function(t){return new Si(new Ce(t.url),new Ce(t.params),new Ce(t.queryParams),new Ce(t.fragment),new Ce(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(e=>Li(t,e));return new Ci(n,i)}}function Ri(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ri(t.children[n],e.children[n])}function Fi(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Mi(t){return"object"==typeof t&&null!=t&&t.outlets}function Vi(t,e,n,i,r){let s={};return i&&$n(i,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Xn(n.root===t?e:Bi(n.root,t,e),s,r)}function Bi(t,e,n){const i={};return $n(t.children,(t,r)=>{i[r]=t===e?n:Bi(t,e,n)}),new ti(t.segments,i)}class ji{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Fi(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(Mi);if(i&&i!==Zn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ui{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function qi(t,e,n){if(t||(t=new ti([],{})),0===t.segments.length&&t.hasChildren())return zi(t,e,n);const i=function(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const e=t.segments[r],o=n[i];if(Mi(o))break;const a=`${o}`,u=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Wi(a,u,e))return s;i+=2}else{if(!Wi(a,{},e))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new ti(t.segments.slice(0,i.pathIndex),{});return e.children[Rn]=new ti(t.segments.slice(i.pathIndex),t.children),zi(e,0,r)}return i.match&&0===r.length?new ti(t.segments,{}):i.match&&!t.hasChildren()?Zi(t,e,n):i.match?zi(t,0,r):Zi(t,e,n)}function zi(t,e,n){if(0===n.length)return new ti(t.segments,{});{const i=function(t){return Mi(t[0])?t[0].outlets:{[Rn]:t}}(n),r={};return $n(i,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[i]=qi(t.children[i],e,n))}),$n(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new ti(t.segments,r)}}function Zi(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(Mi(s)){const t=$i(s.outlets);return new ti(i,t)}if(0===r&&Fi(n[0])){i.push(new ei(t.segments[e].path,Hi(n[0]))),r++;continue}const o=Mi(s)?s.outlets[Rn]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Fi(a)?(i.push(new ei(o,Hi(a))),r+=2):(i.push(new ei(o,{})),r++)}return new ti(i,{})}function $i(t){const e={};return $n(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Zi(new ti([],{}),0,t))}),e}function Hi(t){const e={};return $n(t,(t,n)=>e[n]=`${t}`),e}function Wi(t,e,n){return t==n.path&&Un(e,n.parameters)}class Gi{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ni(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Ti(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),$n(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,r=Ti(t);for(const s of Object.keys(r))this.deactivateRouteAndItsChildren(r[s],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const i=Ti(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new On(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Pn(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Ni(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ki(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ki(t){Ni(t.value),t.children.forEach(Ki)}class Qi{constructor(t,e){this.routes=t,this.module=e}}function Yi(t){return"function"==typeof t}function Ji(t){return t instanceof Xn}const Xi=Symbol("INITIAL_VALUE");function tr(){return je(t=>function(...t){let e,n;return(0,Te.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Ee.k)(t[0])&&(t=t[0]),(0,ke.n)(t,n).lift(new Pe(e))}(t.map(t=>t.pipe(Ze(1),We(Xi)))).pipe(Ge((t,e)=>{let n=!1;return e.reduce((t,i,r)=>t!==Xi?t:(i===Xi&&(n=!0),n||!1!==i&&r!==e.length-1&&!Ji(i)?t:i),t)},Xi),Rt(t=>t!==Xi),(0,kt.U)(t=>Ji(t)?t:!0===t),Ze(1)))}let er=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[Jr]},encapsulation:2}),t})();function nr(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];ir(i,rr(e,i))}}function ir(t,e){t.children&&nr(t.children,e)}function rr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function sr(t){const e=t.children&&t.children.map(sr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Rn&&(n.component=er),n}function or(t){return t.outlet||Rn}function ar(t,e){const n=t.filter(t=>or(t)===e);return n.push(...t.filter(t=>or(t)!==e)),n}const ur={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function lr(t,e,n){var i;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},ur):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||jn)(n,t,e);if(!r)return Object.assign({},ur);const s={};$n(r.posParams,(t,e)=>{s[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function cr(t,e,n,i,r="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>hr(t,e,n)&&or(n)!==Rn)}(t,n,i)){const r=new ti(e,function(t,e,n,i){const r={};r[Rn]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&or(s)!==Rn){const n=new ti([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[or(s)]=n}return r}(t,e,i,new ti(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>hr(t,e,n))}(t,n,i)){const s=new ti(t.segments,function(t,e,n,i,r,s){const o={};for(const a of i)if(hr(t,n,a)&&!r[or(a)]){const n=new ti([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[or(a)]=n}return Object.assign(Object.assign({},r),o)}(t,e,n,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new ti(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function hr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function dr(t,e,n,i){return!!(or(t)===i||i!==Rn&&hr(e,n,t))&&("**"===t.path||lr(e,t,n).matched)}function fr(t,e,n){return 0===e.length&&!t.children[n]}class pr{constructor(t){this.segmentGroup=t||null}}class mr{constructor(t){this.urlTree=t}}function gr(t){return new Pt.y(e=>e.error(new pr(t)))}function _r(t){return new Pt.y(e=>e.error(new mr(t)))}function yr(t){return new Pt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class vr{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=cr(this.urlTree.root,[],[],this.config).segmentGroup,e=new ti(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Rn).pipe((0,kt.U)(t=>this.createUrlTree(wr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ye(t=>{if(t instanceof mr)return this.allowRedirects=!1,this.match(t.urlTree);throw t instanceof pr?this.noMatchError(t):t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Rn).pipe((0,kt.U)(e=>this.createUrlTree(wr(e),t.queryParams,t.fragment))).pipe(Ye(t=>{throw t instanceof pr?this.noMatchError(t):t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new ti([],{[Rn]:t}):t;return new Xn(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,kt.U)(t=>new ti([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){const i=[];for(const r of Object.keys(n.children))"primary"===r?i.unshift(r):i.push(r);return(0,ve.D)(i).pipe(Ot(i=>{const r=n.children[i],s=ar(e,i);return this.expandSegmentGroup(t,s,r,i).pipe((0,kt.U)(t=>({segment:t,outlet:i})))}),Ge((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Rt((e,n)=>t(e,n,i)):hn.y,tn(1),n?un(e):rn(()=>new Oe))}())}expandSegment(t,e,n,i,r,s){return(0,ve.D)(n).pipe(Ot(o=>this.expandSegmentAgainstRoute(t,e,n,o,i,r,s).pipe(Ye(t=>{if(t instanceof pr)return(0,Dt.of)(null);throw t}))),dn(t=>!!t),Ye((t,n)=>{if(t instanceof Oe||"EmptyError"===t.name){if(fr(e,i,r))return(0,Dt.of)(new ti([],{}));throw new pr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,i,r,s,o){return dr(i,e,r,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s):gr(e):gr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?_r(r):this.lineralizeSegments(n,r).pipe((0,Nt.zg)(n=>{const r=new ti(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:l}=lr(e,i,r);if(!o)return gr(e);const c=this.applyRedirectCommands(a,i.redirectTo,l);return i.redirectTo.startsWith("/")?_r(c):this.lineralizeSegments(i,c).pipe((0,Nt.zg)(i=>this.expandSegment(t,e,n,i.concat(r.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,i,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Dt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,kt.U)(t=>(n._loadedConfig=t,new ti(i,{})))):(0,Dt.of)(new ti(i,{}));const{matched:s,consumedSegments:o,lastChild:a}=lr(e,n,i);if(!s)return gr(e);const u=i.slice(a);return this.getChildConfig(t,n,i).pipe((0,Nt.zg)(t=>{const i=t.module,s=t.routes,{segmentGroup:a,slicedSegments:l}=cr(e,o,u,s),c=new ti(a.segments,a.children);if(0===l.length&&c.hasChildren())return this.expandChildren(i,s,c).pipe((0,kt.U)(t=>new ti(o,t)));if(0===s.length&&0===l.length)return(0,Dt.of)(new ti(o,{}));const h=or(n)===r;return this.expandSegment(i,c,s,l,h?Rn:r,!0).pipe((0,kt.U)(t=>new ti(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Dt.of)(new Qi(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Nt.zg)(n=>{return n?this.configLoader.load(t.injector,e).pipe((0,kt.U)(t=>(e._loadedConfig=t,t))):(i=e,new Pt.y(t=>t.error(Bn(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,Dt.of)(new Qi([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;if(!i||0===i.length)return(0,Dt.of)(!0);const r=i.map(i=>{const r=t.get(i);let s;if((o=r)&&Yi(o.canLoad))s=r.canLoad(e,n);else{if(!Yi(r))throw new Error("Invalid CanLoad guard");s=r(e,n)}var o;return Hn(s)});return(0,Dt.of)(r).pipe(tr(),(0,fn.b)(t=>{if(!Ji(t))return;const e=Bn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,kt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return(0,Dt.of)(n);if(i.numberOfChildren>1||!i.children[Rn])return yr(t.redirectTo);i=i.children[Rn]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new Xn(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return $n(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let s={};return $n(e.children,(e,r)=>{s[r]=this.createSegmentGroup(t,e,n,i)}),new ti(r,s)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function wr(t){const e={};for(const n of Object.keys(t.children)){const i=wr(t.children[n]);(i.segments.length>0||i.hasChildren())&&(e[n]=i)}return function(t){if(1===t.numberOfChildren&&t.children[Rn]){const e=t.children[Rn];return new ti(t.segments.concat(e.segments),e.children)}return t}(new ti(t.segments,e))}class br{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Cr{constructor(t,e){this.component=t,this.route=e}}function Tr(t,e,n){const i=t._root;return Ir(i,e?e._root:null,n,[i.value])}function Er(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function Ir(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ti(e);return t.children.forEach(t=>{(function(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ni(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ni(t.url,e.url)||!Un(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oi(t,e)||!Un(t.queryParams,e.queryParams);default:return!Oi(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new br(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Ir(t,e,s.component?a?a.children:null:n,i,r),u&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Cr(a.outlet.component,o))}else o&&Sr(e,a,r),r.canActivateChecks.push(new br(i)),Ir(t,null,s.component?a?a.children:null:n,i,r)})(t,s[t.value.outlet],n,i.concat([t.value]),r),delete s[t.value.outlet]}),$n(s,(t,e)=>Sr(t,n.getContext(e),r)),r}function Sr(t,e,n){const i=Ti(t),r=t.value;$n(i,(t,i)=>{Sr(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new Cr(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class xr{}function Ar(t){return new Pt.y(e=>e.error(t))}class kr{constructor(t,e,n,i,r,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){const t=cr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Rn);if(null===e)return null;const n=new Ai([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ci(n,e),r=new ki(this.url,i);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(t){const e=t.value,n=xi(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const r of Object.keys(e.children)){const i=e.children[r],s=ar(t,r),o=this.processSegmentGroup(s,i,r);if(null===o)return null;n.push(...o)}const i=Pr(n);return i.sort((t,e)=>t.value.outlet===Rn?-1:e.value.outlet===Rn?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,n,i){for(const r of t){const t=this.processSegmentAgainstRoute(r,e,n,i);if(null!==t)return t}return fr(e,n,i)?[]:null}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo||!dr(t,e,n,i))return null;let r,s=[],o=[];if("**"===t.path){const i=n.length>0?Zn(n).parameters:{};r=new Ai(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lr(t),or(t),t.component,t,Nr(e),Or(e)+n.length,Rr(t))}else{const i=lr(e,t,n);if(!i.matched)return null;s=i.consumedSegments,o=n.slice(i.lastChild),r=new Ai(s,i.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lr(t),or(t),t.component,t,Nr(e),Or(e)+s.length,Rr(t))}const a=(c=t).children?c.children:c.loadChildren?c._loadedConfig.routes:[],{segmentGroup:u,slicedSegments:l}=cr(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);var c;if(0===l.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Ci(r,t)]}if(0===a.length&&0===l.length)return[new Ci(r,[])];const h=or(t)===i,d=this.processSegment(a,u,l,h?Rn:i);return null===d?null:[new Ci(r,d)]}}function Dr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Pr(t){const e=[],n=new Set;for(const i of t){if(!Dr(i)){e.push(i);continue}const t=e.find(t=>i.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...i.children),n.add(t)):e.push(i)}for(const i of n){const t=Pr(i.children);e.push(new Ci(i.value,t))}return e.filter(t=>!n.has(t))}function Nr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Or(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Lr(t){return t.data||{}}function Rr(t){return t.resolve||{}}function Fr(t){return je(e=>{const n=t(e);return n?(0,ve.D)(n).pipe((0,kt.U)(()=>e)):(0,Dt.of)(e)})}class Mr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Vr=new r.OlP("ROUTES");class Br{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,kt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Qi(zn(i.injector.get(Vr,void 0,r.XFs.Self|r.XFs.Optional)).map(sr),i)}),Ye(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ve.c(n,()=>new we.xQ).pipe((0,pn.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,ve.D)(this.loader.load(t)):Hn(t()).pipe((0,Nt.zg)(t=>t instanceof r.YKP?(0,Dt.of)(t):(0,ve.D)(this.compiler.compileModuleAsync(t))))}}class jr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ur,this.attachRef=null}}class Ur{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new jr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class qr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function zr(t){throw t}function Zr(t,e,n){return e.parse("/")}function $r(t,e){return(0,Dt.of)(null)}const Hr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gr=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new we.xQ,this.errorHandler=zr,this.malformedUriErrorHandler=Zr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$r,afterPreactivation:$r},this.urlHandlingStrategy=new qr,this.routeReuseStrategy=new Mr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const l=s.get(r.R0b);this.isNgZoneEnabled=l instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Xn(new ti([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Br(o,a,t=>this.triggerEvent(new An(t)),t=>this.triggerEvent(new kn(t))),this.routerState=Ii(this.currentUrlTree,this.rootComponentType),this.transitions=new Ce({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(Rt(t=>0!==t.id),(0,kt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),je(t=>{let n=!1,i=!1;return(0,Dt.of)(t).pipe((0,fn.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),je(t=>{const n=this.browserUrlTree.toString(),r=!this.navigated||t.extractedUrl.toString()!==n||n!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||r)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Kr(t.source)&&(this.browserUrlTree=t.extractedUrl),(0,Dt.of)(t).pipe(je(t=>{const n=this.transitions.getValue();return e.next(new vn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Fe.E:Promise.resolve(t)}),function(t,e,n,i){return je(r=>function(t,e,n,i,r){return new vr(t,e,n,i,r).apply()}(t,e,n,r.extractedUrl,i).pipe((0,kt.U)(t=>Object.assign(Object.assign({},r),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fn.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,s){return(0,Nt.zg)(o=>function(t,e,n,r,s="emptyOnly",o="legacy"){try{const i=new kr(t,e,n,r,s,o).recognize();return null===i?Ar(new xr):(0,Dt.of)(i)}catch(i){return Ar(i)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,s).pipe((0,kt.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fn.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Tn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(r&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=t,a=new vn(n,this.serializeUrl(i),r,s);e.next(a);const u=Ii(i,this.rootComponentType).snapshot;return(0,Dt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Fe.E}),Fr(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),(0,fn.b)(t=>{const e=new En(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,kt.U)(t=>Object.assign(Object.assign({},t),{guards:Tr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Nt.zg)(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Dt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return(0,ve.D)(t).pipe((0,Nt.zg)(t=>function(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Dt.of)(!0);const o=s.map(s=>{const o=Er(s,e,r);let a;if(function(t){return t&&Yi(t.canDeactivate)}(o))a=Hn(o.canDeactivate(t,e,n,i));else{if(!Yi(o))throw new Error("Invalid CanDeactivate guard");a=Hn(o(t,e,n,i))}return a.pipe(dn())});return(0,Dt.of)(o).pipe(tr())}(t.component,t.route,n,e,i)),dn(t=>!0!==t,!0))}(o,i,r,t).pipe((0,Nt.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,i){return(0,ve.D)(e).pipe(Ot(e=>Re(function(t,e){return null!==t&&e&&e(new Dn(t)),(0,Dt.of)(!0)}(e.route.parent,i),function(t,e){return null!==t&&e&&e(new Nn(t)),(0,Dt.of)(!0)}(e.route,i),function(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Me(()=>{const r=e.guards.map(r=>{const s=Er(r,e.node,n);let o;if(function(t){return t&&Yi(t.canActivateChild)}(s))o=Hn(s.canActivateChild(i,t));else{if(!Yi(s))throw new Error("Invalid CanActivateChild guard");o=Hn(s(i,t))}return o.pipe(dn())});return(0,Dt.of)(r).pipe(tr())}));return(0,Dt.of)(r).pipe(tr())}(t,e.path,n),function(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return(0,Dt.of)(!0);const r=i.map(i=>Me(()=>{const r=Er(i,e,n);let s;if(function(t){return t&&Yi(t.canActivate)}(r))s=Hn(r.canActivate(e,t));else{if(!Yi(r))throw new Error("Invalid CanActivate guard");s=Hn(r(e,t))}return s.pipe(dn())}));return(0,Dt.of)(r).pipe(tr())}(t,e.route,n))),dn(t=>!0!==t,!0))}(i,s,t,e):(0,Dt.of)(n)),(0,kt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,fn.b)(t=>{if(Ji(t.guardsResult)){const e=Bn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new In(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Rt(t=>!!t.guardsResult||(this.restoreHistory(t),this.cancelNavigationTransition(t,""),!1)),Fr(t=>{if(t.guards.canActivateChecks.length)return(0,Dt.of)(t).pipe((0,fn.b)(t=>{const e=new Sn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),je(t=>{let e=!1;return(0,Dt.of)(t).pipe(function(t,e){return(0,Nt.zg)(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return(0,Dt.of)(n);let s=0;return(0,ve.D)(r).pipe(Ot(n=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return(0,Dt.of)({});const s={};return(0,ve.D)(r).pipe((0,Nt.zg)(r=>function(t,e,n,i){const r=Er(t,e,i);return Hn(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe((0,fn.b)(t=>{s[r]=t}))),tn(1),(0,Nt.zg)(()=>Object.keys(s).length===r.length?(0,Dt.of)(s):Fe.E))}(t._resolve,t,e,i).pipe((0,kt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),xi(t,n).resolve),null)))}(n.route,i,t,e)),(0,fn.b)(()=>s++),tn(1),(0,Nt.zg)(t=>s===r.length?(0,Dt.of)(n):Fe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fn.b)({next:()=>e=!0,complete:()=>{e||(this.restoreHistory(t),this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}))}),(0,fn.b)(t=>{const e=new xn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Fr(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),(0,kt.U)(t=>{const e=function(t,e,n){const i=Li(t,e._root,n?n._root:void 0);return new Ei(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,fn.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(t.urlAfterRedirects,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),((t,e,n)=>(0,kt.U)(i=>(new Gi(e,i.targetRouterState,i.currentRouterState,n).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),(0,fn.b)({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new gn(t))}(()=>{var e;if(!n&&!i){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(t),this.cancelNavigationTransition(t,e)):this.cancelNavigationTransition(t,e)}(null===(e=this.currentNavigation)||void 0===e?void 0:e.id)===t.id&&(this.currentNavigation=null)}),Ye(n=>{if(i=!0,function(t){return t&&t[Vn]}(n)){const i=Ji(n.url);i||(this.navigated=!0,this.restoreHistory(t,!0));const r=new bn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree),i={skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Kr(t.source)};this.scheduleNavigation(e,"imperative",null,i,{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.restoreHistory(t,!0);const i=new Cn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(r){t.reject(r)}}return Fe.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:i}=e,r={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(i,t,n,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return e.transitionId!==t.transitionId||!n||!("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nr(t),this.config=t.map(sr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:r;let l=null;switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,i,r){if(0===n.length)return Vi(e.root,e.root,e,i,r);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ji(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return $n(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new ji(n,e,i)}(n);if(s.toRoot())return Vi(e.root,new ti([],{}),e,i,r);const o=function(t,e,n){if(t.isAbsolute)return new Ui(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ui(t,t===e.root,0)}const i=Fi(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Ui(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?zi(o.segmentGroup,o.index,s.commands):qi(o.segmentGroup,o.index,s.commands);return Vi(o.segmentGroup,a,e,i,r)}(a,this.currentUrlTree,t,l,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Ji(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Hr):!1===e?Object.assign({},Wr):e,Ji(t))return Kn(this.currentUrlTree,t,n);const i=this.parseUrl(t);return Kn(this.currentUrlTree,i,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,e,n,i,r){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u=Kr(e)&&a&&!Kr(a.source),l=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&l)return Promise.resolve(!0);let c,h,d;r?(c=r.resolve,h=r.reject,d=r.promise):d=new Promise((t,e)=>{c=t,h=e});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:c,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),i=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",i):this.location.go(n,"",i)}restoreHistory(t,e=!1){var n,i;if("computed"===this.canceledNavigationResolution){const e=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===e?this.currentUrlTree===(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)&&0===e&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(e)}else"replace"===this.canceledNavigationResolution&&(e&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){const n=new bn(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(ii),r.LFG(Ur),r.LFG(C),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Kr(t){return"imperative"!==t}let Qr=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new we.xQ,this.subscription=t.events.subscribe(t=>{t instanceof wn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i,r){if(0!==t||e||n||i||r||"string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:Yr(this.skipLocationChange),replaceUrl:Yr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Yr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Gr),r.Y36(Si),r.Y36(_))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function Yr(t){return""===t||!!t}let Jr=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Rn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Xr(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ur),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Xr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Si?this.route:t===Ur?this.childContexts:this.parent.get(t,e)}}class ts{}class es{preload(t,e){return(0,Dt.of)(null)}}let ns=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new Br(e,n,e=>t.triggerEvent(new An(e)),e=>t.triggerEvent(new kn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Rt(t=>t instanceof wn),Ot(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return(0,ve.D)(n).pipe((0,Le.J)(),(0,kt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Nt.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gr),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(ts))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),is=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ln&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ln(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gr),r.LFG(K),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const rs=new r.OlP("ROUTER_CONFIGURATION"),ss=new r.OlP("ROUTER_FORROOT_GUARD"),os=[C,{provide:ii,useClass:ri},{provide:Gr,useFactory:function(t,e,n,i,r,s,o,a={},u,l){const c=new Gr(null,t,e,n,i,r,s,zn(o));return u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,c),a.enableTracing&&c.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),c},deps:[ii,Ur,C,r.zs3,r.v3s,r.Sil,Vr,rs,[class{},new r.FiY],[class{},new r.FiY]]},Ur,{provide:Si,useFactory:function(t){return t.routerState.root},deps:[Gr]},{provide:r.v3s,useClass:r.EAV},ns,es,class{preload(t,e){return e().pipe(Ye(()=>(0,Dt.of)(null)))}},{provide:rs,useValue:{enableTracing:!1}}];function as(){return new r.PXZ("Router",Gr)}let us=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[os,ds(e),{provide:ss,useFactory:hs,deps:[[Gr,new r.FiY,new r.tp0]]},{provide:rs,useValue:n||{}},{provide:_,useFactory:cs,deps:[u,[new r.tBr(v),new r.FiY],rs]},{provide:is,useFactory:ls,deps:[Gr,K,rs]},{provide:ts,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:es},{provide:r.PXZ,multi:!0,useFactory:as},[fs,{provide:r.ip1,multi:!0,useFactory:ps,deps:[fs]},{provide:gs,useFactory:ms,deps:[fs]},{provide:r.tb,multi:!0,useExisting:gs}]]}}static forChild(e){return{ngModule:t,providers:[ds(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ss,8),r.LFG(Gr,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function ls(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new is(t,e,n)}function cs(t,e,n={}){return n.useHash?new b(t,e):new w(t,e)}function hs(t){return"guarded"}function ds(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Vr,multi:!0,useValue:t}]}let fs=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new we.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Gr),i=this.injector.get(rs);return"disabled"===i.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Dt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(rs),n=this.injector.get(ns),i=this.injector.get(is),s=this.injector.get(Gr),o=this.injector.get(r.z2F);t===o.components[0]&&(("enabledNonBlocking"===e.initialNavigation||void 0===e.initialNavigation)&&s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function ps(t){return t.appInitializer.bind(t)}function ms(t){return t.bootstrapListener.bind(t)}const gs=new r.OlP("Router Initializer"),_s=function(){return["/"]},ys=function(){return["/map"]},vs=function(){return["/tag"]},ws=function(){return["/about"]};let bs=(()=>{class t{constructor(t,e){this._dataService=t,this._router=e,this.entriesCount=0,this._dataService.getAllDataCount().subscribe(t=>{this.entriesCount=t})}navigateToRandom(){const t=Math.ceil(Math.random()*this.entriesCount).toString();this._router.routeReuseStrategy.shouldReuseRoute=()=>!1,this._router.onSameUrlNavigation="reload",this._router.navigate([`/wpis/${t}`])}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ye),r.Y36(Gr))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-header"]],decls:19,vars:8,consts:[[1,"container","py-3"],[1,"d-flex","align-items-center","justify-content-between"],[3,"routerLink"],[1,"d-flex","flex-column","flex-sm-row"],[1,"d-none","d-sm-flex","mx-2"],[3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r.TgZ(3,"div",3),r.TgZ(4,"span"),r._uU(5,"POZNA\u0143"),r.qZA(),r.TgZ(6,"span",4),r._uU(7,"|"),r.qZA(),r.TgZ(8,"span"),r._uU(9,"dawniej & dzi\u015b"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"nav"),r.TgZ(11,"a",2),r._uU(12,"Mapa"),r.qZA(),r.TgZ(13,"a",2),r._uU(14,"Tagi"),r.qZA(),r.TgZ(15,"a",5),r.NdJ("click",function(){return e.navigateToRandom()}),r._uU(16,"Losuj"),r.qZA(),r.TgZ(17,"a",2),r._uU(18,"O blogu"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("routerLink",r.DdM(4,_s)),r.xp6(9),r.Q6J("routerLink",r.DdM(5,ys)),r.xp6(2),r.Q6J("routerLink",r.DdM(6,vs)),r.xp6(4),r.Q6J("routerLink",r.DdM(7,ws)))},directives:[Qr],styles:["a[_ngcontent-%COMP%]{color:#fff!important;font-weight:500}a[_ngcontent-%COMP%]:not(:last-child){margin-right:1rem}"]}),t})();var Cs=n(1555);function Ts(t,e){return new Pt.y(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const u=(0,ve.D)(t[a]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,o++),r[a]=t},error:t=>n.error(t),complete:()=>{s++,(s===i||!l)&&(o===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}let Es=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Is=(()=>{class t extends Es{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const Ss=new r.OlP("NgValueAccessor"),xs={provide:Ss,useExisting:(0,r.Gpc)(()=>ks),multi:!0},As=new r.OlP("CompositionEventMode");let ks=(()=>{class t extends Es{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(As,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([xs]),r.qOj]}),t})();function Ds(t){return null==t||0===t.length}function Ps(t){return null!=t&&"number"==typeof t.length}const Ns=new r.OlP("NgValidators"),Os=new r.OlP("NgAsyncValidators"),Ls=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rs{static min(t){return e=t,t=>{if(Ds(t.value)||Ds(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null};var e}static max(t){return e=t,t=>{if(Ds(t.value)||Ds(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null};var e}static required(t){return Ds(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Ds((e=t).value)||Ls.test(e.value)?null:{email:!0};var e}static minLength(t){return e=t,t=>Ds(t.value)||!Ps(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null;var e}static maxLength(t){return e=t,t=>Ps(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null;var e}static pattern(t){return function(t){if(!t)return Fs;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Ds(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return qs(t)}static composeAsync(t){return Zs(t)}}function Fs(t){return null}function Ms(t){return null!=t}function Vs(t){const e=(0,r.QGY)(t)?(0,ve.D)(t):t;return(0,r.CqO)(e),e}function Bs(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function js(t,e){return e.map(e=>e(t))}function Us(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function qs(t){if(!t)return null;const e=t.filter(Ms);return 0==e.length?null:function(t){return Bs(js(t,e))}}function zs(t){return null!=t?qs(Us(t)):null}function Zs(t){if(!t)return null;const e=t.filter(Ms);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Ee.k)(e))return Ts(e,null);if((0,Cs.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ts(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ts(t=1===t.length&&(0,Ee.k)(t[0])?t[0]:t,null).pipe((0,kt.U)(t=>e(...t)))}return Ts(t,null)}(js(t,e).map(Vs)).pipe((0,kt.U)(Bs))}}function $s(t){return null!=t?Zs(Us(t)):null}function Hs(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ws(t){return t._rawValidators}function Gs(t){return t._rawAsyncValidators}function Ks(t){return t?Array.isArray(t)?t:[t]:[]}function Qs(t,e){return Array.isArray(t)?t.includes(e):t===e}function Ys(t,e){const n=Ks(e);return Ks(t).forEach(t=>{Qs(n,t)||n.push(t)}),n}function Js(t,e){return Ks(e).filter(e=>!Qs(t,e))}let Xs=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zs(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$s(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),to=(()=>{class t extends Xs{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class eo extends Xs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class no{constructor(t){this._cd=t}is(t){var e,n,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===i?void 0:i[t])}}let io=(()=>{class t extends no{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(eo,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),ro=(()=>{class t extends no{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(to,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[r.qOj]}),t})();function so(t,e){uo(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&co(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&co(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function oo(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),lo(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ao(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uo(t,e){const n=Ws(t);null!==e.validator?t.setValidators(Hs(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=Gs(t);null!==e.asyncValidator?t.setAsyncValidators(Hs(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();ao(e._rawValidators,r),ao(e._rawAsyncValidators,r)}function lo(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=Ws(t);if(Array.isArray(i)&&i.length>0){const r=i.filter(t=>t!==e.validator);r.length!==i.length&&(n=!0,t.setValidators(r))}}if(null!==e.asyncValidator){const i=Gs(t);if(Array.isArray(i)&&i.length>0){const r=i.filter(t=>t!==e.asyncValidator);r.length!==i.length&&(n=!0,t.setAsyncValidators(r))}}}const i=()=>{};return ao(e._rawValidators,i),ao(e._rawAsyncValidators,i),n}function co(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ho(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const fo="VALID",po="INVALID",mo="PENDING",go="DISABLED";function _o(t){return(bo(t)?t.validators:t)||null}function yo(t){return Array.isArray(t)?zs(t):t||null}function vo(t,e){return(bo(e)?e.asyncValidators:t)||null}function wo(t){return Array.isArray(t)?$s(t):t||null}function bo(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Co{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=yo(this._rawValidators),this._composedAsyncValidatorFn=wo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===fo}get invalid(){return this.status===po}get pending(){return this.status==mo}get disabled(){return this.status===go}get enabled(){return this.status!==go}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=yo(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=wo(t)}addValidators(t){this.setValidators(Ys(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ys(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Js(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Js(t,this._rawAsyncValidators))}hasValidator(t){return Qs(this._rawValidators,t)}hasAsyncValidator(t){return Qs(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=mo,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=go,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=fo,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fo||this.status===mo)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?go:fo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=mo,this._hasOwnPendingAsyncValidator=!0;const e=Vs(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let i=t;return e.forEach(t=>{i=i instanceof Eo?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof Io&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?go:this.errors?po:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mo)?mo:this._anyControlsHaveStatus(po)?po:fo}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){bo(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class To extends Co{constructor(t=null,e,n){super(_o(e),vo(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ho(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ho(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Eo extends Co{constructor(t,e,n){super(_o(e),vo(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof To?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Io extends Co{constructor(t,e,n){super(_o(e),vo(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof To?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let So=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),xo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Ao=new r.OlP("NgModelWithFormControlWarning"),ko={provide:to,useExisting:(0,r.Gpc)(()=>Do)};let Do=(()=>{class t extends to{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return so(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){oo(t.control||null,t,!1),ho(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,function(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(oo(e||null,t),n instanceof To&&(so(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){uo(t,e)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return lo(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uo(this.form,this),this._oldForm&&lo(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ns,10),r.Y36(Os,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([ko]),r.qOj,r.TTD]}),t})();const Po={provide:eo,useExisting:(0,r.Gpc)(()=>No)};let No=(()=>{class t extends eo{constructor(t,e,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(t=>{t.constructor===ks?n=t:function(t){return Object.getPrototypeOf(t.constructor)===Is}(t)?i=t:r=t}),r||i||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(to,13),r.Y36(Ns,10),r.Y36(Os,10),r.Y36(Ss,10),r.Y36(Ao,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([Po]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})(),Oo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[xo]]}),t})(),Lo=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ao,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Oo]}),t})(),Ro=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let i,r=null,s=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,i=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new Eo(n,{asyncValidators:s,updateOn:i,validators:r})}control(t,e,n){return new To(t,e,n)}array(t,e,n){const i=t.map(t=>this._createControl(t));return new Io(i,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof To||t instanceof Eo||t instanceof Io?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:Lo}),t})();class Fo{constructor(t,e,n,i,r,s){this.col=t,this.key=e,this.mail=n,this.name=i,this.text=r,this.ts=s}}var Mo="top",Vo="bottom",Bo="right",Uo="left",qo="auto",zo=[Mo,Vo,Bo,Uo],Zo="start",$o="end",Ho="clippingParents",Wo="viewport",Go="popper",Ko="reference",Qo=zo.reduce(function(t,e){return t.concat([e+"-"+Zo,e+"-"+$o])},[]),Yo=[].concat(zo,[qo]).reduce(function(t,e){return t.concat([e,e+"-"+Zo,e+"-"+$o])},[]),Jo="beforeRead",Xo="read",ta="afterRead",ea="beforeMain",na="main",ia="afterMain",ra="beforeWrite",sa="write",oa="afterWrite",aa=[Jo,Xo,ta,ea,na,ia,ra,sa,oa];function ua(t){return t?(t.nodeName||"").toLowerCase():null}function la(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ca(t){return t instanceof la(t).Element||t instanceof Element}function ha(t){return t instanceof la(t).HTMLElement||t instanceof HTMLElement}function da(t){return"undefined"!=typeof ShadowRoot&&(t instanceof la(t).ShadowRoot||t instanceof ShadowRoot)}var fa={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];!ha(r)||!ua(r)||(Object.assign(r.style,n),Object.keys(i).forEach(function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)}))})},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce(function(t,e){return t[e]="",t},{});!ha(i)||!ua(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(t){i.removeAttribute(t)}))})}},requires:["computeStyles"]};function pa(t){return t.split("-")[0]}var ma=Math.max,ga=Math.min,_a=Math.round;function ya(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function va(){return!/^((?!chrome|android).)*safari/i.test(ya())}function wa(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&ha(t)&&(r=t.offsetWidth>0&&_a(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&_a(i.height)/t.offsetHeight||1);var o=(ca(t)?la(t):window).visualViewport,a=!va()&&n,u=(i.left+(a&&o?o.offsetLeft:0))/r,l=(i.top+(a&&o?o.offsetTop:0))/s,c=i.width/r,h=i.height/s;return{width:c,height:h,top:l,right:u+c,bottom:l+h,left:u,x:u,y:l}}function ba(t){var e=wa(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Ca(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&da(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ta(t){return la(t).getComputedStyle(t)}function Ea(t){return["table","td","th"].indexOf(ua(t))>=0}function Ia(t){return((ca(t)?t.ownerDocument:t.document)||window.document).documentElement}function Sa(t){return"html"===ua(t)?t:t.assignedSlot||t.parentNode||(da(t)?t.host:null)||Ia(t)}function xa(t){return ha(t)&&"fixed"!==Ta(t).position?t.offsetParent:null}function Aa(t){for(var e=la(t),n=xa(t);n&&Ea(n)&&"static"===Ta(n).position;)n=xa(n);return n&&("html"===ua(n)||"body"===ua(n)&&"static"===Ta(n).position)?e:n||function(t){var e=/firefox/i.test(ya());if(/Trident/i.test(ya())&&ha(t)&&"fixed"===Ta(t).position)return null;var n=Sa(t);for(da(n)&&(n=n.host);ha(n)&&["html","body"].indexOf(ua(n))<0;){var i=Ta(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function ka(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Da(t,e,n){return ma(t,ga(e,n))}function Pa(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Na(t,e){return e.reduce(function(e,n){return e[n]=t,e},{})}var Oa={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=pa(n.placement),u=ka(a),l=[Uo,Bo].indexOf(a)>=0?"height":"width";if(s&&o){var c=function(t,e){return Pa("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Na(t,zo))}(r.padding,n),h=ba(s),d="y"===u?Mo:Uo,f="y"===u?Vo:Bo,p=n.rects.reference[l]+n.rects.reference[u]-o[u]-n.rects.popper[l],m=o[u]-n.rects.reference[u],g=Aa(s),_=g?"y"===u?g.clientHeight||0:g.clientWidth||0:0,y=_/2-h[l]/2+(p/2-m/2),v=Da(c[d],y,_-h[l]-c[f]);n.modifiersData[i]=((e={})[u]=v,e.centerOffset=v-y,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||!Ca(e.elements.popper,i)||(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function La(t){return t.split("-")[1]}var Ra={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fa(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,h=t.isFixed,d=o.x,f=void 0===d?0:d,p=o.y,m=void 0===p?0:p,g="function"==typeof c?c({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var _=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),v=Uo,w=Mo,b=window;if(l){var C=Aa(n),T="clientHeight",E="clientWidth";C===la(n)&&"static"!==Ta(C=Ia(n)).position&&"absolute"===a&&(T="scrollHeight",E="scrollWidth"),(r===Mo||(r===Uo||r===Bo)&&s===$o)&&(w=Vo,m-=(h&&C===b&&b.visualViewport?b.visualViewport.height:C[T])-i.height,m*=u?1:-1),r!==Uo&&(r!==Mo&&r!==Vo||s!==$o)||(v=Bo,f-=(h&&C===b&&b.visualViewport?b.visualViewport.width:C[E])-i.width,f*=u?1:-1)}var I,S=Object.assign({position:a},l&&Ra),x=!0===c?function(t){var e=t.y,n=window.devicePixelRatio||1;return{x:_a(t.x*n)/n||0,y:_a(e*n)/n||0}}({x:f,y:m}):{x:f,y:m};return f=x.x,m=x.y,Object.assign({},S,u?((I={})[w]=y?"0":"",I[v]=_?"0":"",I.transform=(b.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",I):((e={})[w]=y?m+"px":"",e[v]=_?f+"px":"",e.transform="",e))}var Ma={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,u=void 0===a||a,l={placement:pa(e.placement),variation:La(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Fa(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Fa(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Va={passive:!0},Ba={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,u=la(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach(function(t){t.addEventListener("scroll",n.update,Va)}),a&&u.addEventListener("resize",n.update,Va),function(){s&&l.forEach(function(t){t.removeEventListener("scroll",n.update,Va)}),a&&u.removeEventListener("resize",n.update,Va)}},data:{}},ja={left:"right",right:"left",bottom:"top",top:"bottom"};function Ua(t){return t.replace(/left|right|bottom|top/g,function(t){return ja[t]})}var qa={start:"end",end:"start"};function za(t){return t.replace(/start|end/g,function(t){return qa[t]})}function Za(t){var e=la(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $a(t){return wa(Ia(t)).left+Za(t).scrollLeft}function Ha(t){var e=Ta(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function Wa(t){return["html","body","#document"].indexOf(ua(t))>=0?t.ownerDocument.body:ha(t)&&Ha(t)?t:Wa(Sa(t))}function Ga(t,e){var n;void 0===e&&(e=[]);var i=Wa(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=la(i),o=r?[s].concat(s.visualViewport||[],Ha(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Ga(Sa(o)))}function Ka(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Qa(t,e,n){return e===Wo?Ka(function(t,e){var n=la(t),i=Ia(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,u=0;if(r){s=r.width,o=r.height;var l=va();(l||!l&&"fixed"===e)&&(a=r.offsetLeft,u=r.offsetTop)}return{width:s,height:o,x:a+$a(t),y:u}}(t,n)):ca(e)?function(t,e){var n=wa(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Ka(function(t){var e,n=Ia(t),i=Za(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=ma(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=ma(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+$a(t),u=-i.scrollTop;return"rtl"===Ta(r||n).direction&&(a+=ma(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:u}}(Ia(t)))}function Ya(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?pa(r):null,o=r?La(r):null,a=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2;switch(s){case Mo:e={x:a,y:n.y-i.height};break;case Vo:e={x:a,y:n.y+n.height};break;case Bo:e={x:n.x+n.width,y:u};break;case Uo:e={x:n.x-i.width,y:u};break;default:e={x:n.x,y:n.y}}var l=s?ka(s):null;if(null!=l){var c="y"===l?"height":"width";switch(o){case Zo:e[l]=e[l]-(n[c]/2-i[c]/2);break;case $o:e[l]=e[l]+(n[c]/2-i[c]/2)}}return e}function Ja(t,e){void 0===e&&(e={});var n=e.placement,i=void 0===n?t.placement:n,r=e.strategy,s=void 0===r?t.strategy:r,o=e.boundary,a=void 0===o?Ho:o,u=e.rootBoundary,l=void 0===u?Wo:u,c=e.elementContext,h=void 0===c?Go:c,d=e.altBoundary,f=void 0!==d&&d,p=e.padding,m=void 0===p?0:p,g=Pa("number"!=typeof m?m:Na(m,zo)),_=t.rects.popper,y=t.elements[f?h===Go?Ko:Go:h],v=function(t,e,n,i){var r="clippingParents"===e?function(t){var e=Ga(Sa(t)),n=["absolute","fixed"].indexOf(Ta(t).position)>=0&&ha(t)?Aa(t):t;return ca(n)?e.filter(function(t){return ca(t)&&Ca(t,n)&&"body"!==ua(t)}):[]}(t):[].concat(e),s=[].concat(r,[n]),o=s.reduce(function(e,n){var r=Qa(t,n,i);return e.top=ma(r.top,e.top),e.right=ga(r.right,e.right),e.bottom=ga(r.bottom,e.bottom),e.left=ma(r.left,e.left),e},Qa(t,s[0],i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(ca(y)?y:y.contextElement||Ia(t.elements.popper),a,l,s),w=wa(t.elements.reference),b=Ya({reference:w,element:_,strategy:"absolute",placement:i}),C=Ka(Object.assign({},_,b)),T=h===Go?C:w,E={top:v.top-T.top+g.top,bottom:T.bottom-v.bottom+g.bottom,left:v.left-T.left+g.left,right:T.right-v.right+g.right},I=t.modifiersData.offset;if(h===Go&&I){var S=I[i];Object.keys(E).forEach(function(t){var e=[Bo,Vo].indexOf(t)>=0?1:-1,n=[Mo,Vo].indexOf(t)>=0?"y":"x";E[t]+=S[n]*e})}return E}var Xa={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,u=n.fallbackPlacements,l=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=e.options.placement,_=pa(g),y=u||(_!==g&&p?function(t){if(pa(t)===qo)return[];var e=Ua(t);return[za(t),e,za(e)]}(g):[Ua(g)]),v=[g].concat(y).reduce(function(t,n){return t.concat(pa(n)===qo?function(t,e){void 0===e&&(e={});var n=e.boundary,i=e.rootBoundary,r=e.padding,s=e.flipVariations,o=e.allowedAutoPlacements,a=void 0===o?Yo:o,u=La(e.placement),l=u?s?Qo:Qo.filter(function(t){return La(t)===u}):zo,c=l.filter(function(t){return a.indexOf(t)>=0});0===c.length&&(c=l);var h=c.reduce(function(e,s){return e[s]=Ja(t,{placement:s,boundary:n,rootBoundary:i,padding:r})[pa(s)],e},{});return Object.keys(h).sort(function(t,e){return h[t]-h[e]})}(e,{placement:n,boundary:c,rootBoundary:h,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)},[]),w=e.rects.reference,b=e.rects.popper,C=new Map,T=!0,E=v[0],I=0;I<v.length;I++){var S=v[I],x=pa(S),A=La(S)===Zo,k=[Mo,Vo].indexOf(x)>=0,D=k?"width":"height",P=Ja(e,{placement:S,boundary:c,rootBoundary:h,altBoundary:d,padding:l}),N=k?A?Bo:Uo:A?Vo:Mo;w[D]>b[D]&&(N=Ua(N));var O=Ua(N),L=[];if(s&&L.push(P[x]<=0),a&&L.push(P[N]<=0,P[O]<=0),L.every(function(t){return t})){E=S,T=!1;break}C.set(S,L)}if(T)for(var R=function(t){var e=v.find(function(e){var n=C.get(e);if(n)return n.slice(0,t).every(function(t){return t})});if(e)return E=e,"break"},F=p?3:1;F>0&&"break"!==R(F);F--);e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function tu(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function eu(t){return[Mo,Bo,Vo,Uo].some(function(e){return t[e]>=0})}var nu={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Ja(e,{elementContext:"reference"}),a=Ja(e,{altBoundary:!0}),u=tu(o,i),l=tu(a,r,s),c=eu(u),h=eu(l);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}},iu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.name,i=t.options.offset,r=void 0===i?[0,0]:i,s=Yo.reduce(function(t,n){return t[n]=function(t,e,n){var i=pa(t),r=[Uo,Mo].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Uo,Bo].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,r),t},{}),o=s[e.placement],a=o.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=o.x,e.modifiersData.popperOffsets.y+=a),e.modifiersData[n]=s}},ru={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state;e.modifiersData[t.name]=Ya({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},su={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,u=n.tether,l=void 0===u||u,c=n.tetherOffset,h=void 0===c?0:c,d=Ja(e,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),f=pa(e.placement),p=La(e.placement),m=!p,g=ka(f),_=function(t){return"x"===t?"y":"x"}(g),y=e.modifiersData.popperOffsets,v=e.rects.reference,w=e.rects.popper,b="function"==typeof h?h(Object.assign({},e.rects,{placement:e.placement})):h,C="number"==typeof b?{mainAxis:b,altAxis:b}:Object.assign({mainAxis:0,altAxis:0},b),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,E={x:0,y:0};if(y){if(s){var I,S="y"===g?Mo:Uo,x="y"===g?Vo:Bo,A="y"===g?"height":"width",k=y[g],D=k+d[S],P=k-d[x],N=l?-w[A]/2:0,O=p===Zo?v[A]:w[A],L=p===Zo?-w[A]:-v[A],R=e.elements.arrow,F=l&&R?ba(R):{width:0,height:0},M=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=M[S],B=M[x],j=Da(0,v[A],F[A]),U=m?v[A]/2-N-j-V-C.mainAxis:O-j-V-C.mainAxis,q=m?-v[A]/2+N+j+B+C.mainAxis:L+j+B+C.mainAxis,z=e.elements.arrow&&Aa(e.elements.arrow),Z=null!=(I=null==T?void 0:T[g])?I:0,$=k+q-Z,H=Da(l?ga(D,k+U-Z-(z?"y"===g?z.clientTop||0:z.clientLeft||0:0)):D,k,l?ma(P,$):P);y[g]=H,E[g]=H-k}if(a){var W,G=y[_],K="y"===_?"height":"width",Q=G+d["x"===g?Mo:Uo],Y=G-d["x"===g?Vo:Bo],J=-1!==[Mo,Uo].indexOf(f),X=null!=(W=null==T?void 0:T[_])?W:0,tt=J?Q:G-v[K]-w[K]-X+C.altAxis,et=J?G+v[K]+w[K]-X-C.altAxis:Y,nt=l&&J?function(t,e,n){var i=Da(t,e,n);return i>n?n:i}(tt,G,et):Da(l?tt:Q,G,l?et:Y);y[_]=nt,E[_]=nt-G}e.modifiersData[i]=E}},requiresIfExists:["offset"]};function ou(t,e,n){void 0===n&&(n=!1);var i=ha(e),r=ha(e)&&function(t){var e=t.getBoundingClientRect(),n=_a(e.width)/t.offsetWidth||1,i=_a(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),s=Ia(e),o=wa(t,r,n),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!n)&&(("body"!==ua(e)||Ha(s))&&(a=function(t){return t!==la(t)&&ha(t)?function(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):Za(t)}(e)),ha(e)?((u=wa(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=$a(s))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function au(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}}),i.push(t)}return t.forEach(function(t){e.set(t.name,t)}),t.forEach(function(t){n.has(t.name)||r(t)}),i}function uu(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}var lu={placement:"bottom",modifiers:[],strategy:"absolute"};function cu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function hu(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,i=t.defaultOptions,r=void 0===i?lu:i;return function(t,e,i){void 0===i&&(i=r);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},lu,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],a=!1,u={state:s,setOptions:function(i){var a="function"==typeof i?i(s.options):i;l(),s.options=Object.assign({},r,s.options,a),s.scrollParents={reference:ca(t)?Ga(t):t.contextElement?Ga(t.contextElement):[],popper:Ga(e)};var c=function(t){var e=au(t);return aa.reduce(function(t,n){return t.concat(e.filter(function(t){return t.phase===n}))},[])}(function(t){var e=t.reduce(function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(n,s.options.modifiers)));return s.orderedModifiers=c.filter(function(t){return t.enabled}),s.orderedModifiers.forEach(function(t){var e=t.options,n=t.effect;if("function"==typeof n){var i=n({state:s,name:t.name,instance:u,options:void 0===e?{}:e});o.push(i||function(){})}}),u.update()},forceUpdate:function(){if(!a){var t=s.elements,e=t.reference,n=t.popper;if(cu(e,n)){s.rects={reference:ou(e,Aa(n),"fixed"===s.options.strategy),popper:ba(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(t){return s.modifiersData[t.name]=Object.assign({},t.data)});for(var i=0;i<s.orderedModifiers.length;i++)if(!0!==s.reset){var r=s.orderedModifiers[i],o=r.fn,l=r.options;"function"==typeof o&&(s=o({state:s,options:void 0===l?{}:l,name:r.name,instance:u})||s)}else s.reset=!1,i=-1}}},update:uu(function(){return new Promise(function(t){u.forceUpdate(),t(s)})}),destroy:function(){l(),a=!0}};if(!cu(t,e))return u;function l(){o.forEach(function(t){return t()}),o=[]}return u.setOptions(i).then(function(t){!a&&i.onFirstUpdate&&i.onFirstUpdate(t)}),u}}var du=hu(),fu=hu({defaultModifiers:[Ba,ru,Ma,fa,iu,Xa,su,Oa,nu]}),pu=hu({defaultModifiers:[Ba,ru,Ma,fa]});const mu="transitionend",gu=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},_u=t=>{const e=gu(t);return e&&document.querySelector(e)?e:null},yu=t=>{const e=gu(t);return e?document.querySelector(e):null},vu=t=>{t.dispatchEvent(new Event(mu))},wu=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),bu=t=>wu(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,Cu=t=>{if(!wu(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n||null===e)return!1}return e},Tu=t=>!(t&&t.nodeType===Node.ELEMENT_NODE&&!t.classList.contains("disabled"))||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),Eu=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Eu(t.parentNode):null},Iu=()=>{},Su=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,xu=[],Au=()=>"rtl"===document.documentElement.dir,ku=t=>{(t=>{"loading"===document.readyState?(xu.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of xu)t()}),xu.push(t)):t()})(()=>{const e=Su();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},Du=t=>{"function"==typeof t&&t()},Pu=(t,e,n=!0)=>{if(!n)return void Du(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(mu,s),Du(t))};e.addEventListener(mu,s),setTimeout(()=>{r||vu(e)},i)},Nu=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return-1===s?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},Ou=/[^.]*(?=\..*)\.|.*/,Lu=/\..*/,Ru=/::\d+$/,Fu={};let Mu=1;const Vu={mouseenter:"mouseover",mouseleave:"mouseout"},Bu=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ju(t,e){return e&&`${e}::${Mu++}`||t.uidEvent||Mu++}function Uu(t){const e=ju(t);return t.uidEvent=e,Fu[e]=Fu[e]||{},Fu[e]}function qu(t,e,n=null){return Object.values(t).find(t=>t.callable===e&&t.delegationSelector===n)}function zu(t,e,n){const i="string"==typeof e,r=i?n:e||n;let s=Wu(t);return Bu.has(s)||(s=t),[i,r,s]}function Zu(t,e,n,i,r){if("string"!=typeof e||!t)return;let[s,o,a]=zu(e,n,i);var u;e in Vu&&(u=o,o=function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return u.call(this,t)});const l=Uu(t),c=l[a]||(l[a]={}),h=qu(c,o,s?n:null);if(h)return void(h.oneOff=h.oneOff&&r);const d=ju(o,e.replace(Ou,"")),f=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Ku(r,{delegateTarget:o}),i.oneOff&&Gu.off(t,r.type,e,n),n.apply(o,[r])}}(t,n,o):function(t,e){return function n(i){return Ku(i,{delegateTarget:t}),n.oneOff&&Gu.off(t,i.type,e),e.apply(t,[i])}}(t,o);f.delegationSelector=s?n:null,f.callable=o,f.oneOff=r,f.uidEvent=d,c[d]=f,t.addEventListener(a,f,s)}function $u(t,e,n,i,r){const s=qu(e[n],i,r);!s||(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function Hu(t,e,n,i){const r=e[n]||{};for(const s of Object.keys(r))if(s.includes(i)){const i=r[s];$u(t,e,n,i.callable,i.delegationSelector)}}function Wu(t){return t=t.replace(Lu,""),Vu[t]||t}const Gu={on(t,e,n,i){Zu(t,e,n,i,!1)},one(t,e,n,i){Zu(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=zu(e,n,i),a=o!==e,u=Uu(t),l=u[o]||{},c=e.startsWith(".");if(void 0===s){if(c)for(const n of Object.keys(u))Hu(t,u,n,e.slice(1));for(const n of Object.keys(l)){const i=n.replace(Ru,"");if(!a||e.includes(i)){const e=l[n];$u(t,u,o,e.callable,e.delegationSelector)}}}else{if(!Object.keys(l).length)return;$u(t,u,o,s,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=Su();let r=null,s=!0,o=!0,a=!1;e!==Wu(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),s=!r.isPropagationStopped(),o=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());let u=new Event(e,{bubbles:s,cancelable:!0});return u=Ku(u,n),a&&u.preventDefault(),o&&t.dispatchEvent(u),u.defaultPrevented&&r&&r.preventDefault(),u}};function Ku(t,e){for(const[i,r]of Object.entries(e||{}))try{t[i]=r}catch(n){Object.defineProperty(t,i,{configurable:!0,get:()=>r})}return t}const Qu=new Map,Yu={set(t,e,n){Qu.has(t)||Qu.set(t,new Map);const i=Qu.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>Qu.has(t)&&Qu.get(t).get(e)||null,remove(t,e){if(!Qu.has(t))return;const n=Qu.get(t);n.delete(e),0===n.size&&Qu.delete(t)}};function Ju(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function Xu(t){return t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const tl={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Xu(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Xu(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(t=>t.startsWith("bs")&&!t.startsWith("bsConfig"));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=Ju(t.dataset[i])}return e},getDataAttribute:(t,e)=>Ju(t.getAttribute(`data-bs-${Xu(e)}`))};class el{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=wu(e)?tl.getDataAttribute(e,"config"):{};return jo(jo(jo(jo({},this.constructor.Default),"object"==typeof n?n:{}),wu(e)?tl.getDataAttributes(e):{}),"object"==typeof t?t:{})}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const i of Object.keys(e)){const r=e[i],s=t[i],o=wu(s)?"element":null==(n=s)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}var n}}class nl extends el{constructor(t,e){super(),(t=bu(t))&&(this._element=t,this._config=this._getConfig(e),Yu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Yu.remove(this._element,this.constructor.DATA_KEY),Gu.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Pu(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Yu.get(bu(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const il=(t,e="hide")=>{const n=t.NAME;Gu.on(document,`click.dismiss${t.EVENT_KEY}`,`[data-bs-dismiss="${n}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Tu(this))return;const r=yu(this)||this.closest(`.${n}`);t.getOrCreateInstance(r)[e]()})},rl=".bs.alert",sl=`close${rl}`,ol=`closed${rl}`;class al extends nl{static get NAME(){return"alert"}close(){if(Gu.trigger(this._element,sl).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),Gu.trigger(this._element,ol),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=al.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}il(al,"close"),ku(al);const ul='[data-bs-toggle="button"]';class ll extends nl{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const e=ll.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}Gu.on(document,"click.bs.button.data-api",ul,t=>{t.preventDefault();const e=t.target.closest(ul);ll.getOrCreateInstance(e).toggle()}),ku(ll);const cl={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter(t=>t.matches(e)),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(t=>!Tu(t)&&Cu(t))}},hl=".bs.swipe",dl=`touchstart${hl}`,fl=`touchmove${hl}`,pl=`touchend${hl}`,ml=`pointerdown${hl}`,gl=`pointerup${hl}`,_l={endCallback:null,leftCallback:null,rightCallback:null},yl={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class vl extends el{constructor(t,e){super(),this._element=t,t&&vl.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return _l}static get DefaultType(){return yl}static get NAME(){return"swipe"}dispose(){Gu.off(this._element,hl)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Du(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&Du(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Gu.on(this._element,ml,t=>this._start(t)),Gu.on(this._element,gl,t=>this._end(t)),this._element.classList.add("pointer-event")):(Gu.on(this._element,dl,t=>this._start(t)),Gu.on(this._element,fl,t=>this._move(t)),Gu.on(this._element,pl,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const wl=".bs.carousel",bl=".data-api",Cl="next",Tl="prev",El="left",Il="right",Sl=`slide${wl}`,xl=`slid${wl}`,Al=`keydown${wl}`,kl=`mouseenter${wl}`,Dl=`mouseleave${wl}`,Pl=`dragstart${wl}`,Nl=`load${wl}${bl}`,Ol=`click${wl}${bl}`,Ll="carousel",Rl="active",Fl={ArrowLeft:Il,ArrowRight:El},Ml={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Vl={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Bl extends nl{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=cl.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ll&&this.cycle()}static get Default(){return Ml}static get DefaultType(){return Vl}static get NAME(){return"carousel"}next(){this._slide(Cl)}nextWhenVisible(){!document.hidden&&Cu(this._element)&&this.next()}prev(){this._slide(Tl)}pause(){this._isSliding&&vu(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void Gu.one(this._element,xl,()=>this.cycle());this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void Gu.one(this._element,xl,()=>this.to(t));const n=this._getItemIndex(this._getActive());n!==t&&this._slide(t>n?Cl:Tl,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Gu.on(this._element,Al,t=>this._keydown(t)),"hover"===this._config.pause&&(Gu.on(this._element,kl,()=>this.pause()),Gu.on(this._element,Dl,()=>this._maybeEnableCycle())),this._config.touch&&vl.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of cl.find(".carousel-item img",this._element))Gu.on(t,Pl,t=>t.preventDefault());this._swipeHelper=new vl(this._element,{leftCallback:()=>this._slide(this._directionToOrder(El)),rightCallback:()=>this._slide(this._directionToOrder(Il)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Fl[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=cl.findOne(".active",this._indicatorsElement);e.classList.remove(Rl),e.removeAttribute("aria-current");const n=cl.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Rl),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===Cl,r=e||Nu(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=e=>Gu.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s});if(o(Sl).defaultPrevented||!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const u=i?"carousel-item-start":"carousel-item-end",l=i?"carousel-item-next":"carousel-item-prev";r.classList.add(l),n.classList.add(u),r.classList.add(u),this._queueCallback(()=>{r.classList.remove(u,l),r.classList.add(Rl),n.classList.remove(Rl,l,u),this._isSliding=!1,o(xl)},n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return cl.findOne(".active.carousel-item",this._element)}_getItems(){return cl.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Au()?t===El?Tl:Cl:t===El?Cl:Tl}_orderToDirection(t){return Au()?t===Tl?El:Il:t===Tl?Il:El}static jQueryInterface(t){return this.each(function(){const e=Bl.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)})}}Gu.on(document,Ol,"[data-bs-slide], [data-bs-slide-to]",function(t){const e=yu(this);if(!e||!e.classList.contains(Ll))return;t.preventDefault();const n=Bl.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===tl.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())}),Gu.on(window,Nl,()=>{const t=cl.find('[data-bs-ride="carousel"]');for(const e of t)Bl.getOrCreateInstance(e)}),ku(Bl);const jl=".bs.collapse",Ul=`show${jl}`,ql=`shown${jl}`,zl=`hide${jl}`,Zl=`hidden${jl}`,$l=`click${jl}.data-api`,Hl="show",Wl="collapse",Gl="collapsing",Kl=`:scope .${Wl} .${Wl}`,Ql='[data-bs-toggle="collapse"]',Yl={parent:null,toggle:!0},Jl={parent:"(null|element)",toggle:"boolean"};class Xl extends nl{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=cl.find(Ql);for(const i of n){const t=_u(i),e=cl.find(t).filter(t=>t===this._element);null!==t&&e.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Yl}static get DefaultType(){return Jl}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(t=>t!==this._element).map(t=>Xl.getOrCreateInstance(t,{toggle:!1}))),t.length&&t[0]._isTransitioning||Gu.trigger(this._element,Ul).defaultPrevented)return;for(const i of t)i.hide();const e=this._getDimension();this._element.classList.remove(Wl),this._element.classList.add(Gl),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Gl),this._element.classList.add(Wl,Hl),this._element.style[e]="",Gu.trigger(this._element,ql)},this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown()||Gu.trigger(this._element,zl).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,this._element.classList.add(Gl),this._element.classList.remove(Wl,Hl);for(const e of this._triggerArray){const t=yu(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Gl),this._element.classList.add(Wl),Gu.trigger(this._element,Zl)},this._element,!0)}_isShown(t=this._element){return t.classList.contains(Hl)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=bu(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Ql);for(const e of t){const t=yu(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=cl.find(Kl,this._config.parent);return cl.find(t,this._config.parent).filter(t=>!e.includes(t))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const n=Xl.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}})}}Gu.on(document,$l,Ql,function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=_u(this),n=cl.find(e);for(const i of n)Xl.getOrCreateInstance(i,{toggle:!1}).toggle()}),ku(Xl);const tc="dropdown",ec=".bs.dropdown",nc=".data-api",ic="ArrowUp",rc="ArrowDown",sc=`hide${ec}`,oc=`hidden${ec}`,ac=`show${ec}`,uc=`shown${ec}`,lc=`click${ec}${nc}`,cc=`keydown${ec}${nc}`,hc=`keyup${ec}${nc}`,dc="show",fc='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',pc=`${fc}.show`,mc=".dropdown-menu",gc=Au()?"top-end":"top-start",_c=Au()?"top-start":"top-end",yc=Au()?"bottom-end":"bottom-start",vc=Au()?"bottom-start":"bottom-end",wc=Au()?"left-start":"right-start",bc=Au()?"right-start":"left-start",Cc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Tc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ec extends nl{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=cl.next(this._element,mc)[0]||cl.prev(this._element,mc)[0]||cl.findOne(mc,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Cc}static get DefaultType(){return Tc}static get NAME(){return tc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Tu(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!Gu.trigger(this._element,ac,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))Gu.on(t,"mouseover",Iu);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(dc),this._element.classList.add(dc),Gu.trigger(this._element,uc,t)}}hide(){!Tu(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Gu.trigger(this._element,sc,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Gu.off(t,"mouseover",Iu);this._popper&&this._popper.destroy(),this._menu.classList.remove(dc),this._element.classList.remove(dc),this._element.setAttribute("aria-expanded","false"),tl.removeDataAttribute(this._menu,"popper"),Gu.trigger(this._element,oc,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!wu(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${tc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:wu(this._config.reference)?t=bu(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=fu(t,this._menu,e)}_isShown(){return this._menu.classList.contains(dc)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return wc;if(t.classList.contains("dropstart"))return bc;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?_c:gc:e?vc:yc}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(tl.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),jo(jo({},t),"function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig)}_selectMenuItem({key:t,target:e}){const n=cl.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(t=>Cu(t));!n.length||Nu(n,e,t===rc,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=Ec.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=cl.find(pc);for(const n of e){const e=Ec.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r||e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const s={relatedTarget:e._element};"click"===t.type&&(s.clickEvent=t),e._completeHide(s)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[ic,rc].includes(t.key);if(!i&&!n||e&&!n)return;t.preventDefault();const r=this.matches(fc)?this:cl.prev(this,fc)[0]||cl.next(this,fc)[0]||cl.findOne(fc,t.delegateTarget.parentNode),s=Ec.getOrCreateInstance(r);if(i)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),r.focus())}}Gu.on(document,cc,fc,Ec.dataApiKeydownHandler),Gu.on(document,cc,mc,Ec.dataApiKeydownHandler),Gu.on(document,lc,Ec.clearMenus),Gu.on(document,hc,Ec.clearMenus),Gu.on(document,lc,fc,function(t){t.preventDefault(),Ec.getOrCreateInstance(this).toggle()}),ku(Ec);const Ic=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Sc=".sticky-top",xc="padding-right",Ac="margin-right";class kc{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,xc,e=>e+t),this._setElementAttributes(Ic,xc,e=>e+t),this._setElementAttributes(Sc,Ac,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,xc),this._resetElementAttributes(Ic,xc),this._resetElementAttributes(Sc,Ac)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)})}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&tl.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,t=>{const n=tl.getDataAttribute(t,e);null!==n?(tl.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)})}_applyManipulationCallback(t,e){if(wu(t))e(t);else for(const n of cl.find(t,this._element))e(n)}}const Dc="backdrop",Pc=`mousedown.bs.${Dc}`,Nc={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Oc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Lc extends el{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Nc}static get DefaultType(){return Oc}static get NAME(){return Dc}show(t){if(!this._config.isVisible)return void Du(t);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{Du(t)})}hide(t){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),Du(t)})):Du(t)}dispose(){!this._isAppended||(Gu.off(this._element,Pc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=bu(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),Gu.on(t,Pc,()=>{Du(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Pu(t,this._getElement(),this._config.isAnimated)}}const Rc=".bs.focustrap",Fc=`focusin${Rc}`,Mc=`keydown.tab${Rc}`,Vc="backward",Bc={autofocus:!0,trapElement:null},jc={autofocus:"boolean",trapElement:"element"};class Uc extends el{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Bc}static get DefaultType(){return jc}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Gu.off(document,Rc),Gu.on(document,Fc,t=>this._handleFocusin(t)),Gu.on(document,Mc,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Gu.off(document,Rc))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=cl.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Vc?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?Vc:"forward")}}const qc=".bs.modal",zc=`hide${qc}`,Zc=`hidePrevented${qc}`,$c=`hidden${qc}`,Hc=`show${qc}`,Wc=`shown${qc}`,Gc=`resize${qc}`,Kc=`click.dismiss${qc}`,Qc=`mousedown.dismiss${qc}`,Yc=`keydown.dismiss${qc}`,Jc=`click${qc}.data-api`,Xc="modal-open",th="modal-static",eh={backdrop:!0,focus:!0,keyboard:!0},nh={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ih extends nl{constructor(t,e){super(t,e),this._dialog=cl.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new kc,this._addEventListeners()}static get Default(){return eh}static get DefaultType(){return nh}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Gu.trigger(this._element,Hc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Xc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||Gu.trigger(this._element,zc).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])Gu.off(t,qc);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Lc({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Uc({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=cl.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Gu.trigger(this._element,Wc,{relatedTarget:t})},this._dialog,this._isAnimated())}_addEventListeners(){Gu.on(this._element,Yc,t=>{if("Escape"===t.key){if(this._config.keyboard)return t.preventDefault(),void this.hide();this._triggerBackdropTransition()}}),Gu.on(window,Gc,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Gu.on(this._element,Qc,t=>{Gu.one(this._element,Kc,e=>{if(this._element===t.target&&this._element===e.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Xc),this._resetAdjustments(),this._scrollBar.reset(),Gu.trigger(this._element,$c)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Gu.trigger(this._element,Zc).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(th)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(th),this._queueCallback(()=>{this._element.classList.remove(th),this._queueCallback(()=>{this._element.style.overflowY=e},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=Au()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=Au()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const n=ih.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}})}}Gu.on(document,Jc,'[data-bs-toggle="modal"]',function(t){const e=yu(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Gu.one(e,Hc,t=>{t.defaultPrevented||Gu.one(e,$c,()=>{Cu(this)&&this.focus()})});const n=cl.findOne(".modal.show");n&&ih.getInstance(n).hide(),ih.getOrCreateInstance(e).toggle(this)}),il(ih),ku(ih);const rh=".bs.offcanvas",sh=".data-api",oh=`load${rh}${sh}`,ah="showing",uh=".offcanvas.show",lh=`show${rh}`,ch=`shown${rh}`,hh=`hide${rh}`,dh=`hidePrevented${rh}`,fh=`hidden${rh}`,ph=`resize${rh}`,mh=`click${rh}${sh}`,gh=`keydown.dismiss${rh}`,_h={backdrop:!0,keyboard:!0,scroll:!1},yh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class vh extends nl{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return _h}static get DefaultType(){return yh}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||Gu.trigger(this._element,lh,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new kc).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ah),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(ah),Gu.trigger(this._element,ch,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&!Gu.trigger(this._element,hh).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new kc).reset(),Gu.trigger(this._element,fh)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new Lc({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():Gu.trigger(this._element,dh)}:null})}_initializeFocusTrap(){return new Uc({trapElement:this._element})}_addEventListeners(){Gu.on(this._element,gh,t=>{if("Escape"===t.key){if(!this._config.keyboard)return void Gu.trigger(this._element,dh);this.hide()}})}static jQueryInterface(t){return this.each(function(){const e=vh.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Gu.on(document,mh,'[data-bs-toggle="offcanvas"]',function(t){const e=yu(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Tu(this))return;Gu.one(e,fh,()=>{Cu(this)&&this.focus()});const n=cl.findOne(uh);n&&n!==e&&vh.getInstance(n).hide(),vh.getOrCreateInstance(e).toggle(this)}),Gu.on(window,oh,()=>{for(const t of cl.find(uh))vh.getOrCreateInstance(t).show()}),Gu.on(window,ph,()=>{for(const t of cl.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&vh.getOrCreateInstance(t).hide()}),il(vh),ku(vh);const wh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),bh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ch=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Th=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!wh.has(n)||Boolean(bh.test(t.nodeValue)||Ch.test(t.nodeValue)):e.filter(t=>t instanceof RegExp).some(t=>t.test(n))},Eh={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ih={allowList:Eh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Sh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},xh={entry:"(string|element|function|null)",selector:"(string|element)"};class Ah extends el{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Ih}static get DefaultType(){return Sh}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content=jo(jo({},this._config.content),t),this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(t,r,i);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},xh)}_setContent(t,e,n){const i=cl.findOne(n,t);if(i){if(!(e=this._resolvePossibleFunction(e)))return void i.remove();if(wu(e))return void this._putElementInTemplate(bu(e),i);if(this._config.html)return void(i.innerHTML=this._maybeSanitize(e));i.textContent=e}}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const s of r){const t=s.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){s.remove();continue}const n=[].concat(...s.attributes),i=[].concat(e["*"]||[],e[t]||[]);for(const e of n)Th(e,i)||s.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return"function"==typeof t?t(this):t}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const kh=new Set(["sanitize","allowList","sanitizeFn"]),Dh="fade",Ph="show",Nh="hide.bs.modal",Oh="hover",Lh="focus",Rh={AUTO:"auto",TOP:"top",RIGHT:Au()?"left":"right",BOTTOM:"bottom",LEFT:Au()?"right":"left"},Fh={allowList:Eh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Mh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Vh extends nl{constructor(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Fh}static get DefaultType(){return Mh}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),Gu.off(this._element.closest(".modal"),Nh,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=Gu.trigger(this._element,this.constructor.eventName("show")),e=(Eu(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Gu.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(Ph),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))Gu.on(r,"mouseover",Iu);this._queueCallback(()=>{Gu.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Gu.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Ph),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Gu.off(t,"mouseover",Iu);this._activeTrigger.click=!1,this._activeTrigger[Lh]=!1,this._activeTrigger[Oh]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Gu.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Dh,Ph),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(Dh),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ah(NT(jo({},this._config),{content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Dh)}_isShown(){return this.tip&&this.tip.classList.contains(Ph)}_createPopper(t){const e="function"==typeof this._config.placement?this._config.placement.call(this,t,this._element):this._config.placement,n=Rh[e.toUpperCase()];return fu(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return jo(jo({},e),"function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig)}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)Gu.on(this._element,this.constructor.eventName("click"),this._config.selector,t=>{this._initializeOnDelegatedTarget(t).toggle()});else if("manual"!==e){const t=this.constructor.eventName(e===Oh?"mouseenter":"focusin"),n=this.constructor.eventName(e===Oh?"mouseleave":"focusout");Gu.on(this._element,t,this._config.selector,t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?Lh:Oh]=!0,e._enter()}),Gu.on(this._element,n,this._config.selector,t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?Lh:Oh]=e._element.contains(t.relatedTarget),e._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Gu.on(this._element.closest(".modal"),Nh,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");!t||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=tl.getDataAttributes(this._element);for(const n of Object.keys(e))kh.has(n)&&delete e[n];return t=jo(jo({},e),"object"==typeof t&&t?t:{}),t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:bu(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Vh.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}ku(Vh);const Bh=NT(jo({},Vh.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),jh=NT(jo({},Vh.DefaultType),{content:"(null|string|element|function)"});class Uh extends Vh{static get Default(){return Bh}static get DefaultType(){return jh}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=Uh.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}ku(Uh);const qh=".bs.scrollspy",zh=`activate${qh}`,Zh=`click${qh}`,$h=`load${qh}.data-api`,Hh="active",Wh="[href]",Gh=".nav-link",Kh=`${Gh}, .nav-item > ${Gh}, .list-group-item`,Qh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Yh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Jh extends nl{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Qh}static get DefaultType(){return Yh}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=bu(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(t=>Number.parseFloat(t))),t}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(Gu.off(this._config.target,Zh),Gu.on(this._config.target,Zh,Wh,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}}))}_getNewObserver(){return new IntersectionObserver(t=>this._observerCallback(t),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}const t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(s),!i)return}else!r&&!t&&n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=cl.find(Wh,this._config.target);for(const e of t){if(!e.hash||Tu(e))continue;const t=cl.findOne(e.hash,this._element);Cu(t)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Hh),this._activateParents(t),Gu.trigger(this._element,zh,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))cl.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Hh);else for(const e of cl.parents(t,".nav, .list-group"))for(const t of cl.prev(e,Kh))t.classList.add(Hh)}_clearActiveClass(t){t.classList.remove(Hh);const e=cl.find(`${Wh}.${Hh}`,t);for(const n of e)n.classList.remove(Hh)}static jQueryInterface(t){return this.each(function(){const e=Jh.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}})}}Gu.on(window,$h,()=>{for(const t of cl.find('[data-bs-spy="scroll"]'))Jh.getOrCreateInstance(t)}),ku(Jh);const Xh=".bs.tab",td=`hide${Xh}`,ed=`hidden${Xh}`,nd=`show${Xh}`,id=`shown${Xh}`,rd=`click${Xh}`,sd=`keydown${Xh}`,od=`load${Xh}`,ad="ArrowLeft",ud="ArrowRight",ld="ArrowUp",cd="ArrowDown",hd="active",dd="show",fd=":not(.dropdown-toggle)",pd='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',md=`.nav-link${fd}, .list-group-item${fd}, [role="tab"]${fd}, ${pd}`,gd=`.${hd}[data-bs-toggle="tab"], .${hd}[data-bs-toggle="pill"], .${hd}[data-bs-toggle="list"]`;class _d extends nl{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Gu.on(this._element,sd,t=>this._keydown(t)))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?Gu.trigger(e,td,{relatedTarget:t}):null;Gu.trigger(t,nd,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(hd),this._activate(yu(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Gu.trigger(t,id,{relatedTarget:e})):t.classList.add(dd)},t,t.classList.contains("fade")))}_deactivate(t,e){t&&(t.classList.remove(hd),t.blur(),this._deactivate(yu(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Gu.trigger(t,ed,{relatedTarget:e})):t.classList.remove(dd)},t,t.classList.contains("fade")))}_keydown(t){if(![ad,ud,ld,cd].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[ud,cd].includes(t.key),n=Nu(this._getChildren().filter(t=>!Tu(t)),t.target,e,!0);n&&(n.focus({preventScroll:!0}),_d.getOrCreateInstance(n).show())}_getChildren(){return cl.find(md,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=yu(t);!e||(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=cl.findOne(t,n);r&&r.classList.toggle(i,e)};i(".dropdown-toggle",hd),i(".dropdown-menu",dd),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(hd)}_getInnerElement(t){return t.matches(md)?t:cl.findOne(md,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){const e=_d.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}})}}Gu.on(document,rd,pd,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Tu(this)&&_d.getOrCreateInstance(this).show()}),Gu.on(window,od,()=>{for(const t of cl.find(gd))_d.getOrCreateInstance(t)}),ku(_d);const yd=".bs.toast",vd=`mouseover${yd}`,wd=`mouseout${yd}`,bd=`focusin${yd}`,Cd=`focusout${yd}`,Td=`hide${yd}`,Ed=`hidden${yd}`,Id=`show${yd}`,Sd=`shown${yd}`,xd="show",Ad="showing",kd={animation:"boolean",autohide:"boolean",delay:"number"},Dd={animation:!0,autohide:!0,delay:5e3};class Pd extends nl{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Dd}static get DefaultType(){return kd}static get NAME(){return"toast"}show(){Gu.trigger(this._element,Id).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(xd,Ad),this._queueCallback(()=>{this._element.classList.remove(Ad),Gu.trigger(this._element,Sd),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!Gu.trigger(this._element,Td).defaultPrevented&&(this._element.classList.add(Ad),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Ad,xd),Gu.trigger(this._element,Ed)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(xd),super.dispose()}isShown(){return this._element.classList.contains(xd)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Gu.on(this._element,vd,t=>this._onInteraction(t,!0)),Gu.on(this._element,wd,t=>this._onInteraction(t,!1)),Gu.on(this._element,bd,t=>this._onInteraction(t,!0)),Gu.on(this._element,Cd,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Pd.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}})}}il(Pd),ku(Pd);let Nd=(()=>{class t{constructor(){this._isDefined=!1,this._isDefined=void 0!==this.replyDialog&&void 0!==this.bootstrapModal}hideReplyDialog(){this.bootstrapModal&&this.bootstrapModal.hide()}showReplyDialog(){this._isDefined||this._createModalInstance(),this.bootstrapModal&&this.bootstrapModal.show()}_createModalInstance(){this.replyDialog=document.getElementById("replyDialog"),this.bootstrapModal=new ih(this.replyDialog,{keyboard:!1})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();var Od=n(8239),Ld=n(7589),Rd=n(3854),Fd=n(8026),Md=n(5422),Vd=n(3910),Bd=n(6682),jd=n(309),Ud=n(7771),qd=n(8858);class zd extends we.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Zd(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new be.N;if(this.isStopped||this.hasError?s=mn.w.EMPTY:(this.observers.push(t),s=new qd.W(this,t)),i&&t.add(t=new jd.ht(t,i)),e)for(let o=0;o<r&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<r&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||Ud.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(t-i[s].time<n);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&i.splice(0,s),i}}class Zd{constructor(t,e){this.time=t,this.value=e}}function $d(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,s,o=0,a=!1,u=!1;return function(l){let c;o++,!r||a?(a=!1,r=new zd(t,e,i),c=r.subscribe(this),s=l.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){u=!0,s=void 0,r.complete()}}),u&&(s=void 0)):c=r.subscribe(this),this.add(()=>{o--,c.unsubscribe(),c=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,r=void 0)})}}(i))}function Hd(t,e){return e?je(()=>t,e):je(()=>t)}var Wd=n(3101),Gd=n(8445),Kd=n(8939);n(8213);const Qd=new Map,Yd={activated:!1,tokenObservers:[]},Jd={initialized:!1,enabled:!1};function Xd(t){return Qd.get(t)||Object.assign({},Yd)}function tf(){return Jd}class ef{constructor(t,e,n,i,r){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=i,i>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Od.Z)(function*(){e.stop();try{e.pending=new Rd.BH,yield(n=e.getNextRun(t),new Promise(t=>{setTimeout(t,n)})),e.pending.resolve(),yield e.pending.promise,e.pending=new Rd.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}var n})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const nf=new Rd.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rf(t){if(!Xd(t).activated)throw nf.create("use-before-activation",{appName:t.name})}function sf(t,e){return of.apply(this,arguments)}function of(){return(of=(0,Od.Z)(function*({url:t,body:e},n){const i={"Content-Type":"application/json"},r=n.getImmediate({optional:!0});if(r){const t=yield r.getHeartbeatsHeader();t&&(i["X-Firebase-Client"]=t)}const s={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=yield fetch(t,s)}catch(h){throw nf.create("fetch-network-error",{originalErrorMessage:null==h?void 0:h.message})}if(200!==o.status)throw nf.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw nf.create("fetch-parse-error",{originalErrorMessage:null==h?void 0:h.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw nf.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(u[1]),c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}})).apply(this,arguments)}function af(t,e){const{projectId:n,appId:i,apiKey:r}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const uf="firebase-app-check-store";let lf=null;function cf(){return lf||(lf=new Promise((t,e)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=e=>{t(e.target.result)},n.onerror=t=>{var n;e(nf.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=t=>{0===t.oldVersion&&t.target.result.createObjectStore(uf,{keyPath:"compositeKey"})}}catch(n){e(nf.create("storage-open",{originalErrorMessage:null==n?void 0:n.message}))}}),lf)}function hf(){return(hf=(0,Od.Z)(function*(t,e){const n=(yield cf()).transaction(uf,"readwrite"),i=n.objectStore(uf).put({compositeKey:t,value:e});return new Promise((t,e)=>{i.onsuccess=e=>{t()},n.onerror=t=>{var n;e(nf.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const df=new Md.Yd("@firebase/app-check");function ff(t,e){return(0,Rd.hl)()?function(t,e){return function(t,e){return hf.apply(this,arguments)}(function(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(t=>{df.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pf(){return tf().enabled}function mf(){return gf.apply(this,arguments)}function gf(){return(gf=(0,Od.Z)(function*(){const t=tf();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _f={error:"UNKNOWN_ERROR"};function yf(t){return Rd.US.encodeString(JSON.stringify(t),!1)}function vf(t){return wf.apply(this,arguments)}function wf(){return(wf=(0,Od.Z)(function*(t,e=!1){const n=t.app;rf(n);const i=Xd(n);let r,s=i.token;if(s&&!Ef(s)&&(i.token=void 0,s=void 0),!s){const t=yield i.cachedTokenPromise;t&&(Ef(t)?s=t:yield ff(n,void 0))}if(!e&&s&&Ef(s))return{token:s.token};let o,a=!1;if(pf()){i.exchangeTokenPromise||(i.exchangeTokenPromise=sf(af(n,yield mf()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);const e=yield i.exchangeTokenPromise;return yield ff(n,e),i.token=e,{token:e.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield Xd(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?df.warn(u.message):df.error(u),r=u}return s?r?o=Ef(s)?{token:s.token,internalError:r}:If(r):(o={token:s.token},i.token=s,yield ff(n,s)):o=If(r),a&&Tf(n,o),o})).apply(this,arguments)}function bf(t,e){const n=Xd(t),i=n.tokenObservers.filter(t=>t.next!==e);0===i.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function Cf(t){const{app:e}=t,n=Xd(e);let i=n.tokenRefresher;i||(i=function(t){const{app:e}=t;return new ef((0,Od.Z)(function*(){let n;if(n=Xd(e).token?yield vf(t,!0):yield vf(t),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{const t=Xd(e);if(t.token){let e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return e=Math.min(e,t.token.expireTimeMillis-3e5),Math.max(0,e-Date.now())}return 0},3e4,96e4)}(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function Tf(t,e){const n=Xd(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Ef(t){return t.expireTimeMillis-Date.now()>0}function If(t){return{token:yf(_f),error:t}}class Sf{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Xd(this.app);for(const e of t)bf(this.app,e.next);return Promise.resolve()}}const xf="app-check-internal";(0,Fd._registerComponent)(new Vd.wA("app-check",t=>function(t,e){return new Sf(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(xf).initialize()})),(0,Fd._registerComponent)(new Vd.wA(xf,t=>function(t){return{getToken:e=>vf(t,e),addTokenListener:e=>function(t,e,n,i){const{app:r}=t,s=Xd(r);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:i,type:e}],s.token&&Ef(s.token)){const e=s.token;Promise.resolve().then(()=>{n({token:e.token}),Cf(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Cf(t))}(t,"INTERNAL",e),removeTokenListener:e=>bf(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fd.registerVersion)("@firebase/app-check","0.6.0");class Af{constructor(){return(0,Gd.vb)("app-check")}}"undefined"!=typeof window&&window;var kf=n(2533);const Df=new r.OlP("angularfire2.auth.use-emulator"),Pf=new r.OlP("angularfire2.auth.settings"),Nf=new r.OlP("angularfire2.auth.tenant-id"),Of=new r.OlP("angularfire2.auth.langugage-code"),Lf=new r.OlP("angularfire2.auth.use-device-language"),Rf=new r.OlP("angularfire.auth.persistence"),Ff=(t,e,n,i,r,s,o,a)=>(0,Kd.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,s&&u.useDeviceLanguage(),o)for(const[t,e]of Object.entries(o))u.settings[t]=e;return a&&u.setPersistence(a),u},[n,i,r,s,o,a]);let Mf=(()=>{class t{constructor(t,e,i,r,s,o,a,u,l,c,h,d){const f=new we.xQ,p=(0,Dt.of)(void 0).pipe((0,jd.QV)(s.outsideAngular),je(()=>r.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,1793)))),(0,kt.U)(()=>(0,Kd.on)(t,r,e)),(0,kt.U)(t=>Ff(t,r,o,u,l,c,a,h)),$d({bufferSize:1,refCount:!1}));if(G(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Dt.of)(null);else{p.pipe(dn()).subscribe();const t=p.pipe(je(t=>t.getRedirectResult().then(t=>t,()=>null)),Gd.iC,$d({bufferSize:1,refCount:!1})),e=p.pipe(je(t=>new Pt.y(e=>({unsubscribe:r.runOutsideAngular(()=>t.onAuthStateChanged(t=>e.next(t),t=>e.error(t),()=>e.complete()))})))),n=p.pipe(je(t=>new Pt.y(e=>({unsubscribe:r.runOutsideAngular(()=>t.onIdTokenChanged(t=>e.next(t),t=>e.error(t),()=>e.complete()))}))));this.authState=t.pipe(Hd(e),(0,Wd.R)(s.outsideAngular),(0,jd.QV)(s.insideAngular)),this.user=t.pipe(Hd(n),(0,Wd.R)(s.outsideAngular),(0,jd.QV)(s.insideAngular)),this.idToken=this.user.pipe(je(t=>t?(0,ve.D)(t.getIdToken()):(0,Dt.of)(null))),this.idTokenResult=this.user.pipe(je(t=>t?(0,ve.D)(t.getIdTokenResult()):(0,Dt.of)(null))),this.credential=(0,Bd.T)(t,f,this.authState.pipe(Rt(t=>!t))).pipe((0,kt.U)(t=>(null==t?void 0:t.user)?t:null),(0,Wd.R)(s.outsideAngular),(0,jd.QV)(s.insideAngular))}return(0,Kd.pX)(this,p,r,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Kd.Dh),r.LFG(Kd.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gd.HU),r.LFG(Df,8),r.LFG(Pf,8),r.LFG(Nf,8),r.LFG(Of,8),r.LFG(Lf,8),r.LFG(Rf,8),r.LFG(Af,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),Vf=(()=>{class t{constructor(){kf.Z.registerVersion("angularfire",Gd.q4.full,"auth-compat")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Mf]}),t})();var Bf=n(3637),jf=n(8819);function Uf(t,e){return n=>n.lift(new qf(t,e))}class qf{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new zf(t,this.compare,this.keySelector))}}class zf extends Lt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Zf{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new $f(t,this.observables,this.project))}}class $f extends Ie{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++)this.add(Ae(this,e[r],void 0,r))}notifyNext(t,e,n){this.values[n]=e;const i=this.toRespond;if(i.length>0){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Hf{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Wf(t,this.predicate))}}class Wf extends Lt.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n(1793);var Gf=n(3394);const Kf="@firebase/database";let Qf="";function Yf(t){Qf=t}class Jf{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,Rd.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,Rd.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Xf{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,Rd.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const tp=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Jf(e)}}catch(e){}return new Xf},ep=tp("localStorage"),np=tp("sessionStorage"),ip=new Md.Yd("@firebase/database"),rp=function(){let t=1;return function(){return t++}}(),sp=function(t){const e=(0,Rd.dS)(t),n=new Rd.gQ;n.update(e);const i=n.digest();return Rd.US.encodeByteArray(i)},op=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=op.apply(null,i):e+="object"==typeof i?(0,Rd.Wl)(i):i,e+=" "}return e};let ap=null,up=!0;const lp=function(t,e){(0,Rd.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ip.logLevel=Md.in.VERBOSE,ap=ip.log.bind(ip),e&&np.set("logging_enabled",!0)):"function"==typeof t?ap=t:(ap=null,np.remove("logging_enabled"))},cp=function(...t){if(!0===up&&(up=!1,null===ap&&!0===np.get("logging_enabled")&&lp(!0)),ap){const e=op.apply(null,t);ap(e)}},hp=function(t){return function(...e){cp(t,...e)}},dp=function(...t){const e="FIREBASE INTERNAL ERROR: "+op(...t);ip.error(e)},fp=function(...t){const e=`FIREBASE FATAL ERROR: ${op(...t)}`;throw ip.error(e),new Error(e)},pp=function(...t){const e="FIREBASE WARNING: "+op(...t);ip.warn(e)},mp=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},gp="[MIN_NAME]",_p="[MAX_NAME]",yp=function(t,e){if(t===e)return 0;if(t===gp||e===_p)return-1;if(e===gp||t===_p)return 1;{const n=Sp(t),i=Sp(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1}},vp=function(t,e){return t===e?0:t<e?-1:1},wp=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,Rd.Wl)(e))},bp=function(t){if("object"!=typeof t||null===t)return(0,Rd.Wl)(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)0!==i&&(n+=","),n+=(0,Rd.Wl)(e[i]),n+=":",n+=bp(t[e[i]]);return n+="}",n},Cp=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)i.push(t.substring(r,r+e>n?n:r+e));return i};function Tp(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Ep=function(t){(0,Rd.hu)(!mp(t),"Invalid JSON number");const e=1023;let n,i,r,s,o;0===t?(i=0,r=0,n=1/t==-1/0?1:0):(n=t<0,(t=Math.abs(t))>=Math.pow(2,1-e)?(s=Math.min(Math.floor(Math.log(t)/Math.LN2),e),i=s+e,r=Math.round(t*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(t/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);a.push(n?1:0),a.reverse();const u=a.join("");let l="";for(o=0;o<64;o+=8){let t=parseInt(u.substr(o,8),2).toString(16);1===t.length&&(t="0"+t),l+=t}return l.toLowerCase()},Ip=new RegExp("^-?(0*)\\d{1,10}$"),Sp=function(t){if(Ip.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},xp=function(t){try{t()}catch(e){setTimeout(()=>{throw pp("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ap=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class kp{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(t=>this.appCheck=t)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){pp(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Dp{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(t=>this.auth_=t)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(t=>t&&"auth/token-not-initialized"===t.code?(cp("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pp(t)}}let Pp=(()=>{class t{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const Np=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Op="websocket",Lp="long_polling";class Rp{constructor(t,e,n,i,r=!1,s="",o=!1){this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ep.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ep.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Fp(t,e,n){let i;if((0,Rd.hu)("string"==typeof e,"typeof type must == string"),(0,Rd.hu)("object"==typeof n,"typeof params must == object"),e===Op)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Lp)throw new Error("Unknown connection type: "+e);i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const r=[];return Tp(n,(t,e)=>{r.push(t+"="+e)}),i+r.join("&")}class Mp{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,Rd.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,Rd.p$)(this.counters_)}}const Vp={},Bp={};function jp(t){const e=t.toString();return Vp[e]||(Vp[e]=new Mp),Vp[e]}class Up{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&xp(()=>{this.onMessage_(t[e])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class qp{constructor(t,e,n,i,r,s,o){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hp(t),this.stats_=jp(e),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),Fp(e,Lp,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Up(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,Rd.Yr)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zp((...t)=>{const[e,n,i,r,s]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===e)this.id=n,this.password=i;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)},()=>{this.onClosed_()},this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Np.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qp.forceAllow_=!0}static forceDisallow(){qp.forceDisallow_=!0}static isAvailable(){return!((0,Rd.Yr)()||!qp.forceAllow_&&(qp.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,Rd.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(0,Rd.h$)(e),i=Cp(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,Rd.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,Rd.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class zp{constructor(t,e,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Rd.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=rp(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=zp.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){cp("frame writing exception"),r.stack&&cp(r.stack),cp(r)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||cp("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const t=this.pendingSegs.shift();n=n+"&seg"+i+"="+t.seg+"&ts"+i+"="+t.ts+"&d"+i+"="+t.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),n()})}addTag(t,e){(0,Rd.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;(!t||"loaded"===t||"complete"===t)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{cp("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let Zp=null;"undefined"!=typeof MozWebSocket?Zp=MozWebSocket:"undefined"!=typeof WebSocket&&(Zp=WebSocket);let $p=(()=>{class t{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hp(this.connId),this.stats_=jp(n),this.connURL=t.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,e,n,i,r){const s={v:"5"};return!(0,Rd.Yr)()&&"undefined"!=typeof location&&location.hostname&&Np.test(location.hostname)&&(s.r="f"),e&&(s.s=e),n&&(s.ls=n),i&&(s.ac=i),r&&(s.p=r),Fp(t,Op,s)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ep.set("previous_websocket_failure",!0);try{let t;if((0,Rd.Yr)()){t={headers:{"User-Agent":`Firebase/5/${Qf}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(t.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const e=process.env,n=0===this.connURL.indexOf("wss://")?e.HTTPS_PROXY||e.https_proxy:e.HTTP_PROXY||e.http_proxy;n&&(t.proxy={origin:n})}this.mySock=new Zp(this.connURL,[],t)}catch(n){this.log_("Error instantiating WebSocket.");const t=n.message||n.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&t.length>1&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==Zp&&!t.forceDisallow_}static previouslyFailed(){return ep.isInMemoryStorage||!0===ep.get("previous_websocket_failure")}markConnectionHealthy(){ep.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=(0,Rd.cI)(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Rd.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=(0,Rd.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=Cp(e,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),Hp=(()=>{class t{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[qp,$p]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=$p&&$p.isAvailable();let i=n&&!$p.previouslyFailed();if(e.webSocketOnly&&(n||pp("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$p];else{const e=this.transports_=[];for(const n of t.ALL_TRANSPORTS)n&&n.isAvailable()&&e.push(n);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class Wp{constructor(t,e,n,i,r,s,o,a,u,l){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hp("c:"+this.id+":"),this.transportManager_=new Hp(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ap(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=wp("t",t),n=wp("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=wp("t",t),n=wp("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=wp("t",t);if("d"in t){const n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?dp("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dp("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&pp("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),Ap(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ap(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ep.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Gp{put(t,e,n,i){}merge(t,e,n,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}class Kp{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,Rd.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const i=this.getInitialEvent(t);i&&e.apply(n,i)}off(t,e,n){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(t){(0,Rd.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Qp extends Kp{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Rd.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qp}getInitialEvent(t){return(0,Rd.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Yp{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Jp(){return new Yp("")}function Xp(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function tm(t){return t.pieces_.length-t.pieceNum_}function em(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Yp(t.pieces_,e)}function nm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function im(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Yp(e,0)}function sm(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Yp)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new Yp(n,0)}function om(t){return t.pieceNum_>=t.pieces_.length}function am(t,e){const n=Xp(t),i=Xp(e);if(null===n)return e;if(n===i)return am(em(t),em(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function um(t,e){const n=im(t,0),i=im(e,0);for(let r=0;r<n.length&&r<i.length;r++){const t=yp(n[r],i[r]);if(0!==t)return t}return n.length===i.length?0:n.length<i.length?-1:1}function lm(t,e){if(tm(t)!==tm(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function cm(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(tm(t)>tm(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class hm{constructor(t,e){this.errorPrefix_=e,this.parts_=im(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,Rd.ug)(this.parts_[n]);dm(this)}}function dm(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+fm(t))}function fm(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class pm extends Kp{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))},!1)}static getInstance(){return new pm}getInitialEvent(t){return(0,Rd.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const mm=1e3;let gm,_m=(()=>{class t extends Gp{constructor(e,n,i,r,s,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=hp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!(0,Rd.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pm.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Qp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_((0,Rd.Wl)(r)),(0,Rd.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(t){this.initConnection_();const e=new Rd.BH,n={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:n,onComplete:t=>{const n=t.d;"ok"===t.s?e.resolve(n):e.reject(n)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),e.promise}listen(t,e,n,i){this.initConnection_();const r=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),(0,Rd.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Rd.hu)(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i};e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,s=>{const o=s.d,a=s.s;t.warnOnListenWarnings_(o,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(i,r),e.onComplete&&e.onComplete(a,o))})}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&(0,Rd.r3)(t,"w")){const n=(0,Rd.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();pp(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Rd.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=(0,Rd.w9)(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,e=>{const n=e.s,i=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)})}unlisten(t,e){const n=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),(0,Rd.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t._queryObject,e)}sendUnlisten_(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);const r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,i){const r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,t=>{i&&setTimeout(()=>{i(t.s,t.d)},Math.floor(0))})}put(t,e,n,i){this.putInternal("p",t,e,n,i)}merge(t,e,n,i){this.putInternal("m",t,e,n,i)}putInternal(t,e,n,i,r){this.initConnection_();const s={p:e,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:t,request:s,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,t=>{"ok"!==t.s&&this.log_("reportStats","Error sending stats: "+t.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Rd.Wl)(t));const e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):dp("Unrecognized action received from server: "+(0,Rd.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Rd.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mm,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=mm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Od.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),o=e.id+":"+t.nextConnectionId_++,a=e.lastSessionId;let u=!1,l=null;const c=function(){l?l.close():(u=!0,s())};e.realtime_={close:c,sendRequest:function(t){(0,Rd.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};const h=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[t,n]=yield Promise.all([e.authTokenProvider_.getToken(h),e.appCheckTokenProvider_.getToken(h)]);u?cp("getToken() completed but was canceled"):(cp("getToken() completed. Creating connection."),e.authToken_=t&&t.accessToken,e.appCheckToken_=n&&n.token,l=new Wp(o,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,t=>{pp(t+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(n){e.log_("Failed to get token: "+n),u||(e.repoInfo_.nodeAdmin&&pp(n),c())}}})()}interrupt(t){cp("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){cp("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Rd.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map(t=>bp(t)).join("$"):"default";const i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,e){const n=new Yp(t).toString();let i;if(this.listens.has(n)){const t=this.listens.get(n);i=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(t,e){cp("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){cp("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";(0,Rd.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Qf.replace(/\./g,"-")]=1,(0,Rd.uI)()?t["framework.cordova"]=1:(0,Rd.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qp.getInstance().currentlyOnline();return(0,Rd.xb)(this.interruptReasons_)&&t}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class ym{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new ym(t,e)}}class vm{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new ym(gp,t),i=new ym(gp,e);return 0!==this.compare(n,i)}minPost(){return ym.MIN}}class wm extends vm{static get __EMPTY_NODE(){return gm}static set __EMPTY_NODE(t){gm=t}compare(t,e){return yp(t.name,e.name)}isDefinedOn(t){throw(0,Rd.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return ym.MIN}maxPost(){return new ym(_p,gm)}makePost(t,e){return(0,Rd.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new ym(t,gm)}toString(){return".key"}}const bm=new wm;class Cm{constructor(t,e,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Tm,Em=(()=>{class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:Im.EMPTY_NODE,this.right=null!=s?s:Im.EMPTY_NODE}copy(e,n,i,r,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Im.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,i;if(n=this,e(t,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Im.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Im{constructor(t,e=Im.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Im(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Em.BLACK,null,null))}remove(t){return new Im(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Em.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,i=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Cm(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Cm(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Cm(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Cm(this.root_,null,this.comparator_,!0,t)}}function Sm(t,e){return yp(t.name,e.name)}function xm(t,e){return yp(t,e)}Im.EMPTY_NODE=new class{copy(t,e,n,i,r){return this}insert(t,e,n){return new Em(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Am=function(t){return"number"==typeof t?"number:"+Ep(t):"string:"+t},km=function(t){if(t.isLeafNode()){const e=t.val();(0,Rd.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Rd.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Rd.hu)(t===Tm||t.isEmpty(),"priority of unexpected type.");(0,Rd.hu)(t===Tm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Dm,Pm,Nm,Om=(()=>{class t{constructor(e,n=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,Rd.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),km(this.priorityNode_)}static set __childrenNodeConstructor(t){Dm=t}static get __childrenNodeConstructor(){return Dm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new t(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return om(e)?this:".priority"===Xp(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Xp(e);return null===i?n:n.isEmpty()&&".priority"!==i?this:((0,Rd.hu)(".priority"!==i||1===tm(e),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(em(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Am(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?Ep(this.value_):this.value_,this.lazyHash_=sp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,Rd.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(i);return(0,Rd.hu)(r>=0,"Unknown leaf type: "+n),(0,Rd.hu)(s>=0,"Unknown leaf type: "+i),r===s?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Lm=new class extends vm{compare(t,e){const n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?yp(t.name,e.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return ym.MIN}maxPost(){return new ym(_p,new Om("[PRIORITY-POST]",Nm))}makePost(t,e){const n=Pm(t);return new ym(e,new Om("[PRIORITY-POST]",n))}toString(){return".priority"}},Rm=Math.log(2);class Fm{constructor(t){this.count=parseInt(Math.log(t+1)/Rm,10),this.current_=this.count-1;const e=(t=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&e}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Mm=function(t,e,n,i){t.sort(e);const r=function(e,i){const s=i-e;let o,a;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Em(a,o.node,Em.BLACK,null,null);{const u=parseInt(s/2,10)+e,l=r(e,u),c=r(u+1,i);return o=t[u],a=n?n(o):o,new Em(a,o.node,Em.BLACK,l,c)}},s=function(e){let i=null,s=null,o=t.length;const a=function(e,i){const s=o-e,a=o;o-=e;const l=r(s+1,a),c=t[s],h=n?n(c):c;u(new Em(h,c.node,i,null,l))},u=function(t){i?(i.left=t,i=t):(s=t,i=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),i=Math.pow(2,e.count-(t+1));n?a(i,Em.BLACK):(a(i,Em.BLACK),a(i,Em.RED))}return s}(new Fm(t.length));return new Im(i||e,s)};let Vm;const Bm={};class jm{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,Rd.hu)(Bm&&Lm,"ChildrenNode.ts has not been loaded"),Vm=Vm||new jm({".priority":Bm},{".priority":Lm}),Vm}get(t){const e=(0,Rd.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Im?e:null}hasIndex(t){return(0,Rd.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,Rd.hu)(t!==bm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=e.getIterator(ym.Wrap);let s,o=r.getNext();for(;o;)i=i||t.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?Mm(n,t.getCompare()):Bm;const a=t.toString(),u=Object.assign({},this.indexSet_);u[a]=t;const l=Object.assign({},this.indexes_);return l[a]=s,new jm(l,u)}addToIndexes(t,e){const n=(0,Rd.UI)(this.indexes_,(n,i)=>{const r=(0,Rd.DV)(this.indexSet_,i);if((0,Rd.hu)(r,"Missing index implementation for "+i),n===Bm){if(r.isDefinedOn(t.node)){const n=[],i=e.getIterator(ym.Wrap);let s=i.getNext();for(;s;)s.name!==t.name&&n.push(s),s=i.getNext();return n.push(t),Mm(n,r.getCompare())}return Bm}{const i=e.get(t.name);let r=n;return i&&(r=r.remove(new ym(t.name,i))),r.insert(t,t.node)}});return new jm(n,this.indexSet_)}removeFromIndexes(t,e){const n=(0,Rd.UI)(this.indexes_,n=>{if(n===Bm)return n;{const i=e.get(t.name);return i?n.remove(new ym(t.name,i)):n}});return new jm(n,this.indexSet_)}}let Um,qm=(()=>{class t{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&km(this.priorityNode_),this.children_.isEmpty()&&(0,Rd.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Um||(Um=new t(new Im(xm),null,jm.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Um}updatePriority(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?Um:e}}getChild(t){const e=Xp(t);return null===e?this:this.getImmediateChild(e).getChild(em(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(e,n){if((0,Rd.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);{const i=new ym(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?Um:this.priorityNode_;return new t(r,o,s)}}updateChild(t,e){const n=Xp(t);if(null===n)return e;{(0,Rd.hu)(".priority"!==Xp(t)||1===tm(t),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(em(t),e);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(Lm,(o,a)=>{n[o]=a.val(e),i++,s&&t.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const t=[];for(const e in n)t[e]=n[e];return t}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Am(this.getPriority().val())+":"),this.forEachChild(Lm,(e,n)=>{const i=n.hash();""!==i&&(t+=":"+e+":"+i)}),this.lazyHash_=""===t?"":sp(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new ym(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new ym(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new ym(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal(t=>e(t.name,t.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,t=>t);{const n=this.children_.getIteratorFrom(t.name,ym.Wrap);let i=n.peek();for(;null!=i&&e.compare(i,t)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,t=>t);{const n=this.children_.getReverseIteratorFrom(t.name,ym.Wrap);let i=n.peek();for(;null!=i&&e.compare(i,t)>0;)n.getNext(),i=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zm?-1:0}withIndex(e){if(e===bm||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===bm||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(Lm),n=e.getIterator(Lm);let i=t.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(t){return t===bm?null:this.indexMap_.get(t.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const zm=new class extends qm{constructor(){super(new Im(xm),qm.EMPTY_NODE,jm.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return qm.EMPTY_NODE}isEmpty(){return!1}};function Zm(t,e=null){if(null===t)return qm.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,Rd.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Om(t,Zm(e));if(t instanceof Array){let n=qm.EMPTY_NODE;return Tp(t,(e,i)=>{if((0,Rd.r3)(t,e)&&"."!==e.substring(0,1)){const t=Zm(i);(t.isLeafNode()||!t.isEmpty())&&(n=n.updateImmediateChild(e,t))}}),n.updatePriority(Zm(e))}{const n=[];let i=!1;if(Tp(t,(t,e)=>{if("."!==t.substring(0,1)){const r=Zm(e);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ym(t,r)))}}),0===n.length)return qm.EMPTY_NODE;const r=Mm(n,Sm,t=>t.name,xm);if(i){const t=Mm(n,Lm.getCompare());return new qm(r,Zm(e),new jm({".priority":t},{".priority":Lm}))}return new qm(r,Zm(e),jm.Default)}}Object.defineProperties(ym,{MIN:{value:new ym(gp,qm.EMPTY_NODE)},MAX:{value:new ym(_p,zm)}}),wm.__EMPTY_NODE=qm.EMPTY_NODE,Om.__childrenNodeConstructor=qm,Tm=zm,Nm=zm,function(t){Pm=t}(Zm);class $m extends vm{constructor(t){super(),this.indexPath_=t,(0,Rd.hu)(!om(t)&&".priority"!==Xp(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?yp(t.name,e.name):r}makePost(t,e){const n=Zm(t),i=qm.EMPTY_NODE.updateChild(this.indexPath_,n);return new ym(e,i)}maxPost(){const t=qm.EMPTY_NODE.updateChild(this.indexPath_,zm);return new ym(_p,t)}toString(){return im(this.indexPath_,0).join("/")}}const Hm=new class extends vm{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?yp(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return ym.MIN}maxPost(){return ym.MAX}makePost(t,e){const n=Zm(t);return new ym(e,n)}toString(){return".value"}};function Wm(t){return{type:"value",snapshotNode:t}}function Gm(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Km(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qm(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class Ym{constructor(t){this.index_=t}updateChild(t,e,n,i,r,s){(0,Rd.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=t.getImmediateChild(e);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()||(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Km(e,o)):(0,Rd.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Gm(e,n)):s.trackChildChange(Qm(e,n,o))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Lm,(t,i)=>{e.hasChild(t)||n.trackChildChange(Km(t,i))}),e.isLeafNode()||e.forEachChild(Lm,(e,i)=>{if(t.hasChild(e)){const r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(Qm(e,i,r))}else n.trackChildChange(Gm(e,i))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?qm.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Jm{constructor(t){this.indexedFilter_=new Ym(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Jm.getStartPost_(t),this.endPost_=Jm.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&n}updateChild(t,e,n,i,r,s){return this.matches(new ym(e,n))||(n=qm.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,s)}updateFullNode(t,e,n){e.isLeafNode()&&(e=qm.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(qm.EMPTY_NODE);const r=this;return e.forEachChild(Lm,(t,e)=>{r.matches(new ym(t,e))||(i=i.updateImmediateChild(t,qm.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Xm{constructor(t){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const e=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?e<=0:e<0},this.withinEndPost=t=>{const e=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?e<=0:e<0},this.rangedFilter_=new Jm(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,n,i,r,s){return this.rangedFilter_.matches(new ym(e,n))||(n=qm.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,s):this.fullLimitUpdateChild_(t,e,n,r,s)}updateFullNode(t,e,n){let i;if(e.isLeafNode()||e.isEmpty())i=qm.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;i=qm.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;t.hasNext()&&n<this.limit_;){const e=t.getNext();if(this.withinDirectionalStart(e)){if(!this.withinDirectionalEnd(e))break;i=i.updateImmediateChild(e.name,e.node),n++}}}else{let t;i=e.withIndex(this.index_),i=i.updatePriority(qm.EMPTY_NODE),t=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;t.hasNext();){const e=t.getNext();n<this.limit_&&this.withinDirectionalStart(e)&&this.withinDirectionalEnd(e)?n++:i=i.updateImmediateChild(e.name,qm.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,i,r){let s;if(this.reverse_){const t=this.index_.getCompare();s=(e,n)=>t(n,e)}else s=this.index_.getCompare();const o=t;(0,Rd.hu)(o.numChildren()===this.limit_,"");const a=new ym(e,n),u=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(a);if(o.hasChild(e)){const t=o.getImmediateChild(e);let c=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=c&&(c.name===e||o.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:s(c,a);if(l&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(Qm(e,n,t)),o.updateImmediateChild(e,n);{null!=r&&r.trackChildChange(Km(e,t));const n=o.updateImmediateChild(e,qm.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=r&&r.trackChildChange(Gm(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?t:l&&s(u,a)>=0?(null!=r&&(r.trackChildChange(Km(u.name,u.node)),r.trackChildChange(Gm(e,n))),o.updateImmediateChild(e,n).updateImmediateChild(u.name,qm.EMPTY_NODE)):t}}class tg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lm}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Rd.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Rd.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Rd.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Rd.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_p}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Rd.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lm}copy(){const t=new tg;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function eg(t,e,n){const i=t.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function ng(t,e,n){const i=t.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function ig(t,e){const n=t.copy();return n.index_=e,n}function rg(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Lm?n="$priority":t.index_===Hm?n="$value":t.index_===bm?n="$key":((0,Rd.hu)(t.index_ instanceof $m,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,Rd.Wl)(n),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=(0,Rd.Wl)(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+(0,Rd.Wl)(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=(0,Rd.Wl)(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+(0,Rd.Wl)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function sg(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Lm&&(e.i=t.index_.toString()),e}class og extends Gp{constructor(t,e,n,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=hp("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,Rd.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,i){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const s=og.getListenId_(t,n),o={};this.listens_[s]=o;const a=rg(t._queryParams);this.restRequest_(r+".json",a,(t,e)=>{let a=e;if(404===t&&(a=null,t=null),null===t&&this.onDataUpdate_(r,a,!1,n),(0,Rd.DV)(this.listens_,s)===o){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}})}unlisten(t,e){const n=og.getListenId_(t,e);delete this.listens_[n]}get(t){const e=rg(t._queryParams),n=t._path.toString(),i=new Rd.BH;return this.restRequest_(n+".json",e,(t,e)=>{let r=e;404===t&&(r=null,t=null),null===t?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(e.auth=i.accessToken),r&&r.token&&(e.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,Rd.xO)(e);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=(0,Rd.cI)(o.responseText)}catch(t){pp("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&pp("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class ag{constructor(){this.rootNode_=qm.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function ug(){return{value:null,children:new Map}}function lg(t,e,n){if(om(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const i=Xp(e);t.children.has(i)||t.children.set(i,ug()),lg(t.children.get(i),e=em(e),n)}}function cg(t,e){if(om(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Lm,(e,n)=>{lg(t,new Yp(e),n)}),cg(t,e)}}if(t.children.size>0){const n=Xp(e);return e=em(e),t.children.has(n)&&cg(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function hg(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((t,n)=>{e(n,t)})}(t,(t,i)=>{hg(i,new Yp(e.toString()+"/"+t),n)})}class dg{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Tp(this.last_,(t,n)=>{e[t]=e[t]-n}),this.last_=t,e}}class fg{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new dg(t);const n=1e4+2e4*Math.random();Ap(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;Tp(t,(t,i)=>{i>0&&(0,Rd.r3)(this.statsToReport_,t)&&(e[t]=i,n=!0)}),n&&this.server_.reportStats(e),Ap(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pg=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pg||(pg={})),pg))();function mg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class gg{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=pg.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(om(this.path)){if(null!=this.affectedTree.value)return(0,Rd.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Yp(t));return new gg(Jp(),e,this.revert)}}return(0,Rd.hu)(Xp(this.path)===t,"operationForChild called for unrelated child."),new gg(em(this.path),this.affectedTree,this.revert)}}class _g{constructor(t,e){this.source=t,this.path=e,this.type=pg.LISTEN_COMPLETE}operationForChild(t){return om(this.path)?new _g(this.source,Jp()):new _g(this.source,em(this.path))}}class yg{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=pg.OVERWRITE}operationForChild(t){return om(this.path)?new yg(this.source,Jp(),this.snap.getImmediateChild(t)):new yg(this.source,em(this.path),this.snap)}}class vg{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=pg.MERGE}operationForChild(t){if(om(this.path)){const e=this.children.subtree(new Yp(t));return e.isEmpty()?null:e.value?new yg(this.source,Jp(),e.value):new vg(this.source,Jp(),e)}return(0,Rd.hu)(Xp(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new vg(this.source,em(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wg{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(om(t))return this.isFullyInitialized()&&!this.filtered_;const e=Xp(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class bg{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Cg(t,e,n,i,r,s){const o=i.filter(t=>t.type===n);o.sort((e,n)=>function(t,e,n){if(null==e.childName||null==n.childName)throw(0,Rd.g5)("Should only compare child_ events.");const i=new ym(e.childName,e.snapshotNode),r=new ym(n.childName,n.snapshotNode);return t.index_.compare(i,r)}(t,e,n)),o.forEach(n=>{const i=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);r.forEach(r=>{r.respondsTo(n.type)&&e.push(r.createEvent(i,t.query_))})})}function Tg(t,e){return{eventCache:t,serverCache:e}}function Eg(t,e,n,i){return Tg(new wg(e,n,i),t.serverCache)}function Ig(t,e,n,i){return Tg(t.eventCache,new wg(e,n,i))}function Sg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Ag;class kg{constructor(t,e=(()=>(Ag||(Ag=new Im(vp)),Ag))()){this.value=t,this.children=e}static fromObject(t){let e=new kg(null);return Tp(t,(t,n)=>{e=e.set(new Yp(t),n)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Jp(),value:this.value};if(om(t))return null;{const n=Xp(t),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(em(t),e);return null!=r?{path:sm(new Yp(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(om(t))return this;{const e=Xp(t),n=this.children.get(e);return null!==n?n.subtree(em(t)):new kg(null)}}set(t,e){if(om(t))return new kg(e,this.children);{const n=Xp(t),i=(this.children.get(n)||new kg(null)).set(em(t),e),r=this.children.insert(n,i);return new kg(this.value,r)}}remove(t){if(om(t))return this.children.isEmpty()?new kg(null):new kg(null,this.children);{const e=Xp(t),n=this.children.get(e);if(n){const i=n.remove(em(t));let r;return r=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&r.isEmpty()?new kg(null):new kg(this.value,r)}return this}}get(t){if(om(t))return this.value;{const e=Xp(t),n=this.children.get(e);return n?n.get(em(t)):null}}setTree(t,e){if(om(t))return e;{const n=Xp(t),i=(this.children.get(n)||new kg(null)).setTree(em(t),e);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new kg(this.value,r)}}fold(t){return this.fold_(Jp(),t)}fold_(t,e){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(sm(t,i),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,Jp(),e)}findOnPath_(t,e,n){const i=!!this.value&&n(e,this.value);if(i)return i;if(om(t))return null;{const i=Xp(t),r=this.children.get(i);return r?r.findOnPath_(em(t),sm(e,i),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Jp(),e)}foreachOnPath_(t,e,n){if(om(t))return this;{this.value&&n(e,this.value);const i=Xp(t),r=this.children.get(i);return r?r.foreachOnPath_(em(t),sm(e,i),n):new kg(null)}}foreach(t){this.foreach_(Jp(),t)}foreach_(t,e){this.children.inorderTraversal((n,i)=>{i.foreach_(sm(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}}class Dg{constructor(t){this.writeTree_=t}static empty(){return new Dg(new kg(null))}}function Pg(t,e,n){if(om(e))return new Dg(new kg(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=am(r,e);return s=s.updateChild(o,n),new Dg(t.writeTree_.set(r,s))}{const i=new kg(n),r=t.writeTree_.setTree(e,i);return new Dg(r)}}}function Ng(t,e,n){let i=t;return Tp(n,(t,n)=>{i=Pg(i,sm(e,t),n)}),i}function Og(t,e){if(om(e))return Dg.empty();{const n=t.writeTree_.setTree(e,new kg(null));return new Dg(n)}}function Lg(t,e){return null!=Rg(t,e)}function Rg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(am(n.path,e)):null}function Fg(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Lm,(t,n)=>{e.push(new ym(t,n))}):t.writeTree_.children.inorderTraversal((t,n)=>{null!=n.value&&e.push(new ym(t,n.value))}),e}function Mg(t,e){if(om(e))return t;{const n=Rg(t,e);return new Dg(null!=n?new kg(n):t.writeTree_.subtree(e))}}function Vg(t){return t.writeTree_.isEmpty()}function Bg(t,e){return jg(Jp(),t.writeTree_,e)}function jg(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((e,r)=>{".priority"===e?((0,Rd.hu)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=jg(sm(t,e),r,n)}),!n.getChild(t).isEmpty()&&null!==i&&(n=n.updateChild(sm(t,".priority"),i)),n}}function Ug(t,e){return Jg(e,t)}function qg(t,e){if(t.snap)return cm(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&cm(sm(t.path,n),e))return!0;return!1}function zg(t){return t.visible}function Zg(t,e,n){let i=Dg.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const t=s.path;let e;if(s.snap)cm(n,t)?(e=am(n,t),i=Pg(i,e,s.snap)):cm(t,n)&&(e=am(t,n),i=Pg(i,Jp(),s.snap.getChild(e)));else{if(!s.children)throw(0,Rd.g5)("WriteRecord should have .snap or .children");if(cm(n,t))e=am(n,t),i=Ng(i,e,s.children);else if(cm(t,n))if(e=am(t,n),om(e))i=Ng(i,Jp(),s.children);else{const t=(0,Rd.DV)(s.children,Xp(e));if(t){const n=t.getChild(em(e));i=Pg(i,Jp(),n)}}}}}return i}function $g(t,e,n,i,r){if(i||r){const s=Mg(t.visibleWrites,e);return!r&&Vg(s)?n:r||null!=n||Lg(s,Jp())?Bg(Zg(t.allWrites,function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(cm(t.path,e)||cm(e,t.path))},e),n||qm.EMPTY_NODE):null}{const i=Rg(t.visibleWrites,e);if(null!=i)return i;{const i=Mg(t.visibleWrites,e);return Vg(i)?n:null!=n||Lg(i,Jp())?Bg(i,n||qm.EMPTY_NODE):null}}}function Hg(t,e,n,i){return $g(t.writeTree,t.treePath,e,n,i)}function Wg(t,e){return function(t,e,n){let i=qm.EMPTY_NODE;const r=Rg(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Lm,(t,e)=>{i=i.updateImmediateChild(t,e)}),i;if(n){const r=Mg(t.visibleWrites,e);return n.forEachChild(Lm,(t,e)=>{const n=Bg(Mg(r,new Yp(t)),e);i=i.updateImmediateChild(t,n)}),Fg(r).forEach(t=>{i=i.updateImmediateChild(t.name,t.node)}),i}return Fg(Mg(t.visibleWrites,e)).forEach(t=>{i=i.updateImmediateChild(t.name,t.node)}),i}(t.writeTree,t.treePath,e)}function Gg(t,e,n,i){return function(t,e,n,i,r){(0,Rd.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=sm(e,n);if(Lg(t.visibleWrites,s))return null;{const e=Mg(t.visibleWrites,s);return Vg(e)?r.getChild(n):Bg(e,r.getChild(n))}}(t.writeTree,t.treePath,e,n,i)}function Kg(t,e){return function(t,e){return Rg(t.visibleWrites,e)}(t.writeTree,sm(t.treePath,e))}function Qg(t,e,n){return function(t,e,n,i){const r=sm(e,n),s=Rg(t.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?Bg(Mg(t.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Yg(t,e){return Jg(sm(t.treePath,e),t.writeTree)}function Jg(t,e){return{treePath:t,writeTree:e}}class Xg{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;(0,Rd.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,Rd.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===e&&"child_removed"===r)this.changeMap.set(n,Qm(n,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===r)this.changeMap.set(n,Km(n,i.oldSnap));else if("child_changed"===e&&"child_added"===r)this.changeMap.set(n,Gm(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==r)throw(0,Rd.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,Qm(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}const t_=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class e_{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new wg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qg(this.writes_,t,e)}}getChildAfterChild(t,e,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xg(this.viewCache_),r=function(t,e,n,i,r,s){return function(t,e,n,i,r,s,o){let a;const u=Mg(t.visibleWrites,e),l=Rg(u,Jp());if(null!=l)a=l;else{if(null==n)return[];a=Bg(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let u=n.getNext();for(;u&&t.length<r;)0!==e(u,i)&&t.push(u),u=n.getNext();return t}}(t.writeTree,t.treePath,e,n,i,r,s)}(this.writes_,i,e,1,n,t);return 0===r.length?null:r[0]}}function n_(t,e,n,i,r,s){const o=e.eventCache;if(null!=Kg(i,n))return e;{let a,u;if(om(n))if((0,Rd.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=xg(e),r=Wg(i,n instanceof qm?n:qm.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),r,s)}else{const n=Hg(i,xg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),n,s)}else{const l=Xp(n);if(".priority"===l){(0,Rd.hu)(1===tm(n),"Can't have a priority with additional path components");const r=o.getNode();u=e.serverCache.getNode();const s=Gg(i,n,r,u);a=null!=s?t.filter.updatePriority(r,s):o.getNode()}else{const c=em(n);let h;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();const t=Gg(i,n,o.getNode(),u);h=null!=t?o.getNode().getImmediateChild(l).updateChild(c,t):o.getNode().getImmediateChild(l)}else h=Qg(i,l,e.serverCache);a=null!=h?t.filter.updateChild(o.getNode(),l,h,c,r,s):o.getNode()}}return Eg(e,a,o.isFullyInitialized()||om(n),t.filter.filtersNodes())}}function i_(t,e,n,i,r,s,o,a){const u=e.serverCache;let l;const c=o?t.filter:t.filter.getIndexedFilter();if(om(n))l=c.updateFullNode(u.getNode(),i,null);else if(c.filtersNodes()&&!u.isFiltered()){const t=u.getNode().updateChild(n,i);l=c.updateFullNode(u.getNode(),t,null)}else{const t=Xp(n);if(!u.isCompleteForPath(n)&&tm(n)>1)return e;const r=em(n),s=u.getNode().getImmediateChild(t).updateChild(r,i);l=".priority"===t?c.updatePriority(u.getNode(),s):c.updateChild(u.getNode(),t,s,r,t_,null)}const h=Ig(e,l,u.isFullyInitialized()||om(n),c.filtersNodes());return n_(t,h,n,r,new e_(r,h,s),a)}function r_(t,e,n,i,r,s,o){const a=e.eventCache;let u,l;const c=new e_(r,e,s);if(om(n))l=t.filter.updateFullNode(e.eventCache.getNode(),i,o),u=Eg(e,l,!0,t.filter.filtersNodes());else{const r=Xp(n);if(".priority"===r)l=t.filter.updatePriority(e.eventCache.getNode(),i),u=Eg(e,l,a.isFullyInitialized(),a.isFiltered());else{const s=em(n),l=a.getNode().getImmediateChild(r);let h;if(om(s))h=i;else{const t=c.getCompleteChild(r);h=null!=t?".priority"===nm(s)&&t.getChild(rm(s)).isEmpty()?t:t.updateChild(s,i):qm.EMPTY_NODE}u=l.equals(h)?e:Eg(e,t.filter.updateChild(a.getNode(),r,h,s,c,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function s_(t,e){return t.eventCache.isCompleteForChild(e)}function o_(t,e,n){return n.foreach((t,n)=>{e=e.updateChild(t,n)}),e}function a_(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=om(n)?i:new kg(null).setTree(n,i);const c=e.serverCache.getNode();return u.children.inorderTraversal((n,i)=>{if(c.hasChild(n)){const u=o_(0,e.serverCache.getNode().getImmediateChild(n),i);l=i_(t,l,new Yp(n),u,r,s,o,a)}}),u.children.inorderTraversal((n,i)=>{const u=!e.serverCache.isCompleteForChild(n)&&null===i.value;if(!c.hasChild(n)&&!u){const u=o_(0,e.serverCache.getNode().getImmediateChild(n),i);l=i_(t,l,new Yp(n),u,r,s,o,a)}}),l}class u_{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Ym(n.getIndex()),r=function(t){return t.loadsAllData()?new Ym(t.getIndex()):t.hasLimit()?new Xm(t):new Jm(t)}(n);this.processor_=function(t){return{filter:t}}(r);const s=e.serverCache,o=e.eventCache,a=i.updateFullNode(qm.EMPTY_NODE,s.getNode(),null),u=r.updateFullNode(qm.EMPTY_NODE,o.getNode(),null),l=new wg(a,s.isFullyInitialized(),i.filtersNodes()),c=new wg(u,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=Tg(c,l),this.eventGenerator_=new bg(this.query_)}get query(){return this.query_}}function l_(t,e){const n=xg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!om(e)&&!n.getImmediateChild(Xp(e)).isEmpty())?n.getChild(e):null}function c_(t){return 0===t.eventRegistrations_.length}function h_(t,e,n){const i=[];if(n){(0,Rd.hu)(null==e,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(t=>{const e=t.createCancelEvent(n,r);e&&i.push(e)})}if(e){let n=[];for(let i=0;i<t.eventRegistrations_.length;++i){const r=t.eventRegistrations_[i];if(r.matches(e)){if(e.hasAnyCallback()){n=n.concat(t.eventRegistrations_.slice(i+1));break}}else n.push(r)}t.eventRegistrations_=n}else t.eventRegistrations_=[];return i}function d_(t,e,n,i){e.type===pg.MERGE&&null!==e.source.queryId&&((0,Rd.hu)(xg(t.viewCache_),"We should always have a full cache before handling merges"),(0,Rd.hu)(Sg(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=function(t,e,n,i,r){const s=new Xg;let o,a;if(n.type===pg.OVERWRITE){const u=n;u.source.fromUser?o=r_(t,e,u.path,u.snap,i,r,s):((0,Rd.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!om(u.path),o=i_(t,e,u.path,u.snap,i,r,a,s))}else if(n.type===pg.MERGE){const u=n;u.source.fromUser?o=function(t,e,n,i,r,s,o){let a=e;return i.foreach((i,u)=>{const l=sm(n,i);s_(e,Xp(l))&&(a=r_(t,a,l,u,r,s,o))}),i.foreach((i,u)=>{const l=sm(n,i);s_(e,Xp(l))||(a=r_(t,a,l,u,r,s,o))}),a}(t,e,u.path,u.children,i,r,s):((0,Rd.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=a_(t,e,u.path,u.children,i,r,a,s))}else if(n.type===pg.ACK_USER_WRITE){const a=n;o=a.revert?function(t,e,n,i,r,s){let o;if(null!=Kg(i,n))return e;{const a=new e_(i,e,r),u=e.eventCache.getNode();let l;if(om(n)||".priority"===Xp(n)){let n;if(e.serverCache.isFullyInitialized())n=Hg(i,xg(e));else{const t=e.serverCache.getNode();(0,Rd.hu)(t instanceof qm,"serverChildren would be complete if leaf node"),n=Wg(i,t)}l=t.filter.updateFullNode(u,n,s)}else{const r=Xp(n);let c=Qg(i,r,e.serverCache);null==c&&e.serverCache.isCompleteForChild(r)&&(c=u.getImmediateChild(r)),l=null!=c?t.filter.updateChild(u,r,c,em(n),a,s):e.eventCache.getNode().hasChild(r)?t.filter.updateChild(u,r,qm.EMPTY_NODE,em(n),a,s):u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Hg(i,xg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Kg(i,Jp()),Eg(e,l,o,t.filter.filtersNodes())}}(t,e,a.path,i,r,s):function(t,e,n,i,r,s,o){if(null!=Kg(r,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=i.value){if(om(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return i_(t,e,n,u.getNode().getChild(n),r,s,a,o);if(om(n)){let i=new kg(null);return u.getNode().forEachChild(bm,(t,e)=>{i=i.set(new Yp(t),e)}),a_(t,e,n,i,r,s,a,o)}return e}{let l=new kg(null);return i.foreach((t,e)=>{const i=sm(n,t);u.isCompleteForPath(i)&&(l=l.set(t,u.getNode().getChild(i)))}),a_(t,e,n,l,r,s,a,o)}}(t,e,a.path,a.affectedTree,i,r,s)}else{if(n.type!==pg.LISTEN_COMPLETE)throw(0,Rd.g5)("Unknown operation type: "+n.type);o=function(t,e,n,i,r){const s=e.serverCache;return n_(t,Ig(e,s.getNode(),s.isFullyInitialized()||om(n),s.isFiltered()),n,i,t_,r)}(t,e,n.path,i,s)}const u=s.getChanges();return function(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Sg(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Wm(Sg(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,r,e,n,i);return function(t,e){(0,Rd.hu)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,Rd.hu)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),(0,Rd.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,f_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function f_(t,e,n,i){return function(t,e,n,i){const r=[],s=[];return e.forEach(e=>{"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push(function(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(e.childName,e.snapshotNode))}),Cg(t,r,"child_removed",e,i,n),Cg(t,r,"child_added",e,i,n),Cg(t,r,"child_moved",s,i,n),Cg(t,r,"child_changed",e,i,n),Cg(t,r,"value",e,i,n),r}(t.eventGenerator_,e,n,i?[i]:t.eventRegistrations_)}let p_,m_;class g_{constructor(){this.views=new Map}}function __(t,e,n,i){const r=e.source.queryId;if(null!==r){const s=t.views.get(r);return(0,Rd.hu)(null!=s,"SyncTree gave us an op for an invalid query."),d_(s,e,n,i)}{let r=[];for(const s of t.views.values())r=r.concat(d_(s,e,n,i));return r}}function y_(t,e,n,i,r){const s=t.views.get(e._queryIdentifier);if(!s){let t=Hg(n,r?i:null),s=!1;t?s=!0:i instanceof qm?(t=Wg(n,i),s=!1):(t=qm.EMPTY_NODE,s=!1);const o=Tg(new wg(t,s,!1),new wg(i,r,!1));return new u_(e,o)}return s}function v_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function w_(t,e){let n=null;for(const i of t.views.values())n=n||l_(i,e);return n}function b_(t,e){return e._queryParams.loadsAllData()?E_(t):t.views.get(e._queryIdentifier)}function C_(t,e){return null!=b_(t,e)}function T_(t){return null!=E_(t)}function E_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let I_=1;class S_{constructor(t){this.listenProvider_=t,this.syncPointTree_=new kg(null),this.pendingWriteTree_={visibleWrites:Dg.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function x_(t,e,n,i,r){return function(t,e,n,i,r){(0,Rd.hu)(i>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Pg(t.visibleWrites,e,n)),t.lastWriteId=i}(t.pendingWriteTree_,e,n,i,r),r?L_(t,new yg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function A_(t,e,n=!1){const i=function(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}(t.pendingWriteTree_,e);if(function(t,e){const n=t.allWrites.findIndex(t=>t.writeId===e);(0,Rd.hu)(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const e=t.allWrites[o];e.visible&&(o>=n&&qg(e,i.path)?r=!1:cm(i.path,e.path)&&(s=!0)),o--}return!!r&&(s?(function(t){t.visibleWrites=Zg(t.allWrites,zg,Jp()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(i.snap?t.visibleWrites=Og(t.visibleWrites,i.path):Tp(i.children,e=>{t.visibleWrites=Og(t.visibleWrites,sm(i.path,e))}),!0))}(t.pendingWriteTree_,e)){let e=new kg(null);return null!=i.snap?e=e.set(Jp(),!0):Tp(i.children,t=>{e=e.set(new Yp(t),!0)}),L_(t,new gg(i.path,e,n))}return[]}function k_(t,e,n){return L_(t,new yg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function D_(t,e,n,i,r=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||C_(o,e))){const u=function(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=T_(t);if("default"===r)for(const[u,l]of t.views.entries())o=o.concat(h_(l,n,i)),c_(l)&&(t.views.delete(u),l.query._queryParams.loadsAllData()||s.push(l.query));else{const e=t.views.get(r);e&&(o=o.concat(h_(e,n,i)),c_(e)&&(t.views.delete(r),e.query._queryParams.loadsAllData()||s.push(e.query)))}return a&&!T_(t)&&s.push(new((0,Rd.hu)(p_,"Reference.ts has not been loaded"),p_)(e._repo,e._path)),{removed:s,events:o}}(o,e,n,i);(function(t){return 0===t.views.size})(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=u.removed;if(a=u.events,!r){const n=-1!==l.findIndex(t=>t._queryParams.loadsAllData()),r=t.syncPointTree_.findOnPath(s,(t,e)=>T_(e));if(n&&!r){const e=t.syncPointTree_.subtree(s);if(!e.isEmpty()){const n=function(t){return t.fold((t,e,n)=>{if(e&&T_(e))return[E_(e)];{let t=[];return e&&(t=v_(e)),Tp(n,(e,n)=>{t=t.concat(n)}),t}})}(e);for(let e=0;e<n.length;++e){const i=n[e],r=i.query,s=M_(t,i);t.listenProvider_.startListening(z_(r),V_(t,r),s.hashFn,s.onComplete)}}}if(!r&&l.length>0&&!i)if(n){const n=null;t.listenProvider_.stopListening(z_(e),n)}else l.forEach(e=>{const n=t.queryToTagMap.get(B_(e));t.listenProvider_.stopListening(z_(e),n)})}!function(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const e=B_(i),n=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(n)}}}(t,l)}return a}function P_(t,e,n,i){const r=j_(t,i);if(null!=r){const i=U_(r),s=i.path,o=i.queryId,a=am(s,e);return q_(t,s,new yg(mg(o),a,n))}return[]}function N_(t,e,n,i=!1){const r=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(t,e)=>{const n=am(t,r);s=s||w_(e,n),o=o||T_(e)});let a,u=t.syncPointTree_.get(r);u?(o=o||T_(u),s=s||w_(u,Jp())):(u=new g_,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=s?a=!0:(a=!1,s=qm.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((t,e)=>{const n=w_(e,Jp());n&&(s=s.updateImmediateChild(t,n))}));const l=C_(u,e);if(!l&&!e._queryParams.loadsAllData()){const n=B_(e);(0,Rd.hu)(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=I_++;t.queryToTagMap.set(n,i),t.tagToQueryMap.set(i,n)}let c=function(t,e,n,i,r,s){const o=y_(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),function(t,e){t.eventRegistrations_.push(e)}(o,n),function(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Lm,(t,e)=>{i.push(Gm(t,e))}),n.isFullyInitialized()&&i.push(Wm(n.getNode())),f_(t,i,n.getNode(),e)}(o,n)}(u,e,n,Ug(t.pendingWriteTree_,r),s,a);if(!l&&!o&&!i){const n=b_(u,e);c=c.concat(function(t,e,n){const i=e._path,r=V_(t,e),s=M_(t,n),o=t.listenProvider_.startListening(z_(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)(0,Rd.hu)(!T_(a.value),"If we're adding a query, it shouldn't be shadowed");else{const e=a.fold((t,e,n)=>{if(!om(t)&&e&&T_(e))return[E_(e).query];{let t=[];return e&&(t=t.concat(v_(e).map(t=>t.query))),Tp(n,(e,n)=>{t=t.concat(n)}),t}});for(let n=0;n<e.length;++n){const i=e[n];t.listenProvider_.stopListening(z_(i),V_(t,i))}}return o}(t,e,n))}return c}function O_(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(t,n)=>{const i=w_(n,am(t,e));if(i)return i});return $g(i,e,r,n,!0)}function L_(t,e){return R_(e,t.syncPointTree_,null,Ug(t.pendingWriteTree_,Jp()))}function R_(t,e,n,i){if(om(t.path))return F_(t,e,n,i);{const r=e.get(Jp());null==n&&null!=r&&(n=w_(r,Jp()));let s=[];const o=Xp(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const t=n?n.getImmediateChild(o):null,e=Yg(i,o);s=s.concat(R_(a,u,t,e))}return r&&(s=s.concat(__(r,t,i,n))),s}}function F_(t,e,n,i){const r=e.get(Jp());null==n&&null!=r&&(n=w_(r,Jp()));let s=[];return e.children.inorderTraversal((e,r)=>{const o=n?n.getImmediateChild(e):null,a=Yg(i,e),u=t.operationForChild(e);u&&(s=s.concat(F_(u,r,o,a)))}),r&&(s=s.concat(__(r,t,i,n))),s}function M_(t,e){const n=e.query,i=V_(t,n);return{hashFn:()=>(function(t){return t.viewCache_.serverCache.getNode()}(e)||qm.EMPTY_NODE).hash(),onComplete:e=>{if("ok"===e)return i?function(t,e,n){const i=j_(t,n);if(i){const n=U_(i),r=n.path,s=n.queryId,o=am(r,e);return q_(t,r,new _g(mg(s),o))}return[]}(t,n._path,i):function(t,e){return L_(t,new _g({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const i=function(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}(e,n);return D_(t,n,null,i)}}}}function V_(t,e){const n=B_(e);return t.queryToTagMap.get(n)}function B_(t){return t._path.toString()+"$"+t._queryIdentifier}function j_(t,e){return t.tagToQueryMap.get(e)}function U_(t){const e=t.indexOf("$");return(0,Rd.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Yp(t.substr(0,e))}}function q_(t,e,n){const i=t.syncPointTree_.get(e);return(0,Rd.hu)(i,"Missing sync point for query tag that we're tracking"),__(i,n,Ug(t.pendingWriteTree_,e),null)}function z_(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,Rd.hu)(m_,"Reference.ts has not been loaded"),m_)(t._repo,t._path):t}class Z_{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Z_(e)}node(){return this.node_}}class $_{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=sm(this.path_,t);return new $_(this.syncTree_,e)}node(){return O_(this.syncTree_,this.path_)}}const H_=function(t,e,n){return t&&"object"==typeof t?((0,Rd.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?W_(t[".sv"],e,n):"object"==typeof t[".sv"]?G_(t[".sv"],e):void(0,Rd.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},W_=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,Rd.hu)(!1,"Unexpected server value: "+t)},G_=function(t,e,n){t.hasOwnProperty("increment")||(0,Rd.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;"number"!=typeof i&&(0,Rd.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,Rd.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},K_=function(t,e,n,i){return Y_(e,new $_(n,t),i)},Q_=function(t,e,n){return Y_(t,new Z_(e),n)};function Y_(t,e,n){const i=t.getPriority().val(),r=H_(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const i=t,s=H_(i.getValue(),e,n);return s!==i.getValue()||r!==i.getPriority().val()?new Om(s,Zm(r)):t}{const i=t;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Om(r))),i.forEachChild(Lm,(t,i)=>{const r=Y_(i,e.getImmediateChild(t),n);r!==i&&(s=s.updateImmediateChild(t,r))}),s}}class J_{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function X_(t,e){let n=e instanceof Yp?e:new Yp(e),i=t,r=Xp(n);for(;null!==r;){const t=(0,Rd.DV)(i.node.children,r)||{children:{},childCount:0};i=new J_(r,i,t),n=em(n),r=Xp(n)}return i}function ty(t){return t.node.value}function ey(t,e){t.node.value=e,oy(t)}function ny(t){return t.node.childCount>0}function iy(t,e){Tp(t.node.children,(n,i)=>{e(new J_(n,t,i))})}function ry(t,e,n,i){n&&!i&&e(t),iy(t,t=>{ry(t,e,!0,i)}),n&&i&&e(t)}function sy(t){return new Yp(null===t.parent?t.name:sy(t.parent)+"/"+t.name)}function oy(t){null!==t.parent&&function(t,e,n){const i=function(t){return void 0===ty(t)&&!ny(t)}(n),r=(0,Rd.r3)(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,oy(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,oy(t))}(t.parent,t.name,t)}const ay=/[\[\].#$\/\u0000-\u001F\u007F]/,uy=/[\[\].#$\u0000-\u001F\u007F]/,ly=10485760,cy=function(t){return"string"==typeof t&&0!==t.length&&!ay.test(t)},hy=function(t){return"string"==typeof t&&0!==t.length&&!uy.test(t)},dy=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!mp(t)||t&&"object"==typeof t&&(0,Rd.r3)(t,".sv")},fy=function(t,e,n,i){i&&void 0===e||py((0,Rd.gK)(t,"value"),e,n)},py=function(t,e,n){const i=n instanceof Yp?new hm(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+fm(i));if("function"==typeof e)throw new Error(t+"contains a function "+fm(i)+" with contents = "+e.toString());if(mp(e))throw new Error(t+"contains "+e.toString()+" "+fm(i));if("string"==typeof e&&e.length>ly/3&&(0,Rd.ug)(e)>ly)throw new Error(t+"contains a string greater than "+ly+" utf8 bytes "+fm(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,r=!1;if(Tp(e,(e,s)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!cy(e)))throw new Error(t+" contains an invalid key ("+e+") "+fm(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,Rd.ug)(e),dm(t)})(i,e),py(t,s,i),function(t){const e=t.parts_.pop();t.byteLength_-=(0,Rd.ug)(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)}),n&&r)throw new Error(t+' contains ".value" child '+fm(i)+" in addition to actual children.")}},my=function(t,e,n,i){if(i&&void 0===e)return;const r=(0,Rd.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Tp(e,(t,e)=>{const i=new Yp(t);if(py(r,e,sm(n,i)),".priority"===nm(i)&&!dy(e))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(i)}),function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const r=im(i);for(let e=0;e<r.length;e++)if((".priority"!==r[e]||e!==r.length-1)&&!cy(r[e]))throw new Error(t+"contains an invalid key ("+r[e]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(um);let r=null;for(n=0;n<e.length;n++){if(i=e[n],null!==r&&cm(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},gy=function(t,e,n){if(!n||void 0!==e){if(mp(e))throw new Error((0,Rd.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!dy(e))throw new Error((0,Rd.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_y=function(t,e,n,i){if(!(i&&void 0===n||cy(n)))throw new Error((0,Rd.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yy=function(t,e,n,i){if(!(i&&void 0===n||hy(n)))throw new Error((0,Rd.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vy=function(t,e){if(".info"===Xp(e))throw new Error(t+" failed = Can't modify data under /.info/")},wy=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hy(t)}(n))throw new Error((0,Rd.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class by{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cy(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==n&&!lm(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function Ty(t,e,n){Cy(t,n),Iy(t,t=>lm(t,e))}function Ey(t,e,n){Cy(t,n),Iy(t,t=>cm(t,e)||cm(e,t))}function Iy(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];r&&(e(r.path)?(Sy(t.eventLists_[i]),t.eventLists_[i]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Sy(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const i=n.getEventRunner();ap&&cp("event: "+n.toString()),xp(i)}}}const xy="repo_interrupt";class Ay{constructor(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new by,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ug(),this.transactionQueueTree_=new J_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ky(t){const e=t.infoData_.getNode(new Yp(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Dy(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:ky(t)})}function Py(t,e,n,i,r){t.dataUpdateCount++;const s=new Yp(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const e=(0,Rd.UI)(n,t=>Zm(t));o=function(t,e,n,i){const r=j_(t,i);if(r){const i=U_(r),s=i.path,o=i.queryId,a=am(s,e),u=kg.fromObject(n);return q_(t,s,new vg(mg(o),a,u))}return[]}(t.serverSyncTree_,s,e,r)}else{const e=Zm(n);o=P_(t.serverSyncTree_,s,e,r)}else if(i){const e=(0,Rd.UI)(n,t=>Zm(t));o=function(t,e,n){const i=kg.fromObject(n);return L_(t,new vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,s,e)}else{const e=Zm(n);o=k_(t.serverSyncTree_,s,e)}let a=s;o.length>0&&(a=Zy(t,s)),Ey(t.eventQueue_,a,o)}function Ny(t,e){Oy(t,"connected",e),!1===e&&function(t){jy(t,"onDisconnectEvents");const e=Dy(t),n=ug();hg(t.onDisconnect_,Jp(),(i,r)=>{const s=K_(i,r,t.serverSyncTree_,e);lg(n,i,s)});let i=[];hg(n,Jp(),(e,n)=>{i=i.concat(k_(t.serverSyncTree_,e,n));const r=Ky(t,e);Zy(t,r)}),t.onDisconnect_=ug(),Ey(t.eventQueue_,Jp(),i)}(t)}function Oy(t,e,n){const i=new Yp("/.info/"+e),r=Zm(n);t.infoData_.updateSnapshot(i,r);const s=k_(t.infoSyncTree_,i,r);Ey(t.eventQueue_,i,s)}function Ly(t){return t.nextWriteId_++}function Ry(t,e,n,i,r){jy(t,"set",{path:e.toString(),value:n,priority:i});const s=Dy(t),o=Zm(n,i),a=O_(t.serverSyncTree_,e),u=Q_(o,a,s),l=Ly(t),c=x_(t.serverSyncTree_,e,u,l,!0);Cy(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(n,i)=>{const s="ok"===n;s||pp("set at "+e+" failed: "+n);const o=A_(t.serverSyncTree_,l,!s);Ey(t.eventQueue_,e,o),Uy(0,r,n,i)});const h=Ky(t,e);Zy(t,h),Ey(t.eventQueue_,h,[])}function Fy(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&cg(t.onDisconnect_,e),Uy(0,n,i,r)})}function My(t,e,n,i){const r=Zm(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(n,s)=>{"ok"===n&&lg(t.onDisconnect_,e,r),Uy(0,i,n,s)})}function Vy(t,e,n){let i;i=".info"===Xp(e._path)?D_(t.infoSyncTree_,e,n):D_(t.serverSyncTree_,e,n),Ty(t.eventQueue_,e._path,i)}function By(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xy)}function jy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),cp(n,...e)}function Uy(t,e,n,i){e&&xp(()=>{if("ok"===n)e(null);else{const t=(n||"error").toUpperCase();let r=t;i&&(r+=": "+i);const s=new Error(r);s.code=t,e(s)}})}function qy(t,e,n){return O_(t.serverSyncTree_,e,n)||qm.EMPTY_NODE}function zy(t,e=t.transactionQueueTree_){if(e||Gy(t,e),ty(e)){const n=Hy(t,e);(0,Rd.hu)(n.length>0,"Sending zero length transaction queue"),n.every(t=>0===t.status)&&function(t,e,n){const i=n.map(t=>t.currentWriteId),r=qy(t,e,i);let s=r;const o=r.hash();for(let l=0;l<n.length;l++){const t=n[l];(0,Rd.hu)(0===t.status,"tryToSendTransactionQueue_: items in queue should all be run."),t.status=1,t.retryCount++;const i=am(e,t.path);s=s.updateChild(i,t.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,i=>{jy(t,"transaction put response",{path:u.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let e=0;e<n.length;e++)n[e].status=2,r=r.concat(A_(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&i.push(()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)),n[e].unwatcher();Gy(t,X_(t.transactionQueueTree_,e)),zy(t,t.transactionQueueTree_),Ey(t.eventQueue_,e,r);for(let t=0;t<i.length;t++)xp(i[t])}else{if("datastale"===i)for(let t=0;t<n.length;t++)n[t].status=3===n[t].status?4:0;else{pp("transaction at "+u.toString()+" failed: "+i);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=i}Zy(t,e)}},o)}(t,sy(e),n)}else ny(e)&&iy(e,e=>{zy(t,e)})}function Zy(t,e){const n=$y(t,e),i=sy(n);return function(t,e,n){if(0===e.length)return;const i=[];let r=[];const s=e.filter(t=>0===t.status).map(t=>t.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],u=am(n,a.path);let l,c=!1;if((0,Rd.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)c=!0,l=a.abortReason,r=r.concat(A_(t.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(A_(t.serverSyncTree_,a.currentWriteId,!0));else{const n=qy(t,a.path,s);a.currentInputSnapshot=n;const i=e[o].update(n.val());if(void 0!==i){py("transaction failed: Data returned ",i,a.path);let e=Zm(i);"object"==typeof i&&null!=i&&(0,Rd.r3)(i,".priority")||(e=e.updatePriority(n.getPriority()));const o=a.currentWriteId,u=Dy(t),l=Q_(e,n,u);a.currentOutputSnapshotRaw=e,a.currentOutputSnapshotResolved=l,a.currentWriteId=Ly(t),s.splice(s.indexOf(o),1),r=r.concat(x_(t.serverSyncTree_,a.path,l,a.currentWriteId,a.applyLocally)),r=r.concat(A_(t.serverSyncTree_,o,!0))}else c=!0,l="nodata",r=r.concat(A_(t.serverSyncTree_,a.currentWriteId,!0))}Ey(t.eventQueue_,n,r),r=[],c&&(e[o].status=2,setTimeout(e[o].unwatcher,Math.floor(0)),e[o].onComplete&&i.push("nodata"===l?()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot):()=>e[o].onComplete(new Error(l),!1,null)))}Gy(t,t.transactionQueueTree_);for(let o=0;o<i.length;o++)xp(i[o]);zy(t,t.transactionQueueTree_)}(t,Hy(t,n),i),i}function $y(t,e){let n,i=t.transactionQueueTree_;for(n=Xp(e);null!==n&&void 0===ty(i);)i=X_(i,n),n=Xp(e=em(e));return i}function Hy(t,e){const n=[];return Wy(t,e,n),n.sort((t,e)=>t.order-e.order),n}function Wy(t,e,n){const i=ty(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);iy(e,e=>{Wy(t,e,n)})}function Gy(t,e){const n=ty(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,ey(e,n.length>0?n:void 0)}iy(e,e=>{Gy(t,e)})}function Ky(t,e){const n=sy($y(t,e)),i=X_(t.transactionQueueTree_,e);return function(t,e,n){let i=t.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,e=>{Qy(t,e)}),Qy(t,i),ry(i,e=>{Qy(t,e)}),n}function Qy(t,e){const n=ty(e);if(n){const i=[];let r=[],s=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?((0,Rd.hu)(s===e-1,"All SENT items should be at beginning of queue."),s=e,n[e].status=3,n[e].abortReason="set"):((0,Rd.hu)(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),r=r.concat(A_(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&i.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ey(e,void 0):n.length=s+1,Ey(t.eventQueue_,sy(e),r);for(let t=0;t<i.length;t++)xp(i[t])}}const Yy=function(t,e){const n=Jy(t),i=n.namespace;return"firebase.com"===n.domain&&fp(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==n.domain&&fp("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pp("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rp(n.host,n.secure,i,"ws"===n.scheme||"wss"===n.scheme,e,"",i!==n.subdomain),path:new Yp(n.pathString)}},Jy=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",u=443;if("string"==typeof t){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let c=t.indexOf("/");-1===c&&(c=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(r=function(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let t=n[i];try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(s){}e+="/"+t}return e}(t.substring(c,h)));const d=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):pp(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,h)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const t=e.indexOf(".");i=e.substring(0,t).toLowerCase(),n=e.substring(t+1),s=i}"ns"in d&&(s=d.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},Xy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tv=function(){let t=0;const e=[];return function(n){const i=n===t;let r;t=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Xy.charAt(n%64),n=Math.floor(n/64);(0,Rd.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Xy.charAt(e[r]);return(0,Rd.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class ev{constructor(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Rd.Wl)(this.snapshot.exportVal())}}class nv{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class iv{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,Rd.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class rv{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Rd.BH;return Fy(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){vy("OnDisconnect.remove",this._path);const t=new Rd.BH;return My(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){vy("OnDisconnect.set",this._path),fy("OnDisconnect.set",t,this._path,!1);const e=new Rd.BH;return My(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){vy("OnDisconnect.setWithPriority",this._path),fy("OnDisconnect.setWithPriority",t,this._path,!1),gy("OnDisconnect.setWithPriority",e,!1);const n=new Rd.BH;return function(t,e,n,i,r){const s=Zm(n,i);t.server_.onDisconnectPut(e.toString(),s.val(!0),(n,i)=>{"ok"===n&&lg(t.onDisconnect_,e,s),Uy(0,r,n,i)})}(this._repo,this._path,t,e,n.wrapCallback(()=>{})),n.promise}update(t){vy("OnDisconnect.update",this._path),my("OnDisconnect.update",t,this._path,!1);const e=new Rd.BH;return function(t,e,n,i){if((0,Rd.xb)(n))return cp("onDisconnect().update() called with empty data.  Don't do anything."),void Uy(0,i,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(r,s)=>{"ok"===r&&Tp(n,(n,i)=>{const r=Zm(i);lg(t.onDisconnect_,sm(e,n),r)}),Uy(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class sv{constructor(t,e,n,i){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=i}get key(){return om(this._path)?null:nm(this._path)}get ref(){return new lv(this._repo,this._path)}get _queryIdentifier(){const t=sg(this._queryParams),e=bp(t);return"{}"===e?"default":e}get _queryObject(){return sg(this._queryParams)}isEqual(t){if(!((t=(0,Rd.m9)(t))instanceof sv))return!1;const e=this._repo===t._repo,n=lm(this._path,t._path);return e&&n&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}function ov(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function av(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===bm){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==gp)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==_p)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===Lm){if(null!=e&&!dy(e)||null!=n&&!dy(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Rd.hu)(t.getIndex()instanceof $m||t.getIndex()===Hm,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function uv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class lv extends sv{constructor(t,e){super(t,e,new tg,!1)}get parent(){const t=rm(this._path);return null===t?null:new lv(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class cv{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Yp(t),n=fv(this.ref,t);return new cv(this._node.getChild(e),n,Lm)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(e,n)=>t(new cv(n,fv(this.ref,e),Lm)))}hasChild(t){const e=new Yp(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function hv(t,e){return(t=(0,Rd.m9)(t))._checkNotDeleted("ref"),void 0!==e?fv(t._root,e):t._root}function dv(t,e){(t=(0,Rd.m9)(t))._checkNotDeleted("refFromURL");const n=Yy(e,t._repo.repoInfo_.nodeAdmin);wy("refFromURL",n);const i=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&i.host!==t._repo.repoInfo_.host&&fp("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+t._repo.repoInfo_.host+")"),hv(t,n.path.toString())}function fv(t,e){return null===Xp((t=(0,Rd.m9)(t))._path)?(n=e,n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yy("child","path",n,!1)):yy("child","path",e,!1),new lv(t._repo,sm(t._path,e));var n}function pv(t,e){t=(0,Rd.m9)(t),vy("set",t._path),fy("set",e,t._path,!1);const n=new Rd.BH;return Ry(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function mv(t,e){my("update",e,t._path,!1);const n=new Rd.BH;return function(t,e,n,i){jy(t,"update",{path:e.toString(),value:n});let r=!0;const s=Dy(t),o={};if(Tp(n,(n,i)=>{r=!1,o[n]=K_(sm(e,n),Zm(i),t.serverSyncTree_,s)}),r)cp("update() called with empty data.  Don't do anything."),Uy(0,i,"ok",void 0);else{const r=Ly(t),s=function(t,e,n,i){!function(t,e,n,i){(0,Rd.hu)(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Ng(t.visibleWrites,e,n),t.lastWriteId=i}(t.pendingWriteTree_,e,n,i);const r=kg.fromObject(n);return L_(t,new vg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,e,o,r);Cy(t.eventQueue_,s),t.server_.merge(e.toString(),n,(n,s)=>{const o="ok"===n;o||pp("update at "+e+" failed: "+n);const a=A_(t.serverSyncTree_,r,!o),u=a.length>0?Zy(t,e):e;Ey(t.eventQueue_,u,a),Uy(0,i,n,s)}),Tp(n,n=>{const i=Ky(t,sm(e,n));Zy(t,i)}),Ey(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function gv(t){t=(0,Rd.m9)(t);const e=new iv(()=>{}),n=new _v(e);return function(t,e,n){const i=function(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(t,e)=>{const r=am(t,n);i=i||w_(e,r)});let r=t.syncPointTree_.get(n);r?i=i||w_(r,Jp()):(r=new g_,t.syncPointTree_=t.syncPointTree_.set(n,r));const s=null!=i,o=s?new wg(i,!0,!1):null;return function(t){return Sg(t.viewCache_)}(y_(r,e,Ug(t.pendingWriteTree_,e._path),s?o.getNode():qm.EMPTY_NODE,s))}(t.serverSyncTree_,e);return null!=i?Promise.resolve(i):t.server_.get(e).then(i=>{const r=Zm(i).withIndex(e._queryParams.getIndex());let s;if(N_(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())s=k_(t.serverSyncTree_,e._path,r);else{const n=V_(t.serverSyncTree_,e);s=P_(t.serverSyncTree_,e._path,r,n)}return Ey(t.eventQueue_,e._path,s),D_(t.serverSyncTree_,e,n,null,!0),r},n=>(jy(t,"get for query "+(0,Rd.Wl)(e)+" failed: "+n),Promise.reject(new Error(n))))}(t._repo,t,n).then(e=>new cv(e,new lv(t._repo,t._path),t._queryParams.getIndex()))}class _v{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const n=e._queryParams.getIndex();return new ev("value",this,new cv(t.snapshotNode,new lv(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new nv(this,t,e):null}matches(t){return t instanceof _v&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yv{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new nv(this,t,e):null}createEvent(t,e){(0,Rd.hu)(null!=t.childName,"Child events should have a childName.");const n=fv(new lv(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new ev(t.type,this,new cv(t.snapshotNode,n,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof yv&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function vv(t,e,n,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const e=n,i=(n,i)=>{Vy(t._repo,t,a),e(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new iv(n,s||void 0),a="value"===e?new _v(o):new yv(e,o);return function(t,e,n){let i;i=".info"===Xp(e._path)?N_(t.infoSyncTree_,e,n):N_(t.serverSyncTree_,e,n),Ty(t.eventQueue_,e._path,i)}(t._repo,t,a),()=>Vy(t._repo,t,a)}function wv(t,e,n,i){return vv(t,"value",e,n,i)}function bv(t,e,n,i){return vv(t,"child_added",e,n,i)}function Cv(t,e,n,i){return vv(t,"child_changed",e,n,i)}function Tv(t,e,n,i){return vv(t,"child_moved",e,n,i)}function Ev(t,e,n,i){return vv(t,"child_removed",e,n,i)}function Iv(t,e,n){let i=null;const r=n?new iv(n):null;"value"===e?i=new _v(r):e&&(i=new yv(e,r)),Vy(t._repo,t,i)}class Sv{}class xv extends Sv{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){fy("endAt",this._value,t._path,!0);const e=ng(t._queryParams,this._value,this._key);if(uv(e),av(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sv(t._repo,t._path,e,t._orderByCalled)}}class Av extends Sv{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){fy("endBefore",this._value,t._path,!1);const e=function(t,e,n){let i;return i=ng(t,e,t.index_===bm||n?n:gp),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(uv(e),av(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sv(t._repo,t._path,e,t._orderByCalled)}}class kv extends Sv{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){fy("startAt",this._value,t._path,!0);const e=eg(t._queryParams,this._value,this._key);if(uv(e),av(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new sv(t._repo,t._path,e,t._orderByCalled)}}class Dv extends Sv{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){fy("startAfter",this._value,t._path,!1);const e=function(t,e,n){let i;return i=eg(t,e,t.index_===bm||n?n:_p),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(uv(e),av(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new sv(t._repo,t._path,e,t._orderByCalled)}}class Pv extends Sv{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new sv(t._repo,t._path,function(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(t._queryParams,this._limit),t._orderByCalled)}}class Nv extends Sv{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new sv(t._repo,t._path,function(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(t._queryParams,this._limit),t._orderByCalled)}}class Ov extends Sv{constructor(t){super(),this._path=t}_apply(t){ov(t,"orderByChild");const e=new Yp(this._path);if(om(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new $m(e),i=ig(t._queryParams,n);return av(i),new sv(t._repo,t._path,i,!0)}}class Lv extends Sv{_apply(t){ov(t,"orderByKey");const e=ig(t._queryParams,bm);return av(e),new sv(t._repo,t._path,e,!0)}}class Rv extends Sv{_apply(t){ov(t,"orderByPriority");const e=ig(t._queryParams,Lm);return av(e),new sv(t._repo,t._path,e,!0)}}class Fv extends Sv{_apply(t){ov(t,"orderByValue");const e=ig(t._queryParams,Hm);return av(e),new sv(t._repo,t._path,e,!0)}}class Mv extends Sv{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(fy("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xv(this._value,this._key)._apply(new kv(this._value,this._key)._apply(t))}}function Vv(t,...e){let n=(0,Rd.m9)(t);for(const i of e)n=i._apply(n);return n}(function(t){(0,Rd.hu)(!p_,"__referenceConstructor has already been defined"),p_=t})(lv),function(t){(0,Rd.hu)(!m_,"__referenceConstructor has already been defined"),m_=t}(lv);const Bv={};function jv(t,e,n,i,r){let s=i||t.options.databaseURL;void 0===s&&(t.options.projectId||fp("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cp("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o,a,u=Yy(s,r),l=u.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${l.namespace}`,u=Yy(s,r),l=u.repoInfo):o=!u.repoInfo.secure;const c=r&&o?new Pp(Pp.OWNER):new Dp(t.name,t.options,e);wy("Invalid Firebase Database URL",u),om(u.path)||fp("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(t,e,n,i){let r=Bv[e.name];r||(r={},Bv[e.name]=r);let s=r[t.toURLString()];return s&&fp("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ay(t,false,n,i),r[t.toURLString()]=s,s}(l,t,c,new kp(t.name,n));return new Uv(h,t)}class Uv{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(t,e,n){if(t.stats_=jp(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new og(t.repoInfo_,(e,n,i,r)=>{Py(t,e,n,i,r)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ny(t,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Rd.Wl)(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new _m(t.repoInfo_,e,(e,n,i,r)=>{Py(t,e,n,i,r)},e=>{Ny(t,e)},e=>{!function(t,e){Tp(e,(e,n)=>{Oy(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(e=>{t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(e=>{t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=function(t,e){const n=t.toString();return Bp[n]||(Bp[n]=e()),Bp[n]}(t.repoInfo_,()=>new fg(t.stats_,t.server_)),t.infoData_=new ag,t.infoSyncTree_=new S_({startListening:(e,n,i,r)=>{let s=[];const o=t.infoData_.getNode(e._path);return o.isEmpty()||(s=k_(t.infoSyncTree_,e._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),Oy(t,"connected",!1),t.serverSyncTree_=new S_({startListening:(e,n,i,r)=>(t.server_.listen(e,i,n,(n,i)=>{const s=r(n,i);Ey(t.eventQueue_,e._path,s)}),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lv(this._repo,Jp())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const n=Bv[e];(!n||n[t.key]!==t)&&fp(`Database ${e}(${t.repoInfo_}) has already been deleted.`),By(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&fp("Cannot call "+t+" on a deleted database.")}}function qv(){Hp.IS_TRANSPORT_INITIALIZED&&pp("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function zv(){qv(),qp.forceDisallow()}function Zv(){qv(),$p.forceDisallow(),qp.forceAllow()}function $v(t,e){lp(t,e)}class Hv{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}_m.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},_m.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},Yf(Fd.SDK_VERSION),(0,Fd._registerComponent)(new Vd.wA("database",(t,{instanceIdentifier:e})=>jv(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Fd.registerVersion)(Kf,"0.14.0",void 0),(0,Fd.registerVersion)(Kf,"0.14.0","esm2017");const Wv=new Md.Yd("@firebase/database-compat"),Gv=function(t){Wv.warn("FIREBASE WARNING: "+t)};class Kv{constructor(t){this._delegate=t}cancel(t){(0,Rd.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Rd.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),e=>t(e)),e}remove(t){(0,Rd.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Rd.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),e=>t(e)),e}set(t,e){(0,Rd.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Rd.Wj)("OnDisconnect.set","onComplete",e,!0);const n=this._delegate.set(t);return e&&n.then(()=>e(null),t=>e(t)),n}setWithPriority(t,e,n){(0,Rd.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Rd.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const i=this._delegate.setWithPriority(t,e);return n&&i.then(()=>n(null),t=>n(t)),i}update(t,e){if((0,Rd.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const e={};for(let n=0;n<t.length;++n)e[""+n]=t[n];t=e,Gv("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Rd.Wj)("OnDisconnect.update","onComplete",e,!0);const n=this._delegate.update(t);return e&&n.then(()=>e(null),t=>e(t)),n}}class Qv{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,Rd.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Yv{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,Rd.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Rd.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Rd.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Rd.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,Rd.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),yy("DataSnapshot.child","path",t,!1),new Yv(this._database,this._delegate.child(t))}hasChild(t){return(0,Rd.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yy("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,Rd.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,Rd.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Rd.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Yv(this._database,e)))}hasChildren(){return(0,Rd.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Rd.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Rd.Dv)("DataSnapshot.ref",0,0,arguments.length),new Xv(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Jv{constructor(t,e){this.database=t,this._delegate=e}on(t,e,n,i){var r;(0,Rd.Dv)("Query.on",2,4,arguments.length),(0,Rd.Wj)("Query.on","callback",e,!1);const s=Jv.getCancelAndContextArgs_("Query.on",n,i),o=(t,n)=>{e.call(s.context,new Yv(this.database,t),n)};o.userCallback=e,o.context=s.context;const a=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(t){case"value":return wv(this._delegate,o,a),e;case"child_added":return bv(this._delegate,o,a),e;case"child_removed":return Ev(this._delegate,o,a),e;case"child_changed":return Cv(this._delegate,o,a),e;case"child_moved":return Tv(this._delegate,o,a),e;default:throw new Error((0,Rd.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,n){if((0,Rd.Dv)("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Rd.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,Rd.Wj)("Query.off","callback",e,!0),(0,Rd.lb)("Query.off","context",n,!0),e){const i=()=>{};i.userCallback=e,i.context=n,Iv(this._delegate,t,i)}else Iv(this._delegate,t)}get(){return gv(this._delegate).then(t=>new Yv(this.database,t))}once(t,e,n,i){(0,Rd.Dv)("Query.once",1,4,arguments.length),(0,Rd.Wj)("Query.once","callback",e,!0);const r=Jv.getCancelAndContextArgs_("Query.once",n,i),s=new Rd.BH,o=(t,n)=>{const i=new Yv(this.database,t);e&&e.call(r.context,i,n),s.resolve(i)};o.userCallback=e,o.context=r.context;const a=t=>{r.cancel&&r.cancel.call(r.context,t),s.reject(t)};switch(t){case"value":wv(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":bv(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":Ev(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":Cv(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":Tv(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error((0,Rd.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return(0,Rd.Dv)("Query.limitToFirst",1,1,arguments.length),new Jv(this.database,Vv(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Pv(t)}(t)))}limitToLast(t){return(0,Rd.Dv)("Query.limitToLast",1,1,arguments.length),new Jv(this.database,Vv(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Nv(t)}(t)))}orderByChild(t){return(0,Rd.Dv)("Query.orderByChild",1,1,arguments.length),new Jv(this.database,Vv(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yy("orderByChild","path",t,!1),new Ov(t)}(t)))}orderByKey(){return(0,Rd.Dv)("Query.orderByKey",0,0,arguments.length),new Jv(this.database,Vv(this._delegate,new Lv))}orderByPriority(){return(0,Rd.Dv)("Query.orderByPriority",0,0,arguments.length),new Jv(this.database,Vv(this._delegate,new Rv))}orderByValue(){return(0,Rd.Dv)("Query.orderByValue",0,0,arguments.length),new Jv(this.database,Vv(this._delegate,new Fv))}startAt(t=null,e){return(0,Rd.Dv)("Query.startAt",0,2,arguments.length),new Jv(this.database,Vv(this._delegate,function(t=null,e){return _y("startAt","key",e,!0),new kv(t,e)}(t,e)))}startAfter(t=null,e){return(0,Rd.Dv)("Query.startAfter",0,2,arguments.length),new Jv(this.database,Vv(this._delegate,function(t,e){return _y("startAfter","key",e,!0),new Dv(t,e)}(t,e)))}endAt(t=null,e){return(0,Rd.Dv)("Query.endAt",0,2,arguments.length),new Jv(this.database,Vv(this._delegate,function(t,e){return _y("endAt","key",e,!0),new xv(t,e)}(t,e)))}endBefore(t=null,e){return(0,Rd.Dv)("Query.endBefore",0,2,arguments.length),new Jv(this.database,Vv(this._delegate,function(t,e){return _y("endBefore","key",e,!0),new Av(t,e)}(t,e)))}equalTo(t,e){return(0,Rd.Dv)("Query.equalTo",1,2,arguments.length),new Jv(this.database,Vv(this._delegate,function(t,e){return _y("equalTo","key",e,!0),new Mv(t,e)}(t,e)))}toString(){return(0,Rd.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Rd.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,Rd.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Jv))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,n){const i={cancel:void 0,context:void 0};if(e&&n)i.cancel=e,(0,Rd.Wj)(t,"cancel",i.cancel,!0),i.context=n,(0,Rd.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,Rd.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Xv(this.database,new lv(this._delegate._repo,this._delegate._path))}}class Xv extends Jv{constructor(t,e){super(t,new sv(e._repo,e._path,new tg,!1)),this.database=t,this._delegate=e}getKey(){return(0,Rd.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,Rd.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Xv(this.database,fv(this._delegate,t))}getParent(){(0,Rd.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Xv(this.database,t):null}getRoot(){return(0,Rd.Dv)("Reference.root",0,0,arguments.length),new Xv(this.database,this._delegate.root)}set(t,e){(0,Rd.Dv)("Reference.set",1,2,arguments.length),(0,Rd.Wj)("Reference.set","onComplete",e,!0);const n=pv(this._delegate,t);return e&&n.then(()=>e(null),t=>e(t)),n}update(t,e){if((0,Rd.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const e={};for(let n=0;n<t.length;++n)e[""+n]=t[n];t=e,Gv("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vy("Reference.update",this._delegate._path),(0,Rd.Wj)("Reference.update","onComplete",e,!0);const n=mv(this._delegate,t);return e&&n.then(()=>e(null),t=>e(t)),n}setWithPriority(t,e,n){(0,Rd.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Rd.Wj)("Reference.setWithPriority","onComplete",n,!0);const i=function(t,e,n){if(vy("setWithPriority",t._path),fy("setWithPriority",e,t._path,!1),gy("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const i=new Rd.BH;return Ry(t._repo,t._path,e,n,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return n&&i.then(()=>n(null),t=>n(t)),i}remove(t){(0,Rd.Dv)("Reference.remove",0,1,arguments.length),(0,Rd.Wj)("Reference.remove","onComplete",t,!0);const e=function(t){return vy("remove",t._path),pv(t,null)}(this._delegate);return t&&e.then(()=>t(null),e=>t(e)),e}transaction(t,e,n){(0,Rd.Dv)("Reference.transaction",1,3,arguments.length),(0,Rd.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,Rd.Wj)("Reference.transaction","onComplete",e,!0),function(t,e,n,i){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,Rd.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const i=function(t,e,n){var i;if(t=(0,Rd.m9)(t),vy("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,s=new Rd.BH,o=wv(t,()=>{});return function(t,e,n,i,r,s){jy(t,"transaction on "+e);const o={path:e,update:n,onComplete:i,status:null,order:rp(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=qy(t,e,void 0);o.currentInputSnapshot=a;const u=o.update(a.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{py("transaction failed: Data returned ",u,o.path),o.status=0;const n=X_(t.transactionQueueTree_,e),i=ty(n)||[];let r;i.push(o),ey(n,i),"object"==typeof u&&null!==u&&(0,Rd.r3)(u,".priority")?(r=(0,Rd.DV)(u,".priority"),(0,Rd.hu)(dy(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(O_(t.serverSyncTree_,e)||qm.EMPTY_NODE).getPriority().val();const s=Dy(t),l=Zm(u,r),c=Q_(l,a,s);o.currentOutputSnapshotRaw=l,o.currentOutputSnapshotResolved=c,o.currentWriteId=Ly(t);const h=x_(t.serverSyncTree_,e,c,o.currentWriteId,o.applyLocally);Ey(t.eventQueue_,e,h),zy(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(e,n,i)=>{let r=null;e?s.reject(e):(r=new cv(i,new lv(t._repo,t._path),Lm),s.resolve(new Hv(n,r)))},o,r),s.promise}(this._delegate,t,{applyLocally:n}).then(t=>new Qv(t.committed,new Yv(this.database,t.snapshot)));return e&&i.then(t=>e(null,t.committed,t.snapshot),t=>e(t,!1,null)),i}setPriority(t,e){(0,Rd.Dv)("Reference.setPriority",1,2,arguments.length),(0,Rd.Wj)("Reference.setPriority","onComplete",e,!0);const n=function(t,e){t=(0,Rd.m9)(t),vy("setPriority",t._path),gy("setPriority",e,!1);const n=new Rd.BH;return Ry(t._repo,sm(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,t);return e&&n.then(()=>e(null),t=>e(t)),n}push(t,e){(0,Rd.Dv)("Reference.push",0,2,arguments.length),(0,Rd.Wj)("Reference.push","onComplete",e,!0);const n=function(t,e){t=(0,Rd.m9)(t),vy("push",t._path),fy("push",e,t._path,!0);const n=ky(t._repo),i=tv(n),r=fv(t,i),s=fv(t,i);let o;return o=null!=e?pv(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,t),i=n.then(t=>new Xv(this.database,t));e&&i.then(()=>e(null),t=>e(t));const r=new Xv(this.database,n);return r.then=i.then.bind(i),r.catch=i.catch.bind(i,void 0),r}onDisconnect(){return vy("Reference.onDisconnect",this._delegate._path),new Kv(new rv(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class tw{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:zv,forceLongPolling:Zv}}useEmulator(t,e,n={}){!function(t,e,n,i={}){(t=(0,Rd.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&fp("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&fp('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Pp(Pp.OWNER);else if(i.mockUserToken){const e="string"==typeof i.mockUserToken?i.mockUserToken:(0,Rd.Sg)(i.mockUserToken,t.app.options.projectId);s=new Pp(e)}!function(t,e,n,i){t.repoInfo_=new Rp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}(r,e,n,s)}(this._delegate,t,e,n)}ref(t){if((0,Rd.Dv)("database.ref",0,1,arguments.length),t instanceof Xv){const e=dv(this._delegate,t.toString());return new Xv(this,e)}{const e=hv(this._delegate,t);return new Xv(this,e)}}refFromURL(t){(0,Rd.Dv)("database.refFromURL",1,1,arguments.length);const e=dv(this._delegate,t);return new Xv(this,e)}goOffline(){return(0,Rd.Dv)("database.goOffline",0,0,arguments.length),function(t){(t=(0,Rd.m9)(t))._checkNotDeleted("goOffline"),By(t._repo)}(this._delegate)}goOnline(){return(0,Rd.Dv)("database.goOnline",0,0,arguments.length),function(t){(t=(0,Rd.m9)(t))._checkNotDeleted("goOnline"),function(t){t.persistentConnection_&&t.persistentConnection_.resume(xy)}(t._repo)}(this._delegate)}}tw.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:t=>function(t){return{".sv":{increment:t}}}(t)};var ew=Object.freeze({__proto__:null,initStandalone:function({app:t,url:e,version:n,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){Yf(n);const o=new Vd.zt("auth-internal",new Vd.H0("database-standalone"));return o.setComponent(new Vd.wA("auth-internal",()=>i,"PRIVATE")),{instance:new tw(jv(t,o,void 0,e,s),t),namespace:r}}});const nw=tw.ServerValue;function iw(t){return null==t}function rw(t){return"function"==typeof t.set}function sw(t,e){return rw(e)?e:t.ref(e)}function ow(t,e){if(function(t){return"string"==typeof t}(t))return e.stringCase();if(rw(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function aw(t,e,n="on",i=Bf.z){return new Pt.y(r=>{let s=null;return s=t[n](e,(t,e)=>{i.schedule(()=>{r.next({snapshot:t,prevKey:e})}),"once"===n&&i.schedule(()=>r.complete())},t=>{i.schedule(()=>r.error(t))}),"on"===n?{unsubscribe(){null!=s&&t.off(e,s)}}:{unsubscribe(){}}}).pipe((0,kt.U)(t=>{const{snapshot:n,prevKey:i}=t;let r=null;return n.exists()&&(r=n.key),{type:e,payload:n,prevKey:i,key:r}}),(0,jf.B)())}function uw(t,e){const n=t.length;for(let i=0;i<n;i++)if(t[i].payload.key===e)return i;return-1}function lw(t,e){const{payload:n,prevKey:i,key:r}=e,s=uw(t,r),o=function(t,e){if(iw(e))return 0;{const n=uw(t,e);return-1===n?t.length:n+1}}(t,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const i={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,i],!1})}return t;case"child_added":if(s>-1){const r=t[s-1];(r&&r.key||null)!==i&&(t=t.filter(t=>t.payload.key!==n.key)).splice(o,0,e)}else{if(null==i)return[e,...t];(t=t.slice()).splice(o,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===r?e:t);case"child_moved":if(s>-1){const e=t.splice(s,1)[0];return(t=t.slice()).splice(o,0,e),t}return t;default:return t}}function cw(t){return(iw(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function hw(t,e,n){return function(t,e,n){return aw(t,"value","once",n).pipe(je(i=>{const r=[(0,Dt.of)(i)];return e.forEach(e=>r.push(aw(t,e,"on",n))),(0,Bd.T)(...r).pipe(Ge(lw,[]))}),Uf())}(t,e=cw(e),n)}function dw(t,e,n){const i=(e=cw(e)).map(e=>aw(t,e,"on",n));return(0,Bd.T)(...i)}function fw(t,e){return function(n,i){return ow(n,{stringCase:()=>t.child(n)[e](i),firebaseCase:()=>n[e](i),snapshotCase:()=>n.ref[e](i)})}}function pw(t){return function(e){return e?ow(e,{stringCase:()=>t.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):t.remove()}}function mw(t,e){return function(){return aw(t,"value","on",e)}}!function(t){t.INTERNAL.registerComponent(new Vd.wA("database-compat",(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new tw(i,n)},"PUBLIC").setServiceProps({Reference:Xv,Query:Jv,Database:tw,DataSnapshot:Yv,enableLogging:$v,INTERNAL:ew,ServerValue:nw}).setMultipleInstances(!0)),t.registerVersion("@firebase/database-compat","0.3.0")}(Gf.Z);const gw=new r.OlP("angularfire2.realtimeDatabaseURL"),_w=new r.OlP("angularfire2.database.use-emulator");let yw=(()=>{class t{constructor(t,e,n,i,r,s,o,a,u,l,c,h,d,f,p){this.schedulers=s;const m=o,g=(0,Kd.on)(t,r,e);a&&Ff(g,r,u,c,h,d,l,f),this.database=(0,Kd.cc)(`${g.name}.database.${n}`,"AngularFireDatabase",g.name,()=>{const t=r.runOutsideAngular(()=>g.database(n||void 0));return m&&t.useEmulator(...m),t},[m])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>sw(this.database,t));let i=n;return e&&(i=e(n)),function(t,e){const n=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:fw(i,"update"),set:fw(i,"set"),push:t=>i.push(t),remove:pw(i),snapshotChanges:e=>hw(t,e,n).pipe(Gd.iC),stateChanges:e=>dw(t,e,n).pipe(Gd.iC),auditTrail:e=>function(t,e,n){return function(t,e,n){return function(t,e){return aw(t,"value","on",e).pipe((0,kt.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Zf(t,n))}}(e),(0,kt.U)(([t,e])=>{const n=t.lastKeyToLoad,i=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:i}}),function(t){return e=>e.lift(new Hf(t))}(t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad)),(0,kt.U)(t=>t.actions))}(t,dw(t,e).pipe(Ge((t,e)=>[...t,e],[])),n)}(t,e,n).pipe(Gd.iC),valueChanges:(e,i)=>hw(t,e,n).pipe((0,kt.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),Gd.iC)}}(i,this)}object(t){return function(t,e){return{query:t,snapshotChanges:()=>mw(t,e.schedulers.outsideAngular)().pipe(Gd.iC),update:e=>t.ref.update(e),set:e=>t.ref.set(e),remove:()=>t.ref.remove(),valueChanges:()=>mw(t,e.schedulers.outsideAngular)().pipe(Gd.iC,(0,kt.U)(t=>t.payload.exists()?t.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>sw(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Kd.Dh),r.LFG(Kd.xv,8),r.LFG(gw,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gd.HU),r.LFG(_w,8),r.LFG(Mf,8),r.LFG(Df,8),r.LFG(Pf,8),r.LFG(Nf,8),r.LFG(Of,8),r.LFG(Lf,8),r.LFG(Rf,8),r.LFG(Af,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),vw=(()=>{class t{constructor(t,e){this.afAuth=t,this.afd=e}add(t,e){return this.afd.list(t).push(e)}get(t){return this.afd.list(t).snapshotChanges().pipe((0,kt.U)(t=>t.map(t=>t.payload.val())))}googleAuth(){var t=this;return(0,Od.Z)(function*(){try{const e=yield t.afAuth.signInWithPopup(new Ld.Q);if(e.user)return{name:e.user.displayName,mail:e.user.email}}catch(e){return e}})()}vote(t,e){this.afd.object(`${t}/v`).query.ref.transaction(t=>t+1),this.afd.object(`${t}/r`).query.ref.transaction(t=>!0===e?t+1:t-1)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Mf),r.LFG(yw))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ww{constructor(t,e){this.mail=t,this.name=e}}let bw=(()=>{class t{constructor(){}getItem(t,e){const n=localStorage.getItem(t);return n?JSON.parse(n):e}removeItem(t){localStorage.removeItem(t)}setItem(t,e){localStorage.setItem(t,JSON.stringify(e))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Cw=(()=>{class t{constructor(t,e){this._firebaseService=t,this._storageService=e}auth(){var t=this;return(0,Od.Z)(function*(){try{const e=yield t._firebaseService.googleAuth();(null==e?void 0:e.mail)&&(null==e?void 0:e.name)&&(t.userInfo=new ww(e.mail,e.name),t._storageService.setItem("userName",e.name))}catch(e){t._handleError(e)}})()}_handleError(t){alert("Logowanie w celu dodania komentarza zako\u0144czone niepowodzeniem. Szczeg\xf3\u0142y b\u0142\u0119du znajdziesz w konsoli."),console.error(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vw),r.LFG(bw))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Tw=(()=>{class t{constructor(t,e,n,i){this._dialogService=t,this._firebaseService=e,this._userService=n,this._storageService=i,this.key=0,this._API_URL="/replies"}addReply(t,e){if(this._userService.userInfo){const n=new Fo(this._getAvatarColor(),this.key,this._userService.userInfo.mail,t,e,Date.now().valueOf());this._dialogService.hideReplyDialog(),this._firebaseService.add(this._API_URL,n),this._storageService.setItem("userName",n.name)}}getAllReplies(){return this._firebaseService.get(this._API_URL)}getRepliesById(t){return this.getAllReplies().pipe((0,kt.U)(e=>e.filter(e=>e.key===t)))}getRepliesByTs(t){return this.getAllReplies().pipe((0,kt.U)(e=>e.filter(e=>e.key===t)))}getRepliesTotalCount(t){return this.getAllReplies().pipe((0,kt.U)(e=>{const n=e.filter(e=>e.key===t);let i=[];return n.map(t=>e.map(e=>{e.key===t.ts&&i.push(e)})),n.length+i.length}))}_getAvatarColor(){const t=["2980B9","3498DB","D35400","27AE60","2ECC71","F39C12","F1C40F","16A085","1ABC9C","7F8C8D","95A5A6","2C3E50","34495E","BDC3C7","8E44AD","9B59B6","C0392B","E74C3C","A94136","B49255","9BA37E","F69785","D870AD","EC87BF"];return`${t[Math.floor(t.length*Math.random())]}`}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Nd),r.LFG(vw),r.LFG(Cw),r.LFG(bw))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Ew(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1," *To pole jest obowi\u0105zkowe "),r.qZA())}function Iw(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.hij(" Minimalna ilo\u015b\u0107 znak\xf3w: ",t.minNameLength," ")}}function Sw(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.hij(" Maksymalna ilo\u015b\u0107 znak\xf3w: ",t.maxNameLength," ")}}function xw(t,e){if(1&t&&(r.TgZ(0,"div",19),r.YNc(1,Ew,2,0,"div",20),r.YNc(2,Iw,2,1,"div",20),r.YNc(3,Sw,2,1,"div",20),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.f.name.errors.required),r.xp6(1),r.Q6J("ngIf",t.f.name.errors.minlength),r.xp6(1),r.Q6J("ngIf",t.f.name.errors.maxlength)}}function Aw(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1," *To pole jest obowi\u0105zkowe "),r.qZA())}function kw(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.hij(" Minimalna ilo\u015b\u0107 znak\xf3w: ",t.minContentLength," ")}}function Dw(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.hij(" Maksymalna ilo\u015b\u0107 znak\xf3w: ",t.maxContentLength," ")}}function Pw(t,e){if(1&t&&(r.TgZ(0,"div",19),r.YNc(1,Aw,2,0,"div",20),r.YNc(2,kw,2,1,"div",20),r.YNc(3,Dw,2,1,"div",20),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.f.content.errors.required),r.xp6(1),r.Q6J("ngIf",t.f.content.errors.minlength),r.xp6(1),r.Q6J("ngIf",t.f.content.errors.maxlength)}}const Nw=function(t){return{"is-invalid":t}};let Ow=(()=>{class t{constructor(t,e,n){this._formBuilder=t,this._replyService=e,this._storageService=n,this.minNameLength=5,this.maxNameLength=20,this.minContentLength=5,this.maxContentLength=300,this.submitted=!1}ngOnInit(){this.form=this._formBuilder.group({name:[this._storageService.getItem("userName",""),[Rs.required,Rs.minLength(this.minNameLength),Rs.maxLength(this.maxNameLength)]],content:["",[Rs.required,Rs.minLength(this.minContentLength),Rs.maxLength(this.maxContentLength)]]})}get f(){return this.form.controls}reset(){this.submitted=!1,this.form.controls.content.reset()}submit(){if(this.submitted=!0,this.form.valid){const t=this.form.value.name;this._replyService.addReply(t,this.form.value.content),this.reset(),this._storageService.setItem("userName",t)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ro),r.Y36(Tw),r.Y36(bw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-modal"]],decls:27,vars:9,consts:[[1,"modal-dialog"],["id","replyDialog","tabindex","-1","aria-labelledby","replyDialogLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","20vh"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["aria-label","Close","data-bs-dismiss","modal","type","button",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],["role","alert",1,"alert","alert-danger"],[1,"form-group","mb-3"],["for","name",1,"form-label","fw-bold"],["formControlName","name","id","name","type","text",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group"],["for","content",1,"form-label","fw-bold"],["formControlName","content","id","content","rows","3","type","text",1,"form-control",3,"ngClass"],[1,"modal-footer","justify-content-between"],["data-bs-dismiss","modal","type","button",1,"btn","btn-danger",2,"width","100px",3,"click"],["type","submit",1,"btn","btn-outline-secondary",2,"width","100px"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",0),r.TgZ(3,"div",2),r.TgZ(4,"div",3),r.TgZ(5,"h5",4),r._uU(6,"Dodaj komentarz..."),r.qZA(),r.TgZ(7,"button",5),r.NdJ("click",function(){return e.reset()}),r.qZA(),r.qZA(),r.TgZ(8,"form",6),r.NdJ("ngSubmit",function(){return e.submit()}),r.TgZ(9,"div",7),r.TgZ(10,"div",8),r._uU(11," Zanim dodasz komentarz, na spokojnie przemy\u015bl jego tre\u015b\u0107. Zachowaj kultur\u0119 osobist\u0105 i nie u\u017cywaj wulgaryzm\xf3w. Pami\u0119taj, \u017ce dodanego komentarza nie b\u0119dziesz m\xf3g\u0142 p\xf3\u017aniej ani edytowa\u0107, ani usun\u0105\u0107. "),r.qZA(),r.TgZ(12,"div",9),r.TgZ(13,"label",10),r._uU(14,"Autor:"),r.qZA(),r._UZ(15,"input",11),r.YNc(16,xw,4,3,"div",12),r.qZA(),r.TgZ(17,"div",13),r.TgZ(18,"label",14),r._uU(19,"Tre\u015b\u0107 komentarza:"),r.qZA(),r._UZ(20,"textarea",15),r.YNc(21,Pw,4,3,"div",12),r.qZA(),r.qZA(),r.TgZ(22,"div",16),r.TgZ(23,"button",17),r.NdJ("click",function(){return e.reset()}),r._uU(24," Odrzu\u0107 "),r.qZA(),r.TgZ(25,"button",18),r._uU(26," Dodaj "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(8),r.Q6J("formGroup",e.form),r.xp6(7),r.Q6J("ngClass",r.VKq(5,Nw,e.submitted&&e.f.name.errors)),r.xp6(1),r.Q6J("ngIf",e.submitted&&e.f.name.errors),r.xp6(4),r.Q6J("ngClass",r.VKq(7,Nw,e.submitted&&e.f.content.errors)),r.xp6(1),r.Q6J("ngIf",e.submitted&&e.f.content.errors))},directives:[So,ro,Do,ks,io,No,D,L],encapsulation:2}),t})(),Lw=(()=>{class t{constructor(){this.currentYear=""}ngOnInit(){const t=(new Date).getFullYear();this.currentYear=t.toString()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-footer"]],decls:7,vars:1,consts:[[1,"container","d-flex","flex-column","flex-sm-row","align-items-center","justify-content-center","py-2"],[1,"d-flex","text-light"],[1,"d-flex","d-none","d-sm-flex","text-light"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._uU(2,"\xae Marcin Rochowski"),r.qZA(),r.TgZ(3,"div",2),r._uU(4,",\xa0"),r.qZA(),r.TgZ(5,"div",1),r._uU(6),r.qZA(),r.qZA()),2&t&&(r.xp6(6),r.hij("2016 - ",e.currentYear,""))},encapsulation:2}),t})(),Rw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"bg-dark"],[1,"container"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r._UZ(1,"app-header"),r.qZA(),r.TgZ(2,"div",1),r.TgZ(3,"main"),r._UZ(4,"router-outlet"),r.qZA(),r._UZ(5,"app-modal"),r.qZA(),r.TgZ(6,"footer",0),r._UZ(7,"app-footer"),r.qZA())},directives:[bs,Jr,Ow,Lw],styles:["nav[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:9999}.container[_ngcontent-%COMP%]{min-height:calc(100vh - 8.5rem)}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{margin-bottom:5rem;margin-top:6rem}"]}),t})(),Fw=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:11,vars:0,consts:[["href","https://www.flickr.com/people/137860135@N05","target","_blank"],["href","https://github.com/mroch4","target","_blank"]],template:function(t,e){1&t&&(r.TgZ(0,"p"),r._uU(1," Cze\u015b\u0107, nazywam si\u0119 Marcin Rochowski i witam na moim blogu! Strona powsta\u0142a na skutek fuzji kilku moich hobby: pasji do fotografii, zawodowego zami\u0142owania do webdevelopmentu oraz zainteresowania histori\u0105. Wszystkie wsp\xf3\u0142cze\u015bne zdj\u0119cia s\u0105 mojego autorstwa, zdj\u0119cia z przesz\u0142o\u015bci pochodz\u0105 za\u015b z og\xf3lnodost\u0119pnych zasob\xf3w (internet). Je\u015bli masz jakie\u015b niesamowite zdj\u0119cia Poznania wykonane przed laty i koniecznie chcesz si\u0119 nimi podzieli\u0107 - daj mi zna\u0107 :)\n"),r.qZA(),r.TgZ(2,"ul"),r.TgZ(3,"li"),r._uU(4,"rochowski.marcin(at)gmail.com"),r.qZA(),r.TgZ(5,"li"),r.TgZ(6,"a",0),r._uU(7,"Flickr"),r.qZA(),r.qZA(),r.TgZ(8,"li"),r.TgZ(9,"a",1),r._uU(10,"Github"),r.qZA(),r.qZA(),r.qZA())},encapsulation:2}),t})();class Mw{}const Vw="*";function Bw(t,e){return{type:7,name:t,definitions:e,options:{}}}function jw(t,e=null){return{type:4,styles:e,timings:t}}function Uw(t,e=null){return{type:2,steps:t,options:e}}function qw(t){return{type:6,styles:t,offset:null}}function zw(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Zw(t){Promise.resolve(null).then(t)}class $w{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Zw(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Hw{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?Zw(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}let Ww=(()=>{class t{constructor(t,e){this._firebaseService=t,this._storageService=e,this.API_URL="/votes",this.clientVotes=this._storageService.getItem("clientVotes",new Array)}canVote(t){return!this.clientVotes.includes(t)}getAllVotes(){return this._firebaseService.get(this.API_URL)}getVoteById(t){return this.getAllVotes().pipe((0,kt.U)(e=>e.find(e=>e.id===t)))}setVotes(t,e){this._firebaseService.vote(`votes/${t}`,e),this.clientVotes=[...this.clientVotes.filter(e=>e!==t),t],this._storageService.setItem("clientVotes",this.clientVotes)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vw),r.LFG(bw))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Gw=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-loader"]],decls:4,vars:0,consts:[[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"span",2),r._uU(3,"Loading..."),r.qZA(),r.qZA(),r.qZA())},styles:[".spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}"]}),t})();function Kw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"section",11),r.TgZ(1,"img",12),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.addReply(e.reply.ts)}),r.qZA(),r.qZA()}}function Qw(t,e){1&t&&r._UZ(0,"app-reply",17),2&t&&r.Q6J("reply",e.$implicit)}function Yw(t,e){if(1&t&&(r.TgZ(0,"div",15),r.YNc(1,Qw,1,1,"app-reply",16),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Q6J("ngForOf",t)}}function Jw(t,e){if(1&t&&(r.TgZ(0,"div",13),r.YNc(1,Yw,2,1,"div",14),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("ngIf",t.length>0)}}function Xw(t,e){1&t&&r._UZ(0,"app-loader")}let tb=(()=>{class t{constructor(t,e,n){this._dialogService=t,this._replyService=e,this._userService=n,this.tsFormatted=""}addReply(t){var e=this;return(0,Od.Z)(function*(){e._userService.userInfo||(yield e._userService.auth()),e._replyService.key=t,e._dialogService.showReplyDialog()})()}ngOnInit(){this.children$=this._replyService.getRepliesByTs(this.reply.ts),this.tsFormatted=new Date(this.reply.ts).toLocaleString("pl-PL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nd),r.Y36(Tw),r.Y36(Cw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-reply"]],inputs:{reply:"reply"},decls:19,vars:12,consts:[[1,"d-flex","mb-3"],[1,"d-flex","align-items-center","justify-content-center","col-1","text-white","avatar"],[1,"d-flex","flex-column","w-100"],[1,"d-flex","flex-column","flex-sm-row"],[1,"d-flex","fw-bold"],[1,"d-flex","d-none","d-sm-flex","mx-1","text-muted"],[1,"d-flex","text-muted"],[1,"me-2",2,"word-break","break-all"],["style","margin: auto","class","pointer",4,"ngIf"],["class","mb-3",4,"ngIf","ngIfElse"],["loading",""],[1,"pointer",2,"margin","auto"],["alt","Reply","src","assets/icons/replyIcon.svg","title","Odpowiedz",3,"click"],[1,"mb-3"],["style","margin-left: 40px",4,"ngIf"],[2,"margin-left","40px"],[3,"reply",4,"ngFor","ngForOf"],[3,"reply"]],template:function(t,e){if(1&t&&(r.TgZ(0,"section"),r.TgZ(1,"section",0),r.TgZ(2,"section",1),r._uU(3),r.qZA(),r.TgZ(4,"section",2),r.TgZ(5,"section",3),r.TgZ(6,"span",4),r._uU(7),r.qZA(),r.TgZ(8,"span",5),r._uU(9,"|"),r.qZA(),r.TgZ(10,"span",6),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"section",7),r._uU(13),r.qZA(),r.qZA(),r.YNc(14,Kw,2,0,"section",8),r.qZA(),r.YNc(15,Jw,2,1,"div",9),r.ALo(16,"async"),r.YNc(17,Xw,1,0,"ng-template",null,10,r.W1O),r.qZA()),2&t){const t=r.MAs(18);r.xp6(2),r.Jzz("background-color: #",e.reply.col,""),r.xp6(1),r.hij(" ",e.reply.name.charAt(0).toUpperCase()," "),r.xp6(4),r.Oqu(e.reply.name),r.xp6(4),r.Oqu(e.tsFormatted),r.xp6(2),r.hij(" ",e.reply.text," "),r.xp6(1),r.Q6J("ngIf",e.reply.key<1e3),r.xp6(1),r.Q6J("ngIf",r.lcZ(16,10,e.children$))("ngIfElse",t)}},directives:[L,N,t,Gw],pipes:[q],styles:[".avatar[_ngcontent-%COMP%]{border-radius:50%;font-size:.85rem;height:2rem;margin-right:.5rem;margin-top:.25rem;width:2rem}.reply[_ngcontent-%COMP%]{font-size:.875rem}"]}),t})();function eb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"img",20),r.NdJ("click",function(){return r.CHM(t),r.oxw(3).rate(!0)}),r.qZA(),r.TgZ(1,"img",21),r.NdJ("click",function(){return r.CHM(t),r.oxw(3).rate(!1)}),r.qZA()}if(2&t){const t=r.oxw(3);r.Gre("mx-2 ",t.canVote?"":" inactive",""),r.xp6(1),r.Tol(t.canVote?"":" inactive")}}function nb(t,e){if(1&t&&(r.TgZ(0,"div",19),r.TgZ(1,"span"),r._uU(2),r.qZA(),r.YNc(3,eb,2,6,"ng-template",8),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(2),r.lnq("Ocena: ",t.r," (",t.v," ","g\u0142os"+(1===t.v?"":t.v>4||0===t.v?"\xf3w":"y"),")"),r.xp6(1),r.Q6J("ngIf",n.canVote)}}function ib(t,e){if(1&t&&(r.TgZ(0,"p"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Oqu(t.entry.dsc)}}function rb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"a",22),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(2).navigateToTag(e)}),r._uU(1),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function sb(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"hr"),r.YNc(2,nb,4,4,"div",16),r.ALo(3,"async"),r.YNc(4,ib,2,1,"p",15),r.TgZ(5,"div",17),r.YNc(6,rb,2,1,"a",18),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("@slideDownUp",void 0),r.xp6(2),r.Q6J("ngIf",r.lcZ(3,4,t.vote$)),r.xp6(2),r.Q6J("ngIf",t.entry.dsc),r.xp6(2),r.Q6J("ngForOf",t.entry.tags)}}function ob(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"span",23),r._uU(2),r.qZA(),r.TgZ(3,"button",24),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).toggleReplies()}),r._uU(4),r.qZA(),r.qZA()}if(2&t){const t=r.oxw().$implicit,e=r.oxw();r.xp6(2),r.AsE("",t," ","komentarz"+(1===t?"":t>4?"y":"e")," "),r.xp6(2),r.hij(" ",e.showReplies?"Ukryj":"Poka\u017c"," ")}}function ab(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,ob,5,3,"div",15),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("ngIf",t>0)}}function ub(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",25),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.addReply(e.entry.id)}),r._uU(1," Skomentuj jako pierwszy! "),r.qZA()}}function lb(t,e){1&t&&r._UZ(0,"app-reply",30),2&t&&r.Q6J("reply",e.$implicit)}function cb(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,lb,1,1,"app-reply",29),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Q6J("ngForOf",t)}}function hb(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,cb,2,1,"div",15),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("ngIf",t.length>0)}}function db(t,e){1&t&&r._UZ(0,"app-loader")}function fb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.YNc(1,hb,2,1,"div",13),r.ALo(2,"async"),r.TgZ(3,"div",26),r.TgZ(4,"button",27),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.addReply(e.entry.id)}),r._uU(5," Skomentuj "),r.qZA(),r.qZA(),r.YNc(6,db,1,0,"ng-template",null,28,r.W1O),r.qZA()}if(2&t){const t=r.MAs(7),e=r.oxw();r.xp6(1),r.Q6J("ngIf",r.lcZ(2,2,e.replies$))("ngIfElse",t)}}let pb=(()=>{class t{constructor(t,e,n,i,r){this._dialogService=t,this._replyService=e,this._router=n,this._userService=i,this._votingService=r,this.canVote=!1,this.dt2Formatted="",this.presentImg=!0,this.imgSize=this._getImageSize(window.innerWidth)}addReply(t){var e=this;return(0,Od.Z)(function*(){e._userService.userInfo||(yield e._userService.auth()),e._replyService.key=t,e._dialogService.showReplyDialog()})()}changeState(){this.presentImg=!this.presentImg}onResize(t){this.imgSize=this._getImageSize(t.target.innerWidth)}navigateToEntry(){this._router.navigate([`/wpis/${this.entry.id}`])}navigateToTag(t){this._router.routeReuseStrategy.shouldReuseRoute=()=>!1,this._router.onSameUrlNavigation="reload",this._router.navigate([`/tag/${t}`])}rate(t){this.canVote&&(this._votingService.setVotes(this.entry.id,t),this.canVote=!this.canVote)}toggleDetails(){this.showDetails=!this.showDetails}toggleReplies(){this.showReplies=!this.showReplies}ngOnInit(){this.replies$=this._replyService.getRepliesById(this.entry.id),this.repliesCount$=this._replyService.getRepliesTotalCount(this.entry.id),this.vote$=this._votingService.getVoteById(this.entry.id),this.canVote=this._votingService.canVote(this.entry.id),this.dt2Formatted=new Date(this.entry.dt2).toLocaleDateString("pl-PL",{year:"numeric",month:"long"})}_getImageSize(t){return t>576?"md":t>992?"lg":"sm"}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nd),r.Y36(Tw),r.Y36(Gr),r.Y36(Cw),r.Y36(Ww))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-card"]],hostBindings:function(t,e){1&t&&r.NdJ("resize",function(t){return e.onResize(t)},!1,r.Jf7)},inputs:{entry:"entry",showDetails:"showDetails",showReplies:"showReplies"},decls:22,vars:15,consts:[[1,"mb-5"],[1,"header"],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0","pointer",3,"click"],[1,"buttons","text-end"],["target","_blank",3,"href"],["alt","Map Icon","src","assets/icons/mapIcon.svg","title","Poka\u017c na mapie",1,"tooltip-test"],["alt","More Details","src","assets/icons/detailsIcon.svg","title","Poka\u017c szczeg\xf3\u0142y",1,"ms-3","tooltip-test",3,"click"],[3,"ngIf"],[1,"text-center","mt-3"],["loading","lazy",3,"alt","src","click"],[1,"replies"],[1,"d-flex","justify-content-end","align-items-center","mb-1"],[4,"ngIf","ngIfElse"],["button",""],[4,"ngIf"],["class","d-flex justify-content-end",4,"ngIf"],[1,"d-flex","flex-wrap"],["class","tag",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],["alt","Thumb up","src","assets/icons/upVote.svg","title","Zag\u0142osuj na tak",3,"click"],["alt","Thumb down","src","assets/icons/downVote.svg","title","Zag\u0142osuj na nie",3,"click"],[1,"tag",3,"click"],[1,"fw-bold"],[1,"btn","btn-sm","btn-outline-secondary","ms-2",2,"width","60px",3,"click"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"d-flex","justify-content-end","align-items-center"],[1,"btn","btn-sm","btn-secondary",3,"click"],["loading",""],[3,"reply",4,"ngFor","ngForOf"],[3,"reply"]],template:function(t,e){if(1&t&&(r.TgZ(0,"article",0),r.TgZ(1,"section",1),r.TgZ(2,"header",2),r.TgZ(3,"h4",3),r.NdJ("click",function(){return e.navigateToEntry()}),r._uU(4),r.qZA(),r.TgZ(5,"div",4),r.TgZ(6,"a",5),r._UZ(7,"img",6),r.qZA(),r.TgZ(8,"img",7),r.NdJ("click",function(){return e.toggleDetails()}),r.qZA(),r.qZA(),r.qZA(),r.YNc(9,sb,7,6,"ng-template",8),r.qZA(),r.TgZ(10,"figure",9),r.TgZ(11,"img",10),r.NdJ("click",function(){return e.changeState()}),r.qZA(),r.TgZ(12,"figcaption"),r.TgZ(13,"i"),r._uU(14),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"section",11),r.TgZ(16,"div",12),r.YNc(17,ab,2,1,"div",13),r.ALo(18,"async"),r.YNc(19,ub,2,0,"ng-template",null,14,r.W1O),r.qZA(),r.YNc(21,fb,8,4,"div",15),r.qZA(),r.qZA()),2&t){const t=r.MAs(20);r.xp6(4),r.AsE(" #",e.entry.id," - ",e.entry.name," "),r.xp6(2),r.hYB("href","https://www.google.com/maps/@",e.entry.lat,",",e.entry.lon,",200m/data=!3m1!1e3",r.LSH),r.xp6(3),r.Q6J("ngIf",e.showDetails),r.xp6(2),r.MGl("alt","image",e.entry.id,""),r.cQ8("src","assets/photos/",e.imgSize,"/",e.entry.id,"",e.presentImg?"a":"b",".webp",r.LSH),r.xp6(3),r.hij("Data wykonania zdj\u0119cia: ",e.presentImg?e.dt2Formatted:e.entry.dt1,""),r.xp6(3),r.Q6J("ngIf",r.lcZ(18,13,e.repliesCount$))("ngIfElse",t),r.xp6(4),r.Q6J("ngIf",e.showReplies)}},directives:[L,N,tb,Gw],pipes:[q],styles:[".buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0}.buttons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(:last-child){margin-right:1rem}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:90vh;max-width:100%;border-radius:.64rem}img[_ngcontent-%COMP%]{cursor:pointer}.tag[_ngcontent-%COMP%]{background-color:#999;border-radius:.25rem;color:#fff;cursor:pointer;margin-right:.5rem;margin-bottom:.5rem;padding:.25rem .5rem;text-decoration:none;white-space:nowrap}"],data:{animation:[Bw("slideDownUp",[zw(":enter",[qw({opacity:0}),jw(500)]),zw(":leave",[jw(500,qw({opacity:0}))])])]}}),t})();const mb=function(){return["/"]};let gb=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-notfound"]],decls:4,vars:2,consts:[[3,"routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"h4"),r._uU(1,"Strona nie istnieje - brak wpis\xf3w spe\u0142niaj\u0105cych kryteria"),r.qZA(),r.TgZ(2,"a",0),r._uU(3,"Powr\xf3t do strony g\u0142\xf3wnej"),r.qZA()),2&t&&(r.xp6(2),r.Q6J("routerLink",r.DdM(1,mb)))},directives:[Qr],encapsulation:2}),t})();function _b(t,e){1&t&&r._UZ(0,"app-notfound")}function yb(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"app-card",2),r.YNc(2,_b,1,0,"ng-template",null,3,r.W1O),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("entry",t)("showDetails",!0)("showReplies",!1)}}function vb(t,e){1&t&&r._UZ(0,"app-loader")}let wb=(()=>{class t{constructor(t,e){this._dataService=t,this._route=e;const n=this._route.snapshot.paramMap.get("id");n&&(this.entry$=this._dataService.getDataById(parseInt(n)))}ngOnInit(){window.scrollTo(0,0)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ye),r.Y36(Si))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"entry","showDetails","showReplies"],["noMathingData",""]],template:function(t,e){if(1&t&&(r.YNc(0,yb,4,3,"div",0),r.ALo(1,"async"),r.YNc(2,vb,1,0,"ng-template",null,1,r.W1O)),2&t){const t=r.MAs(3);r.Q6J("ngIf",r.lcZ(1,2,e.entry$))("ngIfElse",t)}},directives:[L,pb,gb,Gw],pipes:[q],encapsulation:2}),t})();const bb=function(){return["/tag"]};function Cb(t,e){if(1&t&&(r.TgZ(0,"div",6),r.TgZ(1,"h5",7),r._uU(2),r.qZA(),r.TgZ(3,"a",8),r._UZ(4,"img",9),r.qZA(),r.qZA()),2&t){const t=r.oxw(3);r.xp6(2),r.lnq(' Rezultaty wyszukiwania dla tagu "',t.tag.toUpperCase(),'" (',t.entriesCount," ","wynik"+(1===t.entriesCount?"":t.entriesCount<5?"i":"\xf3w"),") "),r.xp6(1),r.Q6J("routerLink",r.DdM(4,bb))}}function Tb(t,e){1&t&&r._UZ(0,"app-card",10),2&t&&r.Q6J("entry",e.$implicit)("showDetails",!1)("showReplies",!1)}function Eb(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,Cb,5,5,"div",4),r.YNc(2,Tb,1,3,"app-card",5),r.ALo(3,"async"),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("ngIf",t.tag),r.xp6(1),r.Q6J("ngForOf",r.lcZ(3,2,t.entries$))}}function Ib(t,e){1&t&&r._UZ(0,"app-notfound")}function Sb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",function(){return r.CHM(t),r.oxw(4).navigateToPage(0)}),r._uU(1),r.qZA(),r.TgZ(2,"span",13),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(4);return e.navigateToPage(e.currentPage-1)}),r._uU(3),r.qZA()}2&t&&(r.xp6(1),r.hij("","<<"," "),r.xp6(2),r.hij("","<"," "))}function xb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(4).navigateToPage(e)}),r._uU(1),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw(4);r.Tol(t===n.currentPage?"fw-bold":""),r.xp6(1),r.Oqu(t+1)}}function Ab(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(4);return e.navigateToPage(e.currentPage+1)}),r._uU(1),r.qZA(),r.TgZ(2,"span",13),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(4);return e.navigateToPage(e.pagesCount)}),r._uU(3),r.qZA()}2&t&&(r.xp6(1),r.Oqu(">"),r.xp6(2),r.Oqu(">>"))}function kb(t,e){if(1&t&&(r.YNc(0,Sb,4,2,"ng-template",3),r.YNc(1,xb,2,4,"span",12),r.YNc(2,Ab,4,2,"ng-template",3)),2&t){const t=r.oxw(3);r.Q6J("ngIf",0!==t.currentPage),r.xp6(1),r.Q6J("ngForOf",t.pagesArray),r.xp6(1),r.Q6J("ngIf",t.currentPage<t.pagesCount)}}function Db(t,e){if(1&t&&(r.TgZ(0,"div",11),r.YNc(1,kb,3,3,"ng-template",3),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("ngIf",t.pagesCount)}}function Pb(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,Eb,4,4,"div",0),r.YNc(2,Ib,1,0,"ng-template",null,2,r.W1O),r.YNc(4,Db,2,1,"ng-template",3),r.qZA()),2&t){const t=e.$implicit,n=r.MAs(3);r.xp6(1),r.Q6J("ngIf",t.length>0)("ngIfElse",n),r.xp6(3),r.Q6J("ngIf",!0)}}function Nb(t,e){1&t&&r._UZ(0,"app-loader")}let Ob=(()=>{class t{constructor(t,e){this._dataService=t,this._route=e,this.currentPage=0,this.entriesCount=0,this.pagesArray=[],this.tag=this._route.snapshot.paramMap.get("tag"),this._dataService.getDataByTagCount(this.tag).subscribe(e=>{if(this.entriesCount=e,this.pagesCount=Math.ceil(e/t.PAGE_SIZE)-1,this.pagesCount)for(let t=0;t<this.pagesCount+1;t++)this.pagesArray.push(t)}),this._reloadView()}navigateToPage(t){this.currentPage=t,this._reloadView()}_reloadView(){this.entries$=this._dataService.getViewItems(this.tag,this.currentPage),window.scrollTo(0,0)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ye),r.Y36(Si))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["noMathingData",""],[3,"ngIf"],["class","d-flex align-items-center mb-4",4,"ngIf"],[3,"entry","showDetails","showReplies",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","mb-4"],[1,"m-0"],[1,"ms-2",3,"routerLink"],["alt","Cancel Icon","src","assets/icons/cancelIcon.svg"],[3,"entry","showDetails","showReplies"],[1,"d-flex","align-items-center","justify-content-center","mb-3","pagination"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){if(1&t&&(r.YNc(0,Pb,5,3,"div",0),r.ALo(1,"async"),r.YNc(2,Nb,1,0,"ng-template",null,1,r.W1O)),2&t){const t=r.MAs(3);r.Q6J("ngIf",r.lcZ(1,2,e.entries$))("ngIfElse",t)}},directives:[L,N,Qr,pb,gb,Gw],pipes:[q],styles:[".pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;font-size:1.15rem;margin-left:.5rem;margin-right:.5rem}"]}),t})();var Lb=n(4216);function Rb(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"app-card",4),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("entry",t.entry)("showDetails",!0)("showReplies",!1)}}let Fb=(()=>{class t{constructor(t){this._dataService=t,this.entries=[]}ngAfterViewInit(){this._initMap()}_initMap(){this._dataService.getAllData().subscribe(t=>{const{latitude:e,longitude:n}=this._getMapCenter(t);this.map=Lb.map("map",{center:[e,n],zoom:13}),Lb.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:16,minZoom:12}).addTo(this.map),t.forEach(t=>Lb.marker([t.lat,t.lon],{icon:Lb.icon({iconSize:[25,41],iconAnchor:[13,41],iconUrl:"assets/marker-icon.png",popupAnchor:[-1,-10]})}).addTo(this.map).bindPopup(`<b>${t.name}</b>`).on("click",e=>{this._dataService.getDataById(t.id).subscribe(t=>this.entry=t),this.map.setView(e.target.getLatLng())}).on("popupclose",()=>{this.entry=void 0,this.map.setView([e,n])}))})}_getAverageValue(t){return t.reduce((t,e)=>t+e,0)/t.length}_getMapCenter(t){const{latitudes:e,longitudes:n}=this._reduceCoordinates(t);return{latitude:this._getMinMaxValue(e)+.001,longitude:this._getMinMaxValue(n)}}_getMediumValue(t){const e=Math.floor(t.length/2);return t.sort((t,e)=>t-e)[e]}_getMinMaxValue(t){return(Math.max(...t)+Math.min(...t))/2}_reduceCoordinates(t){return{latitudes:t.reduce((t,e)=>[...t,e.lat],[]),longitudes:t.reduce((t,e)=>[...t,e.lon],[])}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ye))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:4,vars:1,consts:[[1,"map-container"],[1,"map-frame"],["id","map"],[4,"ngIf"],[3,"entry","showDetails","showReplies"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"div",2),r.qZA(),r.qZA(),r.YNc(3,Rb,2,3,"div",3)),2&t&&(r.xp6(3),r.Q6J("ngIf",e.entry))},directives:[L,pb],styles:["#map[_ngcontent-%COMP%]{width:100%;height:50vh;margin-bottom:1rem;border-radius:.64rem}"]}),t})(),Mb=(()=>{class t{constructor(t){this.storageService=t}resetClientVotes(){this.storageService.removeItem("clientVotes")}resetUserName(){this.storageService.removeItem("userName")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(bw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-reset"]],decls:5,vars:0,consts:[[1,"d-flex","flex-column"],[1,"btn","btn-danger","col-3","mb-3",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"button",1),r.NdJ("click",function(){return e.resetClientVotes()}),r._uU(2," Reset Client Votes "),r.qZA(),r.TgZ(3,"button",1),r.NdJ("click",function(){return e.resetUserName()}),r._uU(4," Reset User Name "),r.qZA(),r.qZA())},encapsulation:2}),t})();const Vb=function(t){return["/tag",t]};function Bb(t,e){if(1&t&&(r.TgZ(0,"ul"),r.TgZ(1,"li"),r.TgZ(2,"a",3),r._uU(3),r.ALo(4,"titlecase"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("routerLink",r.VKq(5,Vb,t.key)),r.xp6(1),r.AsE("",r.lcZ(4,3,t.key)," (",t.value,") ")}}function jb(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h4",1),r._uU(2,"Alfabetyczna lista tag\xf3w:"),r.qZA(),r.YNc(3,Bb,5,7,"ul",2),r.ALo(4,"keyvalue"),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.Q6J("ngForOf",r.lcZ(4,1,t.tagsMap))}}const Ub=[{path:"",component:Ob},{path:"about",component:Fw},{path:"map",component:Fb},{path:"reset",component:Mb},{path:"tag",component:(()=>{class t{constructor(t){this._dataService=t}ngOnInit(){this._dataService.getAllData().subscribe(t=>{let e=[];t.map(t=>{t.tags.map(t=>e.push(t))}),this.tagsMap=e.sort((t,e)=>t.localeCompare(e)).reduce((t,e)=>t.set(e,(t.get(e)||0)+1),new Map)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ye))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-tags"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mb-3"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&r.YNc(0,jb,5,3,"div",0),2&t&&r.Q6J("ngIf",e.tagsMap)},directives:[L,N,Qr],pipes:[$,Z],styles:["a[_ngcontent-%COMP%]{color:#000!important}"]}),t})()},{path:"tag/:tag",component:Ob},{path:"wpis/:id",component:wb},{path:"**",component:gb}];let qb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[us.forRoot(Ub)],us]}),t})();function zb(){return"undefined"!=typeof window&&void 0!==window.document}function Zb(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function $b(t){switch(t.length){case 0:return new $w;case 1:return t[0];default:return new Hw(t)}}function Hb(t,e,n,i,r={},s={}){const o=[],a=[];let u=-1,l=null;if(i.forEach(t=>{const n=t.offset,i=n==u,c=i&&l||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,o),a){case"!":a=r[n];break;case Vw:a=s[n];break;default:a=e.normalizeStyleValue(n,i,a,o)}c[i]=a}),i||a.push(c),l=c,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function Wb(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&Gb(n,"start",t)));break;case"done":t.onDone(()=>i(n&&Gb(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&Gb(n,"destroy",t)))}}function Gb(t,e,n){const i=n.totalTime,r=Kb(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),s=t._data;return null!=s&&(r._data=s),r}function Kb(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Qb(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function Yb(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Jb=(t,e)=>!1,Xb=(t,e)=>!1,tC=(t,e,n)=>[];const eC=Zb();(eC||"undefined"!=typeof Element)&&(Jb=zb()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Xb=(()=>{if(eC||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Xb}})(),tC=(t,e,n)=>{let i=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)i.push(n[t])}else{const n=t.querySelector(e);n&&i.push(n)}return i});let nC=null,iC=!1;function rC(t){nC||(nC=("undefined"!=typeof document?document.body:null)||{},iC=!!nC.style&&"WebkitAppearance"in nC.style);let e=!0;return nC.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in nC.style,!e&&iC&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in nC.style)),e}const sC=Xb,oC=Jb,aC=tC;function uC(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let lC=(()=>{class t{validateStyleProperty(t){return rC(t)}matchesElement(t,e){return sC(t,e)}containsElement(t,e){return oC(t,e)}query(t,e,n){return aC(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,s=[],o){return new $w(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),cC=(()=>{class t{}return t.NOOP=new lC,t})();const hC="ng-enter",dC="ng-leave",fC="ng-trigger",pC=".ng-trigger",mC="ng-animating",gC=".ng-animating";function _C(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:yC(parseFloat(e[1]),e[2])}function yC(t,e){return"s"===e?1e3*t:t}function vC(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=yC(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=yC(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=t;if(!n){let n=!1,s=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:s}}(t,e,n)}function wC(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function bC(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else wC(t,n);return n}function CC(t,e,n){return n?e+":"+n+";":""}function TC(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=CC(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=CC(0,OC(n),t.style[n]));t.setAttribute("style",e)}function EC(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=NC(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),Zb()&&TC(t))}function IC(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=NC(e);t.style[n]=""}),Zb()&&TC(t))}function SC(t){return Array.isArray(t)?1==t.length?t[0]:Uw(t):t}const xC=new RegExp("{{\\s*(.+?)\\s*}}","g");function AC(t){let e=[];if("string"==typeof t){let n;for(;n=xC.exec(t);)e.push(n[1]);xC.lastIndex=0}return e}function kC(t,e,n){const i=t.toString(),r=i.replace(xC,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function DC(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const PC=/-+([a-z0-9])/g;function NC(t){return t.replace(PC,(...t)=>t[1].toUpperCase())}function OC(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function LC(t,e){return 0===t||0===e}function RC(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var r=1;r<e.length;r++){let n=e[r];o.forEach(function(e){n[e]=MC(t,e)})}}return e}function FC(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function MC(t,e){return window.getComputedStyle(t)[e]}function VC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(UC(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(UC(o,r))}(t,n,e)):n.push(t),n}const BC=new Set(["true","1"]),jC=new Set(["false","0"]);function UC(t,e){const n=BC.has(t)||jC.has(t),i=BC.has(e)||jC.has(e);return(r,s)=>{let o="*"==t||t==r,a="*"==e||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?BC.has(t):jC.has(t)),!a&&i&&"boolean"==typeof s&&(a=s?BC.has(e):jC.has(e)),o&&a}}const qC=new RegExp("s*:selfs*,?","g");function zC(t,e,n){return new ZC(t).build(e,n)}class ZC{constructor(t){this._driver=t}build(t,e){const n=new $C(e);return this._resetContextStyleTimingState(n),FC(this,SC(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,s.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(t=>{if(HC(t)){const e=t;Object.keys(e).forEach(t=>{AC(e[t]).forEach(t=>{s.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=DC(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=FC(this,SC(t.animation),e);return{type:1,matchers:VC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:WC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>FC(this,t,e)),options:WC(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=FC(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:WC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return GC(vC(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=GC(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||vC(i,e),GC(n.duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let i,r=t.styles?t.styles:qw({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,s=!1;if(!r){s=!0;const t={};n.easing&&(t.easing=n.easing),r=qw(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,e);o.isEmptyStep=s,i=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Vw?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(HC(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=AC(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(HC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(HC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=u&&(i++,l=n.offset=u),o=o||l<0||l>1,s=s||l<a,a=l,r.push(l),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let c=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(c=1/(l-1));const h=l-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,i)=>{const s=c>0?i==h?1:c*i:r[i],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:FC(this,SC(t.animation),e),options:WC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:WC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:WC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(qC,"")),t=t.replace(/@\*/g,pC).replace(/@\w+/g,t=>pC+"-"+t.substr(1)).replace(/:animating/g,gC),[t,e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,Qb(e.collectedStyles,e.currentQuerySelector,{});const o=FC(this,SC(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:WC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:vC(t.timings,e.errors,!0);return{type:12,animation:FC(this,SC(t.animation),e),timings:n,options:null}}}class $C{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function HC(t){return!Array.isArray(t)&&"object"==typeof t}function WC(t){return t?(t=wC(t)).params&&(t.params=function(t){return t?wC(t):null}(t.params)):t={},t}function GC(t,e,n){return{duration:t,delay:e,easing:n}}function KC(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class QC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const YC=new RegExp(":enter","g"),JC=new RegExp(":leave","g");function XC(t,e,n,i,r,s={},o={},a,u,l=[]){return(new tT).buildKeyframes(t,e,n,i,r,s,o,a,u,l)}class tT{buildKeyframes(t,e,n,i,r,s,o,a,u,l=[]){u=u||new QC;const c=new nT(t,e,u,i,r,l,[]);c.options=a,c.currentTimeline.setStyles([s],null,c.errors,a),FC(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[KC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?_C(n.duration):null,s=null!=n.delay?_C(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),FC(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=eT);const t=_C(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>FC(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?_C(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);r&&o.delayNextStep(r),FC(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return vC(e.params?kC(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*r),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?_C(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=eT);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{e.currentQueryIndex=i;const o=e.createSubContext(t.options,n);r&&o.delayNextStep(r),n===e.element&&(a=o.currentTimeline),FC(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,s=Math.abs(r.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const l=u.currentTime;FC(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-l+(i.startTime-n.currentTimeline.startTime)}}const eT={};class nT{constructor(t,e,n,i,r,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new iT(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=_C(n.duration)),null!=n.delay&&(i.delay=_C(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{(!e||!t.hasOwnProperty(n))&&(t[n]=kC(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new nT(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=eT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new rT(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,s){let o=[];if(i&&o.push(this.element),t.length>0){t=(t=t.replace(YC,"."+this._enterClassName)).replace(JC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return!r&&0==o.length&&s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class iT{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new iT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Vw,this._currentKeyframe[t]=Vw}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},s=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]=Vw})):bC(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=kC(s[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Vw),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=bC(r,!0);Object.keys(o).forEach(n=>{const i=o[n];"!"==i?t.add(n):i==Vw&&e.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=t.size?DC(t.values()):[],s=e.size?DC(e.values()):[];if(n){const t=i[0],e=wC(t);t.offset=0,e.offset=1,i=[t,e]}return KC(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class rT extends iT{constructor(t,e,n,i,r,s,o=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],s=n+e,o=e/s,a=bC(t[0],!1);a.offset=0,r.push(a);const u=bC(t[0],!1);u.offset=sT(o),r.push(u);const l=t.length-1;for(let i=1;i<=l;i++){let o=bC(t[i],!1);o.offset=sT((e+o.offset*n)/s),r.push(o)}n=s,e=0,i="",t=r}return KC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function sT(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class oT{}class aT extends oT{normalizePropertyName(t,e){return NC(t)}normalizeStyleValue(t,e,n,i){let r="";const s=n.toString().trim();if(uT[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+r}}const uT=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function lT(t,e,n,i,r,s,o,a,u,l,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:d}}const cT={};class hT{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],s=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):s}build(t,e,n,i,r,s,o,a,u,l){const c=[],h=this.ast.options&&this.ast.options.params||cT,d=this.buildStyles(n,o&&o.params||cT,c),f=a&&a.params||cT,p=this.buildStyles(i,f,c),m=new Set,g=new Map,_=new Map,y="void"===i,v={params:Object.assign(Object.assign({},h),f)},w=l?[]:XC(t,e,this.ast.animation,r,s,d,p,v,u,c);let b=0;if(w.forEach(t=>{b=Math.max(t.duration+t.delay,b)}),c.length)return lT(e,this._triggerName,n,i,y,d,p,[],[],g,_,b,c);w.forEach(t=>{const n=t.element,i=Qb(g,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=Qb(_,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&m.add(n)});const C=DC(m.values());return lT(e,this._triggerName,n,i,y,d,p,w,C,g,_,b)}}class dT{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},i=wC(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let s=r[t];s.length>1&&(s=kC(s,i,e));const o=this.normalizer.normalizePropertyName(t,e);s=this.normalizer.normalizeStyleValue(t,o,s,e),n[o]=s})}}),n}}class fT{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new dT(t.style,t.options&&t.options.params||{},n)}),pT(this.states,"true","1"),pT(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new hT(t,e,this.states))}),this.fallbackTransition=function(t,e,n){return new hT(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},e)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function pT(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const mT=new QC;class gT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=zC(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=Hb(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let s;const o=new Map;if(r?(s=XC(this._driver,e,r,hC,dC,{},{},n,mT,i),s.forEach(t=>{const e=Qb(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Vw)})});const a=$b(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=Kb(e,"","","");return Wb(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const _T="ng-animate-queued",yT="ng-animate-disabled",vT=".ng-animate-disabled",wT=[],bT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},CT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},TT="__ng_removed";class ET{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){const e=wC(t);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const IT="void",ST=new ET(IT);class xT{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,FT(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(t){return"start"==t||"done"==t}(n))throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);const r=Qb(this._elementListeners,t,[]),s={name:e,phase:n,callback:i};r.push(s);const o=Qb(this._engine.statesByElement,t,{});return o.hasOwnProperty(e)||(FT(t,fC),FT(t,fC+"-"+e),o[e]=ST),()=>{this._engine.afterFlush(()=>{const t=r.indexOf(s);t>=0&&r.splice(t,1),this._triggers[e]||delete o[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),s=new kT(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(FT(t,fC),FT(t,fC+"-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new ET(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=ST),u.value!==IT&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,u.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{IC(t,n),EC(t,i)})}return}const l=Qb(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=r.matchTransition(a.value,u.value,t,u.params),h=!1;if(!c){if(!i)return;c=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(FT(t,_T),s.onStart(()=>{MT(t,_T)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),l.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,pC,!0);n.forEach(t=>{if(t[TT])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const s=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,IT,i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&$b(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const i=new Set;e.forEach(e=>{const r=e.name;if(i.has(r))return;i.add(r);const s=this._triggers[r].fallbackTransition,o=n[r]||ST,a=new ET(IT),u=new kT(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t[TT];(!i||i===bT)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){FT(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(e=>{if(e.name==n.triggerName){const i=Kb(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,Wb(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class AT{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new xT(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(DT(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!DT(e))return;const r=e[TT];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),FT(t,yT)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),MT(t,yT))}removeNode(t,e,n,i){if(DT(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e[TT]={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return DT(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,pC,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,gC,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return $b(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[TT];if(e&&e.setForRemoval){if(t[TT]=bT,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,vT)&&this.markElementAsDisabled(t,!1),this.driver.query(t,vT,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)FT(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?$b(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new QC,i=[],r=new Map,s=[],o=new Map,a=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)l.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=LT(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=hC+p++;f.set(e,n),t.forEach(t=>FT(t,n))});const m=[],g=new Set,_=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const t=this.collectedLeaveElements[D],e=t[TT];e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):_.add(t))}const y=new Map,v=LT(h,Array.from(g));v.forEach((t,e)=>{const n=dC+p++;y.set(e,n),t.forEach(t=>FT(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>MT(t,n))}),v.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>MT(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const w=[],b=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(w.push(e),this.collectedEnterElements.length){const t=r[TT];if(t&&t.setForMove)return void e.destroy()}const l=!c||!this.driver.containsElement(c,r),h=y.get(r),d=f.get(r),p=this._buildInstruction(t,n,d,h,l);if(p.errors&&p.errors.length)b.push(p);else{if(l)return e.onStart(()=>IC(r,p.fromStyles)),e.onDestroy(()=>EC(r,p.toStyles)),void i.push(e);if(t.isFallbackTransition)return e.onStart(()=>IC(r,p.fromStyles)),e.onDestroy(()=>EC(r,p.toStyles)),void i.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,p.timelines),s.push({instruction:p,player:e,element:r}),p.queriedElements.forEach(t=>Qb(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=u.get(e);i||u.set(e,i=new Set),n.forEach(t=>i.add(t))})}});if(b.length){const t=[];b.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,T=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(T.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Qb(C,e,[]).push(t),t.destroy()})});const E=m.filter(t=>jT(t,a,u)),I=new Map;OT(I,this.driver,_,u,Vw).forEach(t=>{jT(t,a,u)&&E.push(t)});const S=new Map;d.forEach((t,e)=>{OT(S,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=I.get(t),n=S.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const x=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(l.has(e))return s.onDestroy(()=>EC(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let t=k;if(T.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=T.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>T.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,C,r,S,I);if(s.setRealPlayer(n),t===k)x.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=$b(e)),i.push(s)}}else IC(e,o.fromStyles),s.onDestroy(()=>EC(e,o.toStyles)),A.push(s),l.has(e)&&i.push(s)}),A.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=$b(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let D=0;D<m.length;D++){const t=m[D],e=t[TT];if(MT(t,dC),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,gC,!0);for(let t=0;t<i.length;t++){let e=o.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?VT(this,t,i):this.processLeaveNode(t)}return m.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const i=e[TT];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==IT;e.forEach(e=>{e.queued||!t&&e.triggerName!=i||s.push(e)})}}return(n||i)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==i,u=Qb(n,t,[]);this._getPreviousPlayers(t,a,r,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}IC(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,s){const o=e.triggerName,a=e.element,u=[],l=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h[TT];if(d&&d.removedBeforeQueried)return new $w(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return BT(t,e),e}((n.get(h)||wT).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=r.get(h),g=s.get(h),_=Hb(0,this._normalizer,0,e.keyframes,m,g),y=this._buildPlayer(e,_,p);if(e.subTimeline&&i&&c.add(h),f){const e=new kT(t,o,h);e.setRealPlayer(y),u.push(e)}return y});u.forEach(t=>{Qb(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>FT(t,mC));const d=$b(h);return d.onDestroy(()=>{l.forEach(t=>MT(t,mC)),EC(a,e.toStyles)}),c.forEach(t=>{Qb(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new $w(t.duration,t.delay)}}class kT{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new $w,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Wb(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Qb(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function DT(t){return t&&1===t.nodeType}function PT(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function OT(t,e,n,i,r){const s=[];n.forEach(t=>s.push(PT(t)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(i,t,r);(!n||0==n.length)&&(i[TT]=CT,o.push(i))}),t.set(i,s)});let a=0;return n.forEach(t=>PT(t,s[a++])),o}function LT(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;function s(t){if(!t)return 1;let e=r.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:i.has(o)?1:s(o),r.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}const RT="$$classes";function FT(t,e){if(t.classList)t.classList.add(e);else{let n=t[RT];n||(n=t[RT]={}),n[e]=!0}}function MT(t,e){if(t.classList)t.classList.remove(e);else{let n=t[RT];n&&delete n[e]}}function VT(t,e,n){$b(n).onDone(()=>t.processLeaveNode(e))}function BT(t,e){for(let n=0;n<t.length;n++){const i=t[n];i instanceof Hw?BT(i.players,e):e.push(i)}}function jT(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class UT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new AT(t,e,n),this._timelineEngine=new gT(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const s=t+"-"+i;let o=this._triggerCache[s];if(!o){const t=[],e=zC(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new fT(t,e,n)}(i,e,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,i,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=Yb(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=Yb(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function qT(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=ZT(e[0]),e.length>1&&(i=ZT(e[e.length-1]))):e&&(n=ZT(e)),n||i?new zT(t,n,i):null}let zT=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&EC(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(EC(this._element,this._initialStyles),this._endStyles&&(EC(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(IC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(IC(this._element,this._endStyles),this._endStyles=null),EC(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function ZT(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];$T(r)&&(e=e||{},e[r]=t[r])}return e}function $T(t){return"display"===t||"position"===t}const HT="animation",WT="animationend";class GT{constructor(t,e,n,i,r,s,o){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){(function(t,e){const n=tE(t,"").trim();let i=0;n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++;return n}(n)+1,e=`${n}, ${e}`),XT(t,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),JT(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){KT(this._element,this._name,"paused")}resume(){KT(this._element,this._name,"running")}setPosition(t){const e=QT(this._element,this._name);this._position=t*this._duration,XT(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),JT(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=tE(t,"").split(","),i=YT(n,e);i>=0&&(n.splice(i,1),XT(t,"",n.join(",")))}(this._element,this._name))}}function KT(t,e,n){XT(t,"PlayState",n,QT(t,e))}function QT(t,e){const n=tE(t,"");return n.indexOf(",")>0?YT(n.split(","),e):YT([n],e)}function YT(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function JT(t,e,n){n?t.removeEventListener(WT,e):t.addEventListener(WT,e)}function XT(t,e,n,i){const r=HT+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function tE(t,e){return t.style[HT+e]||""}class eE{constructor(t,e,n,i,r,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new GT(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:MC(this.element,n))})}this.currentSnapshot=t}}class nE extends $w{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=uC(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class iE{constructor(){this._count=0}validateStyleProperty(t){return rC(t)}matchesElement(t,e){return sC(t,e)}containsElement(t,e){return oC(t,e)}query(t,e,n){return aC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>uC(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.textContent=i,s}animate(t,e,n,i,r,s=[],o){const a=s.filter(t=>t instanceof eE),u={};LC(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"==n||"easing"==n||(e[n]=t[n])})}),e}(e=RC(t,e,u));if(0==n)return new nE(t,l);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=qT(t,e),f=new eE(t,e,c,n,i,r,l,d);return f.onDestroy(()=>function(t){t.parentNode.removeChild(t)}(h)),f}}class rE{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:MC(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class sE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(oE().toString()),this._cssKeyframesDriver=new iE}validateStyleProperty(t){return rC(t)}matchesElement(t,e){return sC(t,e)}containsElement(t,e){return oC(t,e)}query(t,e,n){return aC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const u={},l=s.filter(t=>t instanceof rE);LC(n,i)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=qT(t,e=RC(t,e=e.map(t=>bC(t,!1)),u));return new rE(t,e,a,c)}}function oE(){return zb()&&Element.prototype.animate||{}}let aE=(()=>{class t extends Mw{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Uw(t):t;return cE(this._renderer,null,e,"register",[n]),new uE(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(a))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class uE extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new lE(this._id,t,e||{},this._renderer)}}class lE{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return cE(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function cE(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const hE="@.disabled";let dE=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new fE("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(s),new pE(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(UT),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class fE{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,i=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==hE?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class pE extends fE{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==hE?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),s="";return"@"!=r.charAt(0)&&([r,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let mE=(()=>{class t extends UT{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(cC),r.LFG(oT))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const gE=new r.OlP("AnimationModuleType"),_E=[{provide:Mw,useClass:aE},{provide:oT,useFactory:function(){return new aT}},{provide:UT,useClass:mE},{provide:r.FYo,useFactory:function(t,e,n){return new dE(t,e,n)},deps:[gt,UT,r.R0b]}],yE=[{provide:cC,useFactory:function(){return"function"==typeof oE()?new sE:new iE}},{provide:gE,useValue:"BrowserAnimations"},..._E],vE=[{provide:cC,useClass:lC},{provide:gE,useValue:"NoopAnimations"},..._E];let wE=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?vE:yE}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:yE,imports:[At]}),t})();function bE(){return t=>t.lift(new CE)}class CE{call(t,e){return e.subscribe(new TE(t))}}class TE extends Lt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var EE,IE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},SE={},xE=xE||{},AE=IE||self;function kE(){}function DE(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function PE(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var NE="closure_uid_"+(1e9*Math.random()>>>0),OE=0;function LE(t,e,n){return t.call.apply(t.bind,arguments)}function RE(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function FE(t,e,n){return(FE=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LE:RE).apply(null,arguments)}function ME(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function VE(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function BE(){this.s=this.s,this.o=this.o}BE.prototype.s=!1,BE.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,NE)&&t[NE]||(t[NE]=++OE)}(this)},BE.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function UE(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function qE(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(DE(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function zE(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zE.prototype.h=function(){this.defaultPrevented=!0};var ZE=function(){if(!AE.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{AE.addEventListener("test",kE,e),AE.removeEventListener("test",kE,e)}catch(n){}return t}();function $E(t){return/^[\s\xa0]*$/.test(t)}var HE=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function WE(t,e){return t<e?-1:t>e?1:0}function GE(){var t=AE.navigator;return t&&(t=t.userAgent)?t:""}function KE(t){return-1!=GE().indexOf(t)}function QE(t){return QE[" "](t),t}QE[" "]=kE;var YE,JE=KE("Opera"),XE=KE("Trident")||KE("MSIE"),tI=KE("Edge"),eI=tI||XE,nI=KE("Gecko")&&!(-1!=GE().toLowerCase().indexOf("webkit")&&!KE("Edge"))&&!(KE("Trident")||KE("MSIE"))&&!KE("Edge"),iI=-1!=GE().toLowerCase().indexOf("webkit")&&!KE("Edge");function rI(){var t=AE.document;return t?t.documentMode:void 0}t:{var sI="",oI=function(){var t=GE();return nI?/rv:([^\);]+)(\)|;)/.exec(t):tI?/Edge\/([\d\.]+)/.exec(t):XE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):iI?/WebKit\/(\S+)/.exec(t):JE?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(oI&&(sI=oI?oI[1]:""),XE){var aI=rI();if(null!=aI&&aI>parseFloat(sI)){YE=String(aI);break t}}YE=sI}var uI={};function lI(){return t=uI,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=HE(String(YE)).split("."),n=HE("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=WE(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||WE(0==r[2].length,0==s[2].length)||WE(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}();var t}var cI=AE.document&&XE&&(rI()||parseInt(YE,10))||void 0;function hI(t,e){if(zE.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(nI){t:{try{QE(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:dI[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&hI.X.h.call(this)}}VE(hI,zE);var dI={2:"touch",3:"pen",4:"mouse"};hI.prototype.h=function(){hI.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fI="closure_listenable_"+(1e6*Math.random()|0),pI=0;function mI(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++pI,this.ba=this.ea=!1}function gI(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function _I(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function yI(t){const e={};for(const n in t)e[n]=t[n];return e}const vI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wI(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<vI.length;e++)n=vI[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function bI(t){this.src=t,this.g={},this.h=0}function CI(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=jE(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(gI(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function TI(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}bI.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=TI(t,e,i,r);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new mI(e,this.src,s,!!i,r)).ea=n,t.push(e)),e};var EI="closure_lm_"+(1e6*Math.random()|0),II={};function SI(t,e,n,i,r){if(i&&i.once)return AI(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)SI(t,e[s],n,i,r);return null}return n=RI(n),t&&t[fI]?t.N(e,n,PE(i)?!!i.capture:!!i,r):xI(t,e,n,!1,i,r)}function xI(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=PE(r)?!!r.capture:!!r,a=OI(t);if(a||(t[EI]=a=new bI(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=NI;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)ZE||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(PI(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function AI(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)AI(t,e[s],n,i,r);return null}return n=RI(n),t&&t[fI]?t.O(e,n,PE(i)?!!i.capture:!!i,r):xI(t,e,n,!0,i,r)}function kI(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)kI(t,e[s],n,i,r);else i=PE(i)?!!i.capture:!!i,n=RI(n),t&&t[fI]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=TI(s=t.g[e],n,i,r))&&(gI(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=OI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=TI(e,n,i,r)),(n=-1<t?e[t]:null)&&DI(n))}function DI(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[fI])CI(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(PI(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=OI(e))?(CI(n,t),0==n.h&&(n.src=null,e[EI]=null)):gI(t)}}}function PI(t){return t in II?II[t]:II[t]="on"+t}function NI(t,e){if(t.ba)t=!0;else{e=new hI(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&DI(t),t=n.call(i,e)}return t}function OI(t){return(t=t[EI])instanceof bI?t:null}var LI="__closure_events_fn_"+(1e9*Math.random()>>>0);function RI(t){return"function"==typeof t?t:(t[LI]||(t[LI]=function(e){return t.handleEvent(e)}),t[LI])}function FI(){BE.call(this),this.i=new bI(this),this.P=this,this.I=null}function MI(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new zE(e,t);else if(e instanceof zE)e.target=e.target||t;else{var r=e;wI(e=new zE(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=VI(o,i,!0,e)&&r}if(r=VI(o=e.g=t,i,!0,e)&&r,r=VI(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=VI(o=e.g=n[s],i,!1,e)&&r}function VI(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&CI(t.i,o),r=!1!==a.call(u,i)&&r}}return r&&!i.defaultPrevented}VE(FI,BE),FI.prototype[fI]=!0,FI.prototype.removeEventListener=function(t,e,n,i){kI(this,t,e,n,i)},FI.prototype.M=function(){if(FI.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)gI(n[i]);delete e.g[t],e.h--}}this.I=null},FI.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},FI.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var BI=AE.JSON.stringify;function jI(){var t=WI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var UI,qI=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new zI,t=>t.reset());class zI{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ZI(t){AE.setTimeout(()=>{throw t},0)}function $I(t,e){UI||function(){var t=AE.Promise.resolve(void 0);UI=function(){t.then(GI)}}(),HI||(UI(),HI=!0),WI.add(t,e)}var HI=!1,WI=new class{constructor(){this.h=this.g=null}add(t,e){const n=qI.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function GI(){for(var t;t=jI();){try{t.h.call(t.g)}catch(n){ZI(n)}var e=qI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}HI=!1}function KI(t,e){FI.call(this),this.h=t||1,this.g=e||AE,this.j=FE(this.lb,this),this.l=Date.now()}function QI(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function YI(t,e,n){if("function"==typeof t)n&&(t=FE(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=FE(t.handleEvent,t)}return 2147483647<Number(e)?-1:AE.setTimeout(t,e||0)}function JI(t){t.g=YI(()=>{t.g=null,t.i&&(t.i=!1,JI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}VE(KI,FI),(EE=KI.prototype).ca=!1,EE.R=null,EE.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),MI(this,"tick"),this.ca&&(QI(this),this.start()))}},EE.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},EE.M=function(){KI.X.M.call(this),QI(this),delete this.g};class XI extends BE{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:JI(this)}M(){super.M(),this.g&&(AE.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tS(t){BE.call(this),this.h=t,this.g={}}VE(tS,BE);var eS=[];function nS(t,e,n,i){Array.isArray(n)||(n&&(eS[0]=n.toString()),n=eS);for(var r=0;r<n.length;r++){var s=SI(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function iS(t){_I(t.g,function(t,e){this.g.hasOwnProperty(e)&&DI(t)},t),t.g={}}function rS(){this.g=!0}function sS(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return BI(n)}catch(a){return e}}(t,n)+(i?" "+i:"")})}tS.prototype.M=function(){tS.X.M.call(this),iS(this)},tS.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rS.prototype.Aa=function(){this.g=!1},rS.prototype.info=function(){};var oS={},aS=null;function uS(){return aS=aS||new FI}function lS(t){zE.call(this,oS.Pa,t)}function cS(t){const e=uS();MI(e,new lS(e))}function hS(t,e){zE.call(this,oS.STAT_EVENT,t),this.stat=e}function dS(t){const e=uS();MI(e,new hS(e,t))}function fS(t,e){zE.call(this,oS.Qa,t),this.size=e}function pS(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return AE.setTimeout(function(){t()},e)}oS.Pa="serverreachability",VE(lS,zE),oS.STAT_EVENT="statevent",VE(hS,zE),oS.Qa="timingevent",VE(fS,zE);var mS={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gS={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _S(){}function yS(){}_S.prototype.h=null;var vS,wS={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function bS(){zE.call(this,"d")}function CS(){zE.call(this,"c")}function TS(){}function ES(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new tS(this),this.O=SS,this.T=new KI(t=eI?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new IS}function IS(){this.i=null,this.g="",this.h=!1}VE(bS,zE),VE(CS,zE),VE(TS,_S),TS.prototype.g=function(){return new XMLHttpRequest},TS.prototype.i=function(){return{}},vS=new TS;var SS=45e3,xS={},AS={};function kS(t,e,n){t.K=1,t.v=GS(zS(e)),t.s=n,t.P=!0,DS(t,null)}function DS(t,e){t.F=Date.now(),LS(t),t.A=zS(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),ax(n.i,"t",i),t.C=0,n=t.l.H,t.h=new IS,t.g=oA(t.l,n?e:null,!t.s),0<t.N&&(t.L=new XI(FE(t.La,t,t.g),t.N)),nS(t.S,t.g,"readystatechange",t.ib),e=t.H?yI(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),cS(),function(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.U,t.s)}function PS(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Da}function NS(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=OS(t,n),i==AS){4==e&&(t.o=4,dS(14),r=!1),sS(t.j,t.m,null,"[Incomplete Response]");break}if(i==xS){t.o=4,dS(15),sS(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}sS(t.j,t.m,i,null),BS(t,i)}PS(t)&&i!=AS&&i!=xS&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,dS(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jx(e),e.K=!0,dS(11))):(sS(t.j,t.m,n,"[Invalid Chunked Response]"),VS(t),MS(t))}function OS(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?AS:(n=Number(e.substring(n,i)),isNaN(n)?xS:(i+=1)+n>e.length?AS:(e=e.substr(i,n),t.C=i+n,e))}function LS(t){t.V=Date.now()+t.O,RS(t,t.O)}function RS(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=pS(FE(t.gb,t),e)}function FS(t){t.B&&(AE.clearTimeout(t.B),t.B=null)}function MS(t){0==t.l.G||t.I||eA(t.l,t)}function VS(t){FS(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,QI(t.T),iS(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function BS(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||fx(n.h,t)))if(!t.J&&fx(n.h,t)&&3==n.G){try{var i=n.Fa.g.parse(e)}catch(l){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])t:if(n.u)n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&0==n.A&&!n.v&&(n.v=pS(FE(n.cb,n),6e3));else{if(n.g){if(!(n.g.F+3e3<t.F))break t;tA(n),Zx(n)}Yx(n),dS(18)}if(1>=dx(n.h)&&n.ja){try{n.ja()}catch(l){}n.ja=void 0}}else iA(n,11)}else if((t.J||n.g==t)&&tA(n),!$E(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.I=l[1],n.ka=l[2];const e=l[3];null!=e&&(n.ma=e,n.j.info("VER="+n.ma));const r=l[4];null!=r&&(n.Ca=r,n.j.info("SVER="+n.Ca));const c=l[5];null!=c&&"number"==typeof c&&0<c&&(n.J=i=1.5*c,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(px(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.za=t,WS(i.F,i.D,t))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((i=n).sa=sA(i,i.H?i.ka:null,i.V),o.J){mx(i.h,o);var a=o,u=i.J;u&&a.setTimeout(u),a.B&&(FS(a),LS(a)),i.g=o}else Qx(i);0<n.i.length&&Hx(n)}else"stop"!=l[0]&&"close"!=l[0]||iA(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?iA(n,7):zx(n):"noop"!=l[0]&&n.l&&n.l.wa(l),n.A=0)}cS()}catch(l){}}function jS(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(DE(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(DE(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(DE(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(EE=ES.prototype).setTimeout=function(t){this.O=t},EE.ib=function(t){t=t.target;const e=this.L;e&&3==Mx(t)?e.l():this.La(t)},EE.La=function(t){try{if(t==this.g)t:{const c=Mx(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>c)&&(3!=c||eI||this.g&&(this.h.h||this.g.fa()||Vx(this.g)))){this.I||4!=c||7==e||cS(),FS(this);var n=this.g.aa();this.Y=n;e:if(PS(this)){var i=Vx(this.g);t="";var r=i.length,s=4==Mx(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){VS(this),MS(this);var o="";break e}this.h.i=new AE.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){e:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$E(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,dS(12),VS(this),MS(this);break t}sS(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,BS(this,n)}this.P?(NS(this,c,o),eI&&this.i&&3==c&&(nS(this.S,this.T,"tick",this.hb),this.T.start())):(sS(this.j,this.m,o,null),BS(this,o)),4==c&&VS(this),this.i&&!this.I&&(4==c?eA(this.l,this):(this.i=!1,LS(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,dS(12)):(this.o=0,dS(13)),VS(this),MS(this)}}}catch(c){}},EE.hb=function(){if(this.g){var t=Mx(this.g),e=this.g.fa();this.C<e.length&&(FS(this),NS(this,t,e),this.i&&4!=t&&LS(this))}},EE.cancel=function(){this.I=!0,VS(this)},EE.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cS(),dS(17)),VS(this),this.o=2,MS(this)):RS(this,this.V-t)};var US=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qS(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof qS){this.h=void 0!==e?e:t.h,ZS(this,t.j),this.s=t.s,this.g=t.g,$S(this,t.m),this.l=t.l,e=t.i;var n=new ix;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),HS(this,n),this.o=t.o}else t&&(n=String(t).match(US))?(this.h=!!e,ZS(this,n[1]||"",!0),this.s=KS(n[2]||""),this.g=KS(n[3]||"",!0),$S(this,n[4]),this.l=KS(n[5]||"",!0),HS(this,n[6]||"",!0),this.o=KS(n[7]||"")):(this.h=!!e,this.i=new ix(null,this.h))}function zS(t){return new qS(t)}function ZS(t,e,n){t.j=n?KS(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $S(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function HS(t,e,n){e instanceof ix?(t.i=e,function(t,e){e&&!t.j&&(rx(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(sx(this,e),ax(this,n,t))},t)),t.j=e}(t.i,t.h)):(n||(e=QS(e,ex)),t.i=new ix(e,t.h))}function WS(t,e,n){t.i.set(e,n)}function GS(t){return WS(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function KS(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function QS(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,YS),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function YS(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}qS.prototype.toString=function(){var t=[],e=this.j;e&&t.push(QS(e,JS,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(QS(e,JS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(QS(n,"/"==n.charAt(0)?tx:XS,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",QS(n,nx)),t.join("")};var JS=/[#\/\?@]/g,XS=/[#\?:]/g,tx=/[#\?]/g,ex=/[#\?@]/g,nx=/#/g;function ix(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function rx(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function sx(t,e){rx(t),e=ux(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ox(t,e){return rx(t),e=ux(t,e),t.g.has(e)}function ax(t,e,n){sx(t,e),0<n.length&&(t.i=null,t.g.set(ux(t,e),UE(n)),t.h+=n.length)}function ux(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function lx(t){this.l=t||cx,t=AE.PerformanceNavigationTiming?0<(t=AE.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(AE.g&&AE.g.Ga&&AE.g.Ga()&&AE.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(EE=ix.prototype).add=function(t,e){rx(this),this.i=null,t=ux(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},EE.forEach=function(t,e){rx(this),this.g.forEach(function(n,i){n.forEach(function(n){t.call(e,n,i,this)},this)},this)},EE.oa=function(){rx(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},EE.W=function(t){rx(this);let e=[];if("string"==typeof t)ox(this,t)&&(e=e.concat(this.g.get(ux(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},EE.set=function(t,e){return rx(this),this.i=null,ox(this,t=ux(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},EE.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},EE.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var cx=10;function hx(t){return!!t.h||!!t.g&&t.g.size>=t.j}function dx(t){return t.h?1:t.g?t.g.size:0}function fx(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function px(t,e){t.g?t.g.add(e):t.h=e}function mx(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function gx(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return UE(t.i)}function _x(){}function yx(){this.g=new _x}function vx(t,e,n){const i=n||"";try{jS(t,function(t,n){let r=t;PE(t)&&(r=BI(t)),e.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function wx(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function bx(t){this.l=t.ac||null,this.j=t.jb||!1}function Cx(t,e){FI.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Tx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lx.prototype.cancel=function(){if(this.i=gx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},_x.prototype.stringify=function(t){return AE.JSON.stringify(t,void 0)},_x.prototype.parse=function(t){return AE.JSON.parse(t,void 0)},VE(bx,_S),bx.prototype.g=function(){return new Cx(this.l,this.j)},bx.prototype.i=function(t){return function(){return t}}({}),VE(Cx,FI);var Tx=0;function Ex(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function Ix(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sx(t)}function Sx(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(EE=Cx.prototype).open=function(t,e){if(this.readyState!=Tx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sx(this)},EE.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||AE).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},EE.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ix(this)),this.readyState=Tx},EE.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sx(this)),this.g&&(this.readyState=3,Sx(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==AE.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ex(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},EE.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ix(this):Sx(this),3==this.readyState&&Ex(this)}},EE.Va=function(t){this.g&&(this.response=this.responseText=t,Ix(this))},EE.Ua=function(t){this.g&&(this.response=t,Ix(this))},EE.ga=function(){this.g&&Ix(this)},EE.setRequestHeader=function(t,e){this.v.append(t,e)},EE.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},EE.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Cx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var xx=AE.JSON.parse;function Ax(t){FI.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kx,this.K=this.L=!1}VE(Ax,FI);var kx="",Dx=/^https?$/i,Px=["POST","PUT"];function Nx(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ox(t),Rx(t)}function Ox(t){t.D||(t.D=!0,MI(t,"complete"),MI(t,"error"))}function Lx(t){if(t.h&&void 0!==xE&&(!t.C[1]||4!=Mx(t)||2!=t.aa()))if(t.v&&4==Mx(t))YI(t.Ha,0,t);else if(MI(t,"readystatechange"),4==Mx(t)){t.h=!1;try{const u=t.aa();t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===u){var r=String(t.H).match(US)[1]||null;if(!r&&AE.self&&AE.self.location){var s=AE.self.location.protocol;r=s.substr(0,s.length-1)}i=!Dx.test(r?r.toLowerCase():"")}n=i}if(n)MI(t,"complete"),MI(t,"success");else{t.m=6;try{var o=2<Mx(t)?t.g.statusText:""}catch(a){o=""}t.j=o+" ["+t.aa()+"]",Ox(t)}}finally{Rx(t)}}}function Rx(t,e){if(t.g){Fx(t);const i=t.g,r=t.C[0]?kE:null;t.g=null,t.C=null,e||MI(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function Fx(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(AE.clearTimeout(t.A),t.A=null)}function Mx(t){return t.g?t.g.readyState:0}function Vx(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case kx:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Bx(t){let e="";return _I(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function jx(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Bx(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):WS(t,e,n))}function Ux(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qx(t){this.Ca=0,this.i=[],this.j=new rS,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ux("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ux("baseRetryDelayMs",5e3,t),this.bb=Ux("retryDelaySeedMs",1e4,t),this.$a=Ux("forwardChannelMaxRetries",2,t),this.ta=Ux("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new lx(t&&t.concurrentRequestLimit),this.Fa=new yx,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function zx(t){if($x(t),3==t.G){var e=t.U++,n=zS(t.F);WS(n,"SID",t.I),WS(n,"RID",e),WS(n,"TYPE","terminate"),Gx(t,n),(e=new ES(t,t.j,e,void 0)).K=2,e.v=GS(zS(n)),n=!1,AE.navigator&&AE.navigator.sendBeacon&&(n=AE.navigator.sendBeacon(e.v.toString(),"")),!n&&AE.Image&&((new Image).src=e.v,n=!0),n||(e.g=oA(e.l,null),e.g.da(e.v)),e.F=Date.now(),LS(e)}rA(t)}function Zx(t){t.g&&(Jx(t),t.g.cancel(),t.g=null)}function $x(t){Zx(t),t.u&&(AE.clearTimeout(t.u),t.u=null),tA(t),t.h.cancel(),t.m&&("number"==typeof t.m&&AE.clearTimeout(t.m),t.m=null)}function Hx(t){hx(t.h)||t.m||(t.m=!0,$I(t.Ja,t),t.C=0)}function Wx(t,e){var n;n=e?e.m:t.U++;const i=zS(t.F);WS(i,"SID",t.I),WS(i,"RID",n),WS(i,"AID",t.T),Gx(t,i),t.o&&t.s&&jx(i,t.o,t.s),n=new ES(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=Kx(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),px(t.h,n),kS(n,i,e)}function Gx(t,e){t.ia&&_I(t.ia,function(t,n){WS(e,n,t)}),t.l&&jS({},function(t,n){WS(e,n,t)})}function Kx(t,e,n){n=Math.min(t.i.length,n);var i=t.l?FE(t.l.Ra,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].h;const u=r[a].g;if(n-=e,0>n)e=Math.max(0,r[a].h-100),o=!1;else try{vx(u,t,"req"+n+"_")}catch(s){i&&i(u)}}if(o){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function Qx(t){t.g||t.u||(t.Z=1,$I(t.Ia,t),t.A=0)}function Yx(t){return!(t.g||t.u||3<=t.A||(t.Z++,t.u=pS(FE(t.Ia,t),nA(t,t.A)),t.A++,0))}function Jx(t){null!=t.B&&(AE.clearTimeout(t.B),t.B=null)}function Xx(t){t.g=new ES(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=zS(t.sa);WS(e,"RID","rpc"),WS(e,"SID",t.I),WS(e,"CI",t.L?"0":"1"),WS(e,"AID",t.T),WS(e,"TYPE","xmlhttp"),Gx(t,e),t.o&&t.s&&jx(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=GS(zS(e)),n.s=null,n.P=!0,DS(n,t)}function tA(t){null!=t.v&&(AE.clearTimeout(t.v),t.v=null)}function eA(t,e){var n=null;if(t.g==e){tA(t),Jx(t),t.g=null;var i=2}else{if(!fx(t.h,e))return;n=e.D,mx(t.h,e),i=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;MI(i=uS(),new fS(i,n)),Hx(t)}else Qx(t);else if(3==(r=e.o)||0==r&&0<t.pa||!(1==i&&function(t,e){return!(dx(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=pS(FE(t.Ja,t,e),nA(t,t.C)),t.C++,0)))}(t,e)||2==i&&Yx(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:iA(t,5);break;case 4:iA(t,10);break;case 3:iA(t,6);break;default:iA(t,2)}}function nA(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function iA(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=FE(t.kb,t);n||(n=new qS("//www.google.com/images/cleardot.gif"),AE.location&&"http"==AE.location.protocol||ZS(n,"https"),GS(n)),function(t,e){const n=new rS;if(AE.Image){const i=new Image;i.onload=ME(wx,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ME(wx,n,i,"TestLoadImage: error",!1,e),i.onabort=ME(wx,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ME(wx,n,i,"TestLoadImage: timeout",!1,e),AE.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}(n.toString(),i)}else dS(2);t.G=0,t.l&&t.l.va(e),rA(t),$x(t)}function rA(t){if(t.G=0,t.la=[],t.l){const e=gx(t.h);(0!=e.length||0!=t.i.length)&&(qE(t.la,e),qE(t.la,t.i),t.h.i.length=0,UE(t.i),t.i.length=0),t.l.ua()}}function sA(t,e,n){var i=n instanceof qS?zS(n):new qS(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),$S(i,i.m);else{var r=AE.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new qS(null,void 0);i&&ZS(s,i),e&&(s.g=e),r&&$S(s,r),n&&(s.l=n),i=s}return e=t.za,(n=t.D)&&e&&WS(i,n,e),WS(i,"VER",t.ma),Gx(t,i),i}function oA(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ax(n&&t.Da&&!t.ra?new bx({jb:!0}):t.ra)).Ka(t.H),e}function aA(){}function uA(){if(XE&&!(10<=Number(cI)))throw Error("Environmental error: no available transport.")}function lA(t,e){FI.call(this),this.g=new qx(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!$E(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$E(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new dA(this)}function cA(t){bS.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hA(){CS.call(this),this.status=1}function dA(t){this.g=t}(EE=Ax.prototype).Ka=function(t){this.L=t},EE.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vS.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:vS),this.g.onreadystatechange=FE(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Nx(this,s)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find(t=>"content-type"==t.toLowerCase()),r=AE.FormData&&t instanceof AE.FormData,!(0<=jE(Px,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fx(this),0<this.B&&((this.K=function(t){return XE&&lI()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=FE(this.qa,this)):this.A=YI(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Nx(this,s)}},EE.qa=function(){void 0!==xE&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,MI(this,"timeout"),this.abort(8))},EE.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,MI(this,"complete"),MI(this,"abort"),Rx(this))},EE.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rx(this,!0)),Ax.X.M.call(this)},EE.Ha=function(){this.s||(this.F||this.v||this.l?Lx(this):this.fb())},EE.fb=function(){Lx(this)},EE.aa=function(){try{return 2<Mx(this)?this.g.status:-1}catch(t){return-1}},EE.fa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},EE.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xx(e)}},EE.Ea=function(){return this.m},EE.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(EE=qx.prototype).ma=8,EE.G=1,EE.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new ES(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=yI(s),wI(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Kx(this,r,e),WS(n=zS(this.F),"RID",t),WS(n,"CVER",22),this.D&&WS(n,"X-HTTP-Session-Id",this.D),Gx(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(Bx(s)))+"&"+e:this.o&&jx(n,this.o,s)),px(this.h,r),this.Ya&&WS(n,"TYPE","init"),this.O?(WS(n,"$req",e),WS(n,"SID","null"),r.Z=!0,kS(r,n,null)):kS(r,n,e),this.G=2}}else 3==this.G&&(t?Wx(this,t):0==this.i.length||hx(this.h)||Wx(this))},EE.Ia=function(){if(this.u=null,Xx(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=pS(FE(this.eb,this),t)}},EE.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,dS(10),Zx(this),Xx(this))},EE.cb=function(){null!=this.v&&(this.v=null,Zx(this),Yx(this),dS(19))},EE.kb=function(t){t?(this.j.info("Successfully pinged google.com"),dS(2)):(this.j.info("Failed to ping google.com"),dS(1))},(EE=aA.prototype).xa=function(){},EE.wa=function(){},EE.va=function(){},EE.ua=function(){},EE.Ra=function(){},uA.prototype.g=function(t,e){return new lA(t,e)},VE(lA,FI),lA.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;dS(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=sA(t,null,t.V),Hx(t)},lA.prototype.close=function(){zx(this.g)},lA.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=BI(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&Hx(e)},lA.prototype.M=function(){this.g.l=null,delete this.j,zx(this.g),delete this.g,lA.X.M.call(this)},VE(cA,bS),VE(hA,CS),VE(dA,aA),dA.prototype.xa=function(){MI(this.g,"a")},dA.prototype.wa=function(t){MI(this.g,new cA(t))},dA.prototype.va=function(t){MI(this.g,new hA)},dA.prototype.ua=function(){MI(this.g,"b")},uA.prototype.createWebChannel=uA.prototype.g,lA.prototype.send=lA.prototype.u,lA.prototype.open=lA.prototype.m,lA.prototype.close=lA.prototype.close,mS.NO_ERROR=0,mS.TIMEOUT=8,mS.HTTP_ERROR=6,gS.COMPLETE="complete",yS.EventType=wS,wS.OPEN="a",wS.CLOSE="b",wS.ERROR="c",wS.MESSAGE="d",FI.prototype.listen=FI.prototype.N,Ax.prototype.listenOnce=Ax.prototype.O,Ax.prototype.getLastError=Ax.prototype.Oa,Ax.prototype.getLastErrorCode=Ax.prototype.Ea,Ax.prototype.getStatus=Ax.prototype.aa,Ax.prototype.getResponseJson=Ax.prototype.Sa,Ax.prototype.getResponseText=Ax.prototype.fa,Ax.prototype.send=Ax.prototype.da,Ax.prototype.setWithCredentials=Ax.prototype.Ka;var fA=SE.createWebChannelTransport=function(){return new uA},pA=SE.getStatEventTarget=function(){return uS()},mA=SE.ErrorCode=mS,gA=SE.EventType=gS,_A=SE.Event=oS,yA=SE.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},vA=SE.FetchXmlHttpFactory=bx,wA=SE.WebChannel=yS,bA=SE.XhrIo=Ax;const CA="@firebase/firestore";class TA{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}TA.UNAUTHENTICATED=new TA(null),TA.GOOGLE_CREDENTIALS=new TA("google-credentials-uid"),TA.FIRST_PARTY=new TA("first-party-uid"),TA.MOCK_USER=new TA("mock-user");let EA="9.15.0";const IA=new Md.Yd("@firebase/firestore");function SA(){return IA.logLevel}function xA(t,...e){if(IA.logLevel<=Md.in.DEBUG){const n=e.map(DA);IA.debug(`Firestore (${EA}): ${t}`,...n)}}function AA(t,...e){if(IA.logLevel<=Md.in.ERROR){const n=e.map(DA);IA.error(`Firestore (${EA}): ${t}`,...n)}}function kA(t,...e){if(IA.logLevel<=Md.in.WARN){const n=e.map(DA);IA.warn(`Firestore (${EA}): ${t}`,...n)}}function DA(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function PA(t="Unexpected state"){const e=`FIRESTORE (${EA}) INTERNAL ASSERTION FAILED: `+t;throw AA(e),new Error(e)}function NA(t,e){t||PA()}function OA(t,e){return t}const LA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class RA extends Rd.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class FA{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class MA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class VA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(TA.UNAUTHENTICATED))}shutdown(){}}class BA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class jA{constructor(t){this.t=t,this.currentUser=TA.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var n=this;let i=this.i;const r=t=>this.i!==i?(i=this.i,e(t)):Promise.resolve();let s=new FA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new FA,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const e=s;t.enqueueRetryable((0,Od.Z)(function*(){yield e.promise,yield r(n.currentUser)}))},a=t=>{xA("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(t=>a(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(xA("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new FA)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(xA("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(NA("string"==typeof e.accessToken),new MA(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return NA(null===t||"string"==typeof t),new TA(t)}}class UA{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i,this.type="FirstParty",this.user=TA.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(NA(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class qA{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i}getToken(){return Promise.resolve(new UA(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(TA.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZA{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const n=t=>{null!=t.error&&xA("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.A;return this.A=t.token,xA("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};const i=t=>{xA("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.T.onInit(t=>i(t)),setTimeout(()=>{if(!this.appCheck){const t=this.T.getImmediate({optional:!0});t?i(t):xA("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(NA("string"==typeof t.token),this.A=t.token,new zA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $A(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class HA{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=$A(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function WA(t,e){return t<e?-1:t>e?1:0}function GA(t,e,n){return t.length===e.length&&t.every((t,i)=>n(t,e[i]))}function KA(t){return t+"\0"}class QA{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new RA(LA.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new RA(LA.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new RA(LA.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new RA(LA.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return QA.fromMillis(Date.now())}static fromDate(t){return QA.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new QA(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?WA(this.nanoseconds,t.nanoseconds):WA(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class YA{constructor(t){this.timestamp=t}static fromTimestamp(t){return new YA(t)}static min(){return new YA(new QA(0,0))}static max(){return new YA(new QA(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class JA{constructor(t,e,n){void 0===e?e=0:e>t.length&&PA(),void 0===n?n=t.length-e:n>t.length-e&&PA(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===JA.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof JA?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class XA extends JA{construct(t,e,n){return new XA(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new RA(LA.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new XA(e)}static emptyPath(){return new XA([])}}const tk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ek extends JA{construct(t,e,n){return new ek(t,e,n)}static isValidIdentifier(t){return tk.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ek.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ek(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new RA(LA.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new RA(LA.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new RA(LA.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new RA(LA.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ek(e)}static emptyPath(){return new ek([])}}class nk{constructor(t){this.path=t}static fromPath(t){return new nk(XA.fromString(t))}static fromName(t){return new nk(XA.fromString(t).popFirst(5))}static empty(){return new nk(XA.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===XA.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return XA.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nk(new XA(t.slice()))}}class ik{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function rk(t){return t.fields.find(t=>2===t.kind)}function sk(t){return t.fields.filter(t=>2!==t.kind)}ik.UNKNOWN_ID=-1;class ok{constructor(t,e){this.fieldPath=t,this.kind=e}}class ak{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ak(0,ck.min())}}function uk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=YA.fromTimestamp(1e9===i?new QA(n+1,0):new QA(n,i));return new ck(r,nk.empty(),e)}function lk(t){return new ck(t.readTime,t.key,-1)}class ck{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new ck(YA.min(),nk.empty(),-1)}static max(){return new ck(YA.max(),nk.empty(),-1)}}function hk(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=nk.comparator(t.documentKey,e.documentKey),0!==n?n:WA(t.largestBatchId,e.largestBatchId))}const dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function pk(t){return mk.apply(this,arguments)}function mk(){return mk=(0,Od.Z)(function*(t){if(t.code!==LA.FAILED_PRECONDITION||t.message!==dk)throw t;xA("LocalStore","Unexpectedly lost primary lease")}),mk.apply(this,arguments)}class gk{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&PA(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new gk((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof gk?e:gk.resolve(e)}catch(e){return gk.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):gk.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):gk.reject(e)}static resolve(t){return new gk((e,n)=>{e(t)})}static reject(t){return new gk((e,n)=>{n(t)})}static waitFor(t){return new gk((e,n)=>{let i=0,r=0,s=!1;t.forEach(t=>{++i,t.next(()=>{++r,s&&r===i&&e()},t=>n(t))}),s=!0,r===i&&e()})}static or(t){let e=gk.resolve(!1);for(const n of t)e=e.next(t=>t?gk.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,i)=>{n.push(e.call(this,t,i))}),this.waitFor(n)}static mapArray(t,e){return new gk((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const u=a;e(t[u]).next(t=>{s[u]=t,++o,o===r&&n(s)},t=>i(t))}})}static doWhile(t,e){return new gk((n,i)=>{const r=()=>{!0===t()?e().next(()=>{r()},i):n()};r()})}}class _k{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new FA,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new wk(t,e.error)):this.P.resolve()},this.transaction.onerror=e=>{const n=Ik(e.target.error);this.P.reject(new wk(t,n))}}static open(t,e,n,i){try{return new _k(e,t.transaction(i,n))}catch(r){throw new wk(e,r)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(xA("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Ck(e)}}class yk{constructor(t,e,n){this.name=t,this.version=e,this.S=n,12.2===yk.D((0,Rd.z$)())&&AA("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return xA("SimpleDb","Removing database:",t),Tk(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,Rd.hl)())return!1;if(yk.N())return!0;const t=(0,Rd.z$)(),e=yk.D(t),n=0<e&&e<10,i=yk.k(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static N(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static k(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}F(t){var e=this;return(0,Od.Z)(function*(){return e.db||(xA("SimpleDb","Opening database:",e.name),e.db=yield new Promise((n,i)=>{const r=indexedDB.open(e.name,e.version);r.onsuccess=t=>{n(t.target.result)},r.onblocked=()=>{i(new wk(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=e=>{const n=e.target.error;i("VersionError"===n.name?new RA(LA.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new RA(LA.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new wk(t,n))},r.onupgradeneeded=t=>{xA("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion),e.S.$(t.target.result,r.transaction,t.oldVersion,e.version).next(()=>{xA("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=t=>e.B(t)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,i){var r=this;return(0,Od.Z)(function*(){const s="readonly"===e;let o=0;for(;;){++o;try{r.db=yield r.F(t);const e=_k.open(r.db,t,s?"readonly":"readwrite",n),o=i(e).next(t=>(e.V(),t)).catch(t=>(e.abort(t),gk.reject(t))).toPromise();return o.catch(()=>{}),yield e.v,o}catch(a){const t=a,e="FirebaseError"!==t.name&&o<3;if(xA("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),r.close(),!e)return Promise.reject(t)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class vk{constructor(t){this.q=t,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(t){this.q=t}done(){this.U=!0}j(t){this.K=t}delete(){return Tk(this.q.delete())}}class wk extends RA{constructor(t,e){super(LA.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function bk(t){return"IndexedDbTransactionError"===t.name}class Ck{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(xA("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(xA("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Tk(n)}add(t){return xA("SimpleDb","ADD",this.store.name,t,t),Tk(this.store.add(t))}get(t){return Tk(this.store.get(t)).next(e=>(void 0===e&&(e=null),xA("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return xA("SimpleDb","DELETE",this.store.name,t),Tk(this.store.delete(t))}count(){return xA("SimpleDb","COUNT",this.store.name),Tk(this.store.count())}W(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const t=this.cursor(n),e=[];return this.H(t,(t,n)=>{e.push(n)}).next(()=>e)}{const t=this.store.getAll(n.range);return new gk((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}})}}J(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new gk((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}})}Y(t,e){xA("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.X=!1;const i=this.cursor(n);return this.H(i,(t,e,n)=>n.delete())}Z(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.H(i,e)}tt(t){const e=this.cursor({});return new gk((n,i)=>{e.onerror=t=>{const e=Ik(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next(t=>{t?i.continue():n()}):n()}})}H(t,e){const n=[];return new gk((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new vk(r),o=e(r.primaryKey,r.value,s);if(o instanceof gk){const t=o.catch(t=>(s.done(),gk.reject(t)));n.push(t)}s.isDone?i():null===s.G?r.continue():r.continue(s.G)}}).next(()=>gk.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.X?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Tk(t){return new gk((e,n)=>{t.onsuccess=t=>{e(t.target.result)},t.onerror=t=>{const e=Ik(t.target.error);n(e)}})}let Ek=!1;function Ik(t){const e=yk.D((0,Rd.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new RA("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ek||(Ek=!0,setTimeout(()=>{throw t},0)),t}}return t}class Sk{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;xA("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Od.Z)(function*(){e.task=null;try{xA("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(t){bk(t)?xA("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):yield pk(t)}yield e.nt(6e4)}))}}class xk{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,Od.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>e.it(n,t))})()}it(t,e){const n=new Set;let i=e,r=!0;return gk.doWhile(()=>!0===r&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(e=>{if(null!==e&&!n.has(e))return xA("IndexBackiller",`Processing collection: ${e}`),this.rt(t,e,i).next(t=>{i-=t,n.add(e)});r=!1})).next(()=>e-i)}rt(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next(n=>{const r=n.changes;return this.localStore.indexManager.updateIndexEntries(t,r).next(()=>this.ot(i,n)).next(n=>(xA("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n))).next(()=>r.size)}))}ot(t,e){let n=t;return e.changes.forEach((t,e)=>{const i=lk(e);hk(i,n)>0&&(n=i)}),new ck(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Ak=(()=>{class t{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ut(t),this.ct=t=>e.writeSequenceNumber(t))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return t.at=-1,t})();class kk{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Dk{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Dk("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Dk&&t.projectId===this.projectId&&t.database===this.database}}function Pk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nk(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ok(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lk(t){return null==t}function Rk(t){return 0===t&&1/t==-1/0}function Fk(t){return"number"==typeof t&&Number.isInteger(t)&&!Rk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class Mk{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Mk(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Mk(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return WA(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mk.EMPTY_BYTE_STRING=new Mk("");const Vk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bk(t){if(NA(!!t),"string"==typeof t){let e=0;const n=Vk.exec(t);if(NA(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jk(t.seconds),nanos:jk(t.nanos)}}function jk(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Uk(t){return"string"==typeof t?Mk.fromBase64String(t):Mk.fromUint8Array(t)}function qk(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zk(t){const e=t.mapValue.fields.__previous_value__;return qk(e)?zk(e):e}function Zk(t){const e=Bk(t.mapValue.fields.__local_write_time__.timestampValue);return new QA(e.seconds,e.nanos)}const $k={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hk={nullValue:"NULL_VALUE"};function Wk(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qk(t)?4:aD(t)?9007199254740991:10:PA()}function Gk(t,e){if(t===e)return!0;const n=Wk(t);if(n!==Wk(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zk(t).isEqual(Zk(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Bk(t.timestampValue),i=Bk(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Uk(t.bytesValue).isEqual(Uk(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return jk(t.geoPointValue.latitude)===jk(e.geoPointValue.latitude)&&jk(t.geoPointValue.longitude)===jk(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return jk(t.integerValue)===jk(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=jk(t.doubleValue),i=jk(e.doubleValue);return n===i?Rk(n)===Rk(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return GA(t.arrayValue.values||[],e.arrayValue.values||[],Gk);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Pk(n)!==Pk(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Gk(n[r],i[r])))return!1;return!0}(t,e);default:return PA()}var i}function Kk(t,e){return void 0!==(t.values||[]).find(t=>Gk(t,e))}function Qk(t,e){if(t===e)return 0;const n=Wk(t),i=Wk(e);if(n!==i)return WA(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return WA(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=jk(t.integerValue||t.doubleValue),i=jk(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Yk(t.timestampValue,e.timestampValue);case 4:return Yk(Zk(t),Zk(e));case 5:return WA(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Uk(t),i=Uk(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=WA(n[r],i[r]);if(0!==t)return t}return WA(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=WA(jk(t.latitude),jk(e.latitude));return 0!==n?n:WA(jk(t.longitude),jk(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=Qk(n[r],i[r]);if(t)return t}return WA(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===$k.mapValue&&e===$k.mapValue)return 0;if(t===$k.mapValue)return 1;if(e===$k.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=WA(i[o],s[o]);if(0!==t)return t;const e=Qk(n[i[o]],r[s[o]]);if(0!==e)return e}return WA(i.length,s.length)}(t.mapValue,e.mapValue);default:throw PA()}}function Yk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return WA(t,e);const n=Bk(t),i=Bk(e),r=WA(n.seconds,i.seconds);return 0!==r?r:WA(n.nanos,i.nanos)}function Jk(t){return Xk(t)}function Xk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Bk(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Uk(t.bytesValue).toBase64():"referenceValue"in t?nk.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Xk(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Xk(t.fields[r])}`;return n+"}"}(t.mapValue):PA();var e}function tD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eD(t){return!!t&&"integerValue"in t}function nD(t){return!!t&&"arrayValue"in t}function iD(t){return!!t&&"nullValue"in t}function rD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sD(t){return!!t&&"mapValue"in t}function oD(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nk(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=oD(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oD(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aD(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function uD(t){return"nullValue"in t?Hk:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?tD(Dk.empty(),nk.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:PA()}function lD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?tD(Dk.empty(),nk.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?$k:PA()}function cD(t,e){const n=Qk(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function hD(t,e){const n=Qk(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class dD{constructor(t,e){this.position=t,this.inclusive=e}}function fD(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?nk.comparator(nk.fromName(o.referenceValue),n.key):Qk(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function pD(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gk(t.position[n],e.position[n]))return!1;return!0}class mD{}class gD extends mD{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new SD(t,e,n):"array-contains"===e?new DD(t,n):"in"===e?new PD(t,n):"not-in"===e?new ND(t,n):"array-contains-any"===e?new OD(t,n):new gD(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new xD(t,n):new AD(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Qk(e,this.value)):null!==e&&Wk(this.value)===Wk(e)&&this.matchesComparison(Qk(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return PA()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _D extends mD{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new _D(t,e)}matches(t){return yD(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt(t=>t.isInequality());return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function yD(t){return"and"===t.op}function vD(t){return"or"===t.op}function wD(t){return bD(t)&&yD(t)}function bD(t){for(const e of t.filters)if(e instanceof _D)return!1;return!0}function CD(t){if(t instanceof gD)return t.field.canonicalString()+t.op.toString()+Jk(t.value);{const e=t.filters.map(t=>CD(t)).join(",");return`${t.op}(${e})`}}function TD(t,e){return t instanceof gD?(n=t,(i=e)instanceof gD&&n.op===i.op&&n.field.isEqual(i.field)&&Gk(n.value,i.value)):t instanceof _D?function(t,e){return e instanceof _D&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce((t,n,i)=>t&&TD(n,e.filters[i]),!0)}(t,e):void PA();var n,i}function ED(t,e){const n=t.filters.concat(e);return _D.create(n,t.op)}function ID(t){return t instanceof gD?`${(e=t).field.canonicalString()} ${e.op} ${Jk(e.value)}`:t instanceof _D?function(t){return t.op.toString()+" {"+t.getFilters().map(ID).join(" ,")+"}"}(t):"Filter";var e}class SD extends gD{constructor(t,e,n){super(t,e,n),this.key=nk.fromName(n.referenceValue)}matches(t){const e=nk.comparator(t.key,this.key);return this.matchesComparison(e)}}class xD extends gD{constructor(t,e){super(t,"in",e),this.keys=kD(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class AD extends gD{constructor(t,e){super(t,"not-in",e),this.keys=kD(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function kD(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>nk.fromName(t.referenceValue))}class DD extends gD{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return nD(e)&&Kk(e.arrayValue,this.value)}}class PD extends gD{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Kk(this.value.arrayValue,e)}}class ND extends gD{constructor(t,e){super(t,"not-in",e)}matches(t){if(Kk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Kk(this.value.arrayValue,e)}}class OD extends gD{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!nD(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>Kk(this.value.arrayValue,t))}}class LD{constructor(t,e="asc"){this.field=t,this.dir=e}}function RD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class FD{constructor(t,e){this.comparator=t,this.root=e||VD.EMPTY}insert(t,e){return new FD(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,VD.BLACK,null,null))}remove(t){return new FD(this.comparator,this.root.remove(t,this.comparator).copy(null,null,VD.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new MD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new MD(this.root,t,this.comparator,!1)}getReverseIterator(){return new MD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new MD(this.root,t,this.comparator,!0)}}class MD{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class VD{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:VD.RED,this.left=null!=i?i:VD.EMPTY,this.right=null!=r?r:VD.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new VD(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return VD.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return VD.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,VD.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,VD.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw PA();const t=this.left.check();if(t!==this.right.check())throw PA();return t+(this.isRed()?0:1)}}VD.EMPTY=null,VD.RED=!0,VD.BLACK=!1,VD.EMPTY=new class{constructor(){this.size=0}get key(){throw PA()}get value(){throw PA()}get color(){throw PA()}get left(){throw PA()}get right(){throw PA()}copy(t,e,n,i,r){return this}insert(t,e,n){return new VD(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class BD{constructor(t){this.comparator=t,this.data=new FD(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new jD(this.data.getIterator())}getIteratorFrom(t){return new jD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof BD)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new BD(this.comparator);return e.data=t,e}}class jD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function UD(t){return t.hasNext()?t.getNext():void 0}class qD{constructor(t){this.fields=t,t.sort(ek.comparator)}static empty(){return new qD([])}unionWith(t){let e=new BD(ek.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new qD(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return GA(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class zD{constructor(t){this.value=t}static empty(){return new zD({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!sD(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=oD(e)}setAll(t){let e=ek.emptyPath(),n={},i=[];t.forEach((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=oD(t):i.push(r.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());sD(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gk(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];sD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Nk(e,(e,n)=>t[e]=n);for(const i of n)delete t[i]}clone(){return new zD(oD(this.value))}}function ZD(t){const e=[];return Nk(t.fields,(t,n)=>{const i=new ek([t]);if(sD(n)){const t=ZD(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)}),new qD(e)}class $D{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new $D(t,0,YA.min(),YA.min(),YA.min(),zD.empty(),0)}static newFoundDocument(t,e,n,i){return new $D(t,1,e,YA.min(),n,i,0)}static newNoDocument(t,e){return new $D(t,2,e,YA.min(),YA.min(),zD.empty(),0)}static newUnknownDocument(t,e){return new $D(t,3,e,YA.min(),YA.min(),zD.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(YA.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zD.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zD.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=YA.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof $D&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $D(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class HD{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ft=null}}function WD(t,e=null,n=[],i=[],r=null,s=null,o=null){return new HD(t,e,n,i,r,s,o)}function GD(t){const e=OA(t);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>CD(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>{return(e=t).field.canonicalString()+e.dir;var e}).join(","),Lk(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(t=>Jk(t)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(t=>Jk(t)).join(",")),e.ft=t}return e.ft}function KD(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pD(t.startAt,e.startAt)&&pD(t.endAt,e.endAt)}function QD(t){return nk.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function YD(t,e){return t.filters.filter(t=>t instanceof gD&&t.field.isEqual(e))}function JD(t,e,n){let i=Hk,r=!0;for(const s of YD(t,e)){let t=Hk,e=!0;switch(s.op){case"<":case"<=":t=uD(s.value);break;case"==":case"in":case">=":t=s.value;break;case">":t=s.value,e=!1;break;case"!=":case"not-in":t=Hk}cD({value:i,inclusive:r},{value:t,inclusive:e})<0&&(i=t,r=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];cD({value:i,inclusive:r},{value:t,inclusive:n.inclusive})<0&&(i=t,r=n.inclusive);break}return{value:i,inclusive:r}}function XD(t,e,n){let i=$k,r=!0;for(const s of YD(t,e)){let t=$k,e=!0;switch(s.op){case">=":case">":t=lD(s.value),e=!1;break;case"==":case"in":case"<=":t=s.value;break;case"<":t=s.value,e=!1;break;case"!=":case"not-in":t=$k}hD({value:i,inclusive:r},{value:t,inclusive:e})>0&&(i=t,r=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];hD({value:i,inclusive:r},{value:t,inclusive:n.inclusive})>0&&(i=t,r=n.inclusive);break}return{value:i,inclusive:r}}class tP{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.dt=null,this._t=null}}function eP(t,e,n,i,r,s,o,a){return new tP(t,e,n,i,r,s,o,a)}function nP(t){return new tP(t)}function iP(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function rP(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function sP(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function oP(t){return null!==t.collectionGroup}function aP(t){const e=OA(t);if(null===e.dt){e.dt=[];const t=sP(e),n=rP(e);if(null!==t&&null===n)t.isKeyField()||e.dt.push(new LD(t)),e.dt.push(new LD(ek.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.dt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new LD(ek.keyField(),t))}}}return e.dt}function uP(t){const e=OA(t);if(!e._t)if("F"===e.limitType)e._t=WD(e.path,e.collectionGroup,aP(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of aP(e))t.push(new LD(r.field,"desc"===r.dir?"asc":"desc"));const n=e.endAt?new dD(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new dD(e.startAt.position,e.startAt.inclusive):null;e._t=WD(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e._t}function lP(t,e){e.getFirstInequalityField(),sP(t);const n=t.filters.concat([e]);return new tP(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cP(t,e,n){return new tP(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hP(t,e){return KD(uP(t),uP(e))&&t.limitType===e.limitType}function dP(t){return`${GD(uP(t))}|lt:${t.limitType}`}function fP(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>ID(t)).join(", ")}]`),Lk(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>{return`${(e=t).field.canonicalString()} (${e.dir})`;var e}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(t=>Jk(t)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(t=>Jk(t)).join(",")),`Target(${e})`}(uP(t))}; limitType=${t.limitType})`}function pP(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):nk.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of aP(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(i=e,!((n=t).startAt&&!function(t,e,n){const i=fD(t,e,n);return t.inclusive?i<=0:i<0}(n.startAt,aP(n),i)||n.endAt&&!function(t,e,n){const i=fD(t,e,n);return t.inclusive?i>=0:i>0}(n.endAt,aP(n),i)));var n,i}function mP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gP(t){return(e,n)=>{let i=!1;for(const r of aP(t)){const t=_P(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function _P(t,e,n){const i=t.field.isKeyField()?nk.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Qk(i,r):PA()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return PA()}}function yP(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rk(e)?"-0":e}}function vP(t){return{integerValue:""+t}}function wP(t,e){return Fk(e)?vP(e):yP(t,e)}class bP{constructor(){this._=void 0}}function CP(t,e,n){return t instanceof IP?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof SP?xP(t,e):t instanceof AP?kP(t,e):function(t,e){const n=EP(t,e),i=PP(n)+PP(t.gt);return eD(n)&&eD(t.gt)?vP(i):yP(t.yt,i)}(t,e)}function TP(t,e,n){return t instanceof SP?xP(t,e):t instanceof AP?kP(t,e):n}function EP(t,e){return t instanceof DP?eD(i=e)||(n=i)&&"doubleValue"in n?e:{integerValue:0}:null;var n,i}class IP extends bP{}class SP extends bP{constructor(t){super(),this.elements=t}}function xP(t,e){const n=NP(e);for(const i of t.elements)n.some(t=>Gk(t,i))||n.push(i);return{arrayValue:{values:n}}}class AP extends bP{constructor(t){super(),this.elements=t}}function kP(t,e){let n=NP(e);for(const i of t.elements)n=n.filter(t=>!Gk(t,i));return{arrayValue:{values:n}}}class DP extends bP{constructor(t,e){super(),this.yt=t,this.gt=e}}function PP(t){return jk(t.integerValue||t.doubleValue)}function NP(t){return nD(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class OP{constructor(t,e){this.field=t,this.transform=e}}class LP{constructor(t,e){this.version=t,this.transformResults=e}}class RP{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new RP}static exists(t){return new RP(void 0,t)}static updateTime(t){return new RP(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function FP(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class MP{}function VP(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new GP(t.key,RP.none()):new zP(t.key,t.data,RP.none());{const n=t.data,i=zD.empty();let r=new BD(ek.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new ZP(t.key,i,new qD(r.toArray()),RP.none())}}function BP(t,e,n){t instanceof zP?function(t,e,n){const i=t.value.clone(),r=HP(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ZP?function(t,e,n){if(!FP(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=HP(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll($P(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function jP(t,e,n,i){return t instanceof zP?function(t,e,n,i){if(!FP(t.precondition,e))return n;const r=t.value.clone(),s=WP(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof ZP?function(t,e,n,i){if(!FP(t.precondition,e))return n;const r=WP(t.fieldTransforms,i,e),s=e.data;return s.setAll($P(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(t=>t.field))}(t,e,n,i):(s=n,FP(t.precondition,r=e)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):s);var r,s}function UP(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=EP(i.transform,t||null);null!=r&&(null===n&&(n=zD.empty()),n.set(i.field,r))}return n||null}function qP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===i||n&&i&&GA(n,i,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(n=t.transform)instanceof SP&&i instanceof SP||n instanceof AP&&i instanceof AP?GA(n.elements,i.elements,Gk):n instanceof DP&&i instanceof DP?Gk(n.gt,i.gt):n instanceof IP&&i instanceof IP);var n,i}(t,e))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,i}class zP extends MP{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ZP extends MP{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function $P(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function HP(t,e,n){const i=new Map;NA(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,TP(o,a,n[r]))}return i}function WP(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,CP(t,s,e))}return i}class GP extends MP{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KP extends MP{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QP{constructor(t){this.count=t}}var YP,JP;function XP(t){switch(t){default:return PA();case LA.CANCELLED:case LA.UNKNOWN:case LA.DEADLINE_EXCEEDED:case LA.RESOURCE_EXHAUSTED:case LA.INTERNAL:case LA.UNAVAILABLE:case LA.UNAUTHENTICATED:return!1;case LA.INVALID_ARGUMENT:case LA.NOT_FOUND:case LA.ALREADY_EXISTS:case LA.PERMISSION_DENIED:case LA.FAILED_PRECONDITION:case LA.ABORTED:case LA.OUT_OF_RANGE:case LA.UNIMPLEMENTED:case LA.DATA_LOSS:return!0}}function tN(t){if(void 0===t)return AA("GRPC error has no .code"),LA.UNKNOWN;switch(t){case YP.OK:return LA.OK;case YP.CANCELLED:return LA.CANCELLED;case YP.UNKNOWN:return LA.UNKNOWN;case YP.DEADLINE_EXCEEDED:return LA.DEADLINE_EXCEEDED;case YP.RESOURCE_EXHAUSTED:return LA.RESOURCE_EXHAUSTED;case YP.INTERNAL:return LA.INTERNAL;case YP.UNAVAILABLE:return LA.UNAVAILABLE;case YP.UNAUTHENTICATED:return LA.UNAUTHENTICATED;case YP.INVALID_ARGUMENT:return LA.INVALID_ARGUMENT;case YP.NOT_FOUND:return LA.NOT_FOUND;case YP.ALREADY_EXISTS:return LA.ALREADY_EXISTS;case YP.PERMISSION_DENIED:return LA.PERMISSION_DENIED;case YP.FAILED_PRECONDITION:return LA.FAILED_PRECONDITION;case YP.ABORTED:return LA.ABORTED;case YP.OUT_OF_RANGE:return LA.OUT_OF_RANGE;case YP.UNIMPLEMENTED:return LA.UNIMPLEMENTED;case YP.DATA_LOSS:return LA.DATA_LOSS;default:return PA()}}(JP=YP||(YP={}))[JP.OK=0]="OK",JP[JP.CANCELLED=1]="CANCELLED",JP[JP.UNKNOWN=2]="UNKNOWN",JP[JP.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",JP[JP.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",JP[JP.NOT_FOUND=5]="NOT_FOUND",JP[JP.ALREADY_EXISTS=6]="ALREADY_EXISTS",JP[JP.PERMISSION_DENIED=7]="PERMISSION_DENIED",JP[JP.UNAUTHENTICATED=16]="UNAUTHENTICATED",JP[JP.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",JP[JP.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",JP[JP.ABORTED=10]="ABORTED",JP[JP.OUT_OF_RANGE=11]="OUT_OF_RANGE",JP[JP.UNIMPLEMENTED=12]="UNIMPLEMENTED",JP[JP.INTERNAL=13]="INTERNAL",JP[JP.UNAVAILABLE=14]="UNAVAILABLE",JP[JP.DATA_LOSS=15]="DATA_LOSS";class eN{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Nk(this.inner,(e,n)=>{for(const[i,r]of n)t(i,r)})}isEmpty(){return Ok(this.inner)}size(){return this.innerSize}}const nN=new FD(nk.comparator);function iN(){return nN}const rN=new FD(nk.comparator);function sN(...t){let e=rN;for(const n of t)e=e.insert(n.key,n);return e}function oN(t){let e=rN;return t.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function aN(){return lN()}function uN(){return lN()}function lN(){return new eN(t=>t.toString(),(t,e)=>t.isEqual(e))}const cN=new FD(nk.comparator),hN=new BD(nk.comparator);function dN(...t){let e=hN;for(const n of t)e=e.add(n);return e}const fN=new BD(WA);function pN(){return fN}class mN{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,gN.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new mN(YA.min(),i,pN(),iN(),dN())}}class gN{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new gN(n,e,dN(),dN(),dN())}}class _N{constructor(t,e,n,i){this.It=t,this.removedTargetIds=e,this.key=n,this.Tt=i}}class yN{constructor(t,e){this.targetId=t,this.Et=e}}class vN{constructor(t,e,n=Mk.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class wN{constructor(){this.At=0,this.Rt=TN(),this.bt=Mk.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=dN(),e=dN(),n=dN();return this.Rt.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:PA()}}),new gN(this.bt,this.Pt,t,e,n)}xt(){this.vt=!1,this.Rt=TN()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class bN{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=iN(),this.qt=CN(),this.Ut=new BD(WA)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,e=>{const n=this.Wt(e);switch(t.state){case 0:this.zt(e)&&n.Dt(t.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(t.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(n.Ft(),n.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),n.Dt(t.resumeToken));break;default:PA()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach((t,n)=>{this.zt(n)&&e(n)})}Jt(t){const e=t.targetId,n=t.Et.count,i=this.Yt(e);if(i){const t=i.target;if(QD(t))if(0===n){const n=new nk(t.path);this.Qt(e,n,$D.newNoDocument(n,YA.min()))}else NA(1===n);else this.Xt(e)!==n&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach((n,i)=>{const r=this.Yt(i);if(r){if(n.current&&QD(r.target)){const e=new nk(r.target.path);null!==this.Lt.get(e)||this.te(i,e)||this.Qt(i,e,$D.newNoDocument(e,t))}n.St&&(e.set(i,n.Ct()),n.xt())}});let n=dN();this.qt.forEach((t,e)=>{let i=!0;e.forEachWhile(t=>{const e=this.Yt(t);return!e||2===e.purpose||(i=!1,!1)}),i&&(n=n.add(t))}),this.Lt.forEach((e,n)=>n.setReadTime(t));const i=new mN(t,e,this.Ut,this.Lt,n);return this.Lt=iN(),this.qt=CN(),this.Ut=new BD(WA),i}Gt(t,e){if(!this.zt(t))return;const n=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,n),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,n){if(!this.zt(t))return;const i=this.Wt(t);this.te(t,e)?i.Nt(e,1):i.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),n&&(this.Lt=this.Lt.insert(e,n))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new wN,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new BD(WA),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||xA("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new wN),this.$t.getRemoteKeysForTarget(t).forEach(e=>{this.Qt(t,e,null)})}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function CN(){return new FD(nk.comparator)}function TN(){return new FD(nk.comparator)}const EN={asc:"ASCENDING",desc:"DESCENDING"},IN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SN={and:"AND",or:"OR"};class xN{constructor(t,e){this.databaseId=t,this.wt=e}}function AN(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(t,e){return t.wt?e.toBase64():e.toUint8Array()}function DN(t,e){return AN(t,e.toTimestamp())}function PN(t){return NA(!!t),YA.fromTimestamp(function(t){const e=Bk(t);return new QA(e.seconds,e.nanos)}(t))}function NN(t,e){return(n=t,new XA(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function ON(t){const e=XA.fromString(t);return NA(eO(e)),e}function LN(t,e){return NN(t.databaseId,e.path)}function RN(t,e){const n=ON(e);if(n.get(1)!==t.databaseId.projectId)throw new RA(LA.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new RA(LA.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nk(BN(n))}function FN(t,e){return NN(t.databaseId,e)}function MN(t){const e=ON(t);return 4===e.length?XA.emptyPath():BN(e)}function VN(t){return new XA(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BN(t){return NA(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function jN(t,e,n){return{name:LN(t,e),fields:n.value.mapValue.fields}}function UN(t,e,n){const i=RN(t,e.name),r=PN(e.updateTime),s=e.createTime?PN(e.createTime):YA.min(),o=new zD({mapValue:{fields:e.fields}}),a=$D.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function qN(t,e){let n;if(e instanceof zP)n={update:jN(t,e.key,e.value)};else if(e instanceof GP)n={delete:LN(t,e.key)};else if(e instanceof ZP)n={update:jN(t,e.key,e.data),updateMask:tO(e.fieldMask)};else{if(!(e instanceof KP))return PA();n={verify:LN(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof IP)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof SP)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof AP)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof DP)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw PA()}(0,t))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:DN(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:PA()),n;var i}function zN(t,e){const n=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?RP.updateTime(PN(r.updateTime)):void 0!==r.exists?RP.exists(r.exists):RP.none():RP.none(),i=e.updateTransforms?e.updateTransforms.map(e=>function(t,e){let n=null;"setToServerValue"in e?(NA("REQUEST_TIME"===e.setToServerValue),n=new IP):"appendMissingElements"in e?n=new SP(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new AP(e.removeAllFromArray.values||[]):"increment"in e?n=new DP(t,e.increment):PA();const i=ek.fromServerFormat(e.fieldPath);return new OP(i,n)}(t,e)):[];var r;if(e.update){const r=RN(t,e.update.name),s=new zD({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=new qD((e.updateMask.fieldPaths||[]).map(t=>ek.fromServerFormat(t)));return new ZP(r,s,t,n,i)}return new zP(r,s,n,i)}if(e.delete){const i=RN(t,e.delete);return new GP(i,n)}if(e.verify){const i=RN(t,e.verify);return new KP(i,n)}return PA()}function ZN(t,e){return{documents:[FN(t,e.path)]}}function $N(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=FN(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=FN(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0!==t.length)return XN(_D.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map(t=>{return{field:YN((e=t).field),direction:GN(e.dir)};var e})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(a=e.limit,t.wt||Lk(a)?a:{value:a});var a,u,l;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),n}function HN(t){let e=MN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){NA(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=WN(t);return e instanceof _D&&wD(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(t=>{return new LD(JN((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e}));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Lk(e)?null:e}(n.limit));let u=null;var l;n.startAt&&(u=new dD((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(t){return new dD(t.values||[],!t.before)}(n.endAt)),eP(e,r,o,s,a,"F",u,c)}function WN(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=JN(t.unaryFilter.field);return gD.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=JN(t.unaryFilter.field);return gD.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=JN(t.unaryFilter.field);return gD.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=JN(t.unaryFilter.field);return gD.create(r,"!=",{nullValue:"NULL_VALUE"});default:return PA()}}(t):void 0!==t.fieldFilter?gD.create(JN((e=t).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return PA()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(t){return _D.create(t.compositeFilter.filters.map(t=>WN(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return PA()}}(t.compositeFilter.op))}(t):PA();var e}function GN(t){return EN[t]}function KN(t){return IN[t]}function QN(t){return SN[t]}function YN(t){return{fieldPath:t.canonicalString()}}function JN(t){return ek.fromServerFormat(t.fieldPath)}function XN(t){return t instanceof gD?function(t){if("=="===t.op){if(rD(t.value))return{unaryFilter:{field:YN(t.field),op:"IS_NAN"}};if(iD(t.value))return{unaryFilter:{field:YN(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rD(t.value))return{unaryFilter:{field:YN(t.field),op:"IS_NOT_NAN"}};if(iD(t.value))return{unaryFilter:{field:YN(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:YN(t.field),op:KN(t.op),value:t.value}}}(t):t instanceof _D?function(t){const e=t.getFilters().map(t=>XN(t));return 1===e.length?e[0]:{compositeFilter:{op:QN(t.op),filters:e}}}(t):PA()}function tO(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eO(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function nO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rO(e)),e=iO(t.get(n),e);return rO(e)}function iO(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=e}}return n}function rO(t){return t+"\x01\x01"}function sO(t){const e=t.length;if(NA(e>=2),2===e)return NA("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),XA.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const e=t.indexOf("\x01",s);switch((e<0||e>n)&&PA(),t.charAt(e+1)){case"\x01":const n=t.substring(s,e);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"\x10":r+=t.substring(s,e),r+="\0";break;case"\x11":r+=t.substring(s,e+1);break;default:PA()}s=e+2}return new XA(i)}const oO=["userId","batchId"];function aO(t,e){return[t,nO(e)]}function uO(t,e,n){return[t,nO(e),n]}const lO={},cO=["prefixPath","collectionGroup","readTime","documentId"],hO=["prefixPath","collectionGroup","documentId"],dO=["collectionGroup","readTime","prefixPath","documentId"],fO=["canonicalId","targetId"],pO=["targetId","path"],mO=["path","targetId"],gO=["collectionId","parent"],_O=["indexId","uid"],yO=["uid","sequenceNumber"],vO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wO=["indexId","uid","orderedDocumentKey"],bO=["userId","collectionPath","documentId"],CO=["userId","collectionPath","largestBatchId"],TO=["userId","collectionGroup","largestBatchId"],EO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IO=[...EO,"documentOverlays"],SO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xO=SO,AO=[...xO,"indexConfiguration","indexState","indexEntries"];class kO extends fk{constructor(t,e){super(),this.se=t,this.currentSequenceNumber=e}}function DO(t,e){const n=OA(t);return yk.M(n.se,e)}class PO{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&BP(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=jP(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=jP(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=uN();return this.mutations.forEach(i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=VP(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(YA.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),dN())}isEqual(t){return this.batchId===t.batchId&&GA(this.mutations,t.mutations,(t,e)=>qP(t,e))&&GA(this.baseMutations,t.baseMutations,(t,e)=>qP(t,e))}}class NO{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){NA(t.mutations.length===n.length);let i=cN;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new NO(t,e,n,i)}}class OO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class LO{constructor(t,e,n,i,r=YA.min(),s=YA.min(),o=Mk.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new LO(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new LO(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new LO(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class RO{constructor(t){this.ie=t}}function FO(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:MO(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:LN(r=t.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:AN(r,s.version.toTimestamp()),createTime:AN(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:VO(e.version)};else{if(!e.isUnknownDocument())return PA();i.unknownDocument={path:n.path.toArray(),version:VO(e.version)}}var r,s;return i}function MO(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function VO(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function BO(t){const e=new QA(t.seconds,t.nanoseconds);return YA.fromTimestamp(e)}function jO(t,e){const n=(e.baseMutations||[]).map(e=>zN(t.ie,e));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(t.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(e=>zN(t.ie,e)),r=QA.fromMillis(e.localWriteTimeMs);return new PO(e.batchId,r,n,i)}function UO(t){const e=BO(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?BO(t.lastLimboFreeSnapshotVersion):YA.min();let i;var r;return void 0!==t.query.documents?(NA(1===(r=t.query).documents.length),i=uP(nP(MN(r.documents[0])))):i=uP(HN(t.query)),new LO(i,t.targetId,0,t.lastListenSequenceNumber,e,n,Mk.fromBase64String(t.resumeToken))}function qO(t,e){const n=VO(e.snapshotVersion),i=VO(e.lastLimboFreeSnapshotVersion);let r;r=QD(e.target)?ZN(t.ie,e.target):$N(t.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:GD(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function zO(t){const e=HN({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?cP(e,e.limit,"L"):e}function ZO(t,e){return new OO(e.largestBatchId,zN(t.ie,e.overlayMutation))}function $O(t,e){const n=e.path.lastSegment();return[t,nO(e.path.popLast()),n]}function HO(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:VO(i.readTime),documentKey:nO(i.documentKey.path),largestBatchId:i.largestBatchId}}class WO{getBundleMetadata(t,e){return GO(t).get(e).next(t=>{if(t)return{id:(e=t).bundleId,createTime:BO(e.createTime),version:e.version};var e})}saveBundleMetadata(t,e){return GO(t).put({bundleId:(n=e).id,createTime:VO(PN(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return KO(t).get(e).next(t=>{if(t)return{name:(e=t).name,query:zO(e.bundledQuery),readTime:BO(e.readTime)};var e})}saveNamedQuery(t,e){return KO(t).put({name:(n=e).name,readTime:VO(PN(n.readTime)),bundledQuery:n.bundledQuery});var n}}function GO(t){return DO(t,"bundles")}function KO(t){return DO(t,"namedQueries")}class QO{constructor(t,e){this.yt=t,this.userId=e}static re(t,e){return new QO(t,e.uid||"")}getOverlay(t,e){return YO(t).get($O(this.userId,e)).next(t=>t?ZO(this.yt,t):null)}getOverlays(t,e){const n=aN();return gk.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){const i=[];return n.forEach((n,r)=>{const s=new OO(e,r);i.push(this.oe(t,s))}),gk.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach(t=>i.add(nO(t.getCollectionPath())));const r=[];return i.forEach(e=>{const i=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);r.push(YO(t).Y("collectionPathOverlayIndex",i))}),gk.waitFor(r)}getOverlaysForCollection(t,e,n){const i=aN(),r=nO(e),s=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return YO(t).W("collectionPathOverlayIndex",s).next(t=>{for(const e of t){const t=ZO(this.yt,e);i.set(t.getKey(),t)}return i})}getOverlaysForCollectionGroup(t,e,n,i){const r=aN();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return YO(t).Z({index:"collectionGroupOverlayIndex",range:o},(t,e,n)=>{const o=ZO(this.yt,e);r.size()<i||o.largestBatchId===s?(r.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>r)}oe(t,e){return YO(t).put(function(t,e,n){const[i,r,s]=$O(e,n.mutation.key);return{userId:e,collectionPath:r,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:qN(t.ie,n.mutation)}}(this.yt,this.userId,e))}}function YO(t){return DO(t,"documentOverlays")}class JO{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(jk(t.integerValue));else if("doubleValue"in t){const n=jk(t.doubleValue);isNaN(n)?this.he(e,13):(this.he(e,15),Rk(n)?e.le(0):e.le(n))}else if("timestampValue"in t){const n=t.timestampValue;this.he(e,20),"string"==typeof n?e.fe(n):(e.fe(`${n.seconds||""}`),e.le(n.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(Uk(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.he(e,45),e.le(n.latitude||0),e.le(n.longitude||0)}else"mapValue"in t?aD(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):PA()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const n=t.fields||{};this.he(e,55);for(const i of Object.keys(n))this.de(i,e),this.ce(n[i],e)}ye(t,e){const n=t.values||[];this.he(e,50);for(const i of n)this.ce(i,e)}me(t,e){this.he(e,37),nk.fromName(t).path.forEach(t=>{this.he(e,60),this.pe(t,e)})}he(t,e){t.le(e)}_e(t){t.le(2)}}function XO(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function tL(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const i=XO(255&t[n]);if(e+=i,8!==i)break}return e}(t);return Math.ceil(e/8)}JO.Ie=new JO;class eL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ee(n.value),n=e.next();this.Ae()}Re(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.be(n.value),n=e.next();this.Pe()}ve(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ee(t);else if(t<2048)this.Ee(960|t>>>6),this.Ee(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ee(480|t>>>12),this.Ee(128|63&t>>>6),this.Ee(128|63&t);else{const t=e.codePointAt(0);this.Ee(240|t>>>18),this.Ee(128|63&t>>>12),this.Ee(128|63&t>>>6),this.Ee(128|63&t)}}this.Ae()}Ve(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.be(t);else if(t<2048)this.be(960|t>>>6),this.be(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.be(480|t>>>12),this.be(128|63&t>>>6),this.be(128|63&t);else{const t=e.codePointAt(0);this.be(240|t>>>18),this.be(128|63&t>>>12),this.be(128|63&t>>>6),this.be(128|63&t)}}this.Pe()}Se(t){const e=this.De(t),n=tL(e);this.Ce(1+n),this.buffer[this.position++]=255&n;for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=255&e[i]}xe(t){const e=this.De(t),n=tL(e);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(t){this.Ce(t.length),this.buffer.set(t,this.position),this.position+=t.length}Fe(){return this.buffer.slice(0,this.position)}De(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let i=1;i<e.length;++i)e[i]^=n?255:0;return e}Ee(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(e)}be(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(t)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(t){this.Ce(1),this.buffer[this.position++]=t}Me(t){this.Ce(1),this.buffer[this.position++]=~t}Ce(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class nL{constructor(t){this.$e=t}we(t){this.$e.Te(t)}fe(t){this.$e.ve(t)}le(t){this.$e.Se(t)}ae(){this.$e.Ne()}}class iL{constructor(t){this.$e=t}we(t){this.$e.Re(t)}fe(t){this.$e.Ve(t)}le(t){this.$e.xe(t)}ae(){this.$e.Oe()}}class rL{constructor(){this.$e=new eL,this.Be=new nL(this.$e),this.Le=new iL(this.$e)}seed(t){this.$e.seed(t)}qe(t){return 0===t?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class sL{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}Ue(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new sL(this.indexId,this.documentKey,this.arrayValue,n)}}function oL(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=aL(t.arrayValue,e.arrayValue),0!==n?n:(n=aL(t.directionalValue,e.directionalValue),0!==n?n:nk.comparator(t.documentKey,e.documentKey)))}function aL(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(0!==i)return i}return t.length-e.length}class uL{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];for(const e of t.filters){const t=e;t.isInequality()?this.Qe=t:this.Ge.push(t)}}je(t){NA(t.collectionGroup===this.collectionId);const e=rk(t);if(void 0!==e&&!this.We(e))return!1;const n=sk(t);let i=0,r=0;for(;i<n.length&&this.We(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Qe){const t=n[i];if(!this.ze(this.Qe,t)||!this.He(this.Ke[r++],t))return!1;++i}for(;i<n.length;++i){const t=n[i];if(r>=this.Ke.length||!this.He(this.Ke[r++],t))return!1}return!0}We(t){for(const e of this.Ge)if(this.ze(e,t))return!0;return!1}ze(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}He(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function lL(t){var e,n;if(NA(t instanceof gD||t instanceof _D),t instanceof gD){if(t instanceof PD){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(e=>gD.create(t.field,"==",e)))||[];return _D.create(i,"or")}return t}const i=t.filters.map(t=>lL(t));return _D.create(i,t.op)}function cL(t){if(0===t.getFilters().length)return[];const e=pL(lL(t));return NA(fL(e)),hL(e)||dL(e)?[e]:e.getFilters()}function hL(t){return t instanceof gD}function dL(t){return t instanceof _D&&wD(t)}function fL(t){return hL(t)||dL(t)||function(t){if(t instanceof _D&&vD(t)){for(const e of t.getFilters())if(!hL(e)&&!dL(e))return!1;return!0}return!1}(t)}function pL(t){if(NA(t instanceof gD||t instanceof _D),t instanceof gD)return t;if(1===t.filters.length)return pL(t.filters[0]);const e=t.filters.map(t=>pL(t));let n=_D.create(e,t.op);return n=_L(n),fL(n)?n:(NA(n instanceof _D),NA(yD(n)),NA(n.filters.length>1),n.filters.reduce((t,e)=>mL(t,e)))}function mL(t,e){let n;return NA(t instanceof gD||t instanceof _D),NA(e instanceof gD||e instanceof _D),n=t instanceof gD?e instanceof gD?_D.create([t,e],"and"):gL(t,e):e instanceof gD?gL(e,t):function(t,e){if(NA(t.filters.length>0&&e.filters.length>0),yD(t)&&yD(e))return ED(t,e.getFilters());const n=vD(t)?t:e,i=vD(t)?e:t,r=n.filters.map(t=>mL(t,i));return _D.create(r,"or")}(t,e),_L(n)}function gL(t,e){if(yD(e))return ED(e,t.getFilters());{const n=e.filters.map(e=>mL(t,e));return _D.create(n,"or")}}function _L(t){if(NA(t instanceof gD||t instanceof _D),t instanceof gD)return t;const e=t.getFilters();if(1===e.length)return _L(e[0]);if(bD(t))return t;const n=e.map(t=>_L(t)),i=[];return n.forEach(e=>{e instanceof gD?i.push(e):e instanceof _D&&(e.op===t.op?i.push(...e.filters):i.push(e))}),1===i.length?i[0]:_D.create(i,t.op)}class yL{constructor(){this.Je=new vL}addToCollectionParentIndex(t,e){return this.Je.add(e),gk.resolve()}getCollectionParents(t,e){return gk.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return gk.resolve()}deleteFieldIndex(t,e){return gk.resolve()}getDocumentsMatchingTarget(t,e){return gk.resolve(null)}getIndexType(t,e){return gk.resolve(0)}getFieldIndexes(t,e){return gk.resolve([])}getNextCollectionGroupToUpdate(t){return gk.resolve(null)}getMinOffset(t,e){return gk.resolve(ck.min())}getMinOffsetFromCollectionGroup(t,e){return gk.resolve(ck.min())}updateCollectionGroup(t,e,n){return gk.resolve()}updateIndexEntries(t,e){return gk.resolve()}}class vL{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new BD(XA.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new BD(XA.comparator)).toArray()}}const wL=new Uint8Array(0);class bL{constructor(t,e){this.user=t,this.databaseId=e,this.Ye=new vL,this.Xe=new eN(t=>GD(t),(t,e)=>KD(t,e)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ye.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ye.add(e)});const r={collectionId:n,parent:nO(i)};return CL(t).put(r)}return gk.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[KA(e),""],!1,!0);return CL(t).W(i).next(t=>{for(const i of t){if(i.collectionId!==e)break;n.push(sO(i.parent))}return n})}addFieldIndex(t,e){const n=EL(t),i={indexId:(r=e).indexId,collectionGroup:r.collectionGroup,fields:r.fields.map(t=>[t.fieldPath.canonicalString(),t.kind])};var r;delete i.indexId;const s=n.add(i);if(e.indexState){const n=IL(t);return s.next(t=>{n.put(HO(t,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const n=EL(t),i=IL(t),r=TL(t);return n.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const n=TL(t);let i=!0;const r=new Map;return gk.forEach(this.Ze(e),e=>this.tn(t,e).next(t=>{i&&(i=!!t),r.set(e,t)})).next(()=>{if(i){let t=dN();const i=[];return gk.forEach(r,(r,s)=>{var o;xA("IndexedDbIndexManager",`Using index ${o=r,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(t=>`${t.fieldPath}:${t.kind}`).join(",")}`} to execute ${GD(e)}`);const a=function(t,e){const n=rk(e);if(void 0===n)return null;for(const i of YD(t,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(s,r),u=function(t,e){const n=new Map;for(const i of sk(e))for(const e of YD(t,i.fieldPath))switch(e.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,r),l=function(t,e){const n=[];let i=!0;for(const r of sk(e)){const e=0===r.kind?JD(t,r.fieldPath,t.startAt):XD(t,r.fieldPath,t.startAt);n.push(e.value),i&&(i=e.inclusive)}return new dD(n,i)}(s,r),c=function(t,e){const n=[];let i=!0;for(const r of sk(e)){const e=0===r.kind?XD(t,r.fieldPath,t.endAt):JD(t,r.fieldPath,t.endAt);n.push(e.value),i&&(i=e.inclusive)}return new dD(n,i)}(s,r),h=this.en(r,s,l),d=this.en(r,s,c),f=this.nn(r,s,u),p=this.sn(r.indexId,a,h,l.inclusive,d,c.inclusive,f);return gk.forEach(p,r=>n.J(r,e.limit).next(e=>{e.forEach(e=>{const n=nk.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),i.push(n))})}))}).next(()=>i)}return gk.resolve(null)})}Ze(t){let e=this.Xe.get(t);return e||(e=0===t.filters.length?[t]:cL(_D.create(t.filters,"and")).map(e=>WD(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt)),this.Xe.set(t,e),e)}sn(t,e,n,i,r,s,o){const a=(null!=e?e.length:1)*Math.max(n.length,r.length),u=a/(null!=e?e.length:1),l=[];for(let c=0;c<a;++c){const a=e?this.rn(e[c/u]):wL,h=this.on(t,a,n[c%u],i),d=this.un(t,a,r[c%u],s),f=o.map(e=>this.on(t,a,e,!0));l.push(...this.createRange(h,d,f))}return l}on(t,e,n,i){const r=new sL(t,nk.empty(),e,n);return i?r:r.Ue()}un(t,e,n,i){const r=new sL(t,nk.empty(),e,n);return i?r.Ue():r}tn(t,e){const n=new uL(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(t=>{let e=null;for(const i of t)n.je(i)&&(!e||i.fields.length>e.fields.length)&&(e=i);return e})}getIndexType(t,e){let n=2;const i=this.Ze(e);return gk.forEach(i,e=>this.tn(t,e).next(t=>{t?0!==n&&t.fields.length<function(t){let e=new BD(ek.comparator),n=!1;for(const i of t.filters)for(const t of i.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const i of t.orderBy)i.field.isKeyField()||(e=e.add(i.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})).next(()=>null!==e.limit&&i.length>1&&2===n?1:n)}cn(t,e){const n=new rL;for(const i of sk(t)){const t=e.data.field(i.fieldPath);if(null==t)return null;const r=n.qe(i.kind);JO.Ie.ue(t,r)}return n.Fe()}rn(t){const e=new rL;return JO.Ie.ue(t,e.qe(0)),e.Fe()}an(t,e){const n=new rL;return JO.Ie.ue(tD(this.databaseId,e),n.qe(function(t){const e=sk(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Fe()}nn(t,e,n){if(null===n)return[];let i=[];i.push(new rL);let r=0;for(const s of sk(t)){const t=n[r++];for(const n of i)if(this.hn(e,s.fieldPath)&&nD(t))i=this.ln(i,s,t);else{const e=n.qe(s.kind);JO.Ie.ue(t,e)}}return this.fn(i)}en(t,e,n){return this.nn(t,e,n.position)}fn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Fe();return e}ln(t,e,n){const i=[...t],r=[];for(const s of n.arrayValue.values||[])for(const t of i){const n=new rL;n.seed(t.Fe()),JO.Ie.ue(s,n.qe(e.kind)),r.push(n)}return r}hn(t,e){return!!t.filters.find(t=>t instanceof gD&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op))}getFieldIndexes(t,e){const n=EL(t),i=IL(t);return(e?n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.W()).next(t=>{const e=[];return gk.forEach(t,t=>i.get([t.indexId,this.uid]).next(n=>{e.push(function(t,e){const n=e?new ak(e.sequenceNumber,new ck(BO(e.readTime),new nk(sO(e.documentKey)),e.largestBatchId)):ak.empty(),i=t.fields.map(([t,e])=>new ok(ek.fromServerFormat(t),e));return new ik(t.indexId,t.collectionGroup,i,n)}(t,n))})).next(()=>e)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(t=>0===t.length?null:(t.sort((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:WA(t.collectionGroup,e.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(t,e,n){const i=EL(t),r=IL(t);return this.dn(t).next(t=>i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(e=>gk.forEach(e,e=>r.put(HO(e.indexId,this.user,t,n)))))}updateIndexEntries(t,e){const n=new Map;return gk.forEach(e,(e,i)=>{const r=n.get(e.collectionGroup);return(r?gk.resolve(r):this.getFieldIndexes(t,e.collectionGroup)).next(r=>(n.set(e.collectionGroup,r),gk.forEach(r,n=>this._n(t,e,n).next(e=>{const r=this.wn(i,n);return e.isEqual(r)?gk.resolve():this.mn(t,i,n,e,r)}))))})}gn(t,e,n,i){return TL(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(n,e.key),documentKey:e.key.path.toArray()})}yn(t,e,n,i){return TL(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(n,e.key),e.key.path.toArray()])}_n(t,e,n){const i=TL(t);let r=new BD(oL);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,e)])},(t,i)=>{r=r.add(new sL(n.indexId,e,i.arrayValue,i.directionalValue))}).next(()=>r)}wn(t,e){let n=new BD(oL);const i=this.cn(e,t);if(null==i)return n;const r=rk(e);if(null!=r){const s=t.data.field(r.fieldPath);if(nD(s))for(const r of s.arrayValue.values||[])n=n.add(new sL(e.indexId,t.key,this.rn(r),i))}else n=n.add(new sL(e.indexId,t.key,wL,i));return n}mn(t,e,n,i,r){xA("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,i,r){const s=t.getIterator(),o=e.getIterator();let a=UD(s),u=UD(o);for(;a||u;){let t=!1,e=!1;if(a&&u){const i=n(a,u);i<0?e=!0:i>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(i(u),u=UD(o)):e?(r(a),a=UD(s)):(a=UD(s),u=UD(o))}}(i,r,oL,i=>{s.push(this.gn(t,e,n,i))},i=>{s.push(this.yn(t,e,n,i))}),gk.waitFor(s)}dn(t){let e=1;return IL(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(t,n,i)=>{i.done(),e=n.sequenceNumber+1}).next(()=>e)}createRange(t,e,n){n=n.sort((t,e)=>oL(t,e)).filter((t,e,n)=>!e||0!==oL(t,n[e-1]));const i=[];i.push(t);for(const s of n){const n=oL(s,t),r=oL(s,e);if(0===n)i[0]=t.Ue();else if(n>0&&r<0)i.push(s),i.push(s.Ue());else if(r>0)break}i.push(e);const r=[];for(let s=0;s<i.length;s+=2){if(this.pn(i[s],i[s+1]))return[];r.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,wL,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,wL,[]]))}return r}pn(t,e){return oL(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(SL)}getMinOffset(t,e){return gk.mapArray(this.Ze(e),e=>this.tn(t,e).next(t=>t||PA())).next(SL)}}function CL(t){return DO(t,"collectionParents")}function TL(t){return DO(t,"indexEntries")}function EL(t){return DO(t,"indexConfiguration")}function IL(t){return DO(t,"indexState")}function SL(t){NA(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;hk(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new ck(e.readTime,e.documentKey,n)}const xL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class AL{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new AL(t,AL.DEFAULT_COLLECTION_PERCENTILE,AL.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kL(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=i.Z({range:o},(t,e,n)=>(a++,n.delete()));s.push(u.next(()=>{NA(1===a)}));const l=[];for(const c of n.mutations){const t=uO(e,c.key.path,n.batchId);s.push(r.delete(t)),l.push(c.key)}return gk.waitFor(s).next(()=>l)}function DL(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw PA();e=t.noDocument}return JSON.stringify(e).length}AL.DEFAULT_COLLECTION_PERCENTILE=10,AL.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,AL.DEFAULT=new AL(41943040,AL.DEFAULT_COLLECTION_PERCENTILE,AL.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),AL.DISABLED=new AL(-1,0,0);class PL{constructor(t,e,n,i){this.userId=t,this.yt=e,this.indexManager=n,this.referenceDelegate=i,this.In={}}static re(t,e,n,i){NA(""!==t.uid);const r=t.isAuthenticated()?t.uid:"";return new PL(r,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return OL(t).Z({index:"userMutationsIndex",range:n},(t,n,i)=>{e=!1,i.done()}).next(()=>e)}addMutationBatch(t,e,n,i){const r=LL(t),s=OL(t);return s.add({}).next(o=>{NA("number"==typeof o);const a=new PO(o,e,n,i),u=function(t,e,n){const i=n.baseMutations.map(e=>qN(t.ie,e)),r=n.mutations.map(e=>qN(t.ie,e));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.yt,this.userId,a),l=[];let c=new BD((t,e)=>WA(t.canonicalString(),e.canonicalString()));for(const t of i){const e=uO(this.userId,t.key.path,o);c=c.add(t.key.path.popLast()),l.push(s.put(u)),l.push(r.put(e,lO))}return c.forEach(e=>{l.push(this.indexManager.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(()=>{this.In[o]=a.keys()}),gk.waitFor(l).next(()=>a)})}lookupMutationBatch(t,e){return OL(t).get(e).next(t=>t?(NA(t.userId===this.userId),jO(this.yt,t)):null)}Tn(t,e){return this.In[e]?gk.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(t=>{if(t){const n=t.keys();return this.In[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return OL(t).Z({index:"userMutationsIndex",range:i},(t,e,i)=>{e.userId===this.userId&&(NA(e.batchId>=n),r=jO(this.yt,e)),i.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return OL(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(t,e,i)=>{n=e.batchId,i.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return OL(t).W("userMutationsIndex",e).next(t=>t.map(t=>jO(this.yt,t)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=aO(this.userId,e.path),i=IDBKeyRange.lowerBound(n),r=[];return LL(t).Z({range:i},(n,i,s)=>{const[o,a,u]=n,l=sO(a);if(o===this.userId&&e.path.isEqual(l))return OL(t).get(u).next(t=>{if(!t)throw PA();NA(t.userId===this.userId),r.push(jO(this.yt,t))});s.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new BD(WA);const i=[];return e.forEach(e=>{const r=aO(this.userId,e.path),s=IDBKeyRange.lowerBound(r),o=LL(t).Z({range:s},(t,i,r)=>{const[s,o,a]=t,u=sO(o);s===this.userId&&e.path.isEqual(u)?n=n.add(a):r.done()});i.push(o)}),gk.waitFor(i).next(()=>this.En(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,r=aO(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new BD(WA);return LL(t).Z({range:s},(t,e,r)=>{const[s,a,u]=t,l=sO(a);s===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(u)):r.done()}).next(()=>this.En(t,o))}En(t,e){const n=[],i=[];return e.forEach(e=>{i.push(OL(t).get(e).next(t=>{if(null===t)throw PA();NA(t.userId===this.userId),n.push(jO(this.yt,t))}))}),gk.waitFor(i).next(()=>n)}removeMutationBatch(t,e){return kL(t.se,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),gk.forEach(n,e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return gk.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return LL(t).Z({range:n},(t,e,n)=>{if(t[0]===this.userId){const e=sO(t[1]);i.push(e)}else n.done()}).next(()=>{NA(0===i.length)})})}containsKey(t,e){return NL(t,this.userId,e)}Rn(t){return RL(t).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function NL(t,e,n){const i=aO(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return LL(t).Z({range:s,X:!0},(t,n,i)=>{const[s,a,u]=t;s===e&&a===r&&(o=!0),i.done()}).next(()=>o)}function OL(t){return DO(t,"mutations")}function LL(t){return DO(t,"documentMutations")}function RL(t){return DO(t,"mutationQueues")}class FL{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new FL(0)}static vn(){return new FL(-1)}}class ML{constructor(t,e){this.referenceDelegate=t,this.yt=e}allocateTargetId(t){return this.Vn(t).next(e=>{const n=new FL(e.highestTargetId);return e.highestTargetId=n.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(t=>YA.fromTimestamp(new QA(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.Vn(t).next(i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.Sn(t,i)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(n=>(n.targetCount+=1,this.Cn(e,n),this.Sn(t,n))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>VL(t).delete(e.targetId)).next(()=>this.Vn(t)).next(e=>(NA(e.targetCount>0),e.targetCount-=1,this.Sn(t,e)))}removeTargets(t,e,n){let i=0;const r=[];return VL(t).Z((s,o)=>{const a=UO(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(t,a)))}).next(()=>gk.waitFor(r)).next(()=>i)}forEachTarget(t,e){return VL(t).Z((t,n)=>{const i=UO(n);e(i)})}Vn(t){return BL(t).get("targetGlobalKey").next(t=>(NA(null!==t),t))}Sn(t,e){return BL(t).put("targetGlobalKey",e)}Dn(t,e){return VL(t).put(qO(this.yt,e))}Cn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Vn(t).next(t=>t.targetCount)}getTargetData(t,e){const n=GD(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return VL(t).Z({range:i,index:"queryTargetsIndex"},(t,n,i)=>{const s=UO(n);KD(e,s.target)&&(r=s,i.done())}).next(()=>r)}addMatchingKeys(t,e,n){const i=[],r=jL(t);return e.forEach(e=>{const s=nO(e.path);i.push(r.put({targetId:n,path:s})),i.push(this.referenceDelegate.addReference(t,n,e))}),gk.waitFor(i)}removeMatchingKeys(t,e,n){const i=jL(t);return gk.forEach(e,e=>{const r=nO(e.path);return gk.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(t,n,e)])})}removeMatchingKeysForTargetId(t,e){const n=jL(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=jL(t);let r=dN();return i.Z({range:n,X:!0},(t,e,n)=>{const i=sO(t[1]),s=new nk(i);r=r.add(s)}).next(()=>r)}containsKey(t,e){const n=nO(e.path),i=IDBKeyRange.bound([n],[KA(n)],!1,!0);let r=0;return jL(t).Z({index:"documentTargetsIndex",X:!0,range:i},([t,e],n,i)=>{0!==t&&(r++,i.done())}).next(()=>r>0)}ne(t,e){return VL(t).get(e).next(t=>t?UO(t):null)}}function VL(t){return DO(t,"targets")}function BL(t){return DO(t,"targetGlobal")}function jL(t){return DO(t,"targetDocuments")}function UL([t,e],[n,i]){const r=WA(t,n);return 0===r?WA(e,i):r}class qL{constructor(t){this.xn=t,this.buffer=new BD(UL),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();UL(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class zL{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;xA("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Od.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(t){bk(t)?xA("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield pk(t)}yield e.Fn(3e5)}))}}class ZL{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return gk.resolve(Ak.at);const n=new qL(e);return this.$n.forEachTarget(t,t=>n.On(t.sequenceNumber)).next(()=>this.$n.Ln(t,t=>n.On(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.$n.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(xA("LruGarbageCollector","Garbage collection skipped; disabled"),gk.resolve(xL)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(xA("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xL):this.qn(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}qn(t,e){let n,i,r,s,o,a,u;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(xA("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i))).next(i=>(n=i,o=Date.now(),this.removeTargets(t,n,e))).next(e=>(r=e,a=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(u=Date.now(),SA()<=Md.in.DEBUG&&xA("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${i} in `+(o-s)+`ms\n\tRemoved ${r} targets in `+(a-o)+`ms\n\tRemoved ${t} documents in `+(u-a)+`ms\nTotal Duration: ${u-l}ms`),gk.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t})))}}class $L{constructor(t,e){this.db=t,this.garbageCollector=new ZL(this,e)}Bn(t){const e=this.Un(t);return this.db.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}Un(t){let e=0;return this.Ln(t,t=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(t,n)=>e(n))}addReference(t,e,n){return HL(t,n)}removeReference(t,e,n){return HL(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return HL(t,e)}Gn(t,e){return function(t,e){let n=!1;return RL(t).tt(i=>NL(t,i,e).next(t=>(t&&(n=!0),gk.resolve(!t)))).next(()=>n)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Kn(t,(s,o)=>{if(o<=e){const e=this.Gn(t,s).next(e=>{if(!e)return r++,n.getEntry(t,s).next(()=>(n.removeEntry(s,YA.min()),jL(t).delete([0,nO(s.path)])))});i.push(e)}}).next(()=>gk.waitFor(i)).next(()=>n.apply(t)).next(()=>r)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return HL(t,e)}Kn(t,e){const n=jL(t);let i,r=Ak.at;return n.Z({index:"documentTargetsIndex"},([t,n],{path:s,sequenceNumber:o})=>{0===t?(r!==Ak.at&&e(new nk(sO(i)),r),r=o,i=s):r=Ak.at}).next(()=>{r!==Ak.at&&e(new nk(sO(i)),r)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function HL(t,e){return jL(t).put((n=t.currentSequenceNumber,{targetId:0,path:nO(e.path),sequenceNumber:n}));var n}class WL{constructor(){this.changes=new eN(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,$D.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?gk.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class GL{constructor(t){this.yt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return JL(t).put(n)}removeEntry(t,e,n){return JL(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],MO(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Qn(t,n)))}getEntry(t,e){let n=$D.newInvalidDocument(e);return JL(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(XL(e))},(t,i)=>{n=this.jn(e,i)}).next(()=>n)}Wn(t,e){let n={size:0,document:$D.newInvalidDocument(e)};return JL(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(XL(e))},(t,i)=>{n={document:this.jn(e,i),size:DL(i)}}).next(()=>n)}getEntries(t,e){let n=iN();return this.zn(t,e,(t,e)=>{const i=this.jn(t,e);n=n.insert(t,i)}).next(()=>n)}Hn(t,e){let n=iN(),i=new FD(nk.comparator);return this.zn(t,e,(t,e)=>{const r=this.jn(t,e);n=n.insert(t,r),i=i.insert(t,DL(e))}).next(()=>({documents:n,Jn:i}))}zn(t,e,n){if(e.isEmpty())return gk.resolve();let i=new BD(eR);e.forEach(t=>i=i.add(t));const r=IDBKeyRange.bound(XL(i.first()),XL(i.last())),s=i.getIterator();let o=s.getNext();return JL(t).Z({index:"documentKeyIndex",range:r},(t,e,i)=>{const r=nk.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&eR(o,r)<0;)n(o,null),o=s.getNext();o&&o.isEqual(r)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?i.j(XL(o)):i.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(t,e,n){const i=[e.popLast().toArray(),e.lastSegment(),MO(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],r=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return JL(t).W(IDBKeyRange.bound(i,r,!0)).next(t=>{let e=iN();for(const n of t){const t=this.jn(nk.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);e=e.insert(t.key,t)}return e})}getAllFromCollectionGroup(t,e,n,i){let r=iN();const s=tR(e,n),o=tR(e,ck.max());return JL(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(t,e,n)=>{const s=this.jn(nk.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);r=r.insert(s.key,s),r.size===i&&n.done()}).next(()=>r)}newChangeBuffer(t){return new QL(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(t=>t.byteSize)}getMetadata(t){return YL(t).get("remoteDocumentGlobalKey").next(t=>(NA(!!t),t))}Qn(t,e){return YL(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const t=function(t,e){let n;if(e.document)n=UN(t.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=nk.fromSegments(e.noDocument.path),i=BO(e.noDocument.readTime);n=$D.newNoDocument(t,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return PA();{const t=nk.fromSegments(e.unknownDocument.path),i=BO(e.unknownDocument.version);n=$D.newUnknownDocument(t,i)}}return e.readTime&&n.setReadTime(function(t){const e=new QA(t[0],t[1]);return YA.fromTimestamp(e)}(e.readTime)),n}(this.yt,e);if(!t.isNoDocument()||!t.version.isEqual(YA.min()))return t}return $D.newInvalidDocument(t)}}function KL(t){return new GL(t)}class QL extends WL{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new eN(t=>t.toString(),(t,e)=>t.isEqual(e))}applyChanges(t){const e=[];let n=0,i=new BD((t,e)=>WA(t.canonicalString(),e.canonicalString()));return this.changes.forEach((r,s)=>{const o=this.Xn.get(r);if(e.push(this.Yn.removeEntry(t,r,o.readTime)),s.isValidDocument()){const a=FO(this.Yn.yt,s);i=i.add(r.path.popLast()),n+=DL(a)-o.size,e.push(this.Yn.addEntry(t,r,a))}else if(n-=o.size,this.trackRemovals){const n=FO(this.Yn.yt,s.convertToNoDocument(YA.min()));e.push(this.Yn.addEntry(t,r,n))}}),i.forEach(n=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,n))}),e.push(this.Yn.updateMetadata(t,n)),gk.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(t=>(this.Xn.set(e,{size:t.size,readTime:t.document.readTime}),t.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:t,Jn:e})=>(e.forEach((e,n)=>{this.Xn.set(e,{size:n,readTime:t.get(e).readTime})}),t))}}function YL(t){return DO(t,"remoteDocumentGlobal")}function JL(t){return DO(t,"remoteDocumentsV14")}function XL(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tR(t,e){const n=e.documentKey.path.toArray();return[t,MO(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eR(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=WA(n[s],i[s]),r)return r;return r=WA(n.length,i.length),r||(r=WA(n[n.length-2],i[i.length-2]),r||WA(n[n.length-1],i[i.length-1]))}class nR{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class iR{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(t=>(null!==n&&jP(n.mutation,t,qD.empty(),QA.now()),t))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.getLocalViewOfDocuments(t,e,dN()).next(()=>e))}getLocalViewOfDocuments(t,e,n=dN()){const i=aN();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(t=>{let e=sN();return t.forEach((t,n)=>{e=e.insert(t,n.overlayedDocument)}),e}))}getOverlayedDocuments(t,e){const n=aN();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,dN()))}populateOverlays(t,e,n){const i=[];return n.forEach(t=>{e.has(t)||i.push(t)}),this.documentOverlayCache.getOverlays(t,i).next(t=>{t.forEach((t,n)=>{e.set(t,n)})})}computeViews(t,e,n,i){let r=iN();const s=lN(),o=lN();return e.forEach((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof ZP)?r=r.insert(e.key,e):void 0!==o&&(s.set(e.key,o.mutation.getFieldMask()),jP(o.mutation,e,o.mutation.getFieldMask(),QA.now()))}),this.recalculateAndSaveOverlays(t,r).next(t=>(t.forEach((t,e)=>s.set(t,e)),e.forEach((t,e)=>{var n;return o.set(t,new nR(e,null!==(n=s.get(t))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(t,e){const n=lN();let i=new FD((t,e)=>t-e),r=dN();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>{for(const r of t)r.keys().forEach(t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||qD.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||dN()).add(t);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,u=i.value,l=uN();u.forEach(t=>{if(!r.has(t)){const i=VP(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}}),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return gk.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.recalculateAndSaveOverlays(t,e))}getDocumentsMatchingQuery(t,e,n){return nk.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):oP(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n);var i}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):gk.resolve(aN());let o=-1,a=r;return s.next(e=>gk.forEach(e,(e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?gk.resolve():this.remoteDocumentCache.getEntry(t,e).next(t=>{a=a.insert(e,t)}))).next(()=>this.populateOverlays(t,e,r)).next(()=>this.computeViews(t,a,e,dN())).next(t=>({batchId:o,changes:oN(t)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nk(e)).next(t=>{let e=sN();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let r=sN();return this.indexManager.getCollectionParents(t,i).next(s=>gk.forEach(s,s=>{const o=(a=e,u=s.child(i),new tP(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));var a,u;return this.getDocumentsMatchingCollectionQuery(t,o,n).next(t=>{t.forEach((t,e)=>{r=r.insert(t,e)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.remoteDocumentCache.getAllFromCollection(t,e.path,n).next(r=>(i=r,this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId))).next(t=>{t.forEach((t,e)=>{const n=e.getKey();null===i.get(n)&&(i=i.insert(n,$D.newInvalidDocument(n)))});let n=sN();return i.forEach((i,r)=>{const s=t.get(i);void 0!==s&&jP(s.mutation,r,qD.empty(),QA.now()),pP(e,r)&&(n=n.insert(i,r))}),n})}}class rR{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return gk.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var n;return this.Zn.set(e.id,{id:(n=e).id,version:n.version,createTime:PN(n.createTime)}),gk.resolve()}getNamedQuery(t,e){return gk.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(n=e).name,query:zO(n.bundledQuery),readTime:PN(n.readTime)}),gk.resolve();var n}}class sR{constructor(){this.overlays=new FD(nk.comparator),this.es=new Map}getOverlay(t,e){return gk.resolve(this.overlays.get(e))}getOverlays(t,e){const n=aN();return gk.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((n,i)=>{this.oe(t,e,i)}),gk.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.es.get(n);return void 0!==i&&(i.forEach(t=>this.overlays=this.overlays.remove(t)),this.es.delete(n)),gk.resolve()}getOverlaysForCollection(t,e,n){const i=aN(),r=e.length+1,s=new nk(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return gk.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new FD((t,e)=>t-e);const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=aN(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=aN(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((t,e)=>o.set(t,e)),!(o.size()>=i)););return gk.resolve(o)}oe(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.es.get(i.largestBatchId).delete(n.key);this.es.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new OO(e,n));let r=this.es.get(e);void 0===r&&(r=dN(),this.es.set(e,r)),this.es.set(e,r.add(n.key))}}class oR{constructor(){this.ns=new BD(aR.ss),this.rs=new BD(aR.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const n=new aR(t,e);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.cs(new aR(t,e))}hs(t,e){t.forEach(t=>this.removeReference(t,e))}ls(t){const e=new nk(new XA([])),n=new aR(e,t),i=new aR(e,t+1),r=[];return this.rs.forEachInRange([n,i],t=>{this.cs(t),r.push(t.key)}),r}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new nk(new XA([])),n=new aR(e,t),i=new aR(e,t+1);let r=dN();return this.rs.forEachInRange([n,i],t=>{r=r.add(t.key)}),r}containsKey(t){const e=new aR(t,0),n=this.ns.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class aR{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return nk.comparator(t.key,e.key)||WA(t._s,e._s)}static os(t,e){return WA(t._s,e._s)||nk.comparator(t.key,e.key)}}class uR{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new BD(aR.ss)}checkEmpty(t){return gk.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.ws;this.ws++;const s=new PO(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.gs=this.gs.add(new aR(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return gk.resolve(s)}lookupMutationBatch(t,e){return gk.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.ps(e+1),i=n<0?0:n;return gk.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return gk.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return gk.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new aR(e,0),i=new aR(e,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([n,i],t=>{const e=this.ys(t._s);r.push(e)}),gk.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new BD(WA);return e.forEach(t=>{const e=new aR(t,0),i=new aR(t,Number.POSITIVE_INFINITY);this.gs.forEachInRange([e,i],t=>{n=n.add(t._s)})}),gk.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;nk.isDocumentKey(r)||(r=r.child(""));const s=new aR(new nk(r),0);let o=new BD(WA);return this.gs.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t._s)),!0)},s),gk.resolve(this.Is(o))}Is(t){const e=[];return t.forEach(t=>{const n=this.ys(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){NA(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return gk.forEach(e.mutations,i=>{const r=new aR(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.gs=n})}An(t){}containsKey(t,e){const n=new aR(e,0),i=this.gs.firstAfterOrEqual(n);return gk.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return gk.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class lR{constructor(t){this.Es=t,this.docs=new FD(nk.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Es(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return gk.resolve(n?n.document.mutableCopy():$D.newInvalidDocument(e))}getEntries(t,e){let n=iN();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():$D.newInvalidDocument(t))}),gk.resolve(n)}getAllFromCollection(t,e,n){let i=iN();const r=new nk(e.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:t,value:{document:r}}=s.getNext();if(!e.isPrefixOf(t.path))break;t.path.length>e.length+1||hk(lk(r),n)<=0||(i=i.insert(r.key,r.mutableCopy()))}return gk.resolve(i)}getAllFromCollectionGroup(t,e,n,i){PA()}As(t,e){return gk.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new cR(this)}getSize(t){return gk.resolve(this.size)}}class cR extends WL{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.Yn.addEntry(t,i)):this.Yn.removeEntry(n)}),gk.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class hR{constructor(t){this.persistence=t,this.Rs=new eN(t=>GD(t),KD),this.lastRemoteSnapshotVersion=YA.min(),this.highestTargetId=0,this.bs=0,this.Ps=new oR,this.targetCount=0,this.vs=FL.Pn()}forEachTarget(t,e){return this.Rs.forEach((t,n)=>e(n)),gk.resolve()}getLastRemoteSnapshotVersion(t){return gk.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gk.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),gk.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.bs&&(this.bs=e),gk.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new FL(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,gk.resolve()}updateTargetData(t,e){return this.Dn(e),gk.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,gk.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Rs.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Rs.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),gk.waitFor(r).next(()=>i)}getTargetCount(t){return gk.resolve(this.targetCount)}getTargetData(t,e){const n=this.Rs.get(e)||null;return gk.resolve(n)}addMatchingKeys(t,e,n){return this.Ps.us(e,n),gk.resolve()}removeMatchingKeys(t,e,n){this.Ps.hs(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(e=>{r.push(i.markPotentiallyOrphaned(t,e))}),gk.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),gk.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Ps.ds(e);return gk.resolve(n)}containsKey(t,e){return gk.resolve(this.Ps.containsKey(e))}}class dR{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new Ak(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new hR(this),this.indexManager=new yL,this.remoteDocumentCache=new lR(t=>this.referenceDelegate.xs(t)),this.yt=new RO(e),this.Ns=new rR(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new sR,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Vs[t.toKey()];return n||(n=new uR(e,this.referenceDelegate),this.Vs[t.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,n){xA("MemoryPersistence","Starting transaction:",t);const i=new fR(this.Ss.next());return this.referenceDelegate.ks(),n(i).next(t=>this.referenceDelegate.Os(i).next(()=>t)).toPromise().then(t=>(i.raiseOnCommittedEvent(),t))}Ms(t,e){return gk.or(Object.values(this.Vs).map(n=>()=>n.containsKey(t,e)))}}class fR extends fk{constructor(t){super(),this.currentSequenceNumber=t}}class pR{constructor(t){this.persistence=t,this.Fs=new oR,this.$s=null}static Bs(t){return new pR(t)}get Ls(){if(this.$s)return this.$s;throw PA()}addReference(t,e,n){return this.Fs.addReference(n,e),this.Ls.delete(n.toString()),gk.resolve()}removeReference(t,e,n){return this.Fs.removeReference(n,e),this.Ls.add(n.toString()),gk.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),gk.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(t=>this.Ls.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.Ls.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gk.forEach(this.Ls,n=>{const i=nk.fromPath(n);return this.qs(t,i).next(t=>{t||e.removeEntry(i,YA.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.qs(t,e).next(t=>{t?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}qs(t,e){return gk.or([()=>gk.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class mR{constructor(t){this.yt=t}$(t,e,n,i){const r=new _k("createOrUpgrade",e);var s;n<1&&i>=1&&(t.createObjectStore("owner"),(s=t).createObjectStore("mutationQueues",{keyPath:"userId"}),s.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oO,{unique:!0}),s.createObjectStore("documentMutations"),gR(t),function(t){t.createObjectStore("remoteDocuments")}(t));let o=gk.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),gR(t)),o=o.next(()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:YA.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(r))),n<4&&i>=4&&(0!==n&&(o=o.next(()=>function(t,e){return e.store("mutations").W().next(n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oO,{unique:!0});const i=e.store("mutations"),r=n.map(t=>i.put(t));return gk.waitFor(r)})}(t,r))),o=o.next(()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),n<5&&i>=5&&(o=o.next(()=>this.Us(r))),n<6&&i>=6&&(o=o.next(()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(r)))),n<7&&i>=7&&(o=o.next(()=>this.Gs(r))),n<8&&i>=8&&(o=o.next(()=>this.Qs(t,r))),n<9&&i>=9&&(o=o.next(()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)})),n<10&&i>=10&&(o=o.next(()=>this.js(r))),n<11&&i>=11&&(o=o.next(()=>{(function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&i>=12&&(o=o.next(()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:bO});e.createIndex("collectionPathOverlayIndex",CO,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",TO,{unique:!1})}(t)})),n<13&&i>=13&&(o=o.next(()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:cO});e.createIndex("documentKeyIndex",hO),e.createIndex("collectionGroupIndex",dO)}(t)).next(()=>this.Ws(t,r)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(o=o.next(()=>this.zs(t,r))),n<15&&i>=15&&(o=o.next(()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:_O}).createIndex("sequenceNumberIndex",yO,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:vO}).createIndex("documentKeyIndex",wO,{unique:!1})}(t))),o}Ks(t){let e=0;return t.store("remoteDocuments").Z((t,n)=>{e+=DL(n)}).next(()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Us(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.W().next(e=>gk.forEach(e,e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",i).next(n=>gk.forEach(n,n=>{NA(n.userId===e.userId);const i=jO(this.yt,n);return kL(t,e.userId,i).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(t=>{const i=[];return n.Z((n,r)=>{const s=new XA(n),o=[0,nO(s)];i.push(e.get(o).next(n=>n?gk.resolve():e.put({targetId:0,path:nO(s),sequenceNumber:t.highestListenSequenceNumber})))}).next(()=>gk.waitFor(i))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:gO});const n=e.store("collectionParents"),i=new vL,r=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:nO(i)})}};return e.store("remoteDocuments").Z({X:!0},(t,e)=>{const n=new XA(t);return r(n.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([t,e,n],i)=>{const s=sO(e);return r(s.popLast())}))}js(t){const e=t.store("targets");return e.Z((t,n)=>{const i=UO(n),r=qO(this.yt,i);return e.put(r)})}Ws(t,e){const n=e.store("remoteDocuments"),i=[];return n.Z((t,n)=>{const r=e.store("remoteDocumentsV14"),s=(o=n,o.document?new nk(XA.fromString(o.document.name).popFirst(5)):o.noDocument?nk.fromSegments(o.noDocument.path):o.unknownDocument?nk.fromSegments(o.unknownDocument.path):PA()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(a))}).next(()=>gk.waitFor(i))}zs(t,e){const n=e.store("mutations"),i=KL(this.yt),r=new dR(pR.Bs,this.yt.ie);return n.W().next(t=>{const n=new Map;return t.forEach(t=>{var e;let i=null!==(e=n.get(t.userId))&&void 0!==e?e:dN();jO(this.yt,t).keys().forEach(t=>i=i.add(t)),n.set(t.userId,i)}),gk.forEach(n,(t,n)=>{const s=new TA(n),o=QO.re(this.yt,s),a=r.getIndexManager(s),u=PL.re(s,this.yt,a,r.referenceDelegate);return new iR(i,u,o,a).recalculateAndSaveOverlaysForDocumentKeys(new kO(e,Ak.at),t).next()})})}}function gR(t){t.createObjectStore("targetDocuments",{keyPath:pO}).createIndex("documentTargetsIndex",mO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fO,{unique:!0}),t.createObjectStore("targetGlobal")}const _R="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yR{constructor(t,e,n,i,r,s,o,a,u,l,c=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Hs=r,this.window=s,this.document=o,this.Js=u,this.Ys=l,this.Xs=c,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=t=>Promise.resolve(),!yR.C())throw new RA(LA.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $L(this,i),this.ii=e+"main",this.yt=new RO(a),this.ri=new yk(this.ii,this.Xs,new mR(this.yt)),this.Cs=new ML(this.referenceDelegate,this.yt),this.remoteDocumentCache=KL(this.yt),this.Ns=new WO,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&AA("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new RA(LA.FAILED_PRECONDITION,_R);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new Ak(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var n=(0,Od.Z)(function*(n){if(e.started)return t(n)});return function(t){return n.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,Od.Z)(function*(e){null===e.newVersion&&(yield t())});return function(t){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,Od.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>wR(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(bk(t))return xA("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return xA("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return vR(t).get("owner").next(t=>gk.resolve(this.mi(t)))}gi(t){return wR(t).delete(this.clientId)}yi(){var t=this;return(0,Od.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const n=DO(e,"clientMetadata");return n.W().next(e=>{const i=t.Ii(e,18e5),r=e.filter(t=>-1===i.indexOf(t));return gk.forEach(r,t=>n.delete(t.clientId)).next(()=>r)})}).catch(()=>[]);if(t.oi)for(const n of e)t.oi.removeItem(t.Ti(n.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?gk.resolve(!0):vR(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new RA(LA.FAILED_PRECONDITION,_R);return!1}}return!(!this.networkEnabled||!this.inForeground)||wR(t).W().next(t=>void 0===this.Ii(t,5e3).find(t=>{if(this.clientId!==t.clientId){const e=!this.inForeground&&t.inForeground,n=this.networkEnabled===t.networkEnabled;if(!this.networkEnabled&&t.networkEnabled||e&&n)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xA("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var t=this;return(0,Od.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new kO(e,Ak.at);return t._i(n).next(()=>t.gi(n))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(t=>this.pi(t.updateTimeMs,e)&&!this.Ei(t.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>wR(t).W().next(t=>this.Ii(t,18e5).map(t=>t.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return PL.re(t,this.yt,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new bL(t,this.yt.ie.databaseId)}getDocumentOverlayCache(t){return QO.re(this.yt,t)}getBundleCache(){return this.Ns}runTransaction(t,e,n){xA("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",r=15===(s=this.Xs)?AO:14===s?xO:13===s?SO:12===s?IO:11===s?EO:void PA();var s;let o;return this.ri.runTransaction(t,i,r,i=>(o=new kO(i,this.Ss?this.Ss.next():Ak.at),"readwrite-primary"===e?this.fi(o).next(t=>!!t||this.di(o)).next(e=>{if(!e)throw AA(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new RA(LA.FAILED_PRECONDITION,dk);return n(o)}).next(t=>this.wi(o).next(()=>t)):this.Vi(o).next(()=>n(o)))).then(t=>(o.raiseOnCommittedEvent(),t))}Vi(t){return vR(t).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new RA(LA.FAILED_PRECONDITION,_R)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vR(t).put("owner",e)}static C(){return yk.C()}_i(t){const e=vR(t);return e.get("owner").next(t=>this.mi(t)?(xA("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):gk.resolve())}pi(t,e){const n=Date.now();return!(t<n-e||t>n&&(AA(`Detected an update time that is in the future: ${t} > ${n}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Rd.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const n=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return xA("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return AA("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){AA("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(t){}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vR(t){return DO(t,"owner")}function wR(t){return DO(t,"clientMetadata")}function bR(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class CR{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Si=n,this.Di=i}static Ci(t,e){let n=dN(),i=dN();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new CR(t,e.fromCache,n,i)}}class TR{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,n,i){return this.ki(t,e).next(r=>r||this.Oi(t,e,i,n)).next(n=>n||this.Mi(t,e))}ki(t,e){if(iP(e))return gk.resolve(null);let n=uP(e);return this.indexManager.getIndexType(t,n).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=cP(e,null,"F"),n=uP(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{const r=dN(...i);return this.Ni.getDocuments(t,r).next(i=>this.indexManager.getMinOffset(t,n).next(n=>{const s=this.Fi(e,i);return this.$i(e,s,r,n.readTime)?this.ki(t,cP(e,null,"F")):this.Bi(t,s,e,n)}))})))}Oi(t,e,n,i){return iP(e)||i.isEqual(YA.min())?this.Mi(t,e):this.Ni.getDocuments(t,n).next(r=>{const s=this.Fi(e,r);return this.$i(e,s,n,i)?this.Mi(t,e):(SA()<=Md.in.DEBUG&&xA("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fP(e)),this.Bi(t,s,e,uk(i,-1)))})}Fi(t,e){let n=new BD(gP(t));return e.forEach((e,i)=>{pP(t,i)&&(n=n.add(i))}),n}$i(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Mi(t,e){return SA()<=Md.in.DEBUG&&xA("QueryEngine","Using full collection scan to execute query:",fP(e)),this.Ni.getDocumentsMatchingQuery(t,e,ck.min())}Bi(t,e,n,i){return this.Ni.getDocumentsMatchingQuery(t,n,i).next(t=>(e.forEach(e=>{t=t.insert(e.key,e)}),t))}}class ER{constructor(t,e,n,i){this.persistence=t,this.Li=e,this.yt=i,this.qi=new FD(WA),this.Ui=new eN(t=>GD(t),KD),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(n)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new iR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qi))}}function IR(t,e,n,i){return new ER(t,e,n,i)}function SR(t,e){return xR.apply(this,arguments)}function xR(){return xR=(0,Od.Z)(function*(t,e){const n=OA(t);return yield n.persistence.runTransaction("Handle user change","readonly",t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next(r=>(i=r,n.Qi(e),n.mutationQueue.getAllMutationBatches(t))).next(e=>{const r=[],s=[];let o=dN();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next(t=>({ji:t,removedBatchIds:r,addedBatchIds:s}))})})}),xR.apply(this,arguments)}function AR(t,e){const n=OA(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const i=e.batch.keys(),r=n.Gi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=gk.resolve();return s.forEach(t=>{o=o.next(()=>i.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);NA(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))})}),o.next(()=>t.mutationQueue.removeMutationBatch(e,r))}(n,t,e,r).next(()=>r.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=dN();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))).next(()=>n.localDocuments.getDocuments(t,i))})}function kR(t){const e=OA(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function DR(t,e){const n=OA(t),i=e.snapshotVersion;let r=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.qi;const o=[];e.targetChanges.forEach((s,a)=>{const u=r.get(a);if(!u)return;o.push(n.Cs.removeMatchingKeys(t,s.removedDocuments,a).next(()=>n.Cs.addMatchingKeys(t,s.addedDocuments,a)));let l=u.withSequenceNumber(t.currentSequenceNumber);var c,h,d;e.targetMismatches.has(a)?l=l.withResumeToken(Mk.EMPTY_BYTE_STRING,YA.min()).withLastLimboFreeSnapshotVersion(YA.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),h=l,d=s,(0===(c=u).resumeToken.approximateByteSize()||h.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size>0)&&o.push(n.Cs.updateTargetData(t,l))});let a=iN(),u=dN();if(e.documentUpdates.forEach(i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))}),o.push(PR(t,s,e.documentUpdates).next(t=>{a=t.Wi,u=t.zi})),!i.isEqual(YA.min())){const e=n.Cs.getLastRemoteSnapshotVersion(t).next(e=>n.Cs.setTargetsMetadata(t,t.currentSequenceNumber,i));o.push(e)}return gk.waitFor(o).next(()=>s.apply(t)).next(()=>n.localDocuments.getLocalViewOfDocuments(t,a,u)).next(()=>a)}).then(t=>(n.qi=r,t))}function PR(t,e,n){let i=dN(),r=dN();return n.forEach(t=>i=i.add(t)),e.getEntries(t,i).next(t=>{let i=iN();return n.forEach((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(YA.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):xA("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Wi:i,zi:r}})}function NR(t,e){const n=OA(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)))}function OR(t,e){const n=OA(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let i;return n.Cs.getTargetData(t,e).next(r=>r?(i=r,gk.resolve(i)):n.Cs.allocateTargetId(t).next(r=>(i=new LO(e,r,0,t.currentSequenceNumber),n.Cs.addTargetData(t,i).next(()=>i))))}).then(t=>{const i=n.qi.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(t.targetId,t),n.Ui.set(e,t.targetId)),t})}function LR(t,e,n){return RR.apply(this,arguments)}function RR(){return RR=(0,Od.Z)(function*(t,e,n){const i=OA(t),r=i.qi.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(o){if(!bk(o))throw o;xA("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.qi=i.qi.remove(e),i.Ui.delete(r.target)}),RR.apply(this,arguments)}function FR(t,e,n){const i=OA(t);let r=YA.min(),s=dN();return i.persistence.runTransaction("Execute query","readonly",t=>function(t,e,n){const i=OA(t),r=i.Ui.get(n);return void 0!==r?gk.resolve(i.qi.get(r)):i.Cs.getTargetData(e,n)}(i,t,uP(e)).next(e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>i.Li.getDocumentsMatchingQuery(t,e,n?r:YA.min(),n?s:dN())).next(t=>(BR(i,mP(e),t),{documents:t,Hi:s})))}function MR(t,e){const n=OA(t),i=OA(n.Cs),r=n.qi.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",t=>i.ne(t,e).next(t=>t?t.target:null))}function VR(t,e){const n=OA(t),i=n.Ki.get(e)||YA.min();return n.persistence.runTransaction("Get new document changes","readonly",t=>n.Gi.getAllFromCollectionGroup(t,e,uk(i,-1),Number.MAX_SAFE_INTEGER)).then(t=>(BR(n,e,t),t))}function BR(t,e,n){let i=t.Ki.get(e)||YA.min();n.forEach((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)}),t.Ki.set(e,i)}function jR(){return jR=(0,Od.Z)(function*(t,e,n,i){const r=OA(t);let s=dN(),o=iN();for(const c of n){const t=e.Ji(c.metadata.name);c.document&&(s=s.add(t));const n=e.Yi(c);n.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(t,n)}const a=r.Gi.newChangeBuffer({trackRemovals:!0}),u=yield OR(r,(l=i,uP(nP(XA.fromString(`__bundle__/docs/${l}`)))));var l;return r.persistence.runTransaction("Apply bundle documents","readwrite",t=>PR(t,a,o).next(e=>(a.apply(t),e)).next(e=>r.Cs.removeMatchingKeysForTargetId(t,u.targetId).next(()=>r.Cs.addMatchingKeys(t,s,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(t,e.Wi,e.zi)).next(()=>e.Wi)))}),jR.apply(this,arguments)}function UR(t,e){return qR.apply(this,arguments)}function qR(){return qR=(0,Od.Z)(function*(t,e,n=dN()){const i=yield OR(t,uP(zO(e.bundledQuery))),r=OA(t);return r.persistence.runTransaction("Save named query","readwrite",t=>{const s=PN(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.Ns.saveNamedQuery(t,e);const o=i.withResumeToken(Mk.EMPTY_BYTE_STRING,s);return r.qi=r.qi.insert(o.targetId,o),r.Cs.updateTargetData(t,o).next(()=>r.Cs.removeMatchingKeysForTargetId(t,i.targetId)).next(()=>r.Cs.addMatchingKeys(t,n,i.targetId)).next(()=>r.Ns.saveNamedQuery(t,e))})}),qR.apply(this,arguments)}function zR(t,e){return`firestore_clients_${t}_${e}`}function ZR(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function $R(t,e){return`firestore_targets_${t}_${e}`}class HR{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static Zi(t,e,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new RA(i.error.code,i.error.message))),s?new HR(t,e,i.state,r):(AA("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class WR{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Zi(t,e){const n=JSON.parse(e);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new RA(n.error.code,n.error.message))),r?new WR(t,n.state,i):(AA("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class GR{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=pN();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=Fk(n.activeTargetIds[s]),r=r.add(n.activeTargetIds[s]);return i?new GR(t,r):(AA("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class KR{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new KR(e.clientId,e.onlineState):(AA("SharedClientState",`Failed to parse online state: ${t}`),null)}}class QR{constructor(){this.activeTargetIds=pN()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class YR{constructor(t,e,n,i,r){this.window=t,this.Hs=e,this.persistenceKey=n,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new FD(WA),this.started=!1,this.cr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.ar=zR(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new QR),this.lr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Od.Z)(function*(){const e=yield t.syncEngine.vi();for(const i of e){if(i===t.sr)continue;const e=t.getItem(zR(t.persistenceKey,i));if(e){const n=GR.Zi(i,e);n&&(t.ur=t.ur.insert(n.clientId,n))}}t.gr();const n=t.storage.getItem(t.wr);if(n){const e=t.yr(n);e&&t.pr(e)}for(const i of t.cr)t.rr(i);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,n){this.Tr(t,e,n),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem($R(this.persistenceKey,t));if(n){const i=WR.Zi(t,n);i&&(e=i.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($R(this.persistenceKey,t))}updateQueryState(t,e,n){this.Rr(t,e,n)}handleUserChange(t,e,n){e.forEach(t=>{this.Er(t)}),this.currentUser=t,n.forEach(t=>{this.addPendingMutation(t)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return xA("SharedClientState","READ",t,e),e}setItem(t,e){xA("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){xA("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const n=t;if(n.storageArea===this.storage){if(xA("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void AA("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Od.Z)(function*(){if(e.started){if(null!==n.key)if(e.lr.test(n.key)){if(null==n.newValue){const t=e.vr(n.key);return e.Vr(t,null)}{const t=e.Sr(n.key,n.newValue);if(t)return e.Vr(t.clientId,t)}}else if(e.dr.test(n.key)){if(null!==n.newValue){const t=e.Dr(n.key,n.newValue);if(t)return e.Cr(t)}}else if(e._r.test(n.key)){if(null!==n.newValue){const t=e.Nr(n.key,n.newValue);if(t)return e.kr(t)}}else if(n.key===e.wr){if(null!==n.newValue){const t=e.yr(n.newValue);if(t)return e.pr(t)}}else if(n.key===e.hr){const t=function(t){let e=Ak.at;if(null!=t)try{const n=JSON.parse(t);NA("number"==typeof n),e=n}catch(n){AA("SharedClientState","Failed to read sequence number from WebStorage",n)}return e}(n.newValue);t!==Ak.at&&e.sequenceNumberHandler(t)}else if(n.key===e.mr){const t=e.Or(n.newValue);yield Promise.all(t.map(t=>e.syncEngine.Mr(t)))}}else e.cr.push(n)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,n){const i=new HR(this.currentUser,t,e,n),r=ZR(this.persistenceKey,this.currentUser,t);this.setItem(r,i.tr())}Er(t){const e=ZR(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,n){const i=$R(this.persistenceKey,t),r=new WR(t,e,n);this.setItem(i,r.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const n=this.vr(t);return GR.Zi(n,e)}Dr(t,e){const n=this.dr.exec(t),i=Number(n[1]);return HR.Zi(new TA(void 0!==n[2]?n[2]:null),i,e)}Nr(t,e){const n=this._r.exec(t),i=Number(n[1]);return WR.Zi(i,e)}yr(t){return KR.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,Od.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);xA("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const n=e?this.ur.insert(t,e):this.ur.remove(t),i=this.Ir(this.ur),r=this.Ir(n),s=[],o=[];return r.forEach(t=>{i.has(t)||s.push(t)}),i.forEach(t=>{r.has(t)||o.push(t)}),this.syncEngine.Br(s,o).then(()=>{this.ur=n})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=pN();return t.forEach((t,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class JR{constructor(){this.Lr=new QR,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,n){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new QR,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class XR{Ur(t){}shutdown(){}}class tF{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){xA("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){xA("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nF{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class iF extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,n,i,r){const s=this.ho(t,e);xA("RestConnection","Sending: ",s,n);const o={};return this.lo(o,i,r),this.fo(t,s,o,n).then(t=>(xA("RestConnection","Received: ",t),t),e=>{throw kA("RestConnection",`${t} failed with error: `,e,"url: ",s,"request:",n),e})}_o(t,e,n,i,r,s){return this.ao(t,e,n,i,r)}lo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+EA,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}ho(t,e){return`${this.oo}/v1/${e}:${eF[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,n,i){return new Promise((r,s)=>{const o=new bA;o.setWithCredentials(!0),o.listenOnce(gA.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case mA.NO_ERROR:const e=o.getResponseJson();xA("Connection","XHR received:",JSON.stringify(e)),r(e);break;case mA.TIMEOUT:xA("Connection",'RPC "'+t+'" timed out'),s(new RA(LA.DEADLINE_EXCEEDED,"Request time out"));break;case mA.HTTP_ERROR:const n=o.getStatus();if(xA("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){let t=o.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(LA).indexOf(e)>=0?e:LA.UNKNOWN}(e.status);s(new RA(t,e.message))}else s(new RA(LA.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new RA(LA.UNAVAILABLE,"Connection failed."));break;default:PA()}}finally{xA("Connection",'RPC "'+t+'" completed.')}});const a=JSON.stringify(i);o.send(e,"POST",a,n,15)})}wo(t,e,n){const i=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=fA(),s=pA(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new vA({})),this.lo(o.initMessageHeaders,e,n),o.encodeInitMessageHeaders=!0;const a=i.join("");xA("Connection","Creating WebChannel: "+a,o);const u=r.createWebChannel(a,o);let l=!1,c=!1;const h=new nF({Hr:t=>{c?xA("Connection","Not sending because WebChannel is closed:",t):(l||(xA("Connection","Opening WebChannel transport."),u.open(),l=!0),xA("Connection","WebChannel sending:",t),u.send(t))},Jr:()=>u.close()}),d=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(e){setTimeout(()=>{throw e},0)}})};return d(u,wA.EventType.OPEN,()=>{c||xA("Connection","WebChannel transport opened.")}),d(u,wA.EventType.CLOSE,()=>{c||(c=!0,xA("Connection","WebChannel transport closed"),h.io())}),d(u,wA.EventType.ERROR,t=>{c||(c=!0,kA("Connection","WebChannel transport errored:",t),h.io(new RA(LA.UNAVAILABLE,"The operation could not be completed")))}),d(u,wA.EventType.MESSAGE,t=>{var e;if(!c){const n=t.data[0];NA(!!n);const i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){xA("Connection","WebChannel received error:",r);const t=r.status;let e=function(t){const e=YP[t];if(void 0!==e)return tN(e)}(t),n=r.message;void 0===e&&(e=LA.INTERNAL,n="Unknown error status: "+t+" with message "+r.message),c=!0,h.io(new RA(e,n)),u.close()}else xA("Connection","WebChannel received:",n),h.ro(n)}}),d(s,_A.STAT_EVENT,t=>{t.stat===yA.PROXY?xA("Connection","Detected buffering proxy"):t.stat===yA.NOPROXY&&xA("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function rF(){return"undefined"!=typeof window?window:null}function sF(){return"undefined"!=typeof document?document:null}function oF(t){return new xN(t,!0)}class aF{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Hs=t,this.timerId=e,this.mo=n,this.yo=i,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,e-n);i>0&&xA("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class uF{constructor(t,e,n,i,r,s,o,a){this.Hs=t,this.vo=n,this.Vo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new aF(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Od.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,Od.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var n=this;return(0,Od.Z)(function*(){n.Lo(),n.qo(),n.xo.cancel(),n.So++,4!==t?n.xo.reset():e&&e.code===LA.RESOURCE_EXHAUSTED?(AA(e.toString()),AA("Using maximum backoff delay to prevent overloading the backend."),n.xo.Ao()):e&&e.code===LA.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Uo(),n.stream.close(),n.stream=null),n.state=t,yield n.listener.Zr(e)})()}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,n])=>{this.So===e&&this.Go(t,n)},e=>{t(()=>{const t=new RA(LA.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Qo(t)})})}Go(t,e){const n=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{n(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(t=>{n(()=>this.Qo(t))}),this.stream.onMessage(t=>{n(()=>this.onMessage(t))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,Od.Z)(function*(){t.state=0,t.start()}))}Qo(t){return xA("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():(xA("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lF extends uF{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.yt=r}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:PA(),s=e.targetChange.targetIds||[],o=function(t,e){return t.wt?(NA(void 0===e||"string"==typeof e),Mk.fromBase64String(e||"")):(NA(void 0===e||e instanceof Uint8Array),Mk.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(t){const e=void 0===t.code?LA.UNKNOWN:tN(t.code);return new RA(e,t.message||"")}(a);n=new vN(r,s,o,u||null)}else if("documentChange"in e){const i=e.documentChange,r=RN(t,i.document.name),s=PN(i.document.updateTime),o=i.document.createTime?PN(i.document.createTime):YA.min(),a=new zD({mapValue:{fields:i.document.fields}}),u=$D.newFoundDocument(r,s,o,a);n=new _N(i.targetIds||[],i.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const i=e.documentDelete,r=RN(t,i.document),s=i.readTime?PN(i.readTime):YA.min(),o=$D.newNoDocument(r,s);n=new _N([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=RN(t,i.document);n=new _N([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return PA();{const t=e.filter,i=new QP(t.count||0);n=new yN(t.targetId,i)}}var i;return n}(this.yt,t),n=function(t){if(!("targetChange"in t))return YA.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?YA.min():e.readTime?PN(e.readTime):YA.min()}(t);return this.listener.Wo(e,n)}zo(t){const e={};e.database=VN(this.yt),e.addTarget=function(t,e){let n;const i=e.target;return n=QD(i)?{documents:ZN(t,i)}:{query:$N(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=kN(t,e.resumeToken):e.snapshotVersion.compareTo(YA.min())>0&&(n.readTime=AN(t,e.snapshotVersion.toTimestamp())),n}(this.yt,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return PA()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Bo(e)}Ho(t){const e={};e.database=VN(this.yt),e.removeTarget=t,this.Bo(e)}}class cF extends uF{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.yt=r,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(NA(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function(t,e){return t&&t.length>0?(NA(void 0!==e),t.map(t=>function(t,e){let n=PN(t.updateTime?t.updateTime:e);return n.isEqual(YA.min())&&(n=PN(e)),new LP(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=PN(t.commitTime);return this.listener.Zo(n,e)}return NA(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=VN(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>qN(this.yt,t))};this.Bo(e)}}class hF extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.yt=i,this.nu=!1}su(){if(this.nu)throw new RA(LA.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.connection.ao(t,e,n,i,r)).catch(t=>{throw"FirebaseError"===t.name?(t.code===LA.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new RA(LA.UNKNOWN,t.toString())})}_o(t,e,n,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection._o(t,e,n,r,s,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===LA.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new RA(LA.UNKNOWN,t.toString())})}terminate(){this.nu=!0}}class dF{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(AA(e),this.ou=!1):xA("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class fF{constructor(t,e,n,i,r){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.Ur(t=>{n.enqueueAndForget((0,Od.Z)(function*(){var t;EF(s)&&(xA("RemoteStore","Restarting streams for network reachability change."),yield(t=(0,Od.Z)(function*(t){const e=OA(t);e._u.add(4),yield gF(e),e.gu.set("Unknown"),e._u.delete(4),yield pF(e)}),function(e){return t.apply(this,arguments)})(s))}))}),this.gu=new dF(n,i)}}function pF(t){return mF.apply(this,arguments)}function mF(){return mF=(0,Od.Z)(function*(t){if(EF(t))for(const e of t.wu)yield e(!0)}),mF.apply(this,arguments)}function gF(t){return _F.apply(this,arguments)}function _F(){return _F=(0,Od.Z)(function*(t){for(const e of t.wu)yield e(!1)}),_F.apply(this,arguments)}function yF(t,e){const n=OA(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),TF(n)?CF(n):XF(n).ko()&&wF(n,e))}function vF(t,e){const n=OA(t),i=XF(n);n.du.delete(e),i.ko()&&bF(n,e),0===n.du.size&&(i.ko()?i.Fo():EF(n)&&n.gu.set("Unknown"))}function wF(t,e){t.yu.Ot(e.targetId),XF(t).zo(e)}function bF(t,e){t.yu.Ot(e),XF(t).Ho(e)}function CF(t){t.yu=new bN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),XF(t).start(),t.gu.uu()}function TF(t){return EF(t)&&!XF(t).No()&&t.du.size>0}function EF(t){return 0===OA(t)._u.size}function IF(t){t.yu=void 0}function SF(t){return xF.apply(this,arguments)}function xF(){return xF=(0,Od.Z)(function*(t){t.du.forEach((e,n)=>{wF(t,e)})}),xF.apply(this,arguments)}function AF(t,e){return kF.apply(this,arguments)}function kF(){return kF=(0,Od.Z)(function*(t,e){IF(t),TF(t)?(t.gu.hu(e),CF(t)):t.gu.set("Unknown")}),kF.apply(this,arguments)}function DF(t,e,n){return PF.apply(this,arguments)}function PF(){return PF=(0,Od.Z)(function*(t,e,n){if(t.gu.set("Online"),e instanceof vN&&2===e.state&&e.cause)try{yield(i=(0,Od.Z)(function*(t,e){const n=e.cause;for(const i of e.targetIds)t.du.has(i)&&(yield t.remoteSyncer.rejectListen(i,n),t.du.delete(i),t.yu.removeTarget(i))}),function(t,e){return i.apply(this,arguments)})(t,e)}catch(i){xA("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield NF(t,i)}else if(e instanceof _N?t.yu.Kt(e):e instanceof yN?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(YA.min()))try{const e=yield kR(t.localStore);n.compareTo(e)>=0&&(yield function(t,e){const n=t.yu.Zt(e);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.du.get(i);r&&t.du.set(i,r.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(e=>{const n=t.du.get(e);if(!n)return;t.du.set(e,n.withResumeToken(Mk.EMPTY_BYTE_STRING,n.snapshotVersion)),bF(t,e);const i=new LO(n.target,e,1,n.sequenceNumber);wF(t,i)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n))}catch(i){xA("RemoteStore","Failed to raise snapshot:",i),yield NF(t,i)}var i}),PF.apply(this,arguments)}function NF(t,e,n){return OF.apply(this,arguments)}function OF(){return OF=(0,Od.Z)(function*(t,e,n){if(!bk(e))throw e;t._u.add(1),yield gF(t),t.gu.set("Offline"),n||(n=()=>kR(t.localStore)),t.asyncQueue.enqueueRetryable((0,Od.Z)(function*(){xA("RemoteStore","Retrying IndexedDB access"),yield n(),t._u.delete(1),yield pF(t)}))}),OF.apply(this,arguments)}function LF(t,e){return e().catch(n=>NF(t,n,e))}function RF(t){return FF.apply(this,arguments)}function FF(){return FF=(0,Od.Z)(function*(t){const e=OA(t),n=tM(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;MF(e);)try{const t=yield NR(e.localStore,i);if(null===t){0===e.fu.length&&n.Fo();break}i=t.batchId,VF(e,t)}catch(r){yield NF(e,r)}BF(e)&&jF(e)}),FF.apply(this,arguments)}function MF(t){return EF(t)&&t.fu.length<10}function VF(t,e){t.fu.push(e);const n=tM(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function BF(t){return EF(t)&&!tM(t).No()&&t.fu.length>0}function jF(t){tM(t).start()}function UF(t){return qF.apply(this,arguments)}function qF(){return qF=(0,Od.Z)(function*(t){tM(t).eu()}),qF.apply(this,arguments)}function zF(t){return ZF.apply(this,arguments)}function ZF(){return ZF=(0,Od.Z)(function*(t){const e=tM(t);for(const n of t.fu)e.Xo(n.mutations)}),ZF.apply(this,arguments)}function $F(t,e,n){return HF.apply(this,arguments)}function HF(){return HF=(0,Od.Z)(function*(t,e,n){const i=t.fu.shift(),r=NO.from(i,e,n);yield LF(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield RF(t)}),HF.apply(this,arguments)}function WF(t,e){return GF.apply(this,arguments)}function GF(){return GF=(0,Od.Z)(function*(t,e){var n;e&&tM(t).Yo&&(yield(n=(0,Od.Z)(function*(t,e){if(XP(n=e.code)&&n!==LA.ABORTED){const n=t.fu.shift();tM(t).Mo(),yield LF(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),yield RF(t)}var n}),function(t,e){return n.apply(this,arguments)})(t,e)),BF(t)&&jF(t)}),GF.apply(this,arguments)}function KF(t,e){return QF.apply(this,arguments)}function QF(){return QF=(0,Od.Z)(function*(t,e){const n=OA(t);n.asyncQueue.verifyOperationInProgress(),xA("RemoteStore","RemoteStore received new credentials");const i=EF(n);n._u.add(3),yield gF(n),i&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield pF(n)}),QF.apply(this,arguments)}function YF(t,e){return JF.apply(this,arguments)}function JF(){return JF=(0,Od.Z)(function*(t,e){const n=OA(t);e?(n._u.delete(2),yield pF(n)):e||(n._u.add(2),yield gF(n),n.gu.set("Unknown"))}),JF.apply(this,arguments)}function XF(t){return t.pu||(t.pu=function(t,e,n){const i=OA(t);return i.su(),new lF(e,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:SF.bind(null,t),Zr:AF.bind(null,t),Wo:DF.bind(null,t)}),t.wu.push(function(){var e=(0,Od.Z)(function*(e){e?(t.pu.Mo(),TF(t)?CF(t):t.gu.set("Unknown")):(yield t.pu.stop(),IF(t))});return function(t){return e.apply(this,arguments)}}())),t.pu}function tM(t){return t.Iu||(t.Iu=function(t,e,n){const i=OA(t);return i.su(),new cF(e,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:UF.bind(null,t),Zr:WF.bind(null,t),tu:zF.bind(null,t),Zo:$F.bind(null,t)}),t.wu.push(function(){var e=(0,Od.Z)(function*(e){e?(t.Iu.Mo(),yield RF(t)):(yield t.Iu.stop(),t.fu.length>0&&(xA("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))});return function(t){return e.apply(this,arguments)}}())),t.Iu}class eM{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new FA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new eM(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new RA(LA.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nM(t,e){if(AA("AsyncQueue",`${e}: ${t}`),bk(t))return new RA(LA.UNAVAILABLE,`${e}: ${t}`);throw t}class iM{constructor(t){this.comparator=t?(e,n)=>t(e,n)||nk.comparator(e.key,n.key):(t,e)=>nk.comparator(t.key,e.key),this.keyedMap=sN(),this.sortedSet=new FD(this.comparator)}static emptySet(t){return new iM(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof iM)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new iM;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class rM{constructor(){this.Tu=new FD(nk.comparator)}track(t){const e=t.doc.key,n=this.Tu.get(e);n?0!==t.type&&3===n.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==n.type?this.Tu=this.Tu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Tu=this.Tu.remove(e):1===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):PA():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,n)=>{t.push(n)}),t}}class sM{constructor(t,e,n,i,r,s,o,a,u){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach(t=>{s.push({type:0,doc:t})}),new sM(t,e,iM.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hP(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class oM{constructor(){this.Au=void 0,this.listeners=[]}}class aM{constructor(){this.queries=new eN(t=>dP(t),hP),this.onlineState="Unknown",this.Ru=new Set}}function uM(t,e){return lM.apply(this,arguments)}function lM(){return lM=(0,Od.Z)(function*(t,e){const n=OA(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new oM),r)try{s.Au=yield n.onListen(i)}catch(o){const t=nM(o,`Initialization of query '${fP(e.query)}' failed`);return void e.onError(t)}n.queries.set(i,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&pM(n)}),lM.apply(this,arguments)}function cM(t,e){return hM.apply(this,arguments)}function hM(){return hM=(0,Od.Z)(function*(t,e){const n=OA(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}),hM.apply(this,arguments)}function dM(t,e){const n=OA(t);let i=!1;for(const r of e){const t=n.queries.get(r.query);if(t){for(const e of t.listeners)e.Pu(r)&&(i=!0);t.Au=r}}i&&pM(n)}function fM(t,e,n){const i=OA(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function pM(t){t.Ru.forEach(t=>{t.next()})}class mM{constructor(t,e,n){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new sM(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=sM.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class gM{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class _M{constructor(t){this.yt=t}Ji(t){return RN(this.yt,t)}Yi(t){return t.metadata.exists?UN(this.yt,t.document,!1):$D.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return PN(t)}}class yM{constructor(t,e,n){this.Mu=t,this.localStore=e,this.yt=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vM(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const n=XA.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,n=new _M(this.yt);for(const i of t)if(i.metadata.queries){const t=n.Ji(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||dN()).add(t);e.set(n,i)}}return e}complete(){var t=this;return(0,Od.Z)(function*(){const e=yield function(t,e,n,i){return jR.apply(this,arguments)}(t.localStore,new _M(t.yt),t.documents,t.Mu.id),n=t.$u(t.documents);for(const i of t.queries)yield UR(t.localStore,i,n.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function vM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class wM{constructor(t){this.key=t}}class bM{constructor(t){this.key=t}}class CM{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=dN(),this.mutatedKeys=dN(),this.Gu=gP(t),this.Qu=new iM(this.Gu)}get ju(){return this.qu}Wu(t,e){const n=e?e.zu:new rM,i=e?e.Qu:this.Qu;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((t,e)=>{const l=i.get(t),c=pP(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Hu(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Gu(c,a)>0||u&&this.Gu(c,u)<0)&&(o=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(o=!0)),f&&(c?(s=s.add(c),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Qu:s,zu:n,$i:o,mutatedKeys:r}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const r=t.zu.Eu();r.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return PA()}};return n(t)-n(e)}(t.type,e.type)||this.Gu(t.doc,e.doc)),this.Ju(n);const s=e?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.Uu;return this.Uu=o,0!==r.length||a?{snapshot:new sM(this.query,t.Qu,i,r,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=dN(),this.Qu.forEach(t=>{this.Zu(t.key)&&(this.Ku=this.Ku.add(t.key))});const e=[];return t.forEach(t=>{this.Ku.has(t)||e.push(new bM(t))}),this.Ku.forEach(n=>{t.has(n)||e.push(new wM(n))}),e}tc(t){this.qu=t.Hi,this.Ku=dN();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return sM.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class TM{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class EM{constructor(t){this.key=t,this.nc=!1}}class IM{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new eN(t=>dP(t),hP),this.rc=new Map,this.oc=new Set,this.uc=new FD(nk.comparator),this.cc=new Map,this.ac=new oR,this.hc={},this.lc=new Map,this.fc=FL.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function SM(t,e){return xM.apply(this,arguments)}function xM(){return xM=(0,Od.Z)(function*(t,e){const n=gV(t);let i,r;const s=n.ic.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const t=yield OR(n.localStore,uP(e));n.isPrimaryClient&&yF(n.remoteStore,t);const s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=yield AM(n,e,i,"current"===s,t.resumeToken)}return r}),xM.apply(this,arguments)}function AM(t,e,n,i,r){return kM.apply(this,arguments)}function kM(){return kM=(0,Od.Z)(function*(t,e,n,i,r){t._c=(e,n,i)=>{return(r=(0,Od.Z)(function*(t,e,n,i){let r=e.view.Wu(n);r.$i&&(r=yield FR(t.localStore,e.query,!1).then(({documents:t})=>e.view.Wu(t,r)));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return WM(t,e.targetId,o.Xu),o.snapshot}),function(t,e,n,i){return r.apply(this,arguments)})(t,e,n,i);var r};const s=yield FR(t.localStore,e,!0),o=new CM(e,s.Hi),a=o.Wu(s.documents),u=gN.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,u);WM(t,n,l.Xu);const c=new TM(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),l.snapshot}),kM.apply(this,arguments)}function DM(t,e){return PM.apply(this,arguments)}function PM(){return PM=(0,Od.Z)(function*(t,e){const n=OA(t),i=n.ic.get(e),r=n.rc.get(i.targetId);if(r.length>1)return n.rc.set(i.targetId,r.filter(t=>!hP(t,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield LR(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),vF(n.remoteStore,i.targetId),$M(n,i.targetId)}).catch(pk))):($M(n,i.targetId),yield LR(n.localStore,i.targetId,!0))}),PM.apply(this,arguments)}function NM(){return NM=(0,Od.Z)(function*(t,e,n){const i=_V(t);try{const t=yield function(t,e){const n=OA(t),i=QA.now(),r=e.reduce((t,e)=>t.add(e.key),dN());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>{let a=iN(),u=dN();return n.Gi.getEntries(t,r).next(t=>{a=t,a.forEach((t,e)=>{e.isValidDocument()||(u=u.add(t))})}).next(()=>n.localDocuments.getOverlayedDocuments(t,a)).next(r=>{s=r;const o=[];for(const t of e){const e=UP(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new ZP(t.key,e,ZD(e.value.mapValue),RP.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)}).next(e=>{o=e;const i=e.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)})}).then(()=>({batchId:o.batchId,changes:oN(s)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.hc[t.currentUser.toKey()];i||(i=new FD(WA)),i=i.insert(e,n),t.hc[t.currentUser.toKey()]=i}(i,t.batchId,n),yield QM(i,t.changes),yield RF(i.remoteStore)}catch(r){const t=nM(r,"Failed to persist write");n.reject(t)}}),NM.apply(this,arguments)}function OM(t,e){return LM.apply(this,arguments)}function LM(){return LM=(0,Od.Z)(function*(t,e){const n=OA(t);try{const t=yield DR(n.localStore,e);e.targetChanges.forEach((t,e)=>{const i=n.cc.get(e);i&&(NA(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.nc=!0:t.modifiedDocuments.size>0?NA(i.nc):t.removedDocuments.size>0&&(NA(i.nc),i.nc=!1))}),yield QM(n,t,e)}catch(i){yield pk(i)}}),LM.apply(this,arguments)}function RM(t,e,n){const i=OA(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ic.forEach((n,i)=>{const r=i.view.bu(e);r.snapshot&&t.push(r.snapshot)}),function(t,e){const n=OA(t);n.onlineState=e;let i=!1;n.queries.forEach((t,n)=>{for(const r of n.listeners)r.bu(e)&&(i=!0)}),i&&pM(n)}(i.eventManager,e),t.length&&i.sc.Wo(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function FM(t,e,n){return MM.apply(this,arguments)}function MM(){return MM=(0,Od.Z)(function*(t,e,n){const i=OA(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.cc.get(e),s=r&&r.key;if(s){let t=new FD(nk.comparator);t=t.insert(s,$D.newNoDocument(s,YA.min()));const n=dN().add(s),r=new mN(YA.min(),new Map,new BD(WA),t,n);yield OM(i,r),i.uc=i.uc.remove(s),i.cc.delete(e),KM(i)}else yield LR(i.localStore,e,!1).then(()=>$M(i,e,n)).catch(pk)}),MM.apply(this,arguments)}function VM(t,e){return BM.apply(this,arguments)}function BM(){return BM=(0,Od.Z)(function*(t,e){const n=OA(t),i=e.batch.batchId;try{const t=yield AR(n.localStore,e);ZM(n,i,null),zM(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield QM(n,t)}catch(r){yield pk(r)}}),BM.apply(this,arguments)}function jM(t,e,n){return UM.apply(this,arguments)}function UM(){return UM=(0,Od.Z)(function*(t,e,n){const i=OA(t);try{const t=yield function(t,e){const n=OA(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next(e=>(NA(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e))).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i)).next(()=>n.localDocuments.getDocuments(t,i))})}(i.localStore,e);ZM(i,e,n),zM(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield QM(i,t)}catch(r){yield pk(r)}}),UM.apply(this,arguments)}function qM(){return qM=(0,Od.Z)(function*(t,e){const n=OA(t);EF(n.remoteStore)||xA("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=yield function(t){const e=OA(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t))}(n.localStore);if(-1===t)return void e.resolve();const i=n.lc.get(t)||[];i.push(e),n.lc.set(t,i)}catch(i){const t=nM(i,"Initialization of waitForPendingWrites() operation failed");e.reject(t)}}),qM.apply(this,arguments)}function zM(t,e){(t.lc.get(e)||[]).forEach(t=>{t.resolve()}),t.lc.delete(e)}function ZM(t,e,n){const i=OA(t);let r=i.hc[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.hc[i.currentUser.toKey()]=r}}function $M(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.rc.get(e))t.ic.delete(i),n&&t.sc.wc(i,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(e=>{t.ac.containsKey(e)||HM(t,e)})}function HM(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);null!==n&&(vF(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),KM(t))}function WM(t,e,n){for(const i of n)i instanceof wM?(t.ac.addReference(i.key,e),GM(t,i)):i instanceof bM?(xA("SyncEngine","Document no longer in limbo: "+i.key),t.ac.removeReference(i.key,e),t.ac.containsKey(i.key)||HM(t,i.key)):PA()}function GM(t,e){const n=e.key,i=n.path.canonicalString();t.uc.get(n)||t.oc.has(i)||(xA("SyncEngine","New document in limbo: "+n),t.oc.add(i),KM(t))}function KM(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new nk(XA.fromString(e)),i=t.fc.next();t.cc.set(i,new EM(n)),t.uc=t.uc.insert(n,i),yF(t.remoteStore,new LO(uP(nP(n.path)),i,2,Ak.at))}}function QM(t,e,n){return YM.apply(this,arguments)}function YM(){return YM=(0,Od.Z)(function*(t,e,n){const i=OA(t),r=[],s=[],o=[];var a;i.ic.isEmpty()||(i.ic.forEach((t,a)=>{o.push(i._c(a,e,n).then(t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=CR.Ci(a.targetId,t);s.push(e)}}))}),yield Promise.all(o),i.sc.Wo(r),yield(a=(0,Od.Z)(function*(t,e){const n=OA(t);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>gk.forEach(e,e=>gk.forEach(e.Si,i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i)).next(()=>gk.forEach(e.Di,i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))}catch(i){if(!bk(i))throw i;xA("LocalStore","Failed to update sequence numbers: "+i)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.qi.get(t),i=e.withLastLimboFreeSnapshotVersion(e.snapshotVersion);n.qi=n.qi.insert(t,i)}}}),function(t,e){return a.apply(this,arguments)})(i.localStore,s))}),YM.apply(this,arguments)}function JM(t,e){return XM.apply(this,arguments)}function XM(){return XM=(0,Od.Z)(function*(t,e){const n=OA(t);if(!n.currentUser.isEqual(e)){xA("SyncEngine","User change. New user:",e.toKey());const t=yield SR(n.localStore,e);n.currentUser=e,(i=n).lc.forEach(t=>{t.forEach(t=>{t.reject(new RA(LA.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),yield QM(n,t.ji)}var i}),XM.apply(this,arguments)}function tV(t,e){const n=OA(t),i=n.cc.get(e);if(i&&i.nc)return dN().add(i.key);{let t=dN();const i=n.rc.get(e);if(!i)return t;for(const e of i){const i=n.ic.get(e);t=t.unionWith(i.view.ju)}return t}}function eV(t,e){return nV.apply(this,arguments)}function nV(){return nV=(0,Od.Z)(function*(t,e){const n=OA(t),i=yield FR(n.localStore,e.query,!0),r=e.view.tc(i);return n.isPrimaryClient&&WM(n,e.targetId,r.Xu),r}),nV.apply(this,arguments)}function iV(t,e){return rV.apply(this,arguments)}function rV(){return rV=(0,Od.Z)(function*(t,e){const n=OA(t);return VR(n.localStore,e).then(t=>QM(n,t))}),rV.apply(this,arguments)}function sV(t,e,n,i){return oV.apply(this,arguments)}function oV(){return oV=(0,Od.Z)(function*(t,e,n,i){const r=OA(t),s=yield function(t,e){const n=OA(t),i=OA(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",t=>i.Tn(t,e).next(e=>e?n.localDocuments.getDocuments(t,e):gk.resolve(null)))}(r.localStore,e);var o;null!==s?("pending"===n?yield RF(r.remoteStore):"acknowledged"===n||"rejected"===n?(ZM(r,e,i||null),zM(r,e),o=e,OA(OA(r.localStore).mutationQueue).An(o)):PA(),yield QM(r,s)):xA("SyncEngine","Cannot apply mutation batch with id: "+e)}),oV.apply(this,arguments)}function aV(){return aV=(0,Od.Z)(function*(t,e){const n=OA(t);if(gV(n),_V(n),!0===e&&!0!==n.dc){const t=n.sharedClientState.getAllActiveQueryTargets(),e=yield uV(n,t.toArray());n.dc=!0,yield YF(n.remoteStore,!0);for(const i of e)yF(n.remoteStore,i)}else if(!1===e&&!1!==n.dc){const t=[];let e=Promise.resolve();n.rc.forEach((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?t.push(r):e=e.then(()=>($M(n,r),LR(n.localStore,r,!0))),vF(n.remoteStore,r)}),yield e,yield uV(n,t),function(t){const e=OA(t);e.cc.forEach((t,n)=>{vF(e.remoteStore,n)}),e.ac.fs(),e.cc=new Map,e.uc=new FD(nk.comparator)}(n),n.dc=!1,yield YF(n.remoteStore,!1)}}),aV.apply(this,arguments)}function uV(t,e,n){return lV.apply(this,arguments)}function lV(){return lV=(0,Od.Z)(function*(t,e,n){const i=OA(t),r=[],s=[];for(const o of e){let t;const e=i.rc.get(o);if(e&&0!==e.length){t=yield OR(i.localStore,uP(e[0]));for(const t of e){const e=i.ic.get(t),n=yield eV(i,e);n.snapshot&&s.push(n.snapshot)}}else{const e=yield MR(i.localStore,o);t=yield OR(i.localStore,e),yield AM(i,cV(e),o,!1,t.resumeToken)}r.push(t)}return i.sc.Wo(s),r}),lV.apply(this,arguments)}function cV(t){return eP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hV(t){const e=OA(t);return OA(OA(e.localStore).persistence).vi()}function dV(t,e,n,i){return fV.apply(this,arguments)}function fV(){return fV=(0,Od.Z)(function*(t,e,n,i){const r=OA(t);if(r.dc)return void xA("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=yield VR(r.localStore,mP(s[0])),i=mN.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Mk.EMPTY_BYTE_STRING);yield QM(r,t,i);break}case"rejected":yield LR(r.localStore,e,!0),$M(r,e,i);break;default:PA()}}),fV.apply(this,arguments)}function pV(t,e,n){return mV.apply(this,arguments)}function mV(){return mV=(0,Od.Z)(function*(t,e,n){const i=gV(t);if(i.dc){for(const t of e){if(i.rc.has(t)){xA("SyncEngine","Adding an already active target "+t);continue}const e=yield MR(i.localStore,t),n=yield OR(i.localStore,e);yield AM(i,cV(e),n.targetId,!1,n.resumeToken),yF(i.remoteStore,n)}for(const t of n)i.rc.has(t)&&(yield LR(i.localStore,t,!1).then(()=>{vF(i.remoteStore,t),$M(i,t)}).catch(pk))}}),mV.apply(this,arguments)}function gV(t){const e=OA(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FM.bind(null,e),e.sc.Wo=dM.bind(null,e.eventManager),e.sc.wc=fM.bind(null,e.eventManager),e}function _V(t){const e=OA(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jM.bind(null,e),e}class yV{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Od.Z)(function*(){e.yt=oF(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return IR(this.persistence,new TR,t.initialUser,this.yt)}yc(t){return new dR(pR.Bs,this.yt)}gc(t){return new JR}terminate(){var t=this;return(0,Od.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class vV extends yV{constructor(t,e,n){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,n=this;return(0,Od.Z)(function*(){yield e().call(n,t),yield n.Ac.initialize(n,t),yield _V(n.Ac.syncEngine),yield RF(n.Ac.remoteStore),yield n.persistence.li(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(),n.indexBackfillerScheduler&&!n.indexBackfillerScheduler.started&&n.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return IR(this.persistence,new TR,t.initialUser,this.yt)}Tc(t,e){return new zL(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const n=new xk(e,this.persistence);return new Sk(t.asyncQueue,n)}yc(t){const e=bR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?AL.withCacheSize(this.cacheSizeBytes):AL.DEFAULT;return new yR(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,rF(),sF(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(t){return new JR}}class wV extends vV{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,n=this;return(0,Od.Z)(function*(){yield e().call(n,t);const i=n.Ac.syncEngine;n.sharedClientState instanceof YR&&(n.sharedClientState.syncEngine={Fr:sV.bind(null,i),$r:dV.bind(null,i),Br:pV.bind(null,i),vi:hV.bind(null,i),Mr:iV.bind(null,i)},yield n.sharedClientState.start()),yield n.persistence.li(function(){var t=(0,Od.Z)(function*(t){yield function(t,e){return aV.apply(this,arguments)}(n.Ac.syncEngine,t),n.gcScheduler&&(t&&!n.gcScheduler.started?n.gcScheduler.start():t||n.gcScheduler.stop()),n.indexBackfillerScheduler&&(t&&!n.indexBackfillerScheduler.started?n.indexBackfillerScheduler.start():t||n.indexBackfillerScheduler.stop())});return function(e){return t.apply(this,arguments)}}())})()}gc(t){const e=rF();if(!YR.C(e))throw new RA(LA.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=bR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new YR(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class bV{initialize(t,e){var n=this;return(0,Od.Z)(function*(){n.localStore||(n.localStore=t.localStore,n.sharedClientState=t.sharedClientState,n.datastore=n.createDatastore(e),n.remoteStore=n.createRemoteStore(e),n.eventManager=n.createEventManager(e),n.syncEngine=n.createSyncEngine(e,!t.synchronizeTabs),n.sharedClientState.onlineStateHandler=t=>RM(n.syncEngine,t,1),n.remoteStore.remoteSyncer.handleCredentialChange=JM.bind(null,n.syncEngine),yield YF(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(t){return new aM}createDatastore(t){const e=oF(t.databaseInfo.databaseId),n=new iF(t.databaseInfo);return new hF(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>RM(this.syncEngine,t,0),s=tF.C()?new tF:new XR,new fF(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new IM(t,e,n,i,r,s);return o&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Od.Z)(function*(t){const e=OA(t);xA("RemoteStore","RemoteStore shutting down."),e._u.add(5),yield gF(e),e.mu.shutdown(),e.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function CV(t,e,n){if(!n)throw new RA(LA.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TV(t,e,n,i){if(!0===e&&!0===i)throw new RA(LA.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function EV(t){if(!nk.isDocumentKey(t))throw new RA(LA.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function IV(t){if(nk.isDocumentKey(t))throw new RA(LA.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SV(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof t?"a function":PA()}function xV(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new RA(LA.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=SV(t);throw new RA(LA.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function AV(t,e){if(e<=0)throw new RA(LA.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}const kV=new Map;class DV{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new RA(LA.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new RA(LA.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,TV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class PV{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new RA(LA.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new RA(LA.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DV(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new VA;switch(t.type){case"gapi":return new qA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new RA(LA.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=kV.get(t);e&&(xA("ComponentProvider","Removing Datastore"),kV.delete(t),e.terminate())}(this),Promise.resolve()}}class NV{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new LV(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new NV(this.firestore,t,this._key)}}class OV{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new OV(this.firestore,t,this._query)}}class LV extends OV{constructor(t,e,n){super(t,e,nP(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new NV(this.firestore,null,new nk(t))}withConverter(t){return new LV(this.firestore,t,this._path)}}function RV(t,e,...n){if(t=(0,Rd.m9)(t),CV("collection","path",e),t instanceof PV){const i=XA.fromString(e,...n);return IV(i),new LV(t,null,i)}{if(!(t instanceof NV||t instanceof LV))throw new RA(LA.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(XA.fromString(e,...n));return IV(i),new LV(t.firestore,null,i)}}function FV(t,e,...n){if(t=(0,Rd.m9)(t),1===arguments.length&&(e=HA.R()),CV("doc","path",e),t instanceof PV){const i=XA.fromString(e,...n);return EV(i),new NV(t,null,new nk(i))}{if(!(t instanceof NV||t instanceof LV))throw new RA(LA.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(XA.fromString(e,...n));return EV(i),new NV(t.firestore,t instanceof LV?t.converter:null,new nk(i))}}function MV(t,e){return t=(0,Rd.m9)(t),e=(0,Rd.m9)(e),(t instanceof NV||t instanceof LV)&&(e instanceof NV||e instanceof LV)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function VV(t,e){return t=(0,Rd.m9)(t),e=(0,Rd.m9)(e),t instanceof OV&&e instanceof OV&&t.firestore===e.firestore&&hP(t._query,e._query)&&t.converter===e.converter}function BV(t,e=10240){let n=0;return{read:()=>(0,Od.Z)(function*(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})(),cancel:()=>(0,Od.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jV{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):AA("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class UV{constructor(t,e){this.Pc=t,this.yt=e,this.metadata=new FA,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(t=>{t&&t.Ou()?this.metadata.resolve(t.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.ku)}`))},t=>this.metadata.reject(t))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,Od.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,Od.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,Od.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const n=t.vc.decode(e),i=Number(n);isNaN(i)&&t.Dc(`length string (${n}) is not valid number`);const r=yield t.Cc(i);return new gM(JSON.parse(r),e.length+i)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,Od.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const n=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),n})()}Cc(t){var e=this;return(0,Od.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const n=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),n})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,Od.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const n=new Uint8Array(t.buffer.length+e.value.length);n.set(t.buffer),n.set(e.value,t.buffer.length),t.buffer=n}return e.done})()}}class qV{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Od.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new RA(LA.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(i=(0,Od.Z)(function*(t,e){const n=OA(t),i=VN(n.yt)+"/documents",r={documents:e.map(t=>LN(n.yt,t))},s=yield n._o("BatchGetDocuments",i,r,e.length),o=new Map;s.forEach(t=>{const e=function(t,e){return"found"in e?function(t,e){NA(!!e.found);const n=RN(t,e.found.name),i=PN(e.found.updateTime),r=e.found.createTime?PN(e.found.createTime):YA.min(),s=new zD({mapValue:{fields:e.found.fields}});return $D.newFoundDocument(n,i,r,s)}(t,e):"missing"in e?function(t,e){NA(!!e.missing),NA(!!e.readTime);const n=RN(t,e.missing),i=PN(e.readTime);return $D.newNoDocument(n,i)}(t,e):PA()}(n.yt,t);o.set(e.key.toString(),e)});const a=[];return e.forEach(t=>{const e=o.get(t.toString());NA(!!e),a.push(e)}),a}),function(t,e){return i.apply(this,arguments)})(e.datastore,t);var i;return n.forEach(t=>e.recordVersion(t)),n})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new GP(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Od.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var n;t.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,n)=>{const i=nk.fromPath(n);t.mutations.push(new KP(i,t.precondition(i)))}),yield(n=(0,Od.Z)(function*(t,e){const n=OA(t),i=VN(n.yt)+"/documents",r={writes:e.map(t=>qN(n.yt,t))};yield n.ao("Commit",i,r)}),function(t,e){return n.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw PA();e=YA.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new RA(LA.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(YA.min())?RP.exists(!1):RP.updateTime(e):RP.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(YA.min()))throw new RA(LA.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return RP.updateTime(e)}return RP.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class zV{constructor(t,e,n,i,r){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=r,this.kc=n.maxAttempts,this.xo=new aF(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,Od.Z)(function*(){const e=new qV(t.datastore),n=t.Mc(e);n&&n.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(e=>{t.Fc(e)}))}).catch(e=>{t.Fc(e)})}))}Mc(t){try{const e=this.updateFunction(t);return!Lk(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!XP(e)}return!1}}class ZV{constructor(t,e,n,i){var r=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=TA.UNAUTHENTICATED,this.clientId=HA.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var t=(0,Od.Z)(function*(t){xA("FirestoreClient","Received user=",t.uid),yield r.authCredentialListener(t),r.user=t});return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(n,t=>(xA("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}getConfiguration(){var t=this;return(0,Od.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new RA(LA.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new FA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Od.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(n){const t=nM(n,"Failed to shutdown persistence");e.reject(t)}})),e.promise}}function $V(t,e){return HV.apply(this,arguments)}function HV(){return HV=(0,Od.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),xA("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(function(){var t=(0,Od.Z)(function*(t){i.isEqual(t)||(yield SR(e.localStore,t),i=t)});return function(e){return t.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),HV.apply(this,arguments)}function WV(t,e){return GV.apply(this,arguments)}function GV(){return GV=(0,Od.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield KV(t);xA("FirestoreClient","Initializing OnlineComponentProvider");const i=yield t.getConfiguration();yield e.initialize(n,i),t.setCredentialChangeListener(t=>KF(e.remoteStore,t)),t.setAppCheckTokenChangeListener((t,n)=>KF(e.remoteStore,n)),t.onlineComponents=e}),GV.apply(this,arguments)}function KV(t){return QV.apply(this,arguments)}function QV(){return QV=(0,Od.Z)(function*(t){return t.offlineComponents||(xA("FirestoreClient","Using default OfflineComponentProvider"),yield $V(t,new yV)),t.offlineComponents}),QV.apply(this,arguments)}function YV(t){return JV.apply(this,arguments)}function JV(){return JV=(0,Od.Z)(function*(t){return t.onlineComponents||(xA("FirestoreClient","Using default OnlineComponentProvider"),yield WV(t,new bV)),t.onlineComponents}),JV.apply(this,arguments)}function XV(t){return KV(t).then(t=>t.persistence)}function tB(t){return KV(t).then(t=>t.localStore)}function eB(t){return YV(t).then(t=>t.remoteStore)}function nB(t){return YV(t).then(t=>t.syncEngine)}function iB(t){return rB.apply(this,arguments)}function rB(){return rB=(0,Od.Z)(function*(t){const e=yield YV(t),n=e.eventManager;return n.onListen=SM.bind(null,e.syncEngine),n.onUnlisten=DM.bind(null,e.syncEngine),n}),rB.apply(this,arguments)}function sB(t,e,n={}){const i=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return function(t,e,n,i,r){const s=new jV({next:s=>{e.enqueueAndForget(()=>cM(t,o));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new RA(LA.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new RA(LA.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new mM(nP(n.path),s,{includeMetadataChanges:!0,Nu:!0});return uM(t,o)}(yield iB(t),t.asyncQueue,e,n,i)})),i.promise}function oB(t,e,n={}){const i=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return function(t,e,n,i,r){const s=new jV({next:n=>{e.enqueueAndForget(()=>cM(t,o)),n.fromCache&&"server"===i.source?r.reject(new RA(LA.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new mM(n,s,{includeMetadataChanges:!0,Nu:!0});return uM(t,o)}(yield iB(t),t.asyncQueue,e,n,i)})),i.promise}class aB{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new aF(this,"async_queue_retry"),this.Wc=()=>{const t=sF();t&&xA("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const t=sF();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=sF();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise(()=>{});const e=new FA;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,Od.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!bk(e))throw e;xA("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(t=>{throw this.Kc=t,this.Gc=!1,AA("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(t=>(this.Gc=!1,t))));return this.Bc=e,e}enqueueAfterDelay(t,e,n){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const i=eM.createAndSchedule(this,t,e,n,t=>this.Yc(t));return this.Uc.push(i),i}zc(){this.Kc&&PA()}verifyOperationInProgress(){}Xc(){var t=this;return(0,Od.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.Uc.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function uB(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(t)}class lB{constructor(){this._progressObserver={},this._taskCompletionResolver=new FA,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class cB extends PV{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new aB,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dB(this),this._firestoreClient.terminate()}}function hB(t){return t._firestoreClient||dB(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dB(t){var e;const n=t._freezeSettings(),i=(r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new kk(t._databaseId,r,t._persistenceKey,(s=n).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));var r,s;t._firestoreClient=new ZV(t._authCredentials,t._appCheckCredentials,t._queue,i)}function fB(t,e,n){const i=new FA;return t.asyncQueue.enqueue((0,Od.Z)(function*(){try{yield $V(t,n),yield WV(t,e),i.resolve()}catch(s){const t=s;if(!("FirebaseError"===(r=t).name?r.code===LA.FAILED_PRECONDITION||r.code===LA.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw t;kA("Error enabling offline persistence. Falling back to persistence disabled: "+t),i.reject(t)}var r})).then(()=>i.promise)}function pB(t){if(t._initialized||t._terminated)throw new RA(LA.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mB{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mB(Mk.fromBase64String(t))}catch(e){throw new RA(LA.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new mB(Mk.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class gB{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new RA(LA.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ek(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class _B{constructor(t){this._methodName=t}}class yB{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new RA(LA.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new RA(LA.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return WA(this._lat,t._lat)||WA(this._long,t._long)}}const vB=/^__.*__$/;class wB{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new ZP(t,this.data,this.fieldMask,e,this.fieldTransforms):new zP(t,this.data,e,this.fieldTransforms)}}class bB{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new ZP(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function CB(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw PA()}}class TB{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.yt=n,this.ignoreUndefinedProperties=i,void 0===r&&this.na(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new TB(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ia({path:n,oa:!1});return i.ua(t),i}ca(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ia({path:n,oa:!1});return i.na(),i}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return zB(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(CB(this.sa)&&vB.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class EB{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=n||oF(t)}da(t,e,n,i=!1){return new TB({sa:t,methodName:e,fa:n,path:ek.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function IB(t){const e=t._freezeSettings(),n=oF(t._databaseId);return new EB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SB(t,e,n,i,r,s={}){const o=t.da(s.merge||s.mergeFields?2:0,e,n,r);BB("Data must be an object, but it was:",o,i);const a=MB(i,o);let u,l;if(s.merge)u=new qD(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=jB(e,i,n);if(!o.contains(r))throw new RA(LA.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);ZB(t,r)||t.push(r)}u=new qD(t),l=o.fieldTransforms.filter(t=>u.covers(t.field))}else u=null,l=o.fieldTransforms;return new wB(new zD(a),u,l)}class xB extends _B{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof xB}}function AB(t,e,n){return new TB({sa:3,fa:e.settings.fa,methodName:t._methodName,oa:n},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class kB extends _B{_toFieldTransform(t){return new OP(t.path,new IP)}isEqual(t){return t instanceof kB}}class DB extends _B{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=AB(this,t,!0),n=this._a.map(t=>FB(t,e)),i=new SP(n);return new OP(t.path,i)}isEqual(t){return this===t}}class PB extends _B{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=AB(this,t,!0),n=this._a.map(t=>FB(t,e)),i=new AP(n);return new OP(t.path,i)}isEqual(t){return this===t}}class NB extends _B{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new DP(t.yt,wP(t.yt,this.wa));return new OP(t.path,e)}isEqual(t){return this===t}}function OB(t,e,n,i){const r=t.da(1,e,n);BB("Data must be an object, but it was:",r,i);const s=[],o=zD.empty();Nk(i,(t,i)=>{const a=qB(e,t,n);i=(0,Rd.m9)(i);const u=r.ca(a);if(i instanceof xB)s.push(a);else{const t=FB(i,u);null!=t&&(s.push(a),o.set(a,t))}});const a=new qD(s);return new bB(o,a,r.fieldTransforms)}function LB(t,e,n,i,r,s){const o=t.da(1,e,n),a=[jB(e,i,n)],u=[r];if(s.length%2!=0)throw new RA(LA.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(jB(e,s[d])),u.push(s[d+1]);const l=[],c=zD.empty();for(let d=a.length-1;d>=0;--d)if(!ZB(l,a[d])){const t=a[d];let e=u[d];e=(0,Rd.m9)(e);const n=o.ca(t);if(e instanceof xB)l.push(t);else{const i=FB(e,n);null!=i&&(l.push(t),c.set(t,i))}}const h=new qD(l);return new bB(c,h,o.fieldTransforms)}function RB(t,e,n,i=!1){return FB(n,t.da(i?4:3,e))}function FB(t,e){if(VB(t=(0,Rd.m9)(t)))return BB("Unsupported field value:",e,t),MB(t,e);if(t instanceof _B)return function(t,e){if(!CB(e.sa))throw e.ha(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.ha(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=FB(r,e.aa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Rd.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wP(e.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=QA.fromDate(t);return{timestampValue:AN(e.yt,n)}}if(t instanceof QA){const n=new QA(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:AN(e.yt,n)}}if(t instanceof yB)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mB)return{bytesValue:kN(e.yt,t._byteString)};if(t instanceof NV){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:NN(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.ha(`Unsupported field value: ${SV(t)}`)}(t,e)}function MB(t,e){const n={};return Ok(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nk(t,(t,i)=>{const r=FB(i,e.ra(t));null!=r&&(n[t]=r)}),{mapValue:{fields:n}}}function VB(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof QA||t instanceof yB||t instanceof mB||t instanceof NV||t instanceof _B)}function BB(t,e,n){if(!VB(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=SV(n);throw e.ha("an object"===i?t+" a custom object":t+" "+i)}var i}function jB(t,e,n){if((e=(0,Rd.m9)(e))instanceof gB)return e._internalPath;if("string"==typeof e)return qB(t,e);throw zB("Field path arguments must be of type string or ",t,!1,void 0,n)}const UB=new RegExp("[~\\*/\\[\\]]");function qB(t,e,n){if(e.search(UB)>=0)throw zB(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gB(...e.split("."))._internalPath}catch(i){throw zB(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zB(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new RA(LA.INVALID_ARGUMENT,a+t+u)}function ZB(t,e){return t.some(t=>t.isEqual(e))}class $B{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new NV(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new HB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(WB("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class HB extends $B{data(){return super.data()}}function WB(t,e){return"string"==typeof e?qB(t,e):e instanceof gB?e._internalPath:e._delegate._internalPath}function GB(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new RA(LA.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KB{}class QB extends KB{}function YB(t,e,...n){let i=[];e instanceof KB&&i.push(e),i=i.concat(n),function(t){const e=t.filter(t=>t instanceof XB).length,n=t.filter(t=>t instanceof JB).length;if(e>1||e>0&&n>0)throw new RA(LA.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class JB extends QB{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new JB(t,e,n)}_apply(t){const e=this._parse(t);return aj(t._query,e),new OV(t.firestore,t.converter,lP(t._query,e))}_parse(t){const e=IB(t.firestore);return function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new RA(LA.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){oj(o,s);const e=[];for(const n of o)e.push(sj(i,t,n));a={arrayValue:{values:e}}}else a=sj(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||oj(o,s),a=RB(n,"where",o,"in"===s||"not-in"===s);return gD.create(r,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class XB extends KB{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new XB(t,e)}_parse(t){const e=this._queryConstraints.map(e=>e._parse(t)).filter(t=>t.getFilters().length>0);return 1===e.length?e[0]:_D.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)aj(n,r),n=lP(n,r)}(t._query,e),new OV(t.firestore,t.converter,lP(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tj extends QB{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new tj(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new RA(LA.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new RA(LA.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new LD(e,n);return function(t,e){if(null===rP(t)){const n=sP(t);null!==n&&uj(0,n,e.field)}}(t,i),i}(t._query,this._field,this._direction);return new OV(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new tP(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class ej extends QB{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new ej(t,e,n)}_apply(t){return new OV(t.firestore,t.converter,cP(t._query,this._limit,this._limitType))}}class nj extends QB{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new nj(t,e,n)}_apply(t){const e=rj(t,this.type,this._docOrFields,this._inclusive);return new OV(t.firestore,t.converter,(i=e,new tP((n=t._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)));var n,i}}class ij extends QB{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new ij(t,e,n)}_apply(t){const e=rj(t,this.type,this._docOrFields,this._inclusive);return new OV(t.firestore,t.converter,(i=e,new tP((n=t._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,i)));var n,i}}function rj(t,e,n,i){if(n[0]=(0,Rd.m9)(n[0]),n[0]instanceof $B)return function(t,e,n,i,r){if(!i)throw new RA(LA.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of aP(t))if(o.field.isKeyField())s.push(tD(e,i.key));else{const t=i.data.field(o.field);if(qk(t))throw new RA(LA.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new RA(LA.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new dD(s,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=IB(t.firestore);return function(t,e,n,i,r,s){const o=t.explicitOrderBy;if(r.length>o.length)throw new RA(LA.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<r.length;u++){const s=r[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new RA(LA.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof s}`);if(!oP(t)&&-1!==s.indexOf("/"))throw new RA(LA.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(XA.fromString(s));if(!nk.isDocumentKey(n))throw new RA(LA.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new nk(n);a.push(tD(e,r))}else{const t=RB(n,i,s);a.push(t)}}return new dD(a,s)}(t._query,t.firestore._databaseId,r,e,n,i)}}function sj(t,e,n){if("string"==typeof(n=(0,Rd.m9)(n))){if(""===n)throw new RA(LA.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oP(e)&&-1!==n.indexOf("/"))throw new RA(LA.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(XA.fromString(n));if(!nk.isDocumentKey(i))throw new RA(LA.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tD(t,new nk(i))}if(n instanceof NV)return tD(t,n._key);throw new RA(LA.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SV(n)}.`)}function oj(t,e){if(!Array.isArray(t)||0===t.length)throw new RA(LA.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new RA(LA.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function aj(t,e){if(e.isInequality()){const n=sP(t),i=e.field;if(null!==n&&!n.isEqual(i))throw new RA(LA.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=rP(t);null!==r&&uj(0,i,r)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new RA(LA.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function uj(t,e,n){if(!n.isEqual(e))throw new RA(LA.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class lj{convertValue(t,e="none"){switch(Wk(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jk(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Uk(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw PA()}}convertObject(t,e){const n={};return Nk(t.fields,(t,i)=>{n[t]=this.convertValue(i,e)}),n}convertGeoPoint(t){return new yB(jk(t.latitude),jk(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=zk(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Zk(t));default:return null}}convertTimestamp(t){const e=Bk(t);return new QA(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=XA.fromString(t);NA(eO(n));const i=new Dk(n.get(1),n.get(3)),r=new nk(n.popFirst(5));return i.isEqual(e)||AA(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function cj(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class hj extends lj{constructor(t){super(),this.firestore=t}convertBytes(t){return new mB(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new NV(this.firestore,null,e)}}class dj{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class fj extends $B{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new pj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(WB("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class pj extends fj{data(t={}){return super.data(t)}}class mj{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new dj(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new pj(this._firestore,this._userDataWriter,n.key,n,new dj(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new RA(LA.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>({type:"added",doc:new pj(t._firestore,t._userDataWriter,n.doc.key,n.doc,new dj(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const i=new pj(t._firestore,t._userDataWriter,e.doc.key,e.doc,new dj(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:gj(e.type),doc:i,oldIndex:r,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function gj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return PA()}}function _j(t,e){return t instanceof fj&&e instanceof fj?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mj&&e instanceof mj&&t._firestore===e._firestore&&VV(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class yj extends lj{constructor(t){super(),this.firestore=t}convertBytes(t){return new mB(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new NV(this.firestore,null,e)}}function vj(t,e,n){t=xV(t,NV);const i=xV(t.firestore,cB),r=cj(t.converter,e,n);return Cj(i,[SB(IB(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,RP.none())])}function wj(t,e,n,...i){t=xV(t,NV);const r=xV(t.firestore,cB),s=IB(r);let o;return o="string"==typeof(e=(0,Rd.m9)(e))||e instanceof gB?LB(s,"updateDoc",t._key,e,n,i):OB(s,"updateDoc",t._key,e),Cj(r,[o.toMutation(t._key,RP.exists(!0))])}function bj(t,...e){var n,i,r;t=(0,Rd.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||uB(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(uB(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[o+2]=null===(r=t.complete)||void 0===r?void 0:r.bind(t)}let u,l,c;if(t instanceof NV)l=xV(t.firestore,cB),c=nP(t._key.path),u={next:n=>{e[o]&&e[o](Tj(l,t,n))},error:e[o+1],complete:e[o+2]};else{const n=xV(t,OV);l=xV(n.firestore,cB),c=n._query;const i=new yj(l);u={next:t=>{e[o]&&e[o](new mj(l,i,n,t))},error:e[o+1],complete:e[o+2]},GB(t._query)}return function(t,e,n,i){const r=new jV(i),s=new mM(e,r,n);return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return uM(yield iB(t),s)})),()=>{r.bc(),t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return cM(yield iB(t),s)}))}}(hB(l),c,a,u)}function Cj(t,e){return function(t,e){const n=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return function(t,e,n){return NM.apply(this,arguments)}(yield nB(t),e,n)})),n.promise}(hB(t),e)}function Tj(t,e,n){const i=n.docs.get(e._key),r=new yj(t);return new fj(t,r,e._key,i,new dj(n.hasPendingWrites,n.fromCache),e.converter)}const Ej={maxAttempts:5};class Ij{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=IB(t)}set(t,e,n){this._verifyNotCommitted();const i=Sj(t,this._firestore),r=cj(i.converter,e,n),s=SB(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,RP.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const r=Sj(t,this._firestore);let s;return s="string"==typeof(e=(0,Rd.m9)(e))||e instanceof gB?LB(this._dataReader,"WriteBatch.update",r._key,e,n,i):OB(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(s.toMutation(r._key,RP.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Sj(t,this._firestore);return this._mutations=this._mutations.concat(new GP(e._key,RP.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new RA(LA.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sj(t,e){if((t=(0,Rd.m9)(t)).firestore!==e)throw new RA(LA.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class xj extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=IB(t)}get(t){const e=Sj(t,this._firestore),n=new hj(this._firestore);return this._transaction.lookup([e._key]).then(t=>{if(!t||1!==t.length)return PA();const i=t[0];if(i.isFoundDocument())return new $B(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new $B(this._firestore,n,e._key,null,e.converter);throw PA()})}set(t,e,n){const i=Sj(t,this._firestore),r=cj(i.converter,e,n),s=SB(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(t,e,n,...i){const r=Sj(t,this._firestore);let s;return s="string"==typeof(e=(0,Rd.m9)(e))||e instanceof gB?LB(this._dataReader,"Transaction.update",r._key,e,n,i):OB(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,s),this}delete(t){const e=Sj(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Sj(t,this._firestore),n=new yj(this._firestore);return super.get(t).then(t=>new fj(this._firestore,n,e._key,t._document,new dj(!1,!1),e.converter))}}function Aj(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new RA("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function kj(){if("undefined"==typeof Uint8Array)throw new RA("unimplemented","Uint8Arrays are not available in this environment.")}function Dj(){if("undefined"==typeof atob)throw new RA("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){EA=Fd.SDK_VERSION,(0,Fd._registerComponent)(new Vd.wA("firestore",(t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new cB(new jA(t.getProvider("auth-internal")),new ZA(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new RA(LA.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dk(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,Fd.registerVersion)(CA,"3.8.0",t),(0,Fd.registerVersion)(CA,"3.8.0","esm2017")}();class Pj{constructor(t){this._delegate=t}static fromBase64String(t){return Dj(),new Pj(mB.fromBase64String(t))}static fromUint8Array(t){return kj(),new Pj(mB.fromUint8Array(t))}toBase64(){return Dj(),this._delegate.toBase64()}toUint8Array(){return kj(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Nj(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(t)}class Oj{enableIndexedDbPersistence(t,e){return function(t,e){pB(t=xV(t,cB));const n=hB(t),i=t._freezeSettings(),r=new bV;return fB(n,r,new vV(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(t){pB(t=xV(t,cB));const e=hB(t),n=t._freezeSettings(),i=new bV;return fB(e,i,new wV(i,n.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(t){if(t._initialized&&!t._terminated)throw new RA(LA.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new FA;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Od.Z)(function*(){try{yield(n=(0,Od.Z)(function*(t){if(!yk.C())return Promise.resolve();const e=t+"main";yield yk.delete(e)}),function(t){return n.apply(this,arguments)})(bR(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(t._delegate)}}class Lj{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof Dk||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&kA("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,n={}){!function(t,e,n,i={}){var r;const s=(t=xV(t,PV))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&kA("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=TA.MOCK_USER;else{e=(0,Rd.Sg)(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new RA(LA.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new TA(s)}t._authCredentials=new BA(new MA(e,n))}}(this._delegate,t,e,n)}enableNetwork(){return function(t){return function(t){return t.asyncQueue.enqueue((0,Od.Z)(function*(){const e=yield XV(t),n=yield eB(t);return e.setNetworkEnabled(!0),function(t){const e=OA(t);return e._u.delete(0),pF(e)}(n)}))}(hB(t=xV(t,cB)))}(this._delegate)}disableNetwork(){return function(t){return function(t){return t.asyncQueue.enqueue((0,Od.Z)(function*(){const e=yield XV(t),n=yield eB(t);return e.setNetworkEnabled(!1),(i=(0,Od.Z)(function*(t){const e=OA(t);e._u.add(0),yield gF(e),e.gu.set("Offline")}),function(t){return i.apply(this,arguments)})(n);var i}))}(hB(t=xV(t,cB)))}(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,TV("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(t){return function(t){const e=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return function(t,e){return qM.apply(this,arguments)}(yield nB(t),e)})),e.promise}(hB(t=xV(t,cB)))}(this._delegate)}onSnapshotsInSync(t){return function(t,e){return function(t,e){const n=new jV(e);return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return e=yield iB(t),i=n,OA(e).Ru.add(i),void i.next();var e,i})),()=>{n.bc(),t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return e=yield iB(t),i=n,void OA(e).Ru.delete(i);var e,i}))}}(hB(t=xV(t,cB)),uB(e)?e:{next:e})}(this._delegate,t)}get app(){if(!this._appCompat)throw new RA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Gj(this,RV(this._delegate,t))}catch(e){throw jj(e,"collection()","Firestore.collection()")}}doc(t){try{return new Bj(this,FV(this._delegate,t))}catch(e){throw jj(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new $j(this,function(t,e){if(t=xV(t,PV),CV("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new RA(LA.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new OV(t,null,(n=e,new tP(XA.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw jj(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(t,e,n){t=xV(t,cB);const i=Object.assign(Object.assign({},Ej),void 0);return function(t){if(t.maxAttempts<1)throw new RA(LA.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(t,e,n){const i=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){const r=yield function(t){return YV(t).then(t=>t.datastore)}(t);new zV(t.asyncQueue,r,n,e,i).run()})),i.promise}(hB(t),n=>e(new xj(t,n)),i)}(this._delegate,e=>t(new Fj(this,e)))}batch(){return hB(this._delegate),new Mj(new Ij(this._delegate,t=>Cj(this._delegate,t)))}loadBundle(t){return function(t,e){const n=hB(t=xV(t,cB)),i=new lB;return function(t,e,n,i){const r=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,i=function(t,e){if(t instanceof Uint8Array)return BV(t,e);if(t instanceof ArrayBuffer)return BV(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),new UV(i,e);var i}(n,oF(e));t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){!function(t,e,n){const i=OA(t);var r;(r=(0,Od.Z)(function*(t,e,n){try{const r=yield e.getMetadata();if(yield function(t,e){const n=OA(t),i=PN(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",t=>n.Ns.getBundleMetadata(t,e.id)).then(t=>!!t&&t.createTime.compareTo(i)>=0)}(t.localStore,r))return yield e.close(),n._completeWith({taskState:"Success",documentsLoaded:(i=r).totalDocuments,bytesLoaded:i.totalBytes,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}),Promise.resolve(new Set);n._updateProgress(vM(r));const s=new yM(r,t.localStore,e.yt);let o=yield e.mc();for(;o;){const t=yield s.Fu(o);t&&n._updateProgress(t),o=yield e.mc()}const a=yield s.complete();return yield QM(t,a.Lu,void 0),yield function(t,e){const n=OA(t);return n.persistence.runTransaction("Save bundle","readwrite",t=>n.Ns.saveBundleMetadata(t,e))}(t.localStore,r),n._completeWith(a.progress),Promise.resolve(a.Bu)}catch(r){return kA("SyncEngine",`Loading bundle failed with ${r}`),n._failWith(r),Promise.resolve(new Set)}var i}),function(t,e,n){return r.apply(this,arguments)})(i,e,n).then(t=>{i.sharedClientState.notifyBundleLoaded(t)})}(yield nB(t),r,i)}))}(n,t._databaseId,e,i),i}(this._delegate,t)}namedQuery(t){return function(t,e){return function(t,e){return t.asyncQueue.enqueue((0,Od.Z)(function*(){return function(t,e){const n=OA(t);return n.persistence.runTransaction("Get named query","readonly",t=>n.Ns.getNamedQuery(t,e))}(yield tB(t),e)}))}(hB(t=xV(t,cB)),e).then(e=>e?new OV(t,null,e.query):null)}(this._delegate,t).then(t=>t?new $j(this,t):null)}}class Rj extends lj{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pj(new mB(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Bj.forKey(e,this.firestore,null)}}class Fj{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Rj(t)}get(t){const e=Kj(t);return this._delegate.get(e).then(t=>new zj(this._firestore,new fj(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter)))}set(t,e,n){const i=Kj(t);return n?(Aj("Transaction.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const r=Kj(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,n,...i),this}delete(t){const e=Kj(t);return this._delegate.delete(e),this}}class Mj{constructor(t){this._delegate=t}set(t,e,n){const i=Kj(t);return n?(Aj("WriteBatch.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const r=Kj(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,n,...i),this}delete(t){const e=Kj(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Vj{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new pj(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Zj(this._firestore,n),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=Vj.INSTANCES;let i=n.get(t);i||(i=new WeakMap,n.set(t,i));let r=i.get(e);return r||(r=new Vj(t,new Rj(t),e),i.set(e,r)),r}}Vj.INSTANCES=new WeakMap;class Bj{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rj(t)}static forPath(t,e,n){if(t.length%2!=0)throw new RA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Bj(e,new NV(e._delegate,n,new nk(t)))}static forKey(t,e,n){return new Bj(e,new NV(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new Gj(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Gj(this.firestore,RV(this._delegate,t))}catch(e){throw jj(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Rd.m9)(t))instanceof NV&&MV(this._delegate,t)}set(t,e){e=Aj("DocumentReference.set",e);try{return e?vj(this._delegate,t,e):vj(this._delegate,t)}catch(n){throw jj(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?wj(this._delegate,t):wj(this._delegate,t,e,...n)}catch(i){throw jj(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(t){return Cj(xV(t.firestore,cB),[new GP(t._key,RP.none())])}(this._delegate)}onSnapshot(...t){const e=Uj(t),n=qj(t,t=>new zj(this.firestore,new fj(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)));return bj(this._delegate,e,n)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(t){t=xV(t,NV);const e=xV(t.firestore,cB),n=hB(e),i=new yj(e);return function(t,e){const n=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return(i=(0,Od.Z)(function*(t,e,n){try{const i=yield function(t,e){const n=OA(t);return n.persistence.runTransaction("read document","readonly",t=>n.localDocuments.getDocument(t,e))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new RA(LA.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(i){const t=nM(i,`Failed to get document '${e} from cache`);n.reject(t)}}),function(t,e,n){return i.apply(this,arguments)})(yield tB(t),e,n);var i})),n.promise}(n,t._key).then(n=>new fj(e,i,t._key,n,new dj(null!==n&&n.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=xV(t,NV);const e=xV(t.firestore,cB);return sB(hB(e),t._key,{source:"server"}).then(n=>Tj(e,t,n))}(this._delegate):function(t){t=xV(t,NV);const e=xV(t.firestore,cB);return sB(hB(e),t._key).then(n=>Tj(e,t,n))}(this._delegate),e.then(t=>new zj(this.firestore,new fj(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)))}withConverter(t){return new Bj(this.firestore,this._delegate.withConverter(t?Vj.getInstance(this.firestore,t):null))}}function jj(t,e,n){return t.message=t.message.replace(e,n),t}function Uj(t){for(const e of t)if("object"==typeof e&&!Nj(e))return e;return{}}function qj(t,e){var n,i;let r;return r=Nj(t[0])?t[0]:Nj(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{r.next&&r.next(e(t))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class zj{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Bj(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return _j(this._delegate,t._delegate)}}class Zj extends zj{data(t){const e=this._delegate.data(t);return function(t,e){t||PA()}(void 0!==e),e}}class $j{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rj(t)}where(t,e,n){try{return new $j(this.firestore,YB(this._delegate,function(t,e,n){const i=e,r=WB("where",t);return JB._create(r,i,n)}(t,e,n)))}catch(i){throw jj(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new $j(this.firestore,YB(this._delegate,function(t,e="asc"){const n=e,i=WB("orderBy",t);return tj._create(i,n)}(t,e)))}catch(n){throw jj(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new $j(this.firestore,YB(this._delegate,function(t){return AV("limit",t),ej._create("limit",t,"F")}(t)))}catch(e){throw jj(e,"limit()","Query.limit()")}}limitToLast(t){try{return new $j(this.firestore,YB(this._delegate,function(t){return AV("limitToLast",t),ej._create("limitToLast",t,"L")}(t)))}catch(e){throw jj(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new $j(this.firestore,YB(this._delegate,function(...t){return nj._create("startAt",t,!0)}(...t)))}catch(e){throw jj(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new $j(this.firestore,YB(this._delegate,function(...t){return nj._create("startAfter",t,!1)}(...t)))}catch(e){throw jj(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new $j(this.firestore,YB(this._delegate,function(...t){return ij._create("endBefore",t,!1)}(...t)))}catch(e){throw jj(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new $j(this.firestore,YB(this._delegate,function(...t){return ij._create("endAt",t,!0)}(...t)))}catch(e){throw jj(e,"endAt()","Query.endAt()")}}isEqual(t){return VV(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(t){t=xV(t,OV);const e=xV(t.firestore,cB),n=hB(e),i=new yj(e);return function(t,e){const n=new FA;return t.asyncQueue.enqueueAndForget((0,Od.Z)(function*(){return(i=(0,Od.Z)(function*(t,e,n){try{const i=yield FR(t,e,!0),r=new CM(e,i.Hi),s=r.Wu(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(i){const t=nM(i,`Failed to execute query '${e} against cache`);n.reject(t)}}),function(t,e,n){return i.apply(this,arguments)})(yield tB(t),e,n);var i})),n.promise}(n,t._query).then(n=>new mj(e,i,t,n))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=xV(t,OV);const e=xV(t.firestore,cB),n=hB(e),i=new yj(e);return oB(n,t._query,{source:"server"}).then(n=>new mj(e,i,t,n))}(this._delegate):function(t){t=xV(t,OV);const e=xV(t.firestore,cB),n=hB(e),i=new yj(e);return GB(t._query),oB(n,t._query).then(n=>new mj(e,i,t,n))}(this._delegate),e.then(t=>new Wj(this.firestore,new mj(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)))}onSnapshot(...t){const e=Uj(t),n=qj(t,t=>new Wj(this.firestore,new mj(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)));return bj(this._delegate,e,n)}withConverter(t){return new $j(this.firestore,this._delegate.withConverter(t?Vj.getInstance(this.firestore,t):null))}}class Hj{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Zj(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Wj{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new $j(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Zj(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(t=>new Hj(this._firestore,t))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new Zj(this._firestore,n))})}isEqual(t){return _j(this._delegate,t._delegate)}}class Gj extends $j{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Bj(this.firestore,t):null}doc(t){try{return new Bj(this.firestore,void 0===t?FV(this._delegate):FV(this._delegate,t))}catch(e){throw jj(e,"doc()","CollectionReference.doc()")}}add(t){return function(t,e){const n=xV(t.firestore,cB),i=FV(t),r=cj(t.converter,e);return Cj(n,[SB(IB(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,RP.exists(!1))]).then(()=>i)}(this._delegate,t).then(t=>new Bj(this.firestore,t))}isEqual(t){return MV(this._delegate,t._delegate)}withConverter(t){return new Gj(this.firestore,this._delegate.withConverter(t?Vj.getInstance(this.firestore,t):null))}}function Kj(t){return xV(t,NV)}class Qj{constructor(...t){this._delegate=new gB(...t)}static documentId(){return new Qj(ek.keyField().canonicalString())}isEqual(t){return(t=(0,Rd.m9)(t))instanceof gB&&this._delegate._internalPath.isEqual(t._internalPath)}}class Yj{constructor(t){this._delegate=t}static serverTimestamp(){const t=new kB("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Yj(t)}static delete(){const t=new xB("deleteField");return t._methodName="FieldValue.delete",new Yj(t)}static arrayUnion(...t){const e=function(...t){return new DB("arrayUnion",t)}(...t);return e._methodName="FieldValue.arrayUnion",new Yj(e)}static arrayRemove(...t){const e=function(...t){return new PB("arrayRemove",t)}(...t);return e._methodName="FieldValue.arrayRemove",new Yj(e)}static increment(t){const e=function(t){return new NB("increment",t)}(t);return e._methodName="FieldValue.increment",new Yj(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Jj={Firestore:Lj,GeoPoint:yB,Timestamp:QA,Blob:Pj,Transaction:Fj,WriteBatch:Mj,DocumentReference:Bj,DocumentSnapshot:zj,Query:$j,QueryDocumentSnapshot:Zj,QuerySnapshot:Wj,CollectionReference:Gj,FieldPath:Qj,FieldValue:Yj,setLogLevel:function(t){!function(t){IA.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function Xj(t,e){return function(t,e=Bf.z){return new Pt.y(n=>{let i;return null!=e?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=i&&i()}})}(t,e)}function tU(t,e){return Xj(t,e).pipe((0,kt.U)(t=>({payload:t,type:"query"})))}function eU(t,e){return tU(t,e).pipe(We(void 0),bE(),(0,kt.U)(([t,e])=>{const n=e.payload.docChanges(),i=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,r)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||i.push({type:"modified",payload:{oldIndex:r,newIndex:r,type:"modified",doc:e}})}),i}))}function nU(t,e,n){return eU(t,n).pipe(Ge((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return iU(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return iU(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iU(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Uf(),(0,kt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function iU(t,e,n,...i){const r=t.slice();return r.splice(e,n,...i),r}function rU(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}!function(t){(function(t,e){t.INTERNAL.registerComponent(new Vd.wA("firestore-compat",t=>((t,e)=>new Lj(t,e,new Oj))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Jj)))})(t),t.registerVersion("@firebase/firestore-compat","0.3.0")}(Gf.Z);class sU{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=eU(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,kt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(We(void 0),bE(),Rt(([t,e])=>e.length>0||!t),(0,kt.U)(([t,e])=>e),Gd.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ge((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rU(t);return nU(this.query,e,this.afs.schedulers.outsideAngular).pipe(Gd.iC)}valueChanges(t={}){return tU(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),Gd.iC)}get(t){return(0,ve.D)(this.query.get(t)).pipe(Gd.iC)}add(t){return this.ref.add(t)}doc(t){return new oU(this.ref.doc(t),this.afs)}}class oU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:i,query:r}=dU(n,e);return new sU(i,r,this.afs)}snapshotChanges(){return function(t,e){return Xj(t,e).pipe(We(void 0),bE(),(0,kt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gd.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,ve.D)(this.ref.get(t)).pipe(Gd.iC)}}class aU{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?eU(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Rt(t=>t.length>0),Gd.iC):eU(this.query,this.afs.schedulers.outsideAngular).pipe(Gd.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ge((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rU(t);return nU(this.query,e,this.afs.schedulers.outsideAngular).pipe(Gd.iC)}valueChanges(t={}){return tU(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),Gd.iC)}get(t){return(0,ve.D)(this.query.get(t)).pipe(Gd.iC)}}const uU=new r.OlP("angularfire2.enableFirestorePersistence"),lU=new r.OlP("angularfire2.firestore.persistenceSettings"),cU=new r.OlP("angularfire2.firestore.settings"),hU=new r.OlP("angularfire2.firestore.use-emulator");function dU(t,e=(t=>t)){return{query:e(t),ref:t}}let fU=(()=>{class t{constructor(t,e,n,i,r,s,o,a,u,l,c,h,d,f,p,m,g){this.schedulers=o;const _=(0,Kd.on)(t,s,e),y=u;l&&Ff(_,s,c,d,f,p,h,m),[this.firestore,this.persistenceEnabled$]=(0,Kd.cc)(`${_.name}.firestore`,"AngularFirestore",_.name,()=>{const t=s.runOutsideAngular(()=>_.firestore());if(i&&t.settings(i),y&&t.useEmulator(...y),n&&!G(r)){const e=()=>{try{return(0,ve.D)(t.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),(0,Dt.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,Dt.of)(!1)]},[i,y,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:i,query:r}=dU(n,e),s=this.schedulers.ngZone.run(()=>i);return new sU(s,r,this)}collectionGroup(t,e){const n=e||(t=>t),i=this.firestore.collectionGroup(t);return new aU(n(i),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new oU(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Kd.Dh),r.LFG(Kd.xv,8),r.LFG(uU,8),r.LFG(cU,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gd.HU),r.LFG(lU,8),r.LFG(hU,8),r.LFG(Mf,8),r.LFG(Df,8),r.LFG(Pf,8),r.LFG(Nf,8),r.LFG(Of,8),r.LFG(Lf,8),r.LFG(Rf,8),r.LFG(Af,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),pU=(()=>{class t{constructor(){kf.Z.registerVersion("angularfire",Gd.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:t,providers:[{provide:uU,useValue:!0},{provide:lU,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[fU]}),t})();const mU={apiKey:"AIzaSyDXvvPWVSvKQAr4sLfYskstSKLRYfRsSaw",authDomain:"poznandawniejdzis-79c46.firebaseapp.com",databaseURL:"https://poznandawniejdzis-79c46-default-rtdb.firebaseio.com",projectId:"poznandawniejdzis-79c46",storageBucket:"poznandawniejdzis-79c46.appspot.com",messagingSenderId:"1033991145858",appId:"1:1033991145858:web:28d914c9b8fc24ef88679b",measurementId:"G-MZRRG17H7D"};let gU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[vw],imports:[[Vf,Kd.hO.initializeApp(mU),pU]]}),t})(),_U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Rw]}),t.\u0275inj=r.cJS({providers:[ye,Nd,Tw,bw,Cw,Ww],imports:[[qb,wE,At,gU,_e,Lo]]}),t})();(0,r.G48)(),St().bootstrapModule(_U).catch(t=>console.error(t))},3394:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var i=n(3854),r=n(3910),s=n(8026),o=n(5422);class a{constructor(t,e){this._delegate=t,this.firebase=e,(0,s._addComponent)(t,new r.wA("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(t,e=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return!i.isInitialized()&&"EXPLICIT"===(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)&&i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,s._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,s._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new i.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),l=function t(){const e=function(t){const e={},n={__esModule:!0,initializeApp:function(r,o={}){const a=s.initializeApp(r,o);if((0,i.r3)(e,a.name))return e[a.name];const u=new t(a,n);return e[a.name]=u,u},app:r,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(e){const o=e.name,a=o.replace("-compat","");if(s._registerComponent(e)&&"PUBLIC"===e.type){const s=(t=r())=>{if("function"!=typeof t[a])throw u.create("invalid-app-argument",{appName:o});return t[a]()};void 0!==e.serviceProps&&(0,i.ZB)(s,e.serviceProps),n[a]=s,t.prototype[a]=function(...t){return this._getService.bind(this,o).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null},removeApp:function(t){delete e[t]},useAsService:function(t,e){return"serverAuth"===e?null:e},modularAPIs:s}};function r(t){if(!(0,i.r3)(e,t=t||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:t});return e[t]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(e).map(t=>e[t])}}),r.App=t,n}(a);return e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,i.ZB)(e,t)},createSubscribe:i.ne,ErrorFactory:i.LL,deepExtend:i.ZB}),e}(),c=new o.Yd("@firebase/app-compat");if((0,i.jU)()&&void 0!==self.firebase){c.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&c.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=l;(0,s.registerVersion)("@firebase/app-compat","0.2.0",undefined)},8026:function(t,e,n){"use strict";n.r(e),n.d(e,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return T},_DEFAULT_ENTRY_NAME:function(){return h},_addComponent:function(){return m},_addOrOverwriteComponent:function(){return g},_apps:function(){return f},_clearComponents:function(){return w},_components:function(){return p},_getProvider:function(){return y},_registerComponent:function(){return _},_removeServiceInstance:function(){return v},deleteApp:function(){return x},getApp:function(){return I},getApps:function(){return S},initializeApp:function(){return E},onLog:function(){return D},registerVersion:function(){return k},setLogLevel:function(){return P}});var i=n(8239),r=n(3910),s=n(5422),o=n(3854),a=n(2373);class u{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null}).filter(t=>t).join(" ")}}const l="@firebase/app",c=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function m(t,e){try{t.container.addComponent(e)}catch(n){c.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function g(t,e){t.container.addOrOverwriteComponent(e)}function _(t){const e=t.name;if(p.has(e))return c.debug(`There were multiple attempts to register component ${e}.`),!1;p.set(e,t);for(const n of f.values())m(n,t);return!0}function y(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function v(t,e,n=h){y(t,e).clearInstance(n)}function w(){p.clear()}const b=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class C{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const T="9.15.0";function E(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:h,automaticDataCollectionEnabled:!1},e),s=i.name;if("string"!=typeof s||!s)throw b.create("bad-app-name",{appName:String(s)});if(n||(n=(0,o.aH)()),!n)throw b.create("no-options");const a=f.get(s);if(a){if((0,o.vZ)(n,a.options)&&(0,o.vZ)(i,a.config))return a;throw b.create("duplicate-app",{appName:s})}const u=new r.H0(s);for(const r of p.values())u.addComponent(r);const l=new C(n,i,u);return f.set(s,l),l}function I(t=h){const e=f.get(t);if(!e&&t===h)return E();if(!e)throw b.create("no-app",{appName:t});return e}function S(){return Array.from(f.values())}function x(t){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)(function*(t){const e=t.name;f.has(e)&&(f.delete(e),yield Promise.all(t.container.getProviders().map(t=>t.delete())),t.isDeleted=!0)})).apply(this,arguments)}function k(t,e,n){var i;let s=null!==(i=d[t])&&void 0!==i?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void c.warn(t.join(" "))}_(new r.wA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function D(t,e){if(null!==t&&"function"!=typeof t)throw b.create("invalid-log-argument");(0,s.Am)(t,e)}function P(t){(0,s.Ub)(t)}const N="firebase-heartbeat-store";let O=null;function L(){return O||(O=(0,a.X3)("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(N)}}).catch(t=>{throw b.create("idb-open",{originalErrorMessage:t.message})})),O}function R(){return(R=(0,i.Z)(function*(t){try{return(yield L()).transaction(N).objectStore(N).get(V(t))}catch(e){if(e instanceof o.ZR)c.warn(e.message);else{const t=b.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}})).apply(this,arguments)}function F(t,e){return M.apply(this,arguments)}function M(){return(M=(0,i.Z)(function*(t,e){try{const n=(yield L()).transaction(N,"readwrite");return yield n.objectStore(N).put(e,V(t)),n.done}catch(n){if(n instanceof o.ZR)c.warn(n.message);else{const t=b.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});c.warn(t.message)}}})).apply(this,arguments)}function V(t){return`${t.name}!${t.options.appId}`}class B{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new U(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}triggerHeartbeat(){var t=this;return(0,i.Z)(function*(){const e=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=j();if(null===t._heartbeatsCache&&(t._heartbeatsCache=yield t._heartbeatsCachePromise),t._heartbeatsCache.lastSentHeartbeatDate!==n&&!t._heartbeatsCache.heartbeats.some(t=>t.date===n))return t._heartbeatsCache.heartbeats.push({date:n,agent:e}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6}),t._storage.overwrite(t._heartbeatsCache)})()}getHeartbeatsHeader(){var t=this;return(0,i.Z)(function*(){if(null===t._heartbeatsCache&&(yield t._heartbeatsCachePromise),null===t._heartbeatsCache||0===t._heartbeatsCache.heartbeats.length)return"";const e=j(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find(t=>t.agent===r.agent);if(t){if(t.dates.push(r.date),q(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),q(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(t._heartbeatsCache.heartbeats),r=(0,o.L)(JSON.stringify({version:2,heartbeats:n}));return t._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(t._heartbeatsCache.heartbeats=i,yield t._storage.overwrite(t._heartbeatsCache)):(t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache)),r})()}}function j(){return(new Date).toISOString().substring(0,10)}class U{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,i.Z)(function*(){return!!(0,o.hl)()&&(0,o.eu)().then(()=>!0).catch(()=>!1)})()}read(){var t=this;return(0,i.Z)(function*(){return(yield t._canUseIndexedDBPromise)&&(yield function(t){return R.apply(this,arguments)}(t.app))||{heartbeats:[]}})()}overwrite(t){var e=this;return(0,i.Z)(function*(){var n;if(yield e._canUseIndexedDBPromise){const i=yield e.read();return F(e.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}})()}add(t){var e=this;return(0,i.Z)(function*(){var n;if(yield e._canUseIndexedDBPromise){const i=yield e.read();return F(e.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}})()}}function q(t){return(0,o.L)(JSON.stringify({version:2,heartbeats:t})).length}_(new r.wA("platform-logger",t=>new u(t),"PRIVATE")),_(new r.wA("heartbeat",t=>new B(t),"PRIVATE")),k(l,"0.9.0",""),k(l,"0.9.0","esm2017"),k("fire-js","")},3910:function(t,e,n){"use strict";n.d(e,{wA:function(){return s},H0:function(){return u},zt:function(){return a}});var i=n(8239),r=n(3854);class s{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const o="[DEFAULT]";class a{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new r.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(const[t,e]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});e.resolve(t)}catch(n){}}}}clearInstance(t=o){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return(0,i.Z)(function*(){const e=Array.from(t.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t=o){return this.instances.has(t)}getOptions(t=o){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(r)&&s.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(t=o){return this.component?this.component.multipleInstances?t:o:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class u{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new a(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},5422:function(t,e,n){"use strict";n.d(e,{in:function(){return r},Yd:function(){return l},Ub:function(){return c},Am:function(){return h}});const i=[];var r=(()=>{return(t=r||(r={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",r;var t})();const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},u=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=a[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class l{constructor(t){this.name=t,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}function c(t){i.forEach(e=>{e.setLogLevel(t)})}function h(t,e){for(const n of i){let i=null;e&&e.level&&(i=s[e.level]),n.userLogHandler=null===t?null:(e,n,...s)=>{const o=s.map(t=>{if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(t=>t).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:r[n].toLowerCase(),message:o,args:s,type:e.name})}}}},8213:function(t,e,n){"use strict";n.d(e,{Mq:function(){return i.getApp},C6:function(){return i.getApps}});var i=n(8026);(0,i.registerVersion)("firebase","9.15.0","app")},2533:function(t,e,n){"use strict";n.d(e,{Z:function(){return i.Z}});var i=n(3394);i.Z.registerVersion("firebase","9.15.0","app-compat")},1793:function(t,e,n){"use strict";n.r(e);var i=n(8239),r=n(3394),s=n(7589),o=n(3854),a=(n(8026),n(5422),n(3910));function u(){return window}function l(){return(l=(0,i.Z)(function*(t,e,n){var i;const{BuildInfo:r}=u();(0,s.ap)(e.sessionId,"AuthEvent did not contain a session ID");const o=yield d(e.sessionId),a={};return(0,s.aq)()?a.ibi=r.packageName:(0,s.ar)()?a.apn=r.packageName:(0,s.as)(t,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=o,(0,s.at)(t,n,e.type,void 0,null!==(i=e.eventId)&&void 0!==i?i:void 0,a)})).apply(this,arguments)}function c(){return(c=(0,i.Z)(function*(t){const{BuildInfo:e}=u(),n={};(0,s.aq)()?n.iosBundleId=e.packageName:(0,s.ar)()?n.androidPackageName=e.packageName:(0,s.as)(t,"operation-not-supported-in-this-environment"),yield(0,s.au)(t,n)})).apply(this,arguments)}function h(){return(h=(0,i.Z)(function*(t,e,n){const{cordova:i}=u();let r=()=>{};try{yield new Promise((o,a)=>{let u=null;function l(){var t;o();const e=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof e&&e(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){u||(u=window.setTimeout(()=>{a((0,s.aw)(t,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null==document?void 0:document.visibilityState)&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),(0,s.ar)()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),u&&window.clearTimeout(u)}})}finally{r()}})).apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)(function*(t){const e=p(t),n=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function p(t){if((0,s.ap)(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class m extends s.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}initialized(){var t=this;return(0,i.Z)(function*(){yield t.initPromise})()}}function g(t){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)(function*(t){const e=yield v()._get(w(t));return e&&(yield v()._remove(w(t))),e})).apply(this,arguments)}function y(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function v(){return(0,s.az)(s.b)}function w(t){return(0,s.aA)("authEvent",t.config.apiKey,t.name)}function b(t){if(!(null==t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return(0,o.zd)(n.join("?"))}function C(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.aw)("no-auth-event")}}function T(){var t;return(null===(t=null==self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function E(t=(0,o.z$)()){return!("file:"!==T()&&"ionic:"!==T()&&"capacitor:"!==T()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function I(){try{const t=self.localStorage,e=s.aI();if(t)return t.setItem(e,"1"),t.removeItem(e),!function(t=(0,o.z$)()){return(0,o.w1)()&&11===(null==document?void 0:document.documentMode)||function(t=(0,o.z$)()){return/Edge\/\d+/.test(t)}(t)}()||(0,o.hl)()}catch(J){return S()&&(0,o.hl)()}return!1}function S(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function x(){return("http:"===T()||"https:"===T()||(0,o.ru)()||E())&&!((0,o.b$)()||(0,o.UG)())&&I()&&!S()}function A(){return E()&&"undefined"!=typeof document}function k(){return(k=(0,i.Z)(function*(){return!!A()&&new Promise(t=>{const e=setTimeout(()=>{t(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})})})).apply(this,arguments)}const D={LOCAL:"local",NONE:"none",SESSION:"session"},P=s.ax,N="persistence";function O(t){return L.apply(this,arguments)}function L(){return(L=(0,i.Z)(function*(t){yield t._initializationPromise;const e=R(),n=s.aA(N,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())})).apply(this,arguments)}function R(){var t;try{return(null===(t="undefined"!=typeof window?window:null)||void 0===t?void 0:t.sessionStorage)||null}catch(e){return null}}const F=s.ax;class M{constructor(){this.browserResolver=s.az(s.k),this.cordovaResolver=s.az(class{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}_initialize(t){var e=this;return(0,i.Z)(function*(){const n=t._key();let i=e.eventManagers.get(n);return i||(i=new m(t),e.eventManagers.set(n,i),e.attachCallbackListeners(t,i)),i})()}_openPopup(t){(0,s.as)(t,"operation-not-supported-in-this-environment")}_openRedirect(t,e,n,r){var o=this;return(0,i.Z)(function*(){!function(t){var e,n,i,r,o,a,l,c,h,d;const f=u();(0,s.ax)("function"==typeof(null===(e=null==f?void 0:f.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.ax)(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.ax)("function"==typeof(null===(o=null===(r=null===(i=null==f?void 0:f.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===o?void 0:o.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(c=null===(l=null===(a=null==f?void 0:f.cordova)||void 0===a?void 0:a.plugins)||void 0===l?void 0:l.browsertab)||void 0===c?void 0:c.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(d=null===(h=null==f?void 0:f.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t);const i=yield o._initialize(t);yield i.initialized(),i.resetRedirect(),(0,s.aD)(),yield o._originValidation(t);const a=function(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:y(),postBody:null,tenantId:t.tenantId,error:(0,s.aw)(t,"no-auth-event")}}(t,n,r);yield function(t,e){return v()._set(w(t),e)}(t,a);const c=yield function(t,e,n){return l.apply(this,arguments)}(t,a,e),d=yield function(t){const{cordova:e}=u();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,(0,s.av)()?"_blank":"_system","location=yes"),n(r)})})}(c);return function(t,e,n){return h.apply(this,arguments)}(t,i,d)})()}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=function(t){return c.apply(this,arguments)}(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:r,BuildInfo:o}=u(),a=setTimeout((0,i.Z)(function*(){yield g(t),e.onEvent(C())}),500),l=function(){var n=(0,i.Z)(function*(n){clearTimeout(a);const i=yield g(t);let r=null;i&&(null==n?void 0:n.url)&&(r=function(t,e){var n,i;const r=function(t){const e=b(t),n=e.link?decodeURIComponent(e.link):void 0,i=b(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return b(r).link||r||i||n||t}(e);if(r.includes("/__/auth/callback")){const o=b(r),a=o.firebaseError?function(t){try{return JSON.parse(t)}catch(e){return null}}(decodeURIComponent(o.firebaseError)):null,u=null===(i=null===(n=null==a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],l=u?(0,s.aw)(u):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}(i,n.url)),e.onEvent(r||C())});return function(t){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,l);const c=r,h=`${o.packageName.toLowerCase()}://`;u().handleOpenURL=function(){var t=(0,i.Z)(function*(t){if(t.toLowerCase().startsWith(h)&&l({url:t}),"function"==typeof c)try{c(t)}catch(e){console.error(e)}});return function(e){return t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}_initialize(t){var e=this;return(0,i.Z)(function*(){return yield e.selectUnderlyingResolver(),e.assertedUnderlyingResolver._initialize(t)})()}_openPopup(t,e,n,r){var s=this;return(0,i.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(t,e,n,r)})()}_openRedirect(t,e,n,r){var s=this;return(0,i.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(t,e,n,r)})()}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return A()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return F(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var t=this;return(0,i.Z)(function*(){if(t.underlyingResolver)return;const e=yield function(){return k.apply(this,arguments)}();t.underlyingResolver=e?t.cordovaResolver:t.browserResolver})()}}function V(t){return t.unwrap()}function B(t){return j(t)}function j(t){const{_tokenResponse:e}=t instanceof o.ZR?t.customData:t;if(!e)return null;if(!(t instanceof o.ZR)&&"temporaryProof"in e&&"phoneNumber"in e)return s.P.credentialFromResult(t);const n=e.providerId;if(!n||n===s.o.PASSWORD)return null;let i;switch(n){case s.o.GOOGLE:i=s.Q;break;case s.o.FACEBOOK:i=s.N;break;case s.o.GITHUB:i=s.T;break;case s.o.TWITTER:i=s.W;break;default:const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:a,nonce:u}=e;return r||o||t||a?a?n.startsWith("saml.")?s.aL._create(n,a):s.J._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:t,accessToken:r}):new s.U(n).credential({idToken:t,accessToken:r,rawNonce:u}):null}return t instanceof o.ZR?i.credentialFromError(t):i.credentialFromResult(t)}function U(t,e){return e.catch(e=>{throw e instanceof o.ZR&&function(t,e){var n;const i=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==e?void 0:e.code))e.resolver=new Z(t,s.an(t,e));else if(i){const t=j(e),n=e;t&&(n.credential=t,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}(t,e),e}).then(t=>{const e=t.user;return{operationType:t.operationType,credential:B(t),additionalUserInfo:s.al(t),user:$.getOrCreate(e)}})}function q(t,e){return z.apply(this,arguments)}function z(){return(z=(0,i.Z)(function*(t,e){const n=yield e;return{verificationId:n.verificationId,confirm:e=>U(t,n.confirm(e))}})).apply(this,arguments)}class Z{constructor(t,e){this.resolver=e,this.auth=t.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return U(V(this.auth),this.resolver.resolveSignIn(t))}}class ${constructor(t){this._delegate=t,this.multiFactor=s.ao(t)}static getOrCreate(t){return $.USER_MAP.has(t)||$.USER_MAP.set(t,new $(t)),$.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}linkWithCredential(t){var e=this;return(0,i.Z)(function*(){return U(e.auth,s.Z(e._delegate,t))})()}linkWithPhoneNumber(t,e){var n=this;return(0,i.Z)(function*(){return q(n.auth,s.l(n._delegate,t,e))})()}linkWithPopup(t){var e=this;return(0,i.Z)(function*(){return U(e.auth,s.d(e._delegate,t,M))})()}linkWithRedirect(t){var e=this;return(0,i.Z)(function*(){return yield O(s.aE(e.auth)),s.g(e._delegate,t,M)})()}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}reauthenticateWithCredential(t){var e=this;return(0,i.Z)(function*(){return U(e.auth,s._(e._delegate,t))})()}reauthenticateWithPhoneNumber(t,e){return q(this.auth,s.r(this._delegate,t,e))}reauthenticateWithPopup(t){return U(this.auth,s.e(this._delegate,t,M))}reauthenticateWithRedirect(t){var e=this;return(0,i.Z)(function*(){return yield O(s.aE(e.auth)),s.h(e._delegate,t,M)})()}sendEmailVerification(t){return s.ab(this._delegate,t)}unlink(t){var e=this;return(0,i.Z)(function*(){return yield s.ak(e._delegate,t),e})()}updateEmail(t){return s.ag(this._delegate,t)}updatePassword(t){return s.ah(this._delegate,t)}updatePhoneNumber(t){return s.u(this._delegate,t)}updateProfile(t){return s.af(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return s.ac(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$.USER_MAP=new WeakMap;const H=s.ax;let W=(()=>{class t{constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;H(n,"invalid-api-key",{appName:t.name}),H(n,"invalid-api-key",{appName:t.name});const i="undefined"!=typeof window?M:void 0;this._delegate=e.initialize({options:{persistence:K(n,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(s.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){s.G(this._delegate,t,e)}applyActionCode(t){return s.a2(this._delegate,t)}checkActionCode(t){return s.a3(this._delegate,t)}confirmPasswordReset(t,e){return s.a1(this._delegate,t,e)}createUserWithEmailAndPassword(t,e){var n=this;return(0,i.Z)(function*(){return U(n._delegate,s.a5(n._delegate,t,e))})()}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return s.aa(this._delegate,t)}isSignInWithEmailLink(t){return s.a8(this._delegate,t)}getRedirectResult(){var t=this;return(0,i.Z)(function*(){H(x(),t._delegate,"operation-not-supported-in-this-environment");const e=yield s.j(t._delegate,M);return e?U(t._delegate,Promise.resolve(e)):{credential:null,user:null}})()}addFrameworkForLogging(t){!function(t,e){(0,s.aE)(t)._logFramework(e)}(this._delegate,t)}onAuthStateChanged(t,e,n){const{next:i,error:r,complete:s}=G(t,e,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(t,e,n){const{next:i,error:r,complete:s}=G(t,e,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(t,e){return s.a7(this._delegate,t,e)}sendPasswordResetEmail(t,e){return s.a0(this._delegate,t,e||void 0)}setPersistence(t){var e=this;return(0,i.Z)(function*(){let n;switch(function(t,e){P(Object.values(D).includes(e),t,"invalid-persistence-type"),(0,o.b$)()?P(e!==D.SESSION,t,"unsupported-persistence-type"):(0,o.UG)()?P(e===D.NONE,t,"unsupported-persistence-type"):S()?P(e===D.NONE||e===D.LOCAL&&(0,o.hl)(),t,"unsupported-persistence-type"):P(e===D.NONE||I(),t,"unsupported-persistence-type")}(e._delegate,t),t){case D.SESSION:n=s.a;break;case D.LOCAL:n=(yield s.az(s.i)._isAvailable())?s.i:s.b;break;case D.NONE:n=s.L;break;default:return s.as("argument-error",{appName:e._delegate.name})}return e._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return U(this._delegate,s.X(this._delegate))}signInWithCredential(t){return U(this._delegate,s.Y(this._delegate,t))}signInWithCustomToken(t){return U(this._delegate,s.$(this._delegate,t))}signInWithEmailAndPassword(t,e){return U(this._delegate,s.a6(this._delegate,t,e))}signInWithEmailLink(t,e){return U(this._delegate,s.a9(this._delegate,t,e))}signInWithPhoneNumber(t,e){return q(this._delegate,s.s(this._delegate,t,e))}signInWithPopup(t){var e=this;return(0,i.Z)(function*(){return H(x(),e._delegate,"operation-not-supported-in-this-environment"),U(e._delegate,s.c(e._delegate,t,M))})()}signInWithRedirect(t){var e=this;return(0,i.Z)(function*(){return H(x(),e._delegate,"operation-not-supported-in-this-environment"),yield O(e._delegate),s.f(e._delegate,t,M)})()}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return s.a4(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return t.Persistence=D,t})();function G(t,e,n){let i=t;"function"!=typeof t&&({next:i,error:e,complete:n}=t);const r=i;return{next:t=>r(t&&$.getOrCreate(t)),error:e,complete:n}}function K(t,e){const n=function(t,e){const n=R();if(!n)return[];const i=s.aA(N,t,e);switch(n.getItem(i)){case D.NONE:return[s.L];case D.LOCAL:return[s.i,s.a];case D.SESSION:return[s.a];default:return[]}}(t,e);if("undefined"!=typeof self&&!n.includes(s.i)&&n.push(s.i),"undefined"!=typeof window)for(const i of[s.b,s.a])n.includes(i)||n.push(i);return n.includes(s.L)||n.push(s.L),n}class Q{constructor(){this.providerId="phone",this._delegate=new s.P(V(r.Z.auth()))}static credential(t,e){return s.P.credential(t,e)}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Q.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,Q.PROVIDER_ID=s.P.PROVIDER_ID;const Y=s.ax;var J;(J=r.Z).INTERNAL.registerComponent(new a.wA("auth-compat",t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new W(e,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.M,FacebookAuthProvider:s.N,GithubAuthProvider:s.T,GoogleAuthProvider:s.Q,OAuthProvider:s.U,SAMLAuthProvider:s.V,PhoneAuthProvider:Q,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:class{constructor(t,e,n=r.Z.app()){var i;Y(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(t,e,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:s.W,Auth:W,AuthCredential:s.H,Error:o.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.3.0")},2373:function(t,e,n){"use strict";n.d(e,{Lj:function(){return g},X3:function(){return m}});var i=n(8239);let r,s;const o=new WeakMap,a=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap;let h={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("objectStoreNames"===e)return t.objectStoreNames||u.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function d(t){return"function"==typeof t?function(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(p(this),e),f(o.get(this))}:function(...e){return f(t.apply(p(this),e))}:function(e,...n){const i=t.call(p(this),e,...n);return u.set(i,e.sort?e.sort():[e]),f(i)}}(t):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});a.set(t,e)}(t),((t,e)=>e.some(e=>t instanceof e))(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,h):t)}function f(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(f(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&o.set(e,t)}).catch(()=>{}),c.set(e,t),e}(t);if(l.has(t))return l.get(t);const e=d(t);return e!==t&&(l.set(t,e),c.set(e,t)),e}const p=t=>c.get(t);function m(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=f(o);return i&&o.addEventListener("upgradeneeded",t=>{i(f(o.result),t.oldVersion,t.newVersion,f(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(t=>{s&&t.addEventListener("close",()=>s()),r&&t.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function g(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),f(n).then(()=>{})}const _=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],v=new Map;function w(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(v.get(e))return v.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=y.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!_.includes(n))return;const o=function(){var t=(0,i.Z)(function*(t,...e){const i=this.transaction(t,s?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(e.shift())),(yield Promise.all([o[n](...e),s&&i.done]))[0]});return function(e){return t.apply(this,arguments)}}();return v.set(e,o),o}var b;h=NT(jo({},b=h),{get:(t,e,n)=>w(t,e)||b.get(t,e,n),has:(t,e)=>!!w(t,e)||b.has(t,e)})},8239:function(t,e,n){"use strict";function i(t,e,n,i,r,s,o){try{var a=t[s](o),u=a.value}catch(l){return void n(l)}a.done?e(u):Promise.resolve(u).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var o=t.apply(e,n);function a(t){i(o,r,s,a,u,"next",t)}function u(t){i(o,r,s,a,u,"throw",t)}a(void 0)})}}n.d(e,{Z:function(){return r}})}},function(t){t(t.s=219)}]);